باشه. به عنوان یک متخصص Full-Stack، با بررسی دقیق فایل‌های بک‌اند و فرانت‌اند شما، یک نقشه راه کامل و جامع برای تکمیل بخش فرانت‌اند پروژه فروشگاهی شما آماده کرده‌ام.

شما زیرساخت بسیار خوبی هم در بک‌اند و هم در فرانت‌اند ایجاد کرده‌اید. سرویس‌های Angular شما به درستی برای تعامل با APIهای دات‌نت طراحی شده‌اند و کامپوننت‌های اصلی نیز ساختار مناسبی دارند. نقشه راه زیر بر تکمیل جریان‌های کاری موجود، پویاسازی بخش‌های باقی‌مانده و ایجاد قابلیت‌های ضروری جدید (مانند پنل ادمین) تمرکز دارد.

### وضعیت فعلی پروژه

* **بخش احراز هویت (Authentication):** کامل و کاربردی است. کاربران می‌توانند با شماره موبایل لاگین کرده و توکن JWT دریافت کنند. [cite_start]`AuthGuard` [cite: 619, 1138] [cite_start]و `AuthInterceptor` [cite: 611, 1142] به درستی پیاده‌سازی شده‌اند.
* [cite_start]**نمایش محصولات (Product Display):** کامپوننت‌های صفحه اصلی [cite: 852][cite_start], دسته‌بندی [cite: 742] [cite_start]و صفحه محصول [cite: 1061] توانایی دریافت و نمایش اطلاعات محصولات از بک‌اند را دارند.
* [cite_start]**سرویس‌ها (Angular Services):** سرویس‌های `ProductService` [cite: 1149][cite_start], `CartService` [cite: 1127] [cite_start]و `OrderService` [cite: 1143] به درستی برای فراخوانی End-point های مربوطه در بک‌اند پیاده‌سازی شده‌اند.
* [cite_start]**سبد خرید (Shopping Cart):** منطق اصلی سبد خرید در فرانت‌اند پیاده‌سازی شده و از طریق `CartService` به بک‌اند متصل است[cite: 677].

---

### نقشه راه تکمیل فرانت‌اند

این نقشه به سه فاز اصلی تقسیم می‌شود:
1.  **فاز اول: تکمیل و بهبود جریان خرید کاربر**
2.  **فاز دوم: پیاده‌سازی داشبورد کاربری**
3.  **فاز سوم: ساخت پنل مدیریت (Admin)**

---

### فاز اول: تکمیل و بهبود جریان خرید کاربر (User Shopping Flow)

در این فاز، هدف نهایی کردن فرآیندی است که کاربر از مشاهده محصول تا ثبت نهایی سفارش طی می‌کند.

#### قدم ۱: پویـاسازی اطلاعات در صفحه سفارش (`OrderPage`)

[cite_start]کامپونENT `OrderPage` در حال حاضر از داده‌های استاتیک برای آدرس و زمان‌های ارسال استفاده می‌کند. [cite: 990, 994] باید این بخش‌ها را پویا کنید.

* **بخش مورد نیاز در فرانت‌اند:** کامپوننت `OrderPage` (`order-page.ts`).
* **سرویس‌های بک‌اند مرتبط:**
    * `GET /api/Users/profile`: برای دریافت اطلاعات کاربر فعلی (که می‌تواند شامل آدرس ذخیره شده باشد).
    * در حال حاضر، API مشخصی برای دریافت آدرس‌های کاربر یا زمان‌های ارسال وجود ندارد. **نیاز به توسعه در بک‌اند:** باید End-point جدیدی برای مدیریت آدرس‌های کاربر (افزودن، ویرایش، دریافت) و همچنین یک End-point برای دریافت بازه‌های زمانی ارسال موجود، ایجاد شود.
* **شرح وظایف:**
    1.  در `OrderPage.ts`، به جای استفاده از آدرس استاتیک، سرویس `UserService` را فراخوانی کرده تا آدرس پیش‌فرض کاربر را دریافت و نمایش دهید.
    2.  [cite_start]قابلیت "تغییر آدرس" [cite: 967] را پیاده‌سازی کنید تا کاربر بتواند آدرس جدیدی وارد کند یا از لیست آدرس‌های خود انتخاب نماید.
    3.  [cite_start]اطلاعات مربوط به بازه‌های زمانی ارسال (`availableTimeSlots` [cite: 994]) را از یک API جدید در بک‌اند دریافت کنید تا هزینه‌ها و تاریخ‌ها واقعی باشند.

#### قدم ۲: نهایی‌سازی صفحه پرداخت (`PaymentPage`)

این صفحه نقطه پایانی فرآیند خرید است و باید اطلاعات نهایی را به درستی به سرور ارسال کند.

* **بخش مورد نیاز در فرانت‌اند:** کامپوننت `PaymentPage` (`payment-page.ts`).
* **سرویس‌های بک‌اند مرتبط:**
    * `POST /api/Orders/checkout-from-cart`: این End-point کلیدی‌ترین بخش این صفحه است.
* **شرح وظایف:**
    1.  [cite_start]متد `proceedToPayment` [cite: 1044] [cite_start]در حال حاضر به درستی سرویس `orderService.checkoutFromCart` را فراخوانی می‌کند. [cite: 1045]
    2.  [cite_start]**نکته کلیدی:** بک‌اند در End-point مربوط به `checkout-from-cart` از یک هدر به نام `Idempotency-Key` برای جلوگیری از ثبت سفارش تکراری استفاده می‌کند. [cite: 260, 261] [cite_start]شما در `OrderService` این هدر را به درستی ست کرده‌اید. [cite: 1148] اطمینان حاصل کنید که این کلید منحصر به فرد (مثلاً با `crypto.randomUUID()`) قبل از هر بار ارسال تولید می‌شود.
    3.  پس از ثبت موفق سفارش، کاربر باید به صفحه‌ای مانند "سفارش شما با موفقیت ثبت شد" یا به داشبورد کاربری و بخش "سفارش‌های من" هدایت شود. [cite_start]این انتقال در حال حاضر به `/dashboard-page` انجام می‌شود که صحیح است. [cite: 1046]
    4.  مدیریت خطا را بهبود دهید. [cite_start]اگر ثبت سفارش به دلیل اتمام موجودی کالا ناموفق بود[cite: 271, 272], پیام واضح و مشخصی به کاربر نمایش داده شود و در صورت امکان او را به سبد خرید برای اصلاح هدایت کنید.

---

### فاز دوم: پیاده‌سازی داشبورد کاربری (User Dashboard)

کاربران باید بتوانند تاریخچه سفارشات خود را مشاهده و پروفایل خود را مدیریت کنند. [cite_start]کامپوننت `DashboardPage` در حال حاضر خالی است. [cite: 754]

#### قدم ۱: نمایش لیست سفارشات

* **بخش مورد نیاز در فرانت‌اند:** یک کامپوننت جدید برای لیست سفارشات ایجاد کنید (مثلاً `order-history.component.ts`) و آن را در `DashboardPage` نمایش دهید.
* **سرویس‌های بک‌اند مرتبط:**
    * [cite_start]`GET /api/Orders`: این End-point قابلیت فیلتر بر اساس `userId` را دارد. [cite: 216]
* **شرح وظایف:**
    1.  یک متد جدید در `OrderService` برای دریافت سفارشات کاربر لاگین کرده، ایجاد کنید. این متد باید یک درخواست `GET` به `/api/Orders` با پارامتر `userId` ارسال کند.
    2.  [cite_start]در کامپوننت لیست سفارشات، این سرویس را فراخوانی کرده و لیست سفارشات را با اطلاعاتی مانند شماره سفارش، تاریخ، مبلغ کل و وضعیت سفارش نمایش دهید. [cite: 221, 222, 223, 224]
    3.  امکان کلیک روی هر سفارش برای مشاهده جزئیات بیشتر را فراهم کنید.

#### قدم ۲: نمایش جزئیات سفارش

* **بخش مورد نیاز در فرانت‌اند:** یک کامپوننت جدید برای نمایش جزئیات یک سفارش (مثلاً `order-details.component.ts`).
* **سرویس‌های بک‌اند مرتبط:**
    * [cite_start]`GET /api/Orders/{id}`: این End-point جزئیات کامل یک سفارش خاص را برمی‌گرداند. [cite: 228]
* **شرح وظایف:**
    1.  این کامپوننت باید `orderId` را از پارامترهای URL دریافت کند.
    2.  سرویس `OrderService` را برای فراخوانی End-point `GET /api/Orders/{id}` فراخوانی کنید.
    3.  [cite_start]اطلاعات کامل سفارش شامل محصولات خریداری شده، قیمت‌ها، آدرس تحویل و وضعیت سفارش را نمایش دهید. [cite: 229, 230, 231, 232]

---

### فاز سوم: ساخت پنل مدیریت (Admin Panel)

بک‌اند شما دارای End-point های بسیار قدرتمندی برای مدیریت است که همگی با `[Authorize(Roles = "Admin")]` محافظت شده‌اند. برای استفاده از آن‌ها نیاز به یک پنل ادمین در فرانت‌اند دارید.

#### قدم ۱: ایجاد ساختار و گارد برای پنل ادمین

* **بخش مورد نیاز در فرانت‌اند:**
    1.  یک `AdminGuard` جدید بسازید که دسترسی به روت‌های ادمین را فقط برای کاربرانی که `IsAdmin` هستند، مجاز کند.
    2.  یک Layout جدید برای پنل ادمین طراحی کنید (شامل سایدبار برایвигация).
    3.  روت‌های مربوط به پنل ادمین را در `app.routes.ts` اضافه کرده و با `AdminGuard` محافظت کنید.

#### قدم ۲: مدیریت محصولات (`Products`)

* **بخش مورد نیاز در فرانت‌اند:** کامپوننت‌هایی برای لیست محصولات، افزودن/ویرایش محصول.
* **سرویس‌های بک‌اند مرتبط:**
    * `GET /api/Products`: برای نمایش لیست محصولات.
    * [cite_start]`POST /api/Products`: برای ایجاد محصول جدید. [cite: 405]
    * [cite_start]`PUT /api/Products/{id}`: برای ویرایش محصول. [cite: 395]
    * [cite_start]`DELETE /api/Products/{id}`: برای حذف محصول. [cite: 437]
    * [cite_start]`POST /api/Products/{id}/stock/add` و `.../stock/remove`: برای مدیریت موجودی. [cite: 412, 420]
* **شرح وظایف:**
    1.  [cite_start]صفحه‌ای برای نمایش لیست تمام محصولات با قابلیت جستجو و فیلتر (با استفاده از `ProductSearchDto` [cite: 1103]) ایجاد کنید.
    2.  [cite_start]فرمی برای افزودن محصول جدید و ویرایش محصولات موجود طراحی کنید که فیلدهای `ProductDto` [cite: 1307] را پوشش دهد.
    3.  قابلیت افزایش یا کاهش موجودی محصولات را مستقیماً از لیست محصولات فراهم کنید.

#### قدم ۳: مدیریت سفارشات (`Orders`)

* **بخش مورد نیاز در فرانت‌اند:** کامپوننت‌هایی برای لیست سفارشات و مشاهده جزئیات آن‌ها از دید ادمین.
* **سرویس‌های بک‌اند مرتبط:**
    * [cite_start]`GET /api/Orders`: برای دریافت همه سفارشات با قابلیت فیلتر. [cite: 215]
    * [cite_start]`GET /api/Orders/{id}`: برای مشاهده جزئیات کامل سفارش. [cite: 228]
    * [cite_start]`PUT /api/Orders/{id}/status`: برای تغییر وضعیت سفارش (مثلاً از "در حال پردازش" به "ارسال شده"). [cite: 301]
    * [cite_start]`DELETE /api/Orders/{id}`: برای حذف سفارش. [cite: 319]
* **شرح وظایف:**
    1.  صفحه‌ای برای نمایش تمام سفارشات با امکان فیلتر بر اساس تاریخ، وضعیت و کاربر ایجاد کنید.
    2.  در صفحه جزئیات سفارش، به ادمین اجازه دهید وضعیت سفارش را تغییر دهد.
    3.  امکان ویرایش یا حذف آیتم‌های سفارش (با استفاده از `OrderItemsController`) را نیز می‌توان در این بخش قرار داد.

با دنبال کردن این نقشه راه، می‌توانید به صورت ساختاریافته و قدم به قدم، تمامی بخش‌های باقی‌مانده فرانت‌اند را تکمیل کرده و یک فروشگاه آنلاین کامل و کاربردی را تحویل دهید. موفق باشید!