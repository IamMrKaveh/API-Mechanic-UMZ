import{a as C}from"./chunk-2HRT5ADB.js";import{B as k,H as w,d as _,i as P,j as S}from"./chunk-LWZJ36Z2.js";import{Fb as p,La as v,Pa as n,Qb as l,Sb as s,_a as h,_b as g,bc as m,cc as x,db as b,dc as I,ib as c,rb as u,sb as o,tb as a,ub as y}from"./chunk-7ZDO2SPF.js";var E=e=>["/products",e];function F(e,d){if(e&1&&(o(0,"div",20),l(1),m(2,"number"),a()),e&2){let t=p(2);n(),s(" ",I(2,1,t.discountPercentage,"1.0-0"),"% ")}}function U(e,d){e&1&&(o(0,"div",21)(1,"span",22),l(2," \u0646\u0627\u0645\u0648\u062C\u0648\u062F "),a()())}function j(e,d){if(e&1&&(o(0,"span",23),l(1),m(2,"number"),a()),e&2){let t=p(2);n(),s(" ",x(2,1,t.originalPrice)," ")}}function z(e,d){if(e&1&&(o(0,"div",1)(1,"a",2)(2,"span",3),l(3),a()(),o(4,"div",4),y(5,"div",5)(6,"img",6),o(7,"div",7),c(8,F,3,4,"div",8),a(),c(9,U,3,0,"div",9),a(),o(10,"div",10)(11,"h3",11),l(12),a(),o(13,"div",12)(14,"div",13),c(15,j,3,3,"span",14),o(16,"div",15)(17,"span",16),l(18),m(19,"number"),a(),o(20,"span",17),l(21,"\u062A\u0648\u0645\u0627\u0646"),a()()(),o(22,"button",18)(23,"span",19),l(24,"add"),a()()()()()),e&2){let t=p();n(),u("routerLink",g(14,E,t.product.id))("title",t.product.name),n(2),s("\u0645\u0634\u0627\u0647\u062F\u0647 ",t.product.name),n(3),u("src",t.productIconUrl,v)("alt",t.product.name),n(2),u("ngIf",t.hasDiscount),n(),u("ngIf",!t.isInStock()),n(3),s(" ",t.product.name," "),n(3),u("ngIf",t.hasDiscount),n(3),s(" ",x(19,12,t.displayPrice)," "),n(4),u("routerLink",g(16,E,t.product.id))("disabled",!t.isInStock())}}var B=(()=>{let d=class d{constructor(i){this.mediaService=i}isInStock(){return this.product?this.product.variants.some(r=>r.isUnlimited)?!0:this.product.totalStock>0:!1}get productIconUrl(){let r=this.product?.images?.find(f=>f.isPrimary)?.url||this.product?.images?.[0]?.url;return r?this.mediaService.getMediaUrl(r):"https://via.placeholder.com/300"}get displayVariant(){if(!(!this.product||!this.product.variants||this.product.variants.length===0))return this.product.variants.reduce((i,r)=>r.sellingPrice<i.sellingPrice?r:i)}get hasDiscount(){let i=this.displayVariant;return i?i.originalPrice>i.sellingPrice:!1}get discountPercentage(){let i=this.displayVariant;return!i||!this.hasDiscount?0:i.discountPercentage}get displayPrice(){return this.displayVariant?.sellingPrice||0}get originalPrice(){return this.displayVariant?.originalPrice||0}};d.\u0275fac=function(r){return new(r||d)(h(C))},d.\u0275cmp=b({type:d,selectors:[["app-product-card"]],inputs:{product:"product"},decls:1,vars:1,consts:[["class","group relative flex flex-col h-full bg-card rounded-2xl border border-border transition-all duration-300 hover:shadow-xl hover:-translate-y-1 overflow-hidden",4,"ngIf"],[1,"group","relative","flex","flex-col","h-full","bg-card","rounded-2xl","border","border-border","transition-all","duration-300","hover:shadow-xl","hover:-translate-y-1","overflow-hidden"],[1,"absolute","inset-0","z-10",3,"routerLink","title"],[1,"sr-only"],[1,"product-image-container","p-6"],[1,"absolute","inset-0","bg-gradient-to-t","from-black/5","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity","duration-300"],["width","300","height","300","loading","lazy","decoding","async",1,"object-contain","object-center","mix-blend-multiply","transition-transform","duration-500","group-hover:scale-110","will-change-transform",3,"src","alt"],[1,"absolute","top-3","left-3","flex","flex-col","gap-2","z-20"],["class","bg-destructive text-destructive-foreground px-2.5 py-1 text-xs font-bold rounded-lg shadow-sm animate-fade-in",4,"ngIf"],["class","absolute inset-0 z-20 flex items-center justify-center bg-background/60 backdrop-blur-[2px]",4,"ngIf"],[1,"flex","flex-1","flex-col","p-5","gap-3","relative","bg-card"],[1,"line-clamp-2","text-base","font-bold","leading-relaxed","text-foreground","group-hover:text-primary","transition-colors","min-h-[3rem]"],[1,"mt-auto","flex","items-end","justify-between","gap-2","pt-2","border-t","border-border/50"],[1,"flex","flex-col"],["class","text-xs text-muted-foreground line-through decoration-destructive/40 mb-0.5",4,"ngIf"],[1,"flex","items-baseline","gap-1"],[1,"text-lg","font-black","text-foreground"],[1,"text-xs","font-medium","text-muted-foreground"],["aria-label","\u0627\u0641\u0632\u0648\u062F\u0646 \u0628\u0647 \u0633\u0628\u062F \u062E\u0631\u06CC\u062F",1,"relative","z-20","h-10","w-10","rounded-full","bg-secondary","text-secondary-foreground","hover:bg-primary","hover:text-primary-foreground","hover:shadow-lg","hover:shadow-primary/30","transition-all","duration-300","flex","items-center","justify-center","group/btn","focus-visible:ring-2","focus-visible:ring-offset-2","focus-visible:ring-primary",3,"routerLink","disabled"],[1,"material-icons","text-xl","group-hover/btn:scale-110","transition-transform"],[1,"bg-destructive","text-destructive-foreground","px-2.5","py-1","text-xs","font-bold","rounded-lg","shadow-sm","animate-fade-in"],[1,"absolute","inset-0","z-20","flex","items-center","justify-center","bg-background/60","backdrop-blur-[2px]"],[1,"rounded-full","bg-foreground/80","px-4","py-1.5","text-xs","font-bold","text-background","shadow-lg"],[1,"text-xs","text-muted-foreground","line-through","decoration-destructive/40","mb-0.5"]],template:function(r,f){r&1&&c(0,z,25,18,"div",0),r&2&&u("ngIf",f.product)},dependencies:[S,_,w,k,P],encapsulation:2});let e=d;return e})();export{B as a};
