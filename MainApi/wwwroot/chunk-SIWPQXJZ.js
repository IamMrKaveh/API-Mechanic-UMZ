import{a as ht}from"./chunk-EN2JFAYE.js";import{a as Ie}from"./chunk-APFCOE5L.js";import{a as $e}from"./chunk-ES5H2UWX.js";import{a as Oe,b as Ue}from"./chunk-227NDQCQ.js";import{a as _e}from"./chunk-ML4G76YC.js";import"./chunk-6NHH2MS5.js";import{A as Ae,B as W,a as he,b as R,c as S,d as V,e as B,f as ee,g as w,h as ye,i as q,j as oe,m as z,n as Ve,o as Te,p as H,q as ue,r as ae,s as se,t as je,u as vt,w as Fe,y as xt,z as Ge}from"./chunk-6R33SLKE.js";import"./chunk-H442PVK2.js";import{a as k}from"./chunk-U4BXHFS4.js";import{a as $}from"./chunk-ISFWZGBK.js";import{A as N,B as gt,G as D,b as ne,c as L,d as I,f as ge,h as j,i as E,n as me,q as X,x as te,y as ft,z as ce}from"./chunk-QOTKPPKC.js";import{Ab as o,Bb as g,Ca as d,Cb as C,Db as ke,Eb as lt,F as O,Fb as xe,Gb as Ce,Ha as Ke,Hb as be,Jb as Ne,Kb as G,M as ot,Mb as mt,Na as p,Nb as b,Ob as A,Pb as fe,Qb as ct,S as K,Sa as F,Va as at,W as Q,Xa as c,Yb as pt,aa as _,ba as y,f as nt,gb as l,hb as i,ib as t,j as We,jb as x,n as Pe,na as ut,nb as st,ob as dt,pb as P,sb as h,t as Le,tb as f,xb as De,z as Je,za as Z,zb as le}from"./chunk-6VZDFBBI.js";import{a as Me,b as rt}from"./chunk-4CLCTAJ7.js";var Ct=n=>({exact:n});function Rt(n,a){if(n&1&&(i(0,"a",16)(1,"span",17),o(2),t(),o(3),t()),n&2){let s=a.$implicit;l("routerLink",s.link)("routerLinkActiveOptions",G(4,Ct,s.exact)),d(2),g(s.icon),d(),C(" ",s.title," ")}}function Bt(n,a){if(n&1){let s=P();i(0,"div",18),h("click",function(){_(s);let r=f();return y(r.isMobileMenuOpen=!1)}),t()}}function qt(n,a){if(n&1){let s=P();i(0,"a",22),h("click",function(){_(s);let r=f(2);return y(r.isMobileMenuOpen=!1)}),i(1,"span",17),o(2),t(),o(3),t()}if(n&2){let s=a.$implicit;l("routerLink",s.link)("routerLinkActiveOptions",G(4,Ct,s.exact)),d(2),g(s.icon),d(),C(" ",s.title," ")}}function zt(n,a){if(n&1){let s=P();i(0,"div",19)(1,"div",3)(2,"a",4)(3,"span",5),o(4,"store"),t(),i(5,"span"),o(6,"\u067E\u0646\u0644 \u0645\u062F\u06CC\u0631\u06CC\u062A"),t()(),i(7,"button",20),h("click",function(){_(s);let r=f();return y(r.isMobileMenuOpen=!1)}),i(8,"span",5),o(9,"close"),t()()(),i(10,"div",6)(11,"nav",7),c(12,qt,4,6,"a",21),t()()()}if(n&2){let s=f();d(12),l("ngForOf",s.menuItems)}}var bt=(()=>{let a=class a{constructor(){this.isMobileMenuOpen=!1,this.menuItems=[{title:"\u062F\u0627\u0634\u0628\u0648\u0631\u062F",link:"/admin/dashboard",icon:"dashboard",exact:!0},{title:"\u0645\u062D\u0635\u0648\u0644\u0627\u062A",link:"/admin/products",icon:"inventory_2",exact:!0},{title:"\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0627\u0646\u0628\u0648\u0647 \u0642\u06CC\u0645\u062A",link:"/admin/products/bulk-price-update",icon:"edit_note",exact:!1},{title:"\u0647\u0634\u062F\u0627\u0631 \u0645\u0648\u062C\u0648\u062F\u06CC",link:"/admin/products/low-stock",icon:"notification_important",exact:!1},{title:"\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627",link:"/admin/categories",icon:"category",exact:!1},{title:"\u06AF\u0631\u0648\u0647\u200C\u0647\u0627\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC",link:"/admin/category-groups",icon:"folder",exact:!1},{title:"\u0633\u0641\u0627\u0631\u0634\u0627\u062A",link:"/admin/orders",icon:"receipt_long",exact:!1},{title:"\u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627\u06CC \u0633\u0641\u0627\u0631\u0634",link:"/admin/order-statuses",icon:"fact_check",exact:!1},{title:"\u0631\u0648\u0634\u200C\u0647\u0627\u06CC \u0627\u0631\u0633\u0627\u0644",link:"/admin/shipping-methods",icon:"local_shipping",exact:!1},{title:"\u06A9\u0627\u0631\u0628\u0631\u0627\u0646",link:"/admin/users",icon:"group",exact:!0},{title:"\u06AF\u0632\u0627\u0631\u0634\u0627\u062A \u0633\u06CC\u0633\u062A\u0645\u06CC",link:"/admin/audit-logs",icon:"policy",exact:!1}]}};a.\u0275fac=function(r){return new(r||a)},a.\u0275cmp=F({type:a,selectors:[["app-admin-layout"]],decls:23,vars:3,consts:[[1,"grid","min-h-screen","w-full","lg:grid-cols-[280px_1fr]"],[1,"hidden","border-e","bg-muted/40","lg:block"],[1,"flex","h-full","max-h-screen","flex-col","gap-2"],[1,"flex","h-16","items-center","border-b","px-6"],["routerLink","/",1,"flex","items-center","gap-2","font-semibold","text-foreground"],[1,"material-icons"],[1,"flex-1","overflow-auto","py-2"],[1,"grid","items-start","px-4","text-sm","font-medium"],["routerLinkActive","bg-accent text-accent-foreground","class","flex items-center gap-3 rounded-lg px-3 py-2 text-muted-foreground transition-all hover:text-primary",3,"routerLink","routerLinkActiveOptions",4,"ngFor","ngForOf"],[1,"flex","flex-col"],[1,"flex","h-14","lg:h-[60px]","items-center","gap-4","border-b","bg-muted/40","px-6","lg:hidden"],[1,"btn","btn-icon","btn-ghost",3,"click"],[1,"flex-1","text-center","font-semibold"],[1,"flex-1","p-4","sm:p-6","bg-muted/40"],["class","fixed inset-0 z-40 bg-black/60 lg:hidden",3,"click",4,"ngIf"],["class","fixed inset-y-0 right-0 z-50 flex w-full max-w-xs flex-col bg-background lg:hidden",4,"ngIf"],["routerLinkActive","bg-accent text-accent-foreground",1,"flex","items-center","gap-3","rounded-lg","px-3","py-2","text-muted-foreground","transition-all","hover:text-primary",3,"routerLink","routerLinkActiveOptions"],[1,"material-icons-outlined","text-lg","w-6","text-center"],[1,"fixed","inset-0","z-40","bg-black/60","lg:hidden",3,"click"],[1,"fixed","inset-y-0","right-0","z-50","flex","w-full","max-w-xs","flex-col","bg-background","lg:hidden"],[1,"btn","btn-icon","btn-ghost","ms-auto",3,"click"],["routerLinkActive","bg-accent text-accent-foreground","class","flex items-center gap-3 rounded-lg px-3 py-2 text-muted-foreground transition-all hover:text-primary",3,"routerLink","routerLinkActiveOptions","click",4,"ngFor","ngForOf"],["routerLinkActive","bg-accent text-accent-foreground",1,"flex","items-center","gap-3","rounded-lg","px-3","py-2","text-muted-foreground","transition-all","hover:text-primary",3,"click","routerLink","routerLinkActiveOptions"]],template:function(r,u){r&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4)(5,"span",5),o(6,"store"),t(),i(7,"span"),o(8,"\u067E\u0646\u0644 \u0645\u062F\u06CC\u0631\u06CC\u062A \u0641\u0631\u0648\u0634\u06AF\u0627\u0647"),t()()(),i(9,"div",6)(10,"nav",7),c(11,Rt,4,6,"a",8),t()()()(),i(12,"div",9)(13,"header",10)(14,"button",11),h("click",function(){return u.isMobileMenuOpen=!u.isMobileMenuOpen}),i(15,"span",5),o(16,"menu"),t()(),i(17,"div",12),o(18,"\u067E\u0646\u0644 \u0645\u062F\u06CC\u0631\u06CC\u062A"),t()(),i(19,"main",13),x(20,"router-outlet"),t()()(),c(21,Bt,1,0,"div",14)(22,zt,13,1,"div",15)),r&2&&(d(11),l("ngForOf",u.menuItems),d(10),l("ngIf",u.isMobileMenuOpen),d(),l("ngIf",u.isMobileMenuOpen))},dependencies:[E,L,I,D,ft,N,gt],encapsulation:2});let n=a;return n})();var de=(()=>{let a=class a{constructor(e){this.http=e,this.productsUrl=`${$.API_URL}admin/products`}getProductById(e){return this.http.get(`${this.productsUrl}/${e}`)}createProduct(e){return this.http.post(this.productsUrl,e)}updateProduct(e,r){return this.http.put(`${this.productsUrl}/${e}`,r)}getAllAttributes(){return this.http.get(`${$.API_URL}Products/attributes`)}deleteProduct(e){return this.http.delete(`${this.productsUrl}/${e}`)}addStock(e){return this.http.post(`${this.productsUrl}/stock/add`,e)}removeStock(e){return this.http.post(`${this.productsUrl}/stock/remove`,e)}setDiscount(e,r){return this.http.put(`${this.productsUrl}/variants/${e}/discount`,r)}removeDiscount(e){return this.http.delete(`${this.productsUrl}/variants/${e}/discount`)}bulkUpdatePrices(e,r=!1){let u=new me().set("isPurchasePrice",r.toString());return this.http.post(`${this.productsUrl}/bulk-update-prices`,e,{params:u})}getProductStatistics(){return this.http.get(`${this.productsUrl}/statistics`)}getLowStockProducts(e=5){let r=new me().set("threshold",e.toString());return this.http.get(`${this.productsUrl}/low-stock`,{params:r})}};a.\u0275fac=function(r){return new(r||a)(Q(X))},a.\u0275prov=K({token:a,factory:a.\u0275fac,providedIn:"root"});let n=a;return n})();var we=(()=>{let a=class a{constructor(e){this.http=e,this.ordersUrl=`${$.API_URL}admin/orders`}getOrders(e){let r=new me;return Object.keys(e).forEach(u=>{e[u]!==null&&e[u]!==void 0&&e[u]!==""&&(r=r.set(u,e[u].toString()))}),this.http.get(this.ordersUrl,{params:r})}getOrderById(e){return this.http.get(`${this.ordersUrl}/${e}`)}createOrder(e){return this.http.post(this.ordersUrl,e)}updateOrder(e,r){return this.http.put(`${this.ordersUrl}/${e}`,r)}updateOrderStatus(e,r){return this.http.patch(`${this.ordersUrl}/${e}/status`,r)}deleteOrder(e){return this.http.delete(`${this.ordersUrl}/${e}`)}getOrderStatistics(e,r){let u=new me;return e&&(u=u.set("fromDate",e.toISOString())),r&&(u=u.set("toDate",r.toISOString())),this.http.get(`${this.ordersUrl}/statistics`,{params:u})}};a.\u0275fac=function(r){return new(r||a)(Q(X))},a.\u0275prov=K({token:a,factory:a.\u0275fac,providedIn:"root"});let n=a;return n})();var Re=(()=>{let a=class a{constructor(e){this.http=e,this.usersUrl=`${$.API_URL}admin/users`}getUsers(e=!1,r=1,u=20){let m=new me().set("includeDeleted",e.toString()).set("page",r.toString()).set("pageSize",u.toString());return this.http.get(this.usersUrl,{params:m})}changeUserStatus(e,r){return this.http.patch(`${this.usersUrl}/${e}/status`,{isActive:r})}deleteUser(e){return this.http.delete(`${this.usersUrl}/${e}`)}restoreUser(e){return this.http.post(`${this.usersUrl}/${e}/restore`,{})}};a.\u0275fac=function(r){return new(r||a)(Q(X))},a.\u0275prov=K({token:a,factory:a.\u0275fac,providedIn:"root"});let n=a;return n})();var Ht=()=>[1,2,3,4,5,6,7];function Wt(n,a){n&1&&(i(0,"div",5)(1,"div",6),x(2,"div",7)(3,"div",8),t(),x(4,"div",9),t())}function Jt(n,a){n&1&&(i(0,"div",3),c(1,Wt,5,0,"div",4),t()),n&2&&(d(),l("ngForOf",Ne(1,Ht)))}function Kt(n,a){if(n&1&&(i(0,"div",3)(1,"div",10)(2,"div",6)(3,"p",11),o(4,"\u0645\u062C\u0645\u0648\u0639 \u062F\u0631\u0622\u0645\u062F"),t(),i(5,"span",12),o(6,"payments"),t()(),i(7,"p",13),o(8),b(9,"number"),t()(),i(10,"div",10)(11,"div",6)(12,"p",11),o(13,"\u0645\u062C\u0645\u0648\u0639 \u0633\u0648\u062F"),t(),i(14,"span",14),o(15,"trending_up"),t()(),i(16,"p",13),o(17),b(18,"number"),t()(),i(19,"div",10)(20,"div",6)(21,"p",11),o(22,"\u062A\u0639\u062F\u0627\u062F \u0633\u0641\u0627\u0631\u0634\u0627\u062A"),t(),i(23,"span",15),o(24,"shopping_cart"),t()(),i(25,"p",13),o(26),b(27,"number"),t()(),i(28,"div",10)(29,"div",6)(30,"p",11),o(31,"\u0627\u0631\u0632\u0634 \u06A9\u0644 \u0627\u0646\u0628\u0627\u0631"),t(),i(32,"span",16),o(33,"inventory"),t()(),i(34,"p",13),o(35),b(36,"number"),t()(),i(37,"div",10)(38,"div",6)(39,"p",11),o(40,"\u062A\u0639\u062F\u0627\u062F \u06A9\u0644 \u0645\u062D\u0635\u0648\u0644\u0627\u062A"),t(),i(41,"span",16),o(42,"inventory_2"),t()(),i(43,"p",13),o(44),b(45,"number"),t()(),i(46,"div",10)(47,"div",6)(48,"p",11),o(49,"\u0645\u062D\u0635\u0648\u0644\u0627\u062A \u0646\u0627\u0645\u0648\u062C\u0648\u062F"),t(),i(50,"span",17),o(51,"production_quantity_limits"),t()(),i(52,"p",13),o(53),b(54,"number"),t()(),i(55,"div",10)(56,"div",6)(57,"p",11),o(58,"\u0645\u062D\u0635\u0648\u0644\u0627\u062A \u0631\u0648 \u0628\u0647 \u0627\u062A\u0645\u0627\u0645"),t(),i(59,"span",18),o(60,"notification_important"),t()(),i(61,"p",13),o(62),b(63,"number"),t()()()),n&2){let s=f();d(8),C("",A(9,7,(s.orderStats==null?null:s.orderStats.totalRevenue)||0)," \u062A\u0648\u0645\u0627\u0646"),d(9),C("",A(18,9,(s.orderStats==null?null:s.orderStats.totalProfit)||0)," \u062A\u0648\u0645\u0627\u0646"),d(9),g(A(27,11,(s.orderStats==null?null:s.orderStats.totalOrders)||0)),d(9),C("",A(36,13,(s.productStats==null?null:s.productStats.totalInventoryValue)||0)," \u062A\u0648\u0645\u0627\u0646"),d(9),g(A(45,15,(s.productStats==null?null:s.productStats.totalProducts)||0)),d(9),g(A(54,17,(s.productStats==null?null:s.productStats.outOfStockProducts)||0)),d(9),g(A(63,19,(s.productStats==null?null:s.productStats.lowStockProducts)||0))}}var _t=(()=>{let a=class a{constructor(e,r,u,m){this.adminProductService=e,this.adminOrderService=r,this.adminUserService=u,this.notificationService=m,this.productStats=null,this.orderStats=null,this.userStats=null,this.isLoading=!0}ngOnInit(){this.isLoading=!0,Le({products:this.adminProductService.getProductStatistics(),orders:this.adminOrderService.getOrderStatistics(),users:this.adminUserService.getUsers(!0,1,1).pipe(Pe(e=>({total:e.totalItems})))}).subscribe({next:({products:e,orders:r,users:u})=>{this.productStats=e,this.orderStats=r.generalStatistics,this.userStats=u,this.isLoading=!1},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0622\u0645\u0627\u0631 \u062F\u0627\u0634\u0628\u0648\u0631\u062F","error"),this.isLoading=!1}})}};a.\u0275fac=function(r){return new(r||a)(p(de),p(we),p(Re),p(k))},a.\u0275cmp=F({type:a,selectors:[["app-admin-dashboard"]],decls:5,vars:2,consts:[[1,"space-y-8"],[1,"text-3xl","font-bold","text-foreground"],["class","grid gap-6 md:grid-cols-2 lg:grid-cols-4",4,"ngIf"],[1,"grid","gap-6","md:grid-cols-2","lg:grid-cols-4"],["class","card p-6 animate-pulse",4,"ngFor","ngForOf"],[1,"card","p-6","animate-pulse"],[1,"flex","items-center","justify-between"],[1,"h-4","bg-muted","rounded","w-24"],[1,"h-6","w-6","bg-muted","rounded"],[1,"mt-3","h-7","bg-muted","rounded","w-32"],[1,"card","p-6"],[1,"text-sm","font-medium","text-muted-foreground"],[1,"material-icons-outlined","text-primary"],[1,"mt-2","text-2xl","font-bold","text-foreground"],[1,"material-icons-outlined","text-success"],[1,"material-icons-outlined","text-secondary"],[1,"material-icons-outlined","text-accent-foreground"],[1,"material-icons-outlined","text-destructive"],[1,"material-icons-outlined","text-warning"]],template:function(r,u){r&1&&(i(0,"div",0)(1,"h1",1),o(2,"\u062F\u0627\u0634\u0628\u0648\u0631\u062F \u0645\u062F\u06CC\u0631\u06CC\u062A"),t(),c(3,Jt,2,2,"div",2)(4,Kt,64,21,"div",2),t()),r&2&&(d(3),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.orderStats))},dependencies:[E,L,I,j],encapsulation:2});let n=a;return n})();var Be=(()=>{let a=class a{constructor(e){this.http=e,this.categoriesUrl=`${$.API_URL}admin/categories`}getCategoryById(e){return this.http.get(`${this.categoriesUrl}/${e}?page=1&pageSize=10`)}createCategory(e){return this.http.post(this.categoriesUrl,e)}updateCategory(e,r){return this.http.put(`${this.categoriesUrl}/${e}`,r)}deleteCategory(e){return this.http.delete(`${this.categoriesUrl}/${e}`)}};a.\u0275fac=function(r){return new(r||a)(Q(X))},a.\u0275prov=K({token:a,factory:a.\u0275fac,providedIn:"root"});let n=a;return n})();function Qt(n,a){n&1&&(i(0,"div",15),o(1," \u0646\u0627\u0645 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0627\u0644\u0632\u0627\u0645\u06CC \u0627\u0633\u062A. "),t())}function Xt(n,a){if(n&1&&(i(0,"div",16)(1,"p",17),o(2,"\u067E\u06CC\u0634\u200C\u0646\u0645\u0627\u06CC\u0634 \u0622\u06CC\u06A9\u0648\u0646:"),t(),x(3,"img",18),t()),n&2){let s=f();d(3),l("src",s.iconPreview,Z)}}function Yt(n,a){n&1&&(i(0,"span",19),o(1,"sync"),t())}var Xe=(()=>{let a=class a{constructor(e,r,u,m,v){this.route=e,this.router=r,this.notificationService=u,this.adminCategoryService=m,this.mediaService=v,this.isEditMode=!1,this.categoryId=null,this.isSubmitting=!1,this.iconPreview=null,this.rowVersion=null,this.selectedFile=null,this.categoryForm=new ee({Name:new w("",[S.required,S.maxLength(100)]),RowVersion:new w(null)})}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&(this.categoryId=Number(e),this.isEditMode=!0,this.loadCategoryData())}loadCategoryData(){this.categoryId&&this.adminCategoryService.getCategoryById(this.categoryId).subscribe({next:e=>{this.categoryForm.patchValue({Name:e.name,RowVersion:e.rowVersion}),this.iconPreview=e.iconUrl||null},error:e=>this.notificationService.show(e?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC","error")})}onFileChange(e){let r=e.target;if(r.files&&r.files.length>0){this.selectedFile=r.files[0];let u=new FileReader;u.onload=m=>this.iconPreview=m.target.result,u.readAsDataURL(this.selectedFile)}}onSubmit(){if(this.categoryForm.invalid||this.isSubmitting)return;this.isSubmitting=!0;let e=new FormData;if(e.append("Name",this.categoryForm.get("Name")?.value),this.selectedFile&&e.append("IconFile",this.selectedFile),this.isEditMode&&this.categoryId){let u=this.categoryForm.get("RowVersion")?.value;u&&e.append("RowVersion",u)}(this.isEditMode&&this.categoryId?this.adminCategoryService.updateCategory(this.categoryId,e):this.adminCategoryService.createCategory(e)).pipe(O(()=>this.isSubmitting=!1)).subscribe({next:u=>{let m=`\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A ${this.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"} \u0634\u062F`;this.notificationService.show(m,"success"),this.router.navigate(["/admin/categories"])},error:u=>{u.status===409?(this.notificationService.show("\u0627\u06CC\u0646 \u0631\u06A9\u0648\u0631\u062F \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627 \u0635\u0641\u062D\u0647 \u0631\u0627 \u0631\u0641\u0631\u0634 \u06A9\u0646\u06CC\u062F.","error"),this.loadCategoryData()):this.notificationService.show(u?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062B\u0628\u062A \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A","error")}})}getIconUrl(){return this.iconPreview?this.mediaService.getMediaUrl(this.iconPreview):""}};a.\u0275fac=function(r){return new(r||a)(p(te),p(ce),p(k),p(Be),p(_e))},a.\u0275cmp=F({type:a,selectors:[["app-admin-category-form"]],decls:22,vars:7,consts:[[1,"max-w-2xl","mx-auto"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold"],["routerLink","/admin/categories",1,"btn","btn-outline","btn-sm"],[1,"card","p-6","space-y-6",3,"ngSubmit","formGroup"],[1,"space-y-2"],["for","name",1,"font-medium"],["type","text","id","name","formControlName","Name","placeholder","\u0645\u062B\u0627\u0644: \u06A9\u0627\u0644\u0627\u06CC \u062F\u06CC\u062C\u06CC\u062A\u0627\u0644","maxlength","100",1,"input"],["class","text-xs text-destructive pt-1",4,"ngIf"],[1,"font-medium"],["type","file","id","iconFile","accept","image/*",1,"input",3,"change"],["class","mt-4",4,"ngIf"],[1,"flex","rtl:justify-start","pt-4","border-t"],["type","submit",1,"btn","btn-primary","btn-md",3,"disabled"],["class","material-icons animate-spin me-2",4,"ngIf"],[1,"text-xs","text-destructive","pt-1"],[1,"mt-4"],[1,"text-sm","text-muted-foreground","mb-2"],["alt","Icon Preview",1,"w-24","h-24","rounded-lg","object-cover","border",3,"src"],[1,"material-icons","animate-spin","me-2"]],template:function(r,u){if(r&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),o(3),t(),i(4,"a",3),o(5,"\u0628\u0627\u0632\u06AF\u0634\u062A"),t()(),i(6,"form",4),h("ngSubmit",function(){return u.onSubmit()}),i(7,"div",5)(8,"label",6),o(9,"\u0646\u0627\u0645 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),t(),x(10,"input",7),c(11,Qt,2,0,"div",8),t(),i(12,"div",5)(13,"label",9),o(14,"\u0622\u06CC\u06A9\u0648\u0646 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),t(),i(15,"input",10),h("change",function(v){return u.onFileChange(v)}),t(),c(16,Xt,4,1,"div",11),t(),i(17,"div",12)(18,"button",13),c(19,Yt,2,0,"span",14),i(20,"span"),o(21),t()()()()()),r&2){let m;d(3),C("",u.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"," \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),d(3),l("formGroup",u.categoryForm),d(5),l("ngIf",((m=u.categoryForm.get("Name"))==null?null:m.invalid)&&((m=u.categoryForm.get("Name"))==null?null:m.touched)),d(5),l("ngIf",u.iconPreview),d(2),l("disabled",u.categoryForm.invalid||u.isSubmitting),d(),l("ngIf",u.isSubmitting),d(2),g(u.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u0630\u062E\u06CC\u0631\u0647...":"\u0630\u062E\u06CC\u0631\u0647")}},dependencies:[E,I,W,q,R,V,B,Fe,z,H,D,N],encapsulation:2});let n=a;return n})();var ei=n=>["/admin/categories/edit",n];function ti(n,a){n&1&&(i(0,"div",7)(1,"span",8),o(2,"sync"),t()())}function ii(n,a){n&1&&(i(0,"div",9)(1,"p",10),o(2,"\u0647\u06CC\u0686 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."),t(),i(3,"a",11),o(4,"\u0627\u0648\u0644\u06CC\u0646 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0631\u0627 \u0627\u0636\u0627\u0641\u0647 \u06A9\u0646\u06CC\u062F"),t()())}function ri(n,a){if(n&1){let s=P();i(0,"tr",15)(1,"td",21),x(2,"img",22),t(),i(3,"td",23),o(4),t(),i(5,"td",24),o(6),b(7,"number"),t(),i(8,"td",25)(9,"a",26)(10,"span",27),o(11,"edit"),t()(),i(12,"button",28),h("click",function(){let r=_(s).$implicit,u=f(2);return y(u.deleteCategory(r.id))}),i(13,"span",27),o(14,"delete"),t()()()()}if(n&2){let s=a.$implicit,e=f(2);d(2),l("src",e.getCategoryIconUrl(s),Z)("alt",s.name),d(2),g(s.name),d(2),g(A(7,5,e.getProductCount(s))),d(3),l("routerLink",G(7,ei,s.id))}}function ni(n,a){if(n&1&&(i(0,"div",12)(1,"table",13)(2,"thead",14)(3,"tr",15)(4,"th",16),o(5,"\u0622\u06CC\u06A9\u0648\u0646"),t(),i(6,"th",17),o(7,"\u0646\u0627\u0645"),t(),i(8,"th",17),o(9,"\u062A\u0639\u062F\u0627\u062F \u0645\u062D\u0635\u0648\u0644\u0627\u062A"),t(),i(10,"th",18),o(11,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t()()(),i(12,"tbody",19),c(13,ri,15,9,"tr",20),t()()()),n&2){let s=f();d(13),l("ngForOf",s.categories)}}var At=(()=>{let a=class a{constructor(e,r,u,m){this.categoryService=e,this.adminCategoryService=r,this.notificationService=u,this.mediaService=m,this.categories=[],this.isLoading=!0}ngOnInit(){this.loadCategories()}loadCategories(){this.isLoading=!0,this.categoryService.getCategories(void 0,1,100).subscribe({next:e=>{this.categories=e.items??[],this.isLoading=!1},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627","error"),this.isLoading=!1}})}getProductCount(e){return e.categoryGroups?e.categoryGroups.reduce((r,u)=>r+u.productCount,0):0}getCategoryIconUrl(e){return e.iconUrl?this.mediaService.getMediaUrl(e.iconUrl):"https://via.placeholder.com/40"}deleteCategory(e){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F")&&this.adminCategoryService.deleteCategory(e).subscribe({next:()=>{this.notificationService.show("\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadCategories()},error:r=>this.notificationService.show(r?.error?.message||r?.error?.ErrorMessage||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC","error")})}};a.\u0275fac=function(r){return new(r||a)(p(Oe),p(Be),p(k),p(_e))},a.\u0275cmp=F({type:a,selectors:[["app-admin-category-list"]],decls:9,vars:3,consts:[[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-foreground"],["routerLink","/admin/categories/new",1,"btn","btn-primary","btn-sm"],[1,"card"],["class","flex justify-center items-center p-10",4,"ngIf"],["class","text-center p-10",4,"ngIf"],["class","relative w-full overflow-x-auto",4,"ngIf"],[1,"flex","justify-center","items-center","p-10"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"text-center","p-10"],[1,"text-muted-foreground"],["routerLink","/admin/categories/new",1,"btn","btn-link","mt-2"],[1,"relative","w-full","overflow-x-auto"],[1,"w-full","caption-bottom","text-base"],[1,"[&_tr]:border-b","[&_tr]:border-border"],[1,"border-b","border-border","transition-colors","hover:bg-muted"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground","w-20"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground","w-40"],[1,"[&_tr:last-child]:border-0"],["class","border-b border-border transition-colors hover:bg-muted",4,"ngFor","ngForOf"],[1,"p-2","align-middle"],[1,"w-10","h-10","rounded-full","object-cover","border","border-border",3,"src","alt"],[1,"p-4","align-middle","font-medium","text-foreground"],[1,"p-4","align-middle","text-foreground"],[1,"p-4","align-middle","space-x-2","space-x-reverse","whitespace-nowrap"],["title","\u0648\u06CC\u0631\u0627\u06CC\u0634",1,"btn","btn-ghost","btn-sm","btn-icon",3,"routerLink"],[1,"material-icons","text-base"],["title","\u062D\u0630\u0641",1,"btn","btn-ghost","btn-sm","btn-icon","text-destructive","hover:bg-destructive/10",3,"click"]],template:function(r,u){r&1&&(i(0,"div",0)(1,"h1",1),o(2,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627"),t(),i(3,"a",2),o(4,"\u0627\u0641\u0632\u0648\u062F\u0646 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),t()(),i(5,"div",3),c(6,ti,3,0,"div",4)(7,ii,5,0,"div",5)(8,ni,14,1,"div",6),t()),r&2&&(d(6),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.categories.length===0),d(),l("ngIf",!u.isLoading&&u.categories.length>0))},dependencies:[E,L,I,D,N,j],encapsulation:2});let n=a;return n})();var qe=(()=>{let a=class a{constructor(e){this.http=e,this.categoryGroupsUrl=`${$.API_URL}admin/category-groups`}getCategoryGroupById(e){return this.http.get(`${this.categoryGroupsUrl}/${e}?page=1&pageSize=10`)}createCategoryGroup(e){return this.http.post(this.categoryGroupsUrl,e)}updateCategoryGroup(e,r){return this.http.put(`${this.categoryGroupsUrl}/${e}`,r)}deleteCategoryGroup(e){return this.http.delete(`${this.categoryGroupsUrl}/${e}`)}};a.\u0275fac=function(r){return new(r||a)(Q(X))},a.\u0275prov=K({token:a,factory:a.\u0275fac,providedIn:"root"});let n=a;return n})();function oi(n,a){n&1&&(i(0,"div",19),o(1," \u0646\u0627\u0645 \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0627\u0644\u0632\u0627\u0645\u06CC \u0627\u0633\u062A. "),t())}function ui(n,a){if(n&1&&(i(0,"option",20),o(1),t()),n&2){let s=a.$implicit;l("value",s.id),d(),g(s.name)}}function ai(n,a){n&1&&(i(0,"div",19),o(1," \u0627\u0646\u062A\u062E\u0627\u0628 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0627\u0644\u0632\u0627\u0645\u06CC \u0627\u0633\u062A. "),t())}function si(n,a){if(n&1&&(i(0,"div",21)(1,"p",22),o(2,"\u067E\u06CC\u0634\u200C\u0646\u0645\u0627\u06CC\u0634 \u0622\u06CC\u06A9\u0648\u0646:"),t(),x(3,"img",23),t()),n&2){let s=f();d(3),l("src",s.iconPreview,Z)}}function di(n,a){n&1&&(i(0,"span",24),o(1,"sync"),t())}var Ye=(()=>{let a=class a{constructor(e,r,u,m,v){this.route=e,this.router=r,this.notificationService=u,this.adminCategoryGroupService=m,this.categoryService=v,this.isEditMode=!1,this.categoryGroupId=null,this.isSubmitting=!1,this.categories=[],this.selectedFile=null,this.iconPreview=null,this.categoryGroupForm=new ee({name:new w("",[S.required,S.maxLength(100)]),categoryId:new w(null,[S.required]),rowVersion:new w(null)})}ngOnInit(){this.loadCategories();let e=this.route.snapshot.paramMap.get("id");e&&(this.categoryGroupId=Number(e),this.isEditMode=!0,this.loadCategoryGroupData())}loadCategories(){this.categoryService.getCategories(void 0,1,100).subscribe({next:e=>{this.categories=e.items??[]},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627","error")}})}loadCategoryGroupData(){this.categoryGroupId&&this.adminCategoryGroupService.getCategoryGroupById(this.categoryGroupId).subscribe({next:e=>{this.categoryGroupForm.patchValue({name:e.name,categoryId:e.categoryId,rowVersion:e.rowVersion}),this.iconPreview=e.iconUrl||null},error:e=>this.notificationService.show(e?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC","error")})}onFileChange(e){let r=e.target;if(r.files&&r.files.length>0){this.selectedFile=r.files[0];let u=new FileReader;u.onload=m=>this.iconPreview=m.target.result,u.readAsDataURL(this.selectedFile)}}onSubmit(){if(this.categoryGroupForm.invalid||this.isSubmitting)return;this.isSubmitting=!0;let e=new FormData;e.append("Name",this.categoryGroupForm.get("name")?.value),e.append("CategoryId",this.categoryGroupForm.get("categoryId")?.value),this.selectedFile&&e.append("IconFile",this.selectedFile),this.isEditMode&&this.categoryGroupForm.get("rowVersion")?.value&&e.append("RowVersion",this.categoryGroupForm.get("rowVersion")?.value),(this.isEditMode&&this.categoryGroupId?this.adminCategoryGroupService.updateCategoryGroup(this.categoryGroupId,e):this.adminCategoryGroupService.createCategoryGroup(e)).pipe(O(()=>this.isSubmitting=!1)).subscribe({next:()=>{this.notificationService.show(`\u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A ${this.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"} \u0634\u062F`,"success"),this.router.navigate(["/admin/category-groups"])},error:u=>{u.status===409?(this.notificationService.show("\u0627\u06CC\u0646 \u0631\u06A9\u0648\u0631\u062F \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627 \u0635\u0641\u062D\u0647 \u0631\u0627 \u0631\u0641\u0631\u0634 \u06A9\u0646\u06CC\u062F.","error"),this.loadCategoryGroupData()):this.notificationService.show(u?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062B\u0628\u062A \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A","error")}})}};a.\u0275fac=function(r){return new(r||a)(p(te),p(ce),p(k),p(qe),p(Oe))},a.\u0275cmp=F({type:a,selectors:[["app-admin-category-group-form"]],decls:30,vars:10,consts:[[1,"max-w-2xl","mx-auto"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold"],["routerLink","/admin/category-groups",1,"btn","btn-outline","btn-sm"],[1,"card","p-6","space-y-6",3,"ngSubmit","formGroup"],[1,"space-y-2"],["for","name",1,"font-medium"],["type","text","id","name","formControlName","name","placeholder","\u0645\u062B\u0627\u0644: \u0644\u0648\u0627\u0632\u0645 \u062C\u0627\u0646\u0628\u06CC","maxlength","100",1,"input"],["class","text-xs text-destructive pt-1",4,"ngIf"],["for","categoryId",1,"font-medium"],["id","categoryId","formControlName","categoryId",1,"input"],["disabled","",3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["for","iconFile",1,"font-medium"],["type","file","id","iconFile","accept","image/*",1,"input",3,"change"],["class","mt-4",4,"ngIf"],[1,"flex","rtl:justify-start","pt-4","border-t"],["type","submit",1,"btn","btn-primary","btn-md",3,"disabled"],["class","material-icons animate-spin me-2",4,"ngIf"],[1,"text-xs","text-destructive","pt-1"],[3,"value"],[1,"mt-4"],[1,"text-sm","text-muted-foreground","mb-2"],["alt","Icon Preview",1,"w-24","h-24","rounded-lg","object-cover","border",3,"src"],[1,"material-icons","animate-spin","me-2"]],template:function(r,u){if(r&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),o(3),t(),i(4,"a",3),o(5,"\u0628\u0627\u0632\u06AF\u0634\u062A"),t()(),i(6,"form",4),h("ngSubmit",function(){return u.onSubmit()}),i(7,"div",5)(8,"label",6),o(9,"\u0646\u0627\u0645 \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),t(),x(10,"input",7),c(11,oi,2,0,"div",8),t(),i(12,"div",5)(13,"label",9),o(14,"\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),t(),i(15,"select",10)(16,"option",11),o(17,"\u06CC\u06A9 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F"),t(),c(18,ui,2,2,"option",12),t(),c(19,ai,2,0,"div",8),t(),i(20,"div",5)(21,"label",13),o(22,"\u0622\u06CC\u06A9\u0648\u0646 \u06AF\u0631\u0648\u0647 (\u0627\u062E\u062A\u06CC\u0627\u0631\u06CC)"),t(),i(23,"input",14),h("change",function(v){return u.onFileChange(v)}),t(),c(24,si,4,1,"div",15),t(),i(25,"div",16)(26,"button",17),c(27,di,2,0,"span",18),i(28,"span"),o(29),t()()()()()),r&2){let m,v;d(3),C("",u.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"," \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),d(3),l("formGroup",u.categoryGroupForm),d(5),l("ngIf",((m=u.categoryGroupForm.get("name"))==null?null:m.invalid)&&((m=u.categoryGroupForm.get("name"))==null?null:m.touched)),d(5),l("ngValue",null),d(2),l("ngForOf",u.categories),d(),l("ngIf",((v=u.categoryGroupForm.get("categoryId"))==null?null:v.invalid)&&((v=u.categoryGroupForm.get("categoryId"))==null?null:v.touched)),d(5),l("ngIf",u.iconPreview),d(2),l("disabled",u.categoryGroupForm.invalid||u.isSubmitting),d(),l("ngIf",u.isSubmitting),d(2),g(u.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u0630\u062E\u06CC\u0631\u0647...":"\u0630\u062E\u06CC\u0631\u0647")}},dependencies:[E,L,I,W,q,ae,se,R,ue,V,B,Fe,z,H,D,N],encapsulation:2});let n=a;return n})();var mi=n=>["/admin/category-groups/edit",n];function ci(n,a){n&1&&(i(0,"div",7)(1,"span",8),o(2,"sync"),t()())}function pi(n,a){n&1&&(i(0,"div",9)(1,"p",10),o(2,"\u0647\u06CC\u0686 \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."),t(),i(3,"a",11),o(4,"\u0627\u0648\u0644\u06CC\u0646 \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0631\u0627 \u0627\u0636\u0627\u0641\u0647 \u06A9\u0646\u06CC\u062F"),t()())}function fi(n,a){if(n&1){let s=P();i(0,"tr",15)(1,"td",20),o(2),t(),i(3,"td",21),o(4),t(),i(5,"td",22),o(6),b(7,"number"),t(),i(8,"td",23)(9,"a",24)(10,"span",25),o(11,"edit"),t()(),i(12,"button",26),h("click",function(){let r=_(s).$implicit,u=f(2);return y(u.deleteCategoryGroup(r.id))}),i(13,"span",25),o(14,"delete"),t()()()()}if(n&2){let s=a.$implicit;d(2),g(s.name),d(2),g(s.categoryName||"-"),d(2),g(A(7,4,s.productCount||0)),d(3),l("routerLink",G(6,mi,s.id))}}function gi(n,a){if(n&1&&(i(0,"div",12)(1,"table",13)(2,"thead",14)(3,"tr",15)(4,"th",16),o(5,"\u0646\u0627\u0645 \u06AF\u0631\u0648\u0647"),t(),i(6,"th",16),o(7,"\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),t(),i(8,"th",16),o(9,"\u062A\u0639\u062F\u0627\u062F \u0645\u062D\u0635\u0648\u0644\u0627\u062A"),t(),i(10,"th",17),o(11,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t()()(),i(12,"tbody",18),c(13,fi,15,8,"tr",19),t()()()),n&2){let s=f();d(13),l("ngForOf",s.categoryGroups)}}var Et=(()=>{let a=class a{constructor(e,r,u,m){this.route=e,this.categoryGroupService=r,this.adminCategoryGroupService=u,this.notificationService=m,this.categoryGroups=[],this.isLoading=!0,this.categoryId=null}ngOnInit(){this.route.queryParams.subscribe(e=>{this.categoryId=e.categoryId?Number(e.categoryId):null,this.loadCategoryGroups()})}loadCategoryGroups(){this.isLoading=!0,this.categoryGroupService.getCategoryGroups(this.categoryId||void 0,void 0,1,100).subscribe({next:e=>{this.categoryGroups=e.items??[],this.isLoading=!1},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u06AF\u0631\u0648\u0647\u200C\u0647\u0627\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC","error"),this.isLoading=!1}})}deleteCategoryGroup(e){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F")&&this.adminCategoryGroupService.deleteCategoryGroup(e).subscribe({next:()=>{this.notificationService.show("\u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadCategoryGroups()},error:r=>this.notificationService.show(r?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC","error")})}};a.\u0275fac=function(r){return new(r||a)(p(te),p($e),p(qe),p(k))},a.\u0275cmp=F({type:a,selectors:[["app-admin-category-group-list"]],decls:9,vars:3,consts:[[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-foreground"],["routerLink","/admin/category-groups/new",1,"btn","btn-primary","btn-sm"],[1,"card"],["class","flex justify-center items-center p-10",4,"ngIf"],["class","text-center p-10",4,"ngIf"],["class","relative w-full overflow-x-auto",4,"ngIf"],[1,"flex","justify-center","items-center","p-10"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"text-center","p-10"],[1,"text-muted-foreground"],["routerLink","/admin/category-groups/new",1,"btn","btn-link","mt-2"],[1,"relative","w-full","overflow-x-auto"],[1,"w-full","caption-bottom","text-base"],[1,"[&_tr]:border-b","[&_tr]:border-border"],[1,"border-b","border-border","transition-colors","hover:bg-muted"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground","w-40"],[1,"[&_tr:last-child]:border-0"],["class","border-b border-border transition-colors hover:bg-muted",4,"ngFor","ngForOf"],[1,"p-4","align-middle","font-medium","text-foreground"],[1,"p-4","align-middle","text-muted-foreground"],[1,"p-4","align-middle","text-foreground"],[1,"p-4","align-middle","space-x-2","space-x-reverse","whitespace-nowrap"],["title","\u0648\u06CC\u0631\u0627\u06CC\u0634",1,"btn","btn-ghost","btn-sm","btn-icon",3,"routerLink"],[1,"material-icons","text-base"],["title","\u062D\u0630\u0641",1,"btn","btn-ghost","btn-sm","btn-icon","text-destructive","hover:bg-destructive/10",3,"click"]],template:function(r,u){r&1&&(i(0,"div",0)(1,"h1",1),o(2,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u06AF\u0631\u0648\u0647\u200C\u0647\u0627\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),t(),i(3,"a",2),o(4,"\u0627\u0641\u0632\u0648\u062F\u0646 \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),t()(),i(5,"div",3),c(6,ci,3,0,"div",4)(7,pi,5,0,"div",5)(8,gi,14,1,"div",6),t()),r&2&&(d(6),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.categoryGroups.length===0),d(),l("ngIf",!u.isLoading&&u.categoryGroups.length>0))},dependencies:[E,L,I,D,N,j],encapsulation:2});let n=a;return n})();var ve=(()=>{let a=class a{constructor(e){this.http=e,this.publicUrl=`${$.API_URL}OrderStatus`,this.adminUrl=`${$.API_URL}admin/order-statuses`}getOrderStatuses(){return this.http.get(this.publicUrl)}getOrderStatus(e){return this.http.get(`${this.publicUrl}/${e}`)}createOrderStatus(e){return this.http.post(this.adminUrl,e)}updateOrderStatus(e,r){return this.http.put(`${this.adminUrl}/${e}`,r)}deleteOrderStatus(e){return this.http.delete(`${this.adminUrl}/${e}`)}};a.\u0275fac=function(r){return new(r||a)(Q(X))},a.\u0275prov=K({token:a,factory:a.\u0275fac,providedIn:"root"});let n=a;return n})();function hi(n,a){n&1&&(i(0,"div",4)(1,"span",5),o(2,"sync"),t()())}function vi(n,a){n&1&&(i(0,"div",6)(1,"span",7),o(2,"error_outline"),t(),i(3,"h2",8),o(4,"\u0633\u0641\u0627\u0631\u0634 \u06CC\u0627\u0641\u062A \u0646\u0634\u062F"),t(),i(5,"p",9),o(6,"\u0645\u0645\u06A9\u0646 \u0627\u0633\u062A \u0627\u06CC\u0646 \u0633\u0641\u0627\u0631\u0634 \u062D\u0630\u0641 \u0634\u062F\u0647 \u06CC\u0627 \u0634\u0646\u0627\u0633\u0647 \u0622\u0646 \u0627\u0634\u062A\u0628\u0627\u0647 \u0628\u0627\u0634\u062F."),t()())}function xi(n,a){if(n&1&&(i(0,"div",42),x(1,"img",43),i(2,"div",44)(3,"p",45),o(4),t(),i(5,"p",46),o(6,"\u062A\u0639\u062F\u0627\u062F: "),i(7,"span",47),o(8),t()(),i(9,"p",46),o(10,"\u0642\u06CC\u0645\u062A \u0648\u0627\u062D\u062F: "),i(11,"span",47),o(12),b(13,"number"),t(),o(14," \u062A\u0648\u0645\u0627\u0646"),t()(),i(15,"div",48)(16,"p",49),o(17),b(18,"number"),t(),i(19,"p",46),o(20,"\u062A\u0648\u0645\u0627\u0646"),t()()()),n&2){let s=a.$implicit;d(),l("src",s.product==null?null:s.product.icon,Z)("alt",s.product==null?null:s.product.name),d(3),g(s.product==null?null:s.product.name),d(4),g(s.quantity),d(4),g(A(13,6,s.sellingPrice)),d(5),g(A(18,8,s.amount))}}function Ci(n,a){if(n&1&&(i(0,"option",50),o(1),t()),n&2){let s=a.$implicit;l("value",s.id),d(),g(s.name)}}function bi(n,a){n&1&&(i(0,"span",51),o(1,"sync"),t())}function Si(n,a){if(n&1){let s=P();i(0,"div",10)(1,"div",11)(2,"div")(3,"h1",12),o(4),t(),i(5,"p",13),o(6),b(7,"date"),t()(),i(8,"a",14)(9,"span",15),o(10,"arrow_forward"),t(),o(11," \u0628\u0627\u0632\u06AF\u0634\u062A \u0628\u0647 \u0644\u06CC\u0633\u062A "),t()(),i(12,"div",16)(13,"div",17)(14,"div",18)(15,"div",19)(16,"h2",20),o(17),t()(),i(18,"div",21),c(19,xi,21,10,"div",22),t()()(),i(20,"div",23)(21,"div",24)(22,"h2",25),o(23,"\u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0645\u0634\u062A\u0631\u06CC"),t(),i(24,"div",26)(25,"p")(26,"strong",27),o(27,"\u0646\u0627\u0645:"),t(),o(28),t(),i(29,"p")(30,"strong",27),o(31,"\u0645\u0648\u0628\u0627\u06CC\u0644:"),t(),i(32,"span",28),o(33),t()(),i(34,"p")(35,"strong",27),o(36,"\u0622\u062F\u0631\u0633:"),t(),o(37),t(),i(38,"p")(39,"strong",27),o(40,"\u06A9\u062F\u067E\u0633\u062A\u06CC:"),t(),i(41,"span",28),o(42),t()()()(),i(43,"div",24)(44,"h2",25),o(45,"\u062E\u0644\u0627\u0635\u0647 \u0645\u0627\u0644\u06CC"),t(),i(46,"div",29)(47,"div",30)(48,"span",31),o(49,"\u062C\u0645\u0639 \u06A9\u0644:"),t(),i(50,"span",32),o(51),b(52,"number"),t()(),i(53,"div",30)(54,"span",31),o(55,"\u0633\u0648\u062F \u06A9\u0644:"),t(),i(56,"span",33),o(57),b(58,"number"),t()(),i(59,"div",34)(60,"span",31),o(61,"\u0648\u0636\u0639\u06CC\u062A:"),t(),i(62,"span",35),b(63,"statusClass"),i(64,"span",36),o(65),t(),o(66),t()()()(),i(67,"div",24)(68,"h2",25),o(69,"\u062A\u063A\u06CC\u06CC\u0631 \u0648\u0636\u0639\u06CC\u062A \u0633\u0641\u0627\u0631\u0634"),t(),i(70,"div",37)(71,"select",38,0),c(73,Ci,2,2,"option",39),t(),i(74,"button",40),h("click",function(){_(s);let r=De(72),u=f();return y(u.updateStatus(r.value))}),c(75,bi,2,0,"span",41),o(76),t()()()()()()}if(n&2){let s=f();d(4),C("\u062C\u0632\u0626\u06CC\u0627\u062A \u0633\u0641\u0627\u0631\u0634 #",s.order.id),d(2),C(" \u062A\u0627\u0631\u06CC\u062E \u062B\u0628\u062A: ",fe(7,19,s.order.createdAt,"yyyy/MM/dd HH:mm")," "),d(11),C("\u0645\u062D\u0635\u0648\u0644\u0627\u062A \u0633\u0641\u0627\u0631\u0634 (",s.order.orderItems==null?null:s.order.orderItems.length," \u0645\u0648\u0631\u062F)"),d(2),l("ngForOf",s.order.orderItems),d(9),ke(" ",s.order.user==null?null:s.order.user.firstName," ",s.order.user==null?null:s.order.user.lastName),d(5),g(s.order.user==null?null:s.order.user.phoneNumber),d(4),C(" ",s.order.addressSnapshot==null?null:s.order.addressSnapshot.address),d(5),g(s.order.addressSnapshot==null?null:s.order.addressSnapshot.postalCode),d(9),C("",A(52,22,s.order.totalAmount)," \u062A\u0648\u0645\u0627\u0646"),d(6),C("",A(58,24,s.order.totalProfit)," \u062A\u0648\u0645\u0627\u0646"),d(5),l("ngClass",A(63,26,s.order.orderStatus==null?null:s.order.orderStatus.name)),d(3),g(s.order.orderStatus==null?null:s.order.orderStatus.icon),d(),C(" ",s.order.orderStatus==null?null:s.order.orderStatus.name," "),d(5),l("value",s.order.orderStatusId),d(2),l("ngForOf",s.orderStatuses),d(),l("disabled",s.isUpdatingStatus),d(),l("ngIf",s.isUpdatingStatus),d(),C(" ",s.isUpdatingStatus?"\u062F\u0631 \u062D\u0627\u0644 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC...":"\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0648\u0636\u0639\u06CC\u062A"," ")}}var wt=(()=>{let a=class a{constructor(e,r,u,m){this.route=e,this.adminOrderService=r,this.adminOrderStatusService=u,this.notificationService=m,this.order=null,this.orderStatuses=[],this.isLoading=!0,this.isUpdatingStatus=!1}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&(this.orderId=Number(e),this.loadOrder(),this.loadOrderStatuses())}loadOrder(){this.isLoading=!0,this.adminOrderService.getOrderById(this.orderId).subscribe({next:e=>{this.order=e,this.isLoading=!1},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0633\u0641\u0627\u0631\u0634","error"),this.isLoading=!1}})}loadOrderStatuses(){this.adminOrderStatusService.getOrderStatuses().subscribe({next:e=>{this.orderStatuses=e},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627\u06CC \u0633\u0641\u0627\u0631\u0634","error")}})}updateStatus(e){if(!this.orderId||!this.order)return;this.isUpdatingStatus=!0;let r=Number(e),u=this.order.rowVersion;this.adminOrderService.updateOrderStatus(this.orderId,{orderStatusId:r,rowVersion:u}).pipe(O(()=>this.isUpdatingStatus=!1)).subscribe({next:()=>{this.notificationService.show("\u0648\u0636\u0639\u06CC\u062A \u0633\u0641\u0627\u0631\u0634 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0634\u062F","success"),this.loadOrder()},error:m=>{m?.status===409?this.notificationService.show("\u0633\u0641\u0627\u0631\u0634 \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A. \u062F\u0631 \u062D\u0627\u0644 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062C\u062F\u062F...","error"):this.notificationService.show(m?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0648\u0636\u0639\u06CC\u062A","error"),this.loadOrder()}})}};a.\u0275fac=function(r){return new(r||a)(p(te),p(we),p(ve),p(k))},a.\u0275cmp=F({type:a,selectors:[["app-admin-order-detail"]],decls:3,vars:3,consts:[["statusSelect",""],["class","flex justify-center items-center py-20",4,"ngIf"],["class","flex flex-col items-center justify-center py-20 text-center",4,"ngIf"],["class","max-w-5xl mx-auto",4,"ngIf"],[1,"flex","justify-center","items-center","py-20"],[1,"material-icons","animate-spin","text-primary","text-5xl"],[1,"flex","flex-col","items-center","justify-center","py-20","text-center"],[1,"material-icons","text-6xl","text-muted-foreground","mb-4"],[1,"text-xl","font-bold","text-foreground"],[1,"text-muted-foreground","mt-2"],[1,"max-w-5xl","mx-auto"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-6","gap-4"],[1,"text-2xl","font-bold","text-foreground"],[1,"text-sm","text-muted-foreground","mt-1"],["routerLink","/admin/orders",1,"btn","btn-outline","btn-sm","self-start","sm:self-center"],[1,"material-icons","text-base","ml-1"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6","items-start"],[1,"lg:col-span-2","space-y-6"],[1,"card"],[1,"p-6","border-b","border-border"],[1,"font-semibold","text-lg","text-foreground"],[1,"divide-y","divide-border"],["class","p-4 flex items-center gap-4 hover:bg-muted/50 transition-colors",4,"ngFor","ngForOf"],[1,"space-y-6","lg:sticky","top-24"],[1,"card","p-6"],[1,"font-semibold","text-lg","text-foreground","mb-4"],[1,"space-y-2","text-base","text-foreground"],[1,"font-medium","text-muted-foreground"],["dir","ltr"],[1,"space-y-3","text-base"],[1,"flex","justify-between","items-center"],[1,"text-muted-foreground"],[1,"font-bold","text-lg","text-foreground"],[1,"font-bold","text-lg","text-success"],[1,"flex","justify-between","items-center","pt-3","border-t","border-border","mt-3"],[1,"px-2","py-1","text-sm","font-semibold","rounded-full",3,"ngClass"],[1,"material-icons-outlined","text-xs","mr-1","align-middle"],[1,"space-y-4"],[1,"input",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","w-full",3,"click","disabled"],["class","material-icons animate-spin me-2",4,"ngIf"],[1,"p-4","flex","items-center","gap-4","hover:bg-muted/50","transition-colors"],[1,"w-20","h-20","rounded-lg","border","border-border","object-cover",3,"src","alt"],[1,"flex-1"],[1,"font-medium","text-foreground"],[1,"text-sm","text-muted-foreground"],[1,"font-bold"],[1,"text-right"],[1,"font-semibold","text-foreground","text-lg"],[3,"value"],[1,"material-icons","animate-spin","me-2"]],template:function(r,u){r&1&&c(0,hi,3,0,"div",1)(1,vi,7,0,"div",2)(2,Si,77,28,"div",3),r&2&&(l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&!u.order),d(),l("ngIf",u.order))},dependencies:[E,ne,L,I,D,N,j,ge,Ie],encapsulation:2});let n=a;return n})();var kt=(()=>{let a=class a{transform(e){return e?.trim()||""}};a.\u0275fac=function(r){return new(r||a)},a.\u0275pipe=at({name:"trim",type:a,pure:!0});let n=a;return n})();var _i=n=>["/admin/orders",n];function yi(n,a){if(n&1&&(i(0,"option",23),o(1),t()),n&2){let s=a.$implicit;l("value",s.id),d(),g(s.name)}}function Fi(n,a){if(n&1&&(i(0,"div",24)(1,"div",25)(2,"div",26)(3,"p",27),o(4,"\u062A\u0639\u062F\u0627\u062F \u0633\u0641\u0627\u0631\u0634\u0627\u062A"),t(),i(5,"span",28),o(6,"shopping_cart"),t()(),i(7,"p",29),o(8),b(9,"number"),t()(),i(10,"div",25)(11,"div",26)(12,"p",27),o(13,"\u0645\u062C\u0645\u0648\u0639 \u062F\u0631\u0622\u0645\u062F"),t(),i(14,"span",30),o(15,"payments"),t()(),i(16,"p",29),o(17),b(18,"number"),t()(),i(19,"div",25)(20,"div",26)(21,"p",27),o(22,"\u0645\u062C\u0645\u0648\u0639 \u0633\u0648\u062F"),t(),i(23,"span",30),o(24,"trending_up"),t()(),i(25,"p",29),o(26),b(27,"number"),t()(),i(28,"div",25)(29,"div",26)(30,"p",27),o(31,"\u0645\u06CC\u0627\u0646\u06AF\u06CC\u0646 \u0633\u0641\u0627\u0631\u0634"),t(),i(32,"span",28),o(33,"analytics"),t()(),i(34,"p",29),o(35),b(36,"number"),t()()()),n&2){let s=f();d(8),g(A(9,4,s.statistics.totalOrders)),d(9),C("",A(18,6,s.statistics.totalRevenue)," \u062A\u0648\u0645\u0627\u0646"),d(9),C("",A(27,8,s.statistics.totalProfit)," \u062A\u0648\u0645\u0627\u0646"),d(9),C("",fe(36,10,s.statistics.averageOrderValue,"1.0-0")," \u062A\u0648\u0645\u0627\u0646")}}function Ai(n,a){n&1&&(i(0,"div",31)(1,"span",32),o(2,"sync"),t()())}function Ii(n,a){n&1&&(i(0,"div",33)(1,"p",34),o(2,"\u0647\u06CC\u0686 \u0633\u0641\u0627\u0631\u0634\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."),t()())}function Ei(n,a){if(n&1&&(i(0,"option",23),o(1),t()),n&2){let s=a.$implicit;l("value",s.id),d(),C(" ",s.name," ")}}function wi(n,a){n&1&&(i(0,"span",55),o(1," sync "),t())}function ki(n,a){if(n&1){let s=P();i(0,"tr",43)(1,"td",44),o(2),t(),i(3,"td",45),o(4),b(5,"trim"),t(),i(6,"td",45),o(7),b(8,"number"),t(),i(9,"td",46)(10,"div",47)(11,"select",48),h("change",function(r){let u=_(s).$implicit,m=f(2);return y(m.quickUpdateStatus(u.id,r))}),c(12,Ei,2,2,"option",10),t(),c(13,wi,2,0,"span",49),i(14,"span",50),o(15),t()()(),i(16,"td",45),o(17),b(18,"date"),t(),i(19,"td",51)(20,"a",52)(21,"span",53),o(22,"visibility"),t()(),i(23,"button",54),h("click",function(){let r=_(s).$implicit,u=f(2);return y(u.deleteOrder(r.id))}),i(24,"span",53),o(25,"delete"),t()()()()}if(n&2){let s=a.$implicit,e=f(2);d(2),C("#",s.id),d(2),g(A(5,12,((s.user==null?null:s.user.firstName)||"")+" "+((s.user==null?null:s.user.lastName)||""))),d(3),C("",A(8,14,s.totalAmount)," \u062A\u0648\u0645\u0627\u0646"),d(4),le("opacity-50",e.isUpdatingStatus[s.id]),l("value",s.orderStatusId)("disabled",e.isUpdatingStatus[s.id]),d(),l("ngForOf",e.orderStatuses),d(),l("ngIf",e.isUpdatingStatus[s.id]),d(2),C(" ",e.getStatusIcon(s.orderStatusId)," "),d(2),g(fe(18,16,s.createdAt,"yyyy/MM/dd")),d(3),l("routerLink",G(19,_i,s.id))}}function Mi(n,a){if(n&1&&(i(0,"div",35)(1,"table",36)(2,"thead",37)(3,"tr",38)(4,"th",39),o(5,"\u06A9\u062F \u0633\u0641\u0627\u0631\u0634 "),t(),i(6,"th",39),o(7,"\u06A9\u0627\u0631\u0628\u0631"),t(),i(8,"th",39),o(9,"\u0645\u0628\u0644\u063A \u06A9\u0644"),t(),i(10,"th",39),o(11,"\u0648\u0636\u0639\u06CC\u062A"),t(),i(12,"th",39),o(13,"\u062A\u0627\u0631\u06CC\u062E"),t(),i(14,"th",40),o(15,"\u0639\u0645\u0644\u06CC\u0627\u062A "),t()()(),i(16,"tbody",41),c(17,ki,26,21,"tr",42),t()()()),n&2){let s=f();d(17),l("ngForOf",s.orders)}}var Mt=(()=>{let a=class a{constructor(e,r,u){this.adminOrderService=e,this.adminOrderStatusService=r,this.notificationService=u,this.orders=[],this.orderStatuses=[],this.pagination=null,this.statistics=null,this.isLoading=!0,this.currentPage=1,this.isUpdatingStatus={},this.filterForm=new ee({userId:new w(null),statusId:new w(null),fromDate:new w(null),toDate:new w(null)})}ngOnInit(){this.loadOrderStatuses(),this.loadOrders(),this.loadStatistics()}getStatusIcon(e){return this.orderStatuses.find(r=>r.id===e)?.icon||"help_outline"}loadOrderStatuses(){this.adminOrderStatusService.getOrderStatuses().subscribe({next:e=>{this.orderStatuses=e},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627\u06CC \u0633\u0641\u0627\u0631\u0634","error")}})}loadOrders(e=1){this.isLoading=!0,this.currentPage=e;let r={page:this.currentPage,pageSize:10},u=this.filterForm.value;u.userId&&(r.userId=u.userId),u.statusId&&(r.statusId=u.statusId),u.fromDate&&(r.fromDate=new Date(u.fromDate).toISOString()),u.toDate&&(r.toDate=new Date(u.toDate).toISOString()),this.adminOrderService.getOrders(r).subscribe({next:m=>{this.orders=m.items??[],this.pagination=m,this.isLoading=!1},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0633\u0641\u0627\u0631\u0634\u0627\u062A","error"),this.isLoading=!1}})}loadStatistics(){let e=this.filterForm.value,r=e.fromDate?new Date(e.fromDate):void 0,u=e.toDate?new Date(e.toDate):void 0;this.adminOrderService.getOrderStatistics(r,u).subscribe({next:m=>{this.statistics=m.generalStatistics},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0622\u0645\u0627\u0631","error")}})}applyFilters(){this.loadOrders(1),this.loadStatistics()}clearFilters(){this.filterForm.reset(),this.loadOrders(1),this.loadStatistics()}quickUpdateStatus(e,r){let u=r.target,m=Number(u.value),v=this.orders.find(T=>T.id===e);if(!v)return;this.isUpdatingStatus[e]=!0;let M=v.rowVersion;this.adminOrderService.updateOrderStatus(e,{orderStatusId:m,rowVersion:M}).pipe(O(()=>{this.isUpdatingStatus[e]=!1})).subscribe({next:()=>{this.notificationService.show("\u0648\u0636\u0639\u06CC\u062A \u0633\u0641\u0627\u0631\u0634 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0634\u062F","success"),this.orders.find(re=>re.id===e)&&this.adminOrderService.getOrderById(e).subscribe(re=>{let it=this.orders.findIndex($t=>$t.id===e);it>-1&&(this.orders[it]=re)})},error:T=>{this.notificationService.show(T?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0648\u0636\u0639\u06CC\u062A","error"),this.loadOrders(this.currentPage)}})}deleteOrder(e){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0633\u0641\u0627\u0631\u0634 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F")&&this.adminOrderService.deleteOrder(e).subscribe({next:()=>{this.notificationService.show("\u0633\u0641\u0627\u0631\u0634 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadOrders(this.currentPage),this.loadStatistics()},error:r=>{this.notificationService.show(r?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u0633\u0641\u0627\u0631\u0634","error")}})}};a.\u0275fac=function(r){return new(r||a)(p(we),p(ve),p(k))},a.\u0275cmp=F({type:a,selectors:[["app-admin-order-list"]],decls:34,vars:7,consts:[[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-foreground"],[1,"card","p-6","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4",3,"formGroup"],[1,"space-y-2"],["for","userId",1,"text-sm","font-medium","text-foreground"],["type","number","id","userId","formControlName","userId","placeholder","\u0634\u0646\u0627\u0633\u0647 \u06A9\u0627\u0631\u0628\u0631",1,"input"],["for","statusId",1,"text-sm","font-medium","text-foreground"],["id","statusId","formControlName","statusId",1,"input"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["for","fromDate",1,"text-sm","font-medium","text-foreground"],["type","date","id","fromDate","formControlName","fromDate",1,"input"],["for","toDate",1,"text-sm","font-medium","text-foreground"],["type","date","id","toDate","formControlName","toDate",1,"input"],[1,"flex","items-end","gap-2","col-span-full"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-outline",3,"click"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",4,"ngIf"],[1,"card","overflow-hidden"],["class","flex justify-center items-center p-10",4,"ngIf"],["class","text-center p-10",4,"ngIf"],["class","w-full overflow-x-auto",4,"ngIf"],[3,"value"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4","mb-6"],[1,"card","p-6"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-muted-foreground"],[1,"material-icons","text-primary"],[1,"mt-2","text-2xl","font-bold","text-foreground"],[1,"material-icons","text-success"],[1,"flex","justify-center","items-center","p-10"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"text-center","p-10"],[1,"text-muted-foreground"],[1,"w-full","overflow-x-auto"],[1,"w-full","caption-bottom","text-base","min-w-[700px]"],[1,"[&_tr]:border-b","[&_tr]:border-border"],[1,"border-b","border-border","transition-colors","hover:bg-muted"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground","whitespace-nowrap"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground","whitespace-nowrap","w-40"],[1,"[&_tr:last-child]:border-0"],["class","border-b border-border transition-colors hover:bg-muted/50",4,"ngFor","ngForOf"],[1,"border-b","border-border","transition-colors","hover:bg-muted/50"],[1,"p-4","align-middle","font-medium","text-foreground","whitespace-nowrap"],[1,"p-4","align-middle","text-foreground","whitespace-nowrap"],[1,"p-4","align-middle"],[1,"relative","w-40"],[1,"input-sm","border","border-input","rounded-md","px-2","py-1","w-full","appearance-none","pr-7","transition-opacity",3,"change","value","disabled"],["class","absolute left-2 top-1/2 -translate-y-1/2 material-icons animate-spin text-primary text-lg","aria-label","\u062F\u0631 \u062D\u0627\u0644 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC",4,"ngIf"],[1,"material-icons","text-muted-foreground","absolute","right-2","top-1/2","-translate-y-1/2","text-lg","pointer-events-none"],[1,"p-4","align-middle","space-x-2","space-x-reverse","whitespace-nowrap"],["title","\u0645\u0634\u0627\u0647\u062F\u0647 \u062C\u0632\u0626\u06CC\u0627\u062A",1,"btn","btn-ghost","btn-sm","btn-icon",3,"routerLink"],[1,"material-icons","text-base"],["title","\u062D\u0630\u0641",1,"btn","btn-ghost","btn-sm","btn-icon","text-destructive","hover:bg-destructive/10",3,"click"],["aria-label","\u062F\u0631 \u062D\u0627\u0644 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC",1,"absolute","left-2","top-1/2","-translate-y-1/2","material-icons","animate-spin","text-primary","text-lg"]],template:function(r,u){r&1&&(i(0,"div",0)(1,"h1",1),o(2,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u0633\u0641\u0627\u0631\u0634\u0627\u062A"),t()(),i(3,"div",2)(4,"form",3)(5,"div",4)(6,"label",5),o(7,"\u0634\u0646\u0627\u0633\u0647 \u06A9\u0627\u0631\u0628\u0631"),t(),x(8,"input",6),t(),i(9,"div",4)(10,"label",7),o(11,"\u0648\u0636\u0639\u06CC\u062A"),t(),i(12,"select",8)(13,"option",9),o(14,"\u0647\u0645\u0647 \u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627"),t(),c(15,yi,2,2,"option",10),t()(),i(16,"div",4)(17,"label",11),o(18,"\u0627\u0632 \u062A\u0627\u0631\u06CC\u062E"),t(),x(19,"input",12),t(),i(20,"div",4)(21,"label",13),o(22,"\u062A\u0627 \u062A\u0627\u0631\u06CC\u062E"),t(),x(23,"input",14),t(),i(24,"div",15)(25,"button",16),h("click",function(){return u.applyFilters()}),o(26,"\u0627\u0639\u0645\u0627\u0644 \u0641\u06CC\u0644\u062A\u0631"),t(),i(27,"button",17),h("click",function(){return u.clearFilters()}),o(28,"\u067E\u0627\u06A9 \u06A9\u0631\u062F\u0646"),t()()()(),c(29,Fi,37,13,"div",18),i(30,"div",19),c(31,Ai,3,0,"div",20)(32,Ii,3,0,"div",21)(33,Mi,18,1,"div",22),t()),r&2&&(d(4),l("formGroup",u.filterForm),d(9),l("ngValue",null),d(2),l("ngForOf",u.orderStatuses),d(14),l("ngIf",u.statistics),d(2),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.orders.length===0),d(),l("ngIf",!u.isLoading&&u.orders.length>0))},dependencies:[E,L,I,D,N,W,q,ae,se,R,oe,ue,V,B,z,H,j,ge,kt],encapsulation:2});let n=a;return n})();function Pi(n,a){n&1&&(i(0,"span",15),o(1,"sync"),t())}var Ze=(()=>{let a=class a{constructor(e,r,u,m){this.route=e,this.router=r,this.notificationService=u,this.adminOrderStatusService=m,this.isEditMode=!1,this.statusId=null,this.isSubmitting=!1,this.statusForm=new ee({name:new w("",[S.required,S.maxLength(100)]),icon:new w("",[S.maxLength(50)])})}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&(this.statusId=Number(e),this.isEditMode=!0,this.loadStatusData())}loadStatusData(){this.statusId&&this.adminOrderStatusService.getOrderStatus(this.statusId).subscribe({next:e=>{this.statusForm.patchValue(e)},error:e=>this.notificationService.show(e?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A","error")})}onSubmit(){if(this.statusForm.invalid||this.isSubmitting)return;this.isSubmitting=!0;let e=this.statusForm.value;(this.isEditMode&&this.statusId?this.adminOrderStatusService.updateOrderStatus(this.statusId,e):this.adminOrderStatusService.createOrderStatus(e)).pipe(O(()=>this.isSubmitting=!1)).subscribe({next:()=>{this.notificationService.show(`\u0648\u0636\u0639\u06CC\u062A \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A ${this.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"} \u0634\u062F`,"success"),this.router.navigate(["/admin/order-statuses"])},error:u=>this.notificationService.show(u?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062B\u0628\u062A \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A","error")})}};a.\u0275fac=function(r){return new(r||a)(p(te),p(ce),p(k),p(ve))},a.\u0275cmp=F({type:a,selectors:[["app-admin-order-status-form"]],decls:25,vars:5,consts:[[1,"max-w-2xl","mx-auto"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold"],["routerLink","/admin/order-statuses",1,"btn","btn-outline","btn-sm"],[1,"card","p-6","space-y-6",3,"ngSubmit","formGroup"],[1,"space-y-2"],["for","name",1,"font-medium"],["type","text","id","name","formControlName","name",1,"input"],["for","icon",1,"font-medium"],["type","text","id","icon","formControlName","icon","placeholder","\u0645\u062B\u0627\u0644: shopping_cart",1,"input"],[1,"text-xs","text-muted-foreground","pt-1"],["href","https://fonts.google.com/icons","target","_blank",1,"text-primary","underline"],[1,"flex","rtl:justify-start"],["type","submit",1,"btn","btn-primary","btn-md",3,"disabled"],["class","material-icons animate-spin me-2",4,"ngIf"],[1,"material-icons","animate-spin","me-2"]],template:function(r,u){r&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),o(3),t(),i(4,"a",3),o(5,"\u0628\u0627\u0632\u06AF\u0634\u062A"),t()(),i(6,"form",4),h("ngSubmit",function(){return u.onSubmit()}),i(7,"div",5)(8,"label",6),o(9,"\u0646\u0627\u0645 \u0648\u0636\u0639\u06CC\u062A"),t(),x(10,"input",7),t(),i(11,"div",5)(12,"label",8),o(13,"\u0646\u0627\u0645 \u0622\u06CC\u06A9\u0648\u0646 (Material Icons)"),t(),x(14,"input",9),i(15,"p",10),o(16," \u0627\u0632 \u0646\u0627\u0645 \u0622\u06CC\u06A9\u0648\u0646\u200C\u0647\u0627\u06CC "),i(17,"a",11),o(18,"Google Fonts Material Icons"),t(),o(19," \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u06A9\u0646\u06CC\u062F. "),t()(),i(20,"div",12)(21,"button",13),c(22,Pi,2,0,"span",14),i(23,"span"),o(24),t()()()()()),r&2&&(d(3),C("",u.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"," \u0648\u0636\u0639\u06CC\u062A \u0633\u0641\u0627\u0631\u0634"),d(3),l("formGroup",u.statusForm),d(15),l("disabled",u.statusForm.invalid||u.isSubmitting),d(),l("ngIf",u.isSubmitting),d(2),g(u.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u0630\u062E\u06CC\u0631\u0647...":"\u0630\u062E\u06CC\u0631\u0647"))},dependencies:[E,I,W,q,R,V,B,z,H,D,N],encapsulation:2});let n=a;return n})();var Li=n=>["/admin/order-statuses/edit",n];function Di(n,a){n&1&&(i(0,"div",7)(1,"span",8),o(2,"sync"),t()())}function Ni(n,a){n&1&&(i(0,"div",9)(1,"p",10),o(2,"\u0647\u06CC\u0686 \u0648\u0636\u0639\u06CC\u062A\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."),t(),i(3,"a",11),o(4,"\u0627\u0648\u0644\u06CC\u0646 \u0648\u0636\u0639\u06CC\u062A \u0631\u0627 \u0627\u0636\u0627\u0641\u0647 \u06A9\u0646\u06CC\u062F"),t()())}function Oi(n,a){if(n&1){let s=P();i(0,"tr",15)(1,"td",21)(2,"span",22),o(3),t()(),i(4,"td",23),o(5),t(),i(6,"td",24),o(7),b(8,"number"),t(),i(9,"td",25)(10,"a",26)(11,"span",27),o(12,"edit"),t()(),i(13,"button",28),h("click",function(){let r=_(s).$implicit,u=f(2);return y(u.deleteStatus(r.id))}),i(14,"span",27),o(15,"delete"),t()()()()}if(n&2){let s=a.$implicit;d(3),g(s.icon),d(2),g(s.name),d(2),g(A(8,4,(s.orders==null?null:s.orders.length)||0)),d(3),l("routerLink",G(6,Li,s.id))}}function Ui(n,a){if(n&1&&(i(0,"div",12)(1,"table",13)(2,"thead",14)(3,"tr",15)(4,"th",16),o(5,"\u0622\u06CC\u06A9\u0648\u0646"),t(),i(6,"th",17),o(7,"\u0646\u0627\u0645 \u0648\u0636\u0639\u06CC\u062A"),t(),i(8,"th",17),o(9,"\u062A\u0639\u062F\u0627\u062F \u0633\u0641\u0627\u0631\u0634\u0627\u062A"),t(),i(10,"th",18),o(11,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t()()(),i(12,"tbody",19),c(13,Oi,16,8,"tr",20),t()()()),n&2){let s=f();d(13),l("ngForOf",s.statuses)}}var Pt=(()=>{let a=class a{constructor(e,r){this.adminOrderStatusService=e,this.notificationService=r,this.statuses=[],this.isLoading=!0}ngOnInit(){this.loadStatuses()}loadStatuses(){this.isLoading=!0,this.adminOrderStatusService.getOrderStatuses().subscribe({next:e=>{this.statuses=e,this.isLoading=!1},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627","error"),this.isLoading=!1}})}deleteStatus(e){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0648\u0636\u0639\u06CC\u062A \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F")&&this.adminOrderStatusService.deleteOrderStatus(e).subscribe({next:()=>{this.notificationService.show("\u0648\u0636\u0639\u06CC\u062A \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadStatuses()},error:r=>this.notificationService.show(r?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u0648\u0636\u0639\u06CC\u062A","error")})}};a.\u0275fac=function(r){return new(r||a)(p(ve),p(k))},a.\u0275cmp=F({type:a,selectors:[["app-admin-order-status-list"]],decls:9,vars:3,consts:[[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-foreground"],["routerLink","/admin/order-statuses/new",1,"btn","btn-primary","btn-sm"],[1,"card","overflow-hidden"],["class","flex justify-center items-center p-10",4,"ngIf"],["class","text-center p-10",4,"ngIf"],["class","w-full overflow-x-auto",4,"ngIf"],[1,"flex","justify-center","items-center","p-10"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"text-center","p-10"],[1,"text-muted-foreground"],["routerLink","/admin/order-statuses/new",1,"btn","btn-link","mt-2"],[1,"w-full","overflow-x-auto"],[1,"w-full","caption-bottom","text-base"],[1,"[&_tr]:border-b","[&_tr]:border-border"],[1,"border-b","border-border","transition-colors","hover:bg-muted"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground","w-20"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground","w-40"],[1,"[&_tr:last-child]:border-0"],["class","border-b border-border transition-colors hover:bg-muted",4,"ngFor","ngForOf"],[1,"p-4","align-middle"],[1,"material-icons","text-muted-foreground"],[1,"p-4","align-middle","font-medium","text-foreground"],[1,"p-4","align-middle","text-foreground"],[1,"p-4","align-middle","space-x-2","space-x-reverse","whitespace-nowrap"],["title","\u0648\u06CC\u0631\u0627\u06CC\u0634",1,"btn","btn-ghost","btn-sm","btn-icon",3,"routerLink"],[1,"material-icons","text-base"],["title","\u062D\u0630\u0641",1,"btn","btn-ghost","btn-sm","btn-icon","text-destructive","hover:bg-destructive/10",3,"click"]],template:function(r,u){r&1&&(i(0,"div",0)(1,"h1",1),o(2,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627\u06CC \u0633\u0641\u0627\u0631\u0634"),t(),i(3,"a",2),o(4,"\u0627\u0641\u0632\u0648\u062F\u0646 \u0648\u0636\u0639\u06CC\u062A"),t()(),i(5,"div",3),c(6,Di,3,0,"div",4)(7,Ni,5,0,"div",5)(8,Ui,14,1,"div",6),t()),r&2&&(d(6),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.statuses.length===0),d(),l("ngIf",!u.isLoading&&u.statuses.length>0))},dependencies:[E,L,I,D,N,j],encapsulation:2});let n=a;return n})();function Vi(n,a){if(n&1&&(i(0,"option",20),o(1),t()),n&2){let s=a.$implicit;l("value",s.id),d(),lt(" ",(s.attributes.color==null?null:s.attributes.color.value)||"\u0631\u0646\u06AF"," / ",(s.attributes.size==null?null:s.attributes.size.value)||"\u0633\u0627\u06CC\u0632"," (\u0645\u0648\u062C\u0648\u062F\u06CC: ",s.stock,") ")}}function Ti(n,a){n&1&&(i(0,"div",21),o(1," \u062A\u0639\u062F\u0627\u062F \u0628\u0627\u06CC\u062F \u0639\u062F\u062F\u06CC \u0628\u0632\u0631\u06AF\u062A\u0631 \u0627\u0632 \u0635\u0641\u0631 \u0628\u0627\u0634\u062F "),t())}function ji(n,a){n&1&&(i(0,"span",22),o(1,"sync"),t())}var Lt=(()=>{let a=class a{constructor(e,r){this.adminProductService=e,this.notificationService=r,this.stockUpdated=new Ke,this.cancelled=new Ke,this.isSubmitting=!1,this.stockForm=new ee({variantId:new w(null,S.required),quantity:new w(1,[S.required,S.min(1),S.max(1e5)]),operation:new w("add",[S.required]),notes:new w("")})}ngOnInit(){this.setInitialVariant()}ngOnChanges(e){e.variants&&this.setInitialVariant()}setInitialVariant(){this.variants&&this.variants.length>0&&!this.stockForm.get("variantId")?.value&&this.stockForm.get("variantId")?.setValue(this.variants[0].id)}updateStock(){if(this.stockForm.invalid||!this.productId)return;this.isSubmitting=!0;let{variantId:e,quantity:r,operation:u,notes:m}=this.stockForm.value,v={variantId:e,quantity:r,notes:m};(u==="add"?this.adminProductService.addStock(v):this.adminProductService.removeStock(v)).pipe(O(()=>this.isSubmitting=!1)).subscribe({next:()=>{let T=u==="add"?"\u0645\u0648\u062C\u0648\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u0641\u0632\u0648\u062F\u0647 \u0634\u062F":"\u0645\u0648\u062C\u0648\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u06A9\u0633\u0631 \u0634\u062F";this.notificationService.show(T,"success"),this.stockUpdated.emit(),this.stockForm.reset({variantId:this.variants?.[0].id,operation:"add",quantity:1,notes:""})},error:T=>{this.notificationService.show(T?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0645\u0648\u062C\u0648\u062F\u06CC","error")}})}cancel(){this.cancelled.emit()}};a.\u0275fac=function(r){return new(r||a)(p(de),p(k))},a.\u0275cmp=F({type:a,selectors:[["app-stock-management"]],inputs:{productId:"productId",variants:"variants"},outputs:{stockUpdated:"stockUpdated",cancelled:"cancelled"},features:[ut],decls:32,vars:6,consts:[[1,"card","p-6"],[1,"text-lg","font-semibold","mb-4","text-foreground"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"space-y-2"],["for","variantStock",1,"text-sm","font-medium","text-foreground"],["id","variantStock","formControlName","variantId",1,"input"],[3,"value",4,"ngFor","ngForOf"],["for","quantity",1,"text-sm","font-medium","text-foreground"],["type","number","id","quantity","formControlName","quantity","min","1","placeholder","\u062A\u0639\u062F\u0627\u062F \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F",1,"input"],["class","text-xs text-destructive",4,"ngIf"],["for","operation",1,"text-sm","font-medium","text-foreground"],["id","operation","formControlName","operation",1,"input"],["value","add"],["value","remove"],["for","notes",1,"text-sm","font-medium","text-foreground"],["id","notes","formControlName","notes","placeholder","\u062A\u0648\u0636\u06CC\u062D\u0627\u062A...",1,"input","min-h-[80px]"],[1,"flex","gap-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","material-icons animate-spin me-2",4,"ngIf"],["type","button",1,"btn","btn-outline",3,"click"],[3,"value"],[1,"text-xs","text-destructive"],[1,"material-icons","animate-spin","me-2"]],template:function(r,u){if(r&1&&(i(0,"div",0)(1,"h2",1),o(2,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u0648\u062C\u0648\u062F\u06CC"),t(),i(3,"form",2),h("ngSubmit",function(){return u.updateStock()}),i(4,"div",3)(5,"label",4),o(6,"\u0627\u0646\u062A\u062E\u0627\u0628 \u062A\u0646\u0648\u0639"),t(),i(7,"select",5),c(8,Vi,2,4,"option",6),t()(),i(9,"div",3)(10,"label",7),o(11,"\u062A\u0639\u062F\u0627\u062F"),t(),x(12,"input",8),c(13,Ti,2,0,"div",9),t(),i(14,"div",3)(15,"label",10),o(16,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t(),i(17,"select",11)(18,"option",12),o(19,"\u0627\u0641\u0632\u0648\u062F\u0646 \u0628\u0647 \u0645\u0648\u062C\u0648\u062F\u06CC"),t(),i(20,"option",13),o(21,"\u06A9\u0633\u0631 \u0627\u0632 \u0645\u0648\u062C\u0648\u062F\u06CC"),t()()(),i(22,"div",3)(23,"label",14),o(24,"\u06CC\u0627\u062F\u062F\u0627\u0634\u062A (\u0627\u062E\u062A\u06CC\u0627\u0631\u06CC)"),t(),x(25,"textarea",15),t(),i(26,"div",16)(27,"button",17),c(28,ji,2,0,"span",18),o(29),t(),i(30,"button",19),h("click",function(){return u.cancel()}),o(31," \u0627\u0646\u0635\u0631\u0627\u0641 "),t()()()()),r&2){let m;d(3),l("formGroup",u.stockForm),d(5),l("ngForOf",u.variants),d(5),l("ngIf",((m=u.stockForm.get("quantity"))==null?null:m.invalid)&&((m=u.stockForm.get("quantity"))==null?null:m.touched)),d(14),l("disabled",u.stockForm.invalid||u.isSubmitting),d(),l("ngIf",u.isSubmitting),d(),C(" ",u.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u0627\u0639\u0645\u0627\u0644...":"\u0627\u0639\u0645\u0627\u0644 \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A"," ")}},dependencies:[E,L,I,W,q,ae,se,R,oe,ue,V,B,je,z,H],encapsulation:2});let n=a;return n})();var Gi=()=>[];function $i(n,a){if(n&1&&(i(0,"option",35),o(1),t()),n&2){let s=a.$implicit;l("value",s.id),d(),g(s.name)}}function Ri(n,a){n&1&&(i(0,"span",46),o(1,"\u0627\u0635\u0644\u06CC"),t())}function Bi(n,a){if(n&1){let s=P();i(0,"div",39),x(1,"img",40),i(2,"div",41)(3,"button",42),h("click",function(){let r=_(s).$implicit,u=f(2);return y(u.removeCurrentImage(r.id))}),i(4,"span",43),o(5,"close"),t()()(),i(6,"div",44),c(7,Ri,2,0,"span",45),t()()}if(n&2){let s=a.$implicit,e=f(2);d(),le("border-primary",s.isPrimary)("border-2",s.isPrimary),l("src",e.getMediaUrl(s.url),Z),d(6),l("ngIf",s.isPrimary)}}function qi(n,a){if(n&1&&(i(0,"div",36)(1,"p",37),o(2,"\u062A\u0635\u0627\u0648\u06CC\u0631 \u0641\u0639\u0644\u06CC:"),t(),c(3,Bi,8,6,"div",38),t()),n&2){let s=f();d(3),l("ngForOf",s.currentImages)}}function zi(n,a){if(n&1){let s=P();i(0,"div",39),x(1,"img",40),i(2,"button",47),h("click",function(){let r=_(s).$implicit,u=f(2);return y(u.removeNewImage(r.id))}),i(3,"span",43),o(4,"close"),t()(),i(5,"button",48),h("click",function(){let r=_(s).$implicit,u=f(2);return y(u.setPrimaryNewImage(r.id))}),i(6,"span",43),o(7),t()()()}if(n&2){let s=a.$implicit,e=f(2);d(),le("border-primary",e.primaryNewFileId===s.id)("border-2",e.primaryNewFileId===s.id),l("src",s.url,Z),d(4),le("btn-primary",e.primaryNewFileId===s.id)("btn-ghost",e.primaryNewFileId!==s.id)("bg-white",e.primaryNewFileId!==s.id),d(2),g(e.primaryNewFileId===s.id?"star":"star_border")}}function Hi(n,a){if(n&1&&(i(0,"div",36)(1,"p",37),o(2,"\u062A\u0635\u0627\u0648\u06CC\u0631 \u062C\u062F\u06CC\u062F (\u0628\u0631\u0627\u06CC \u0627\u0646\u062A\u062E\u0627\u0628 \u062A\u0635\u0648\u06CC\u0631 \u0627\u0635\u0644\u06CC \u0631\u0648\u06CC \u0633\u062A\u0627\u0631\u0647 \u06A9\u0644\u06CC\u06A9 \u06A9\u0646\u06CC\u062F):"),t(),c(3,zi,8,12,"div",38),t()),n&2){let s=f();d(3),l("ngForOf",s.imagePreviews)}}function Wi(n,a){if(n&1){let s=P();i(0,"button",49),h("click",function(){_(s);let r=f();return y(r.openStockModal())}),i(1,"span",50),o(2,"inventory"),t(),o(3," \u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u0648\u062C\u0648\u062F\u06CC "),t()}}function Ji(n,a){if(n&1){let s=P();i(0,"button",68),h("click",function(){_(s);let r=f().index,u=f();return y(u.removeVariant(r))}),i(1,"span",69),o(2,"delete"),t()()}}function Ki(n,a){n&1&&(i(0,"p",70),o(1,"\u0628\u0631\u0627\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u0645\u0648\u062C\u0648\u062F\u06CC \u0627\u0632 \u062F\u06A9\u0645\u0647 \u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u0648\u062C\u0648\u062F\u06CC \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u06A9\u0646\u06CC\u062F."),t())}function Qi(n,a){if(n&1&&(i(0,"option",35),o(1),t()),n&2){let s=a.$implicit;l("value",s.id),d(),g(s.displayValue)}}function Xi(n,a){if(n&1&&(i(0,"div",8)(1,"label",54),o(2),i(3,"span",71),o(4,"*"),t()(),i(5,"select",72)(6,"option",73),o(7,"\u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F"),t(),c(8,Qi,2,2,"option",15),t()()),n&2){let s=a.$implicit,e=f().index;d(),l("for","attr_"+s.id+"_"+e),d(),C("",s.displayName," "),d(3),l("id","attr_"+s.id+"_"+e)("formControlName","attr_"+s.id),d(),l("ngValue",null),d(2),l("ngForOf",s.values)}}function Yi(n,a){if(n&1&&(i(0,"div",51),c(1,Ji,3,0,"button",52),i(2,"div",53)(3,"div",8)(4,"label",54),o(5,"SKU"),t(),x(6,"input",55),t(),i(7,"div",8)(8,"label",54),o(9,"\u0642\u06CC\u0645\u062A \u062E\u0631\u06CC\u062F (\u062A\u0648\u0645\u0627\u0646)"),t(),x(10,"input",56),t(),i(11,"div",8)(12,"label",54),o(13,"\u0642\u06CC\u0645\u062A \u0627\u0635\u0644\u06CC (\u062A\u0648\u0645\u0627\u0646)"),t(),x(14,"input",57),t(),i(15,"div",8)(16,"label",54),o(17,"\u0642\u06CC\u0645\u062A \u0641\u0631\u0648\u0634 (\u062A\u0648\u0645\u0627\u0646)"),t(),x(18,"input",58),t(),i(19,"div",8)(20,"label",54),o(21,"\u0645\u0648\u062C\u0648\u062F\u06CC \u0627\u0646\u0628\u0627\u0631"),t(),x(22,"input",59),c(23,Ki,2,0,"p",60),t(),i(24,"div",61),x(25,"input",62),i(26,"label",63),o(27,"\u0645\u0648\u062C\u0648\u062F\u06CC \u0646\u0627\u0645\u062D\u062F\u0648\u062F"),t()()(),i(28,"div",64),c(29,Xi,9,6,"div",65),t(),i(30,"div",66),x(31,"input",67),i(32,"label",63),o(33,"\u0627\u06CC\u0646 \u062A\u0646\u0648\u0639 \u0641\u0639\u0627\u0644 \u0628\u0627\u0634\u062F"),t()()()),n&2){let s,e=a.$implicit,r=a.index,u=f();l("formGroupName",r),d(),l("ngIf",u.variants.length>1),d(3),l("for","sku"+r),d(2),l("id","sku"+r),d(2),l("for","purchasePrice"+r),d(2),l("id","purchasePrice"+r),d(2),l("for","originalPrice"+r),d(2),l("id","originalPrice"+r),d(2),l("for","sellingPrice"+r),d(2),l("id","sellingPrice"+r),d(2),l("for","stock"+r),d(2),l("id","stock"+r)("readonly",u.isEditMode||((s=e.get("isUnlimited"))==null?null:s.value)),d(),l("ngIf",u.isEditMode),d(2),l("id","isUnlimited"+r),d(),l("for","isUnlimited"+r),d(3),l("ngForOf",u.attributes),d(2),l("id","variantIsActive"+r),d(),l("for","variantIsActive"+r)}}function Zi(n,a){n&1&&(i(0,"span",74),o(1,"sync"),t())}function er(n,a){if(n&1){let s=P();i(0,"div",75)(1,"div",76)(2,"button",77),h("click",function(){_(s);let r=f();return y(r.closeStockModal())}),i(3,"span",78),o(4,"close"),t()(),i(5,"app-stock-management",79),h("stockUpdated",function(){_(s);let r=f();return y(r.onStockUpdated())})("cancelled",function(){_(s);let r=f();return y(r.closeStockModal())}),t()()()}if(n&2){let s=f();d(5),l("productId",s.productId)("variants",(s.product==null?null:s.product.variants)||Ne(2,Gi))}}var et=(()=>{let a=class a{constructor(e,r,u,m,v,M,T,re){this.fb=e,this.route=r,this.router=u,this.adminProductService=m,this.categoryGroupService=v,this.notificationService=M,this.mediaService=T,this.cdr=re,this.isEditMode=!1,this.productId=null,this.isSubmitting=!1,this.categoryGroups=[],this.attributes=[],this.destroy$=new nt,this.product=null,this.currentImages=[],this.imagePreviews=[],this.newlyAddedFiles=[],this.deletedMediaIds=[],this.showStockModal=!1,this.primaryNewFileId=null,this.productForm=this.fb.group({name:["",[S.required,S.maxLength(200)]],sku:["",[S.maxLength(100)]],description:[""],categoryGroupId:[null,S.required],isActive:[!0],rowVersion:[null],variants:this.fb.array([])})}get variants(){return this.productForm.get("variants")}ngOnInit(){Le({categoryGroups:this.categoryGroupService.getCategoryGroups(void 0,void 0,1,500).pipe(Pe(e=>e.items??[]),Je(()=>We([]))),attributes:this.adminProductService.getAllAttributes().pipe(Je(()=>We([])))}).subscribe({next:({categoryGroups:e,attributes:r})=>{this.categoryGroups=e,this.attributes=r,this.cdr.markForCheck();let u=this.route.snapshot.paramMap.get("id");u?(this.isEditMode=!0,this.productId=Number(u),this.loadProductData()):this.addVariant()},error:()=>this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0627\u0648\u0644\u06CC\u0647","error")})}loadProductData(){this.productId&&this.adminProductService.getProductById(this.productId).subscribe({next:e=>{this.product=e,this.productForm.patchValue(rt(Me({},e),{sku:e.sku,rowVersion:e.rowVersion?e.rowVersion:null})),this.currentImages=[...e.images],this.deletedMediaIds=[],this.newlyAddedFiles=[],this.imagePreviews=[],this.primaryNewFileId=null,this.variants.clear(),e.variants.forEach(r=>{let u=this.createVariantGroup(r);this.variants.push(u)}),this.cdr.markForCheck()},error:()=>this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062D\u0635\u0648\u0644","error")})}createVariantGroup(e){let r={id:[e?.id],sku:[e?.sku||""],purchasePrice:[e?.purchasePrice||0,[S.required,S.min(0)]],originalPrice:[e?.originalPrice||0,[S.required,S.min(0)]],sellingPrice:[e?.sellingPrice||0,[S.required,S.min(0)]],stock:[{value:e?.stock||0,disabled:this.isEditMode},[S.required,S.min(0)]],isUnlimited:[e?.isUnlimited||!1],isActive:[e?.isActive??!0]};this.attributes.forEach(M=>{let T=e?.attributes?e.attributes[M.name.toLowerCase()]:null;r[`attr_${M.id}`]=new w(T?.id||null,[S.required])});let u=this.fb.group(r),m=u.get("isUnlimited"),v=u.get("stock");return m&&v&&(m.valueChanges.pipe(ot(this.destroy$)).subscribe(M=>{M?(v.setValue(0),v.disable()):this.isEditMode||v.enable()}),m.value&&v.disable()),u}addVariant(){this.variants.push(this.createVariantGroup()),this.cdr.markForCheck()}removeVariant(e){this.variants.length>1?this.variants.removeAt(e):this.notificationService.show("\u0645\u062D\u0635\u0648\u0644 \u0628\u0627\u06CC\u062F \u062D\u062F\u0627\u0642\u0644 \u06CC\u06A9 \u062A\u0646\u0648\u0639 \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F","info")}onFileChange(e){let r=e.target;r.files&&(Array.from(r.files).forEach(m=>{let v=this.generateUniqueId();this.newlyAddedFiles.push({file:m,id:v});let M=new FileReader;M.onload=T=>{this.imagePreviews.push({id:v,url:T.target.result}),this.currentImages.length===0&&!this.primaryNewFileId&&(this.primaryNewFileId=v),this.cdr.markForCheck()},M.readAsDataURL(m)}),r.value="")}setPrimaryNewImage(e){this.primaryNewFileId=e}generateUniqueId(){return`${Date.now()}-${Math.random().toString(36).substring(2,9)}`}removeNewImage(e){this.newlyAddedFiles=this.newlyAddedFiles.filter(r=>r.id!==e),this.imagePreviews=this.imagePreviews.filter(r=>r.id!==e),this.primaryNewFileId===e&&(this.primaryNewFileId=this.newlyAddedFiles.length>0?this.newlyAddedFiles[0].id:null)}removeCurrentImage(e){this.currentImages=this.currentImages.filter(r=>r.id!==e),this.deletedMediaIds.push(e)}getMediaUrl(e){return this.mediaService.getMediaUrl(e)}onSubmit(){if(this.productForm.invalid){this.productForm.markAllAsTouched(),this.notificationService.show("\u0644\u0637\u0641\u0627 \u062A\u0645\u0627\u0645 \u0641\u06CC\u0644\u062F\u0647\u0627\u06CC \u0627\u0644\u0632\u0627\u0645\u06CC \u0631\u0627 \u067E\u0631 \u06A9\u0646\u06CC\u062F","info");return}let e=this.productForm.getRawValue(),r=[];for(let M of e.variants){let T=this.attributes.map(re=>M[`attr_${re.id}`]).filter(re=>re!=null&&re!=="").map(re=>Number(re));if(T.length!==this.attributes.length){this.notificationService.show("\u0644\u0637\u0641\u0627 \u062A\u0645\u0627\u0645 \u0648\u06CC\u0698\u06AF\u06CC\u200C\u0647\u0627\u06CC \u062A\u0646\u0648\u0639\u200C\u0647\u0627 \u0631\u0627 \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F.","error");return}r.push({Id:M.id||void 0,Sku:M.sku||null,PurchasePrice:M.purchasePrice,OriginalPrice:M.originalPrice,SellingPrice:M.sellingPrice,Stock:M.stock,IsUnlimited:M.isUnlimited,IsActive:M.isActive,AttributeValueIds:T})}this.isSubmitting=!0;let u=new FormData;u.append("Name",e.name),e.sku&&u.append("Sku",e.sku),u.append("Description",e.description||""),u.append("CategoryGroupId",e.categoryGroupId.toString()),u.append("IsActive",e.isActive.toString()),u.append("VariantsJson",JSON.stringify(r)),this.isEditMode&&this.productId&&(u.append("Id",this.productId.toString()),e.rowVersion&&u.append("RowVersion",e.rowVersion));let m=-1;this.newlyAddedFiles.forEach((M,T)=>{u.append("Images",M.file,M.file.name),M.id===this.primaryNewFileId&&(m=T)}),m>=0&&u.append("PrimaryImageIndex",m.toString()),this.deletedMediaIds.forEach(M=>u.append("DeletedMediaIds",M.toString())),(this.isEditMode&&this.productId?this.adminProductService.updateProduct(this.productId,u):this.adminProductService.createProduct(u)).pipe(O(()=>{this.isSubmitting=!1,this.cdr.markForCheck()})).subscribe({next:()=>{this.notificationService.show(`\u0645\u062D\u0635\u0648\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A ${this.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"} \u0634\u062F`,"success"),this.isEditMode?this.loadProductData():this.router.navigate(["/admin/products"])},error:M=>{if(M.status===409)this.notificationService.show("\u0627\u06CC\u0646 \u0631\u06A9\u0648\u0631\u062F \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627 \u0635\u0641\u062D\u0647 \u0631\u0627 \u0631\u0641\u0631\u0634 \u06A9\u0646\u06CC\u062F.","error"),this.loadProductData();else{let T=M.error?.message||M.error?.title||"\u062E\u0637\u0627 \u062F\u0631 \u062B\u0628\u062A \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A";this.notificationService.show(T,"error")}}})}openStockModal(){this.showStockModal=!0}closeStockModal(){this.showStockModal=!1}onStockUpdated(){this.loadProductData(),this.closeStockModal()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};a.\u0275fac=function(r){return new(r||a)(p(Ge),p(te),p(ce),p(de),p($e),p(k),p(_e),p(pt))},a.\u0275cmp=F({type:a,selectors:[["app-admin-product-form"]],decls:56,vars:11,consts:[[1,"max-w-4xl","mx-auto"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold"],["routerLink","/admin/products",1,"btn","btn-outline","btn-sm"],[1,"space-y-8",3,"ngSubmit","formGroup"],[1,"card","p-6","space-y-6"],[1,"text-lg","font-semibold","border-b","pb-3","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"space-y-2"],["for","name",1,"font-medium"],["type","text","id","name","formControlName","name","required","",1,"input"],["for","sku",1,"font-medium"],["type","text","id","sku","formControlName","sku",1,"input"],["for","categoryGroupId",1,"font-medium"],["id","categoryGroupId","formControlName","categoryGroupId","required","",1,"input"],[3,"value",4,"ngFor","ngForOf"],["for","description",1,"font-medium"],["id","description","formControlName","description","rows","4",1,"input"],[1,"flex","items-center","space-x-2","space-x-reverse"],["type","checkbox","id","isActive","formControlName","isActive",1,"checkbox"],["for","isActive"],["class","mt-4 grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-4",4,"ngIf"],["for","images",1,"font-medium"],["type","file","id","images","multiple","","accept","image/*",1,"input",3,"change"],[1,"flex","justify-between","items-center","border-b","pb-3","mb-4"],[1,"text-lg","font-semibold"],[1,"flex","gap-2"],["type","button","class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline","btn-sm",3,"click"],["formArrayName","variants"],["class","border rounded-lg p-4 mb-4 space-y-4 bg-muted/20 relative",3,"formGroupName",4,"ngFor","ngForOf"],[1,"flex","justify-end","pt-6","border-t"],["type","submit",1,"btn","btn-primary","btn-lg",3,"disabled"],["class","material-icons animate-spin me-2",4,"ngIf"],["class","fixed inset-0 z-50 flex items-center justify-center bg-black/50",4,"ngIf"],[3,"value"],[1,"mt-4","grid","grid-cols-3","sm:grid-cols-4","md:grid-cols-6","gap-4"],[1,"col-span-full","text-sm","text-muted-foreground"],["class","relative group",4,"ngFor","ngForOf"],[1,"relative","group"],["alt","Image preview",1,"w-24","h-24","rounded-lg","object-cover","border",3,"src"],[1,"absolute","top-0","right-0","flex","gap-1"],["type","button",1,"btn","btn-xs","btn-circle","btn-destructive",3,"click"],[1,"material-icons","text-sm"],[1,"absolute","bottom-0","left-0","p-1"],["class","bg-primary text-primary-foreground text-[10px] px-1 rounded",4,"ngIf"],[1,"bg-primary","text-primary-foreground","text-[10px]","px-1","rounded"],["type","button",1,"absolute","top-0","right-0","btn","btn-xs","btn-circle","btn-destructive","z-10",3,"click"],["type","button",1,"absolute","bottom-1","left-1","btn","btn-xs","btn-circle","z-10",3,"click"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"material-icons","text-base","me-1"],[1,"border","rounded-lg","p-4","mb-4","space-y-4","bg-muted/20","relative",3,"formGroupName"],["type","button","class","btn btn-sm btn-icon btn-ghost absolute top-2 left-2 text-destructive",3,"click",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"text-sm","font-medium",3,"for"],["type","text","formControlName","sku",1,"input",3,"id"],["type","number","formControlName","purchasePrice","required","",1,"input",3,"id"],["type","number","formControlName","originalPrice","required","",1,"input",3,"id"],["type","number","formControlName","sellingPrice","required","",1,"input",3,"id"],["type","number","formControlName","stock","required","",1,"input",3,"id","readonly"],["class","text-xs text-muted-foreground mt-1",4,"ngIf"],[1,"flex","items-center","space-x-2","space-x-reverse","pt-6"],["type","checkbox","formControlName","isUnlimited",1,"checkbox",3,"id"],[3,"for"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4","pt-4","border-t"],["class","space-y-2",4,"ngFor","ngForOf"],[1,"flex","items-center","space-x-2","space-x-reverse","pt-4"],["type","checkbox","formControlName","isActive",1,"checkbox",3,"id"],["type","button",1,"btn","btn-sm","btn-icon","btn-ghost","absolute","top-2","left-2","text-destructive",3,"click"],[1,"material-icons","text-base"],[1,"text-xs","text-muted-foreground","mt-1"],[1,"text-destructive"],[1,"input",3,"id","formControlName"],[3,"ngValue"],[1,"material-icons","animate-spin","me-2"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/50"],[1,"bg-background","rounded-lg","p-6","w-full","max-w-md","relative"],[1,"absolute","top-4","right-4","btn","btn-ghost","btn-sm","btn-icon",3,"click"],[1,"material-icons"],[3,"stockUpdated","cancelled","productId","variants"]],template:function(r,u){r&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),o(3),t(),i(4,"a",3),o(5,"\u0628\u0627\u0632\u06AF\u0634\u062A"),t()(),i(6,"form",4),h("ngSubmit",function(){return u.onSubmit()}),i(7,"div",5)(8,"h2",6),o(9,"\u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0627\u0635\u0644\u06CC"),t(),i(10,"div",7)(11,"div",8)(12,"label",9),o(13,"\u0646\u0627\u0645 \u0645\u062D\u0635\u0648\u0644"),t(),x(14,"input",10),t(),i(15,"div",8)(16,"label",11),o(17,"\u06A9\u062F \u0645\u062D\u0635\u0648\u0644 (SKU)"),t(),x(18,"input",12),t(),i(19,"div",8)(20,"label",13),o(21,"\u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),t(),i(22,"select",14),c(23,$i,2,2,"option",15),t()()(),i(24,"div",8)(25,"label",16),o(26,"\u062A\u0648\u0636\u06CC\u062D\u0627\u062A"),t(),x(27,"textarea",17),t(),i(28,"div",18),x(29,"input",19),i(30,"label",20),o(31,"\u0645\u062D\u0635\u0648\u0644 \u0641\u0639\u0627\u0644 \u0628\u0627\u0634\u062F"),t()()(),i(32,"div",5)(33,"h2",6),o(34,"\u062A\u0635\u0627\u0648\u06CC\u0631 \u0645\u062D\u0635\u0648\u0644"),t(),c(35,qi,4,1,"div",21),i(36,"div",8)(37,"label",22),o(38,"\u0627\u0641\u0632\u0648\u062F\u0646 \u062A\u0635\u0648\u06CC\u0631"),t(),i(39,"input",23),h("change",function(v){return u.onFileChange(v)}),t()(),c(40,Hi,4,1,"div",21),t(),i(41,"div",5)(42,"div",24)(43,"h2",25),o(44,"\u062A\u0646\u0648\u0639\u200C\u0647\u0627 (Variants)"),t(),i(45,"div",26),c(46,Wi,4,0,"button",27),i(47,"button",28),h("click",function(){return u.addVariant()}),o(48,"\u0627\u0641\u0632\u0648\u062F\u0646 \u062A\u0646\u0648\u0639"),t()()(),i(49,"div",29),c(50,Yi,34,19,"div",30),t()(),i(51,"div",31)(52,"button",32),c(53,Zi,2,0,"span",33),o(54),t()()()(),c(55,er,6,3,"div",34)),r&2&&(d(3),C("",u.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"," \u0645\u062D\u0635\u0648\u0644"),d(3),l("formGroup",u.productForm),d(17),l("ngForOf",u.categoryGroups),d(12),l("ngIf",u.currentImages.length>0),d(5),l("ngIf",u.imagePreviews.length>0),d(6),l("ngIf",u.isEditMode),d(4),l("ngForOf",u.variants.controls),d(2),l("disabled",u.productForm.invalid||u.isSubmitting),d(),l("ngIf",u.isSubmitting),d(),C(" ",u.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u0630\u062E\u06CC\u0631\u0647...":u.isEditMode?"\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0645\u062D\u0635\u0648\u0644":"\u0627\u06CC\u062C\u0627\u062F \u0645\u062D\u0635\u0648\u0644"," "),d(),l("ngIf",u.showStockModal))},dependencies:[E,L,I,W,q,ae,se,R,oe,he,ue,V,B,vt,z,H,Ve,Te,D,N,Lt],encapsulation:2});let n=a;return n})();var ir=n=>["/admin/products/edit",n],rr=n=>({"text-destructive font-bold":n});function nr(n,a){n&1&&(i(0,"div",8)(1,"span",9),o(2,"sync"),t()())}function or(n,a){n&1&&(i(0,"div",10)(1,"p",11),o(2,"\u0647\u06CC\u0686 \u0645\u062D\u0635\u0648\u0644\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."),t(),i(3,"a",12),o(4,"\u0627\u0648\u0644\u06CC\u0646 \u0645\u062D\u0635\u0648\u0644 \u0631\u0627 \u0627\u0636\u0627\u0641\u0647 \u06A9\u0646\u06CC\u062F"),t()())}function ur(n,a){if(n&1&&(st(0),i(1,"span",32),o(2),b(3,"number"),t(),dt()),n&2){let s=f().$implicit,e=f(2);d(),l("ngClass",G(4,rr,e.getTotalStock(s)===0)),d(),g(A(3,2,e.getTotalStock(s)))}}function ar(n,a){n&1&&(i(0,"span",33),o(1,"\u0646\u0627\u0645\u062D\u062F\u0648\u062F"),t())}function sr(n,a){if(n&1){let s=P();i(0,"tr",16)(1,"td",22),x(2,"img",23),t(),i(3,"td",24),o(4),t(),i(5,"td",25),o(6),t(),i(7,"td",26),o(8),b(9,"number"),t(),i(10,"td",26),c(11,ur,4,6,"ng-container",27)(12,ar,2,0,"ng-template",null,0,ct),t(),i(14,"td",28)(15,"a",29)(16,"span",30),o(17,"edit"),t()(),i(18,"button",31),h("click",function(){let r=_(s).$implicit,u=f(2);return y(u.deleteProduct(r.id))}),i(19,"span",30),o(20,"delete"),t()()()()}if(n&2){let s=a.$implicit,e=De(13),r=f(2);d(2),l("src",(s.images==null||s.images[0]==null?null:s.images[0].url)||"https://via.placeholder.com/48",Z)("alt",s.name),d(2),g(s.name),d(2),g(s.categoryGroup==null?null:s.categoryGroup.categoryName),d(2),C("",A(9,8,s.minPrice)," \u062A\u0648\u0645\u0627\u0646"),d(3),l("ngIf",r.getTotalStock(s)!==r.Infinity)("ngIfElse",e),d(4),l("routerLink",G(10,ir,s.id))}}function dr(n,a){if(n&1&&(i(0,"div",13)(1,"table",14)(2,"thead",15)(3,"tr",16)(4,"th",17),o(5,"\u062A\u0635\u0648\u06CC\u0631"),t(),i(6,"th",18),o(7,"\u0646\u0627\u0645 \u0645\u062D\u0635\u0648\u0644"),t(),i(8,"th",18),o(9,"\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),t(),i(10,"th",18),o(11,"\u0642\u06CC\u0645\u062A \u0641\u0631\u0648\u0634"),t(),i(12,"th",18),o(13,"\u0645\u0648\u062C\u0648\u062F\u06CC \u06A9\u0644"),t(),i(14,"th",19),o(15,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t()()(),i(16,"tbody",20),c(17,sr,21,12,"tr",21),t()()()),n&2){let s=f();d(17),l("ngForOf",s.products)}}var Dt=(()=>{let a=class a{constructor(e,r,u){this.productService=e,this.adminProductService=r,this.notificationService=u,this.products=[],this.pagination=null,this.isLoading=!0,this.currentPage=1,this.Infinity=1/0}ngOnInit(){this.loadProducts()}getTotalStock(e){return e.variants.some(u=>u.isUnlimited)?1/0:e.variants.reduce((u,m)=>u+m.stock,0)}loadProducts(e=1){this.isLoading=!0,this.currentPage=e,this.productService.getProducts({page:this.currentPage,pageSize:10,sortBy:"Newest"}).subscribe({next:r=>{this.products=r.items??[],this.pagination=r,this.isLoading=!1},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062D\u0635\u0648\u0644\u0627\u062A","error"),this.isLoading=!1}})}deleteProduct(e){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0645\u062D\u0635\u0648\u0644 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F \u0627\u06CC\u0646 \u0639\u0645\u0644 \u062A\u0645\u0627\u0645 \u062A\u0646\u0648\u0639\u200C\u0647\u0627\u06CC \u0622\u0646 \u0631\u0627 \u0646\u06CC\u0632 \u062D\u0630\u0641 \u0645\u06CC\u200C\u06A9\u0646\u062F.")&&this.adminProductService.deleteProduct(e).subscribe({next:r=>{this.notificationService.show(r.message||"\u0645\u062D\u0635\u0648\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadProducts(this.currentPage)},error:r=>this.notificationService.show(r?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u0645\u062D\u0635\u0648\u0644","error")})}};a.\u0275fac=function(r){return new(r||a)(p(Ue),p(de),p(k))},a.\u0275cmp=F({type:a,selectors:[["app-admin-product-list"]],decls:9,vars:3,consts:[["unlimited",""],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-foreground"],["routerLink","/admin/products/new",1,"btn","btn-primary","btn-sm"],[1,"card"],["class","flex justify-center items-center p-10",4,"ngIf"],["class","text-center p-10",4,"ngIf"],["class","relative w-full overflow-x-auto",4,"ngIf"],[1,"flex","justify-center","items-center","p-10"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"text-center","p-10"],[1,"text-muted-foreground"],["routerLink","/admin/products/new",1,"btn","btn-link","mt-2"],[1,"relative","w-full","overflow-x-auto"],[1,"w-full","caption-bottom","text-base"],[1,"[&_tr]:border-b","[&_tr]:border-border"],[1,"border-b","border-border","transition-colors","hover:bg-muted"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground","w-20"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground","w-40"],[1,"[&_tr:last-child]:border-0"],["class","border-b border-border transition-colors hover:bg-muted",4,"ngFor","ngForOf"],[1,"p-2","align-middle"],[1,"w-12","h-12","rounded-md","object-cover","border","border-border",3,"src","alt"],[1,"p-4","align-middle","font-medium","text-foreground"],[1,"p-4","align-middle","text-muted-foreground"],[1,"p-4","align-middle","text-foreground"],[4,"ngIf","ngIfElse"],[1,"p-4","align-middle","space-x-2","space-x-reverse","whitespace-nowrap"],["title","\u0648\u06CC\u0631\u0627\u06CC\u0634",1,"btn","btn-ghost","btn-sm","btn-icon",3,"routerLink"],[1,"material-icons","text-base"],["title","\u062D\u0630\u0641",1,"btn","btn-ghost","btn-sm","btn-icon","text-destructive","hover:bg-destructive/10",3,"click"],[3,"ngClass"],[1,"text-success","font-semibold"]],template:function(r,u){r&1&&(i(0,"div",1)(1,"h1",2),o(2,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u062D\u0635\u0648\u0644\u0627\u062A"),t(),i(3,"a",3),o(4,"\u0627\u0641\u0632\u0648\u062F\u0646 \u0645\u062D\u0635\u0648\u0644"),t()(),i(5,"div",4),c(6,nr,3,0,"div",5)(7,or,5,0,"div",6)(8,dr,18,1,"div",7),t()),r&2&&(d(6),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.products.length===0),d(),l("ngIf",!u.isLoading&&u.products.length>0))},dependencies:[E,ne,L,I,D,N,j],encapsulation:2});let n=a;return n})();function lr(n,a){n&1&&(i(0,"div",11)(1,"span",12),o(2,"sync"),t()())}function mr(n,a){n&1&&(i(0,"div",13)(1,"p",14),o(2,"\u0647\u06CC\u0686 \u06A9\u0627\u0631\u0628\u0631\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."),t()())}function cr(n,a){if(n&1){let s=P();i(0,"button",33),h("click",function(){_(s);let r=f().$implicit,u=f(2);return y(u.changeUserStatus(r,!r.isActive))}),i(1,"span",34),o(2),t()()}if(n&2){let s=f().$implicit;l("title",s.isActive?"\u063A\u06CC\u0631\u0641\u0639\u0627\u0644 \u06A9\u0631\u062F\u0646":"\u0641\u0639\u0627\u0644 \u06A9\u0631\u062F\u0646"),d(2),g(s.isActive?"toggle_off":"toggle_on")}}function pr(n,a){if(n&1){let s=P();i(0,"button",35),h("click",function(){_(s);let r=f().$implicit,u=f(2);return y(u.deleteUser(r.id))}),i(1,"span",34),o(2,"delete"),t()()}}function fr(n,a){if(n&1){let s=P();i(0,"button",36),h("click",function(){_(s);let r=f().$implicit,u=f(2);return y(u.restoreUser(r.id))}),i(1,"span",34),o(2,"restore_from_trash"),t()()}}function gr(n,a){if(n&1&&(i(0,"tr",24)(1,"td",25),o(2),t(),i(3,"td",26),o(4),t(),i(5,"td",27)(6,"span",28),o(7),t()(),i(8,"td",26),o(9),b(10,"date"),t(),i(11,"td",29),c(12,cr,3,2,"button",30)(13,pr,3,0,"button",31)(14,fr,3,0,"button",32),t()()),n&2){let s=a.$implicit;le("opacity-50",s.isDeleted),d(2),ke("",s.firstName||""," ",s.lastName||""),d(2),g(s.phoneNumber),d(2),l("ngClass",s.isActive&&!s.isDeleted?"bg-success text-success-foreground":"bg-destructive text-destructive-foreground"),d(),C(" ",s.isDeleted?"\u062D\u0630\u0641 \u0634\u062F\u0647":s.isActive?"\u0641\u0639\u0627\u0644":"\u063A\u06CC\u0631\u0641\u0639\u0627\u0644"," "),d(2),g(fe(10,11,s.createdAt,"yyyy/MM/dd")),d(3),l("ngIf",!s.isDeleted),d(),l("ngIf",!s.isDeleted),d(),l("ngIf",s.isDeleted)}}function hr(n,a){if(n&1&&(i(0,"div",15)(1,"table",16)(2,"thead",17)(3,"tr",18)(4,"th",19),o(5,"\u0646\u0627\u0645 \u0648 \u0646\u0627\u0645 \u062E\u0627\u0646\u0648\u0627\u062F\u06AF\u06CC"),t(),i(6,"th",19),o(7,"\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06CC\u0644"),t(),i(8,"th",20),o(9,"\u0648\u0636\u0639\u06CC\u062A"),t(),i(10,"th",19),o(11,"\u062A\u0627\u0631\u06CC\u062E \u0639\u0636\u0648\u06CC\u062A"),t(),i(12,"th",21),o(13,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t()()(),i(14,"tbody",22),c(15,gr,15,14,"tr",23),t()()()),n&2){let s=f();d(15),l("ngForOf",s.users)}}function vr(n,a){if(n&1){let s=P();i(0,"div",37)(1,"button",38),h("click",function(){_(s);let r=f();return y(r.loadUsers(r.currentPage-1))}),o(2,"\u0642\u0628\u0644\u06CC"),t(),i(3,"span",39),o(4),t(),i(5,"button",38),h("click",function(){_(s);let r=f();return y(r.loadUsers(r.currentPage+1))}),o(6,"\u0628\u0639\u062F\u06CC"),t()()}if(n&2){let s=f();d(),l("disabled",s.currentPage===1),d(3),ke("\u0635\u0641\u062D\u0647 ",s.currentPage," \u0627\u0632 ",s.pagination.totalPages),d(),l("disabled",s.currentPage===s.pagination.totalPages)}}var Nt=(()=>{let a=class a{constructor(e,r){this.adminUserService=e,this.notificationService=r,this.users=[],this.isLoading=!0,this.showDeleted=!1,this.pagination=null,this.currentPage=1}ngOnInit(){this.loadUsers()}loadUsers(e=1){this.isLoading=!0,this.currentPage=e,this.adminUserService.getUsers(this.showDeleted,e,20).pipe(O(()=>this.isLoading=!1)).subscribe({next:r=>{this.users=r.items??[],this.pagination=r},error:r=>{this.notificationService.show(r?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u06A9\u0627\u0631\u0628\u0631\u0627\u0646","error")}})}toggleShowDeleted(){this.showDeleted=!this.showDeleted,this.loadUsers(1)}changeUserStatus(e,r){this.adminUserService.changeUserStatus(e.id,r).subscribe({next:()=>{e.isActive=r,this.notificationService.show("\u0648\u0636\u0639\u06CC\u062A \u06A9\u0627\u0631\u0628\u0631 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F","success")},error:()=>this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u062A\u063A\u06CC\u06CC\u0631 \u0648\u0636\u0639\u06CC\u062A \u06A9\u0627\u0631\u0628\u0631","error")})}deleteUser(e){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u06A9\u0627\u0631\u0628\u0631 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F \u0627\u06CC\u0646 \u0639\u0645\u0644 \u063A\u06CC\u0631\u0642\u0627\u0628\u0644 \u0628\u0627\u0632\u06AF\u0634\u062A \u0627\u0633\u062A.")&&this.adminUserService.deleteUser(e).subscribe({next:()=>{this.notificationService.show("\u06A9\u0627\u0631\u0628\u0631 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadUsers(this.currentPage)},error:r=>this.notificationService.show(r?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u06A9\u0627\u0631\u0628\u0631","error")})}restoreUser(e){this.adminUserService.restoreUser(e).subscribe({next:()=>{this.notificationService.show("\u06A9\u0627\u0631\u0628\u0631 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0628\u0627\u0632\u06CC\u0627\u0628\u06CC \u0634\u062F","success"),this.loadUsers(this.currentPage)},error:r=>this.notificationService.show(r?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0632\u06CC\u0627\u0628\u06CC \u06A9\u0627\u0631\u0628\u0631","error")})}};a.\u0275fac=function(r){return new(r||a)(p(Re),p(k))},a.\u0275cmp=F({type:a,selectors:[["app-admin-user-list"]],decls:13,vars:5,consts:[[1,"space-y-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-foreground"],[1,"flex","items-center","space-x-2","space-x-reverse"],["for","showDeleted",1,"text-sm","font-medium"],["type","checkbox","id","showDeleted",1,"checkbox",3,"change","checked"],[1,"card"],["class","flex justify-center items-center p-10",4,"ngIf"],["class","text-center p-10",4,"ngIf"],["class","relative w-full overflow-x-auto",4,"ngIf"],["class","flex justify-center items-center space-x-2 space-x-reverse mt-6",4,"ngIf"],[1,"flex","justify-center","items-center","p-10"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"text-center","p-10"],[1,"text-muted-foreground"],[1,"relative","w-full","overflow-x-auto"],[1,"w-full","caption-bottom","text-base","min-w-[800px]"],[1,"[&_tr]:border-b","[&_tr]:border-border"],[1,"border-b","transition-colors","hover:bg-muted"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground"],[1,"h-12","px-4","text-center","align-middle","font-medium","text-muted-foreground"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground","w-40"],[1,"[&_tr:last-child]:border-0"],["class","border-b transition-colors hover:bg-muted/50",3,"opacity-50",4,"ngFor","ngForOf"],[1,"border-b","transition-colors","hover:bg-muted/50"],[1,"p-4","align-middle","font-medium","text-foreground"],[1,"p-4","align-middle","text-muted-foreground"],[1,"p-4","align-middle","text-center"],[1,"px-2","py-1","text-xs","font-semibold","rounded-full",3,"ngClass"],[1,"p-4","align-middle","space-x-2","space-x-reverse","whitespace-nowrap"],["class","btn btn-ghost btn-sm btn-icon",3,"title","click",4,"ngIf"],["class","btn btn-ghost btn-sm btn-icon text-destructive hover:bg-destructive/10","title","\u062D\u0630\u0641",3,"click",4,"ngIf"],["class","btn btn-ghost btn-sm btn-icon text-success hover:bg-success/10","title","\u0628\u0627\u0632\u06CC\u0627\u0628\u06CC",3,"click",4,"ngIf"],[1,"btn","btn-ghost","btn-sm","btn-icon",3,"click","title"],[1,"material-icons","text-base"],["title","\u062D\u0630\u0641",1,"btn","btn-ghost","btn-sm","btn-icon","text-destructive","hover:bg-destructive/10",3,"click"],["title","\u0628\u0627\u0632\u06CC\u0627\u0628\u06CC",1,"btn","btn-ghost","btn-sm","btn-icon","text-success","hover:bg-success/10",3,"click"],[1,"flex","justify-center","items-center","space-x-2","space-x-reverse","mt-6"],[1,"btn","btn-sm","btn-outline",3,"click","disabled"],[1,"text-sm"]],template:function(r,u){r&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u06A9\u0627\u0631\u0628\u0631\u0627\u0646"),t(),i(4,"div",3)(5,"label",4),o(6,"\u0646\u0645\u0627\u06CC\u0634 \u062D\u0630\u0641 \u0634\u062F\u0647\u200C\u0647\u0627"),t(),i(7,"input",5),h("change",function(){return u.toggleShowDeleted()}),t()()(),i(8,"div",6),c(9,lr,3,0,"div",7)(10,mr,3,0,"div",8)(11,hr,16,1,"div",9),t(),c(12,vr,7,4,"div",10),t()),r&2&&(d(7),l("checked",u.showDeleted),d(2),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.users.length===0),d(),l("ngIf",!u.isLoading&&u.users.length>0),d(),l("ngIf",u.pagination&&u.pagination.totalPages>1))},dependencies:[E,ne,L,I,D,ge],encapsulation:2});let n=a;return n})();function xr(n,a){n&1&&(i(0,"div",14)(1,"span",15),o(2,"sync"),t()())}function Cr(n,a){n&1&&(i(0,"div",16)(1,"p",17),o(2,"\u0645\u062D\u0635\u0648\u0644\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F"),t()())}function br(n,a){if(n&1&&(i(0,"tr",32)(1,"td",33),x(2,"input",34),t(),i(3,"td",33)(4,"div",35),x(5,"img",36),i(6,"div",37)(7,"span",38),o(8),t(),i(9,"span",39),o(10),t()()()(),i(11,"td",40),o(12),b(13,"number"),t(),i(14,"td",33),x(15,"input",41),t()()),n&2){let s=a.$implicit,e=a.index,r=f(2);l("formGroupName",e),d(5),l("src",s.value.productIcon||"https://via.placeholder.com/40",Z)("alt",s.value.productName),d(3),g(s.value.productName),d(2),g(r.getVariantDisplayName(s.value.attributes)),d(2),C(" ",A(13,7,r.getCurrentPrice(s.value))," \u062A\u0648\u0645\u0627\u0646 "),d(3),l("placeholder",r.getCurrentPrice(s.value).toString())}}function Sr(n,a){n&1&&(i(0,"span",42),o(1,"sync"),t())}function _r(n,a){if(n&1){let s=P();i(0,"form",18),h("ngSubmit",function(){_(s);let r=f();return y(r.updatePrices())}),i(1,"div",19)(2,"div",20)(3,"table",21)(4,"thead",22)(5,"tr")(6,"th",23)(7,"input",24),h("change",function(r){_(s);let u=f();return y(u.toggleAll(r))}),t()(),i(8,"th",25),o(9,"\u0646\u0627\u0645 \u0645\u062D\u0635\u0648\u0644 \u0648 \u062A\u0646\u0648\u0639"),t(),i(10,"th",25),o(11,"\u0642\u06CC\u0645\u062A \u0641\u0639\u0644\u06CC"),t(),i(12,"th",25),o(13,"\u0642\u06CC\u0645\u062A \u062C\u062F\u06CC\u062F"),t()()(),i(14,"tbody",26),c(15,br,16,9,"tr",27),t()()()(),i(16,"div",28)(17,"button",29),c(18,Sr,2,0,"span",30),o(19),t(),i(20,"button",31),h("click",function(){_(s);let r=f();return y(r.resetForm())}),o(21," \u0628\u0627\u0632\u0646\u0634\u0627\u0646\u06CC "),t()()()}if(n&2){let s=f();l("formGroup",s.priceForm),d(15),l("ngForOf",s.getVariantControls()),d(2),l("disabled",!s.hasSelectedProducts()||s.isSubmitting),d(),l("ngIf",s.isSubmitting),d(),C(" ",s.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC...":"\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0642\u06CC\u0645\u062A\u200C\u0647\u0627"," ")}}var Ot=(()=>{let a=class a{constructor(e,r,u){this.productService=e,this.adminProductService=r,this.notificationService=u,this.products=[],this.isLoading=!1,this.isSubmitting=!1,this.searchTerm="",this.isPurchasePrice=!1,this.priceForm=new ee({priceUpdates:new xt([])})}ngOnInit(){this.loadProducts()}get priceUpdates(){return this.priceForm.get("priceUpdates")}getVariantControls(){return this.priceForm.get("priceUpdates").controls}loadProducts(){this.isLoading=!0,this.productService.getProducts({name:this.searchTerm,page:1,pageSize:500}).pipe(O(()=>this.isLoading=!1)).subscribe({next:e=>{this.products=e.items??[],this.buildForm()},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062D\u0635\u0648\u0644\u0627\u062A","error")}})}searchProducts(){this.loadProducts()}buildForm(){this.priceUpdates.clear(),this.products.forEach(e=>{e.variants.forEach(r=>{this.priceUpdates.push(new ee({selected:new w(!1),variantId:new w(r.id),productName:new w(e.name),productIcon:new w(e.iconUrl),purchasePrice:new w(r.purchasePrice),sellingPrice:new w(r.sellingPrice),attributes:new w(r.attributes),newPrice:new w(null,[S.min(1)])}))})})}getCurrentPrice(e){return this.isPurchasePrice?e.purchasePrice:e.sellingPrice}getVariantDisplayName(e){return Object.values(e).map(r=>r.value).join(" / ")}toggleAll(e){let r=e.target.checked;this.priceUpdates.controls.forEach(u=>{u.get("selected")?.setValue(r)})}hasSelectedProducts(){return this.priceUpdates.controls.some(e=>e.get("selected")?.value&&e.get("newPrice")?.value)}updatePrices(){let e={};if(this.priceUpdates.controls.forEach(r=>{if(r.get("selected")?.value&&r.get("newPrice")?.value){let u=r.get("variantId")?.value,m=r.get("newPrice")?.value;e[u]=m}}),Object.keys(e).length===0){this.notificationService.show("\u0644\u0637\u0641\u0627\u064B \u0645\u062D\u0635\u0648\u0644\u06CC \u0631\u0627 \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0631\u062F\u0647 \u0648 \u0642\u06CC\u0645\u062A \u062C\u062F\u06CC\u062F\u06CC \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F","error");return}this.isSubmitting=!0,this.adminProductService.bulkUpdatePrices(e,this.isPurchasePrice).pipe(O(()=>this.isSubmitting=!1)).subscribe({next:()=>{this.notificationService.show("\u0642\u06CC\u0645\u062A\u200C\u0647\u0627 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0634\u062F\u0646\u062F","success"),this.loadProducts()},error:r=>{this.notificationService.show(r?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0642\u06CC\u0645\u062A\u200C\u0647\u0627","error")}})}resetForm(){this.priceForm.reset(),this.buildForm()}};a.\u0275fac=function(r){return new(r||a)(p(Ue),p(de),p(k))},a.\u0275cmp=F({type:a,selectors:[["app-bulk-price-update"]],decls:21,vars:7,consts:[[1,"space-y-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-foreground"],[1,"card","p-6","space-y-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"space-y-2"],["for","search",1,"text-sm","font-medium","text-foreground"],["type","text","id","search","placeholder","\u0646\u0627\u0645 \u0645\u062D\u0635\u0648\u0644 \u06CC\u0627 SKU...",1,"input",3,"ngModelChange","ngModel"],["for","priceType",1,"text-sm","font-medium","text-foreground"],["id","priceType",1,"input",3,"ngModelChange","ngModel"],[3,"ngValue"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","card p-12 text-center",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"flex","justify-center","items-center","py-12"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"card","p-12","text-center"],[1,"text-muted-foreground"],[3,"ngSubmit","formGroup"],[1,"card","overflow-hidden"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-muted"],[1,"p-4","text-right"],["type","checkbox",1,"h-4","w-4",3,"change"],[1,"p-4","text-right","text-sm","font-medium","text-foreground"],["formArrayName","priceUpdates"],["class","border-b border-border hover:bg-muted/50",3,"formGroupName",4,"ngFor","ngForOf"],[1,"flex","gap-4","mt-6"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","material-icons animate-spin me-2",4,"ngIf"],["type","button",1,"btn","btn-outline",3,"click"],[1,"border-b","border-border","hover:bg-muted/50",3,"formGroupName"],[1,"p-4"],["type","checkbox","formControlName","selected",1,"h-4","w-4"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","rounded","object-cover",3,"src","alt"],[1,"flex","flex-col"],[1,"font-medium","text-foreground"],[1,"text-xs","text-muted-foreground"],[1,"p-4","text-foreground"],["type","number","formControlName","newPrice","min","1",1,"input","w-40",3,"placeholder"],[1,"material-icons","animate-spin","me-2"]],template:function(r,u){r&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0627\u0646\u0628\u0648\u0647 \u0642\u06CC\u0645\u062A"),t()(),i(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6),o(8,"\u062C\u0633\u062A\u062C\u0648"),t(),i(9,"input",7),be("ngModelChange",function(v){return Ce(u.searchTerm,v)||(u.searchTerm=v),v}),h("ngModelChange",function(){return u.searchProducts()}),t()(),i(10,"div",5)(11,"label",8),o(12,"\u0646\u0648\u0639 \u0642\u06CC\u0645\u062A"),t(),i(13,"select",9),be("ngModelChange",function(v){return Ce(u.isPurchasePrice,v)||(u.isPurchasePrice=v),v}),i(14,"option",10),o(15,"\u0642\u06CC\u0645\u062A \u0641\u0631\u0648\u0634"),t(),i(16,"option",10),o(17,"\u0642\u06CC\u0645\u062A \u062E\u0631\u06CC\u062F"),t()()()()(),c(18,xr,3,0,"div",11)(19,Cr,3,0,"div",12)(20,_r,22,5,"form",13),t()),r&2&&(d(9),xe("ngModel",u.searchTerm),d(4),xe("ngModel",u.isPurchasePrice),d(),l("ngValue",!1),d(2),l("ngValue",!0),d(2),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.products.length===0),d(),l("ngIf",!u.isLoading&&u.products.length>0))},dependencies:[E,L,I,W,q,ae,se,R,oe,he,ue,V,B,je,z,H,Ve,Te,Ae,ye,j],encapsulation:2});let n=a;return n})();var yr=(n,a,s)=>({"bg-destructive/10 text-destructive":n,"bg-warning/10 text-warning":a,"bg-secondary/10 text-secondary":s}),Fr=n=>["/admin/products/edit",n];function Ar(n,a){n&1&&(i(0,"div",11)(1,"span",12),o(2,"sync"),t()())}function Ir(n,a){n&1&&(i(0,"div",13)(1,"div",14)(2,"span",15),o(3,"check_circle"),t(),i(4,"p",16),o(5,"\u0647\u0645\u0647 \u0645\u062D\u0635\u0648\u0644\u0627\u062A \u0645\u0648\u062C\u0648\u062F\u06CC \u06A9\u0627\u0641\u06CC \u062F\u0627\u0631\u0646\u062F"),t()()())}function Er(n,a){if(n&1&&(i(0,"tr",26)(1,"td",27),o(2),t(),i(3,"td",28),o(4),t(),i(5,"td",28),o(6),t(),i(7,"td",29)(8,"span",30),o(9),t()(),i(10,"td",31),o(11),b(12,"number"),t(),i(13,"td",29)(14,"a",32),o(15," \u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u062D\u0635\u0648\u0644 "),t()()()),n&2){let s=a.$implicit;d(2),g(s.productName),d(2),g(s.variantDisplayName),d(2),g(s.category||"-"),d(2),l("ngClass",mt(9,yr,s.stock===0,s.stock>0&&s.stock<=5,s.stock>5)),d(),C(" ",s.stock," \u0639\u062F\u062F "),d(2),C("",A(12,7,s.sellingPrice)," \u062A\u0648\u0645\u0627\u0646"),d(3),l("routerLink",G(13,Fr,s.productId))}}function wr(n,a){if(n&1&&(i(0,"div")(1,"div",17)(2,"div",18)(3,"span",19),o(4,"warning"),t(),i(5,"p",20),o(6),t()(),i(7,"div",21)(8,"table",22)(9,"thead",23)(10,"tr")(11,"th",24),o(12,"\u0646\u0627\u0645 \u0645\u062D\u0635\u0648\u0644"),t(),i(13,"th",24),o(14,"\u062A\u0646\u0648\u0639"),t(),i(15,"th",24),o(16,"\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),t(),i(17,"th",24),o(18,"\u0645\u0648\u062C\u0648\u062F\u06CC"),t(),i(19,"th",24),o(20,"\u0642\u06CC\u0645\u062A"),t(),i(21,"th",24),o(22,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t()()(),i(23,"tbody"),c(24,Er,16,15,"tr",25),t()()()()()),n&2){let s=f();d(6),C(" ",s.products.length," \u062A\u0646\u0648\u0639 \u0645\u062D\u0635\u0648\u0644 \u0646\u06CC\u0627\u0632 \u0628\u0647 \u062A\u0627\u0645\u06CC\u0646 \u0645\u0648\u062C\u0648\u062F\u06CC \u062F\u0627\u0631\u0646\u062F "),d(18),l("ngForOf",s.products)}}var Ut=(()=>{let a=class a{constructor(e){this.adminProductService=e,this.products=[],this.isLoading=!1,this.threshold=5}ngOnInit(){this.loadLowStockProducts()}loadLowStockProducts(){this.isLoading=!0,this.adminProductService.getLowStockProducts(this.threshold).pipe(O(()=>this.isLoading=!1)).subscribe({next:e=>{this.products=e},error:()=>{this.products=[]}})}};a.\u0275fac=function(r){return new(r||a)(p(de))},a.\u0275cmp=F({type:a,selectors:[["app-low-stock-alerts"]],decls:20,vars:8,consts:[[1,"space-y-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-foreground"],[1,"card","p-6","space-y-4"],[1,"flex","items-center","gap-4"],["for","threshold",1,"text-sm","font-medium","text-foreground"],["id","threshold",1,"input","w-32",3,"ngModelChange","ngModel"],[3,"value"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","card p-12 text-center",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-center","items-center","py-12"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"card","p-12","text-center"],[1,"flex","flex-col","items-center","gap-4"],[1,"material-icons","text-5xl","text-success"],[1,"text-foreground","font-semibold"],[1,"card"],[1,"p-4","bg-warning/10","border-b","border-border","flex","items-center","gap-3"],[1,"material-icons","text-warning"],[1,"text-warning","font-semibold"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-muted"],[1,"p-4","text-right","text-sm","font-medium","text-foreground"],["class","border-b border-border hover:bg-muted/50",4,"ngFor","ngForOf"],[1,"border-b","border-border","hover:bg-muted/50"],[1,"p-4","font-medium","text-foreground"],[1,"p-4","text-muted-foreground"],[1,"p-4"],[1,"px-2","py-1","rounded-full","text-xs","font-semibold",3,"ngClass"],[1,"p-4","text-foreground"],[1,"btn","btn-sm","btn-primary",3,"routerLink"]],template:function(r,u){r&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"\u0645\u062D\u0635\u0648\u0644\u0627\u062A \u0631\u0648 \u0628\u0647 \u0627\u062A\u0645\u0627\u0645"),t()(),i(4,"div",3)(5,"div",4)(6,"label",5),o(7,"\u0622\u0633\u062A\u0627\u0646\u0647 \u0647\u0634\u062F\u0627\u0631:"),t(),i(8,"select",6),be("ngModelChange",function(v){return Ce(u.threshold,v)||(u.threshold=v),v}),h("ngModelChange",function(){return u.loadLowStockProducts()}),i(9,"option",7),o(10,"5 \u0639\u062F\u062F"),t(),i(11,"option",7),o(12,"10 \u0639\u062F\u062F"),t(),i(13,"option",7),o(14,"20 \u0639\u062F\u062F"),t(),i(15,"option",7),o(16,"50 \u0639\u062F\u062F"),t()()()(),c(17,Ar,3,0,"div",8)(18,Ir,6,0,"div",9)(19,wr,25,2,"div",10),t()),r&2&&(d(8),xe("ngModel",u.threshold),d(),l("value",5),d(2),l("value",10),d(2),l("value",20),d(2),l("value",50),d(2),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.products.length===0),d(),l("ngIf",!u.isLoading&&u.products.length>0))},dependencies:[E,ne,L,I,D,N,Ae,ae,se,ue,V,ye,j],encapsulation:2});let n=a;return n})();var Vt=(()=>{let a=class a{constructor(e){this.http=e,this.auditUrl=`${$.API_URL}admin/AuditLogs`}getAuditLogs(e){let r=new me;return Object.keys(e).forEach(u=>{let m=e[u];m!=null&&m!==""&&(r=r.set(u,m.toString()))}),this.http.get(this.auditUrl,{params:r})}};a.\u0275fac=function(r){return new(r||a)(Q(X))},a.\u0275prov=K({token:a,factory:a.\u0275fac,providedIn:"root"});let n=a;return n})();function Mr(n,a){n&1&&(i(0,"div",20)(1,"span",21),o(2,"sync"),t()())}function Pr(n,a){n&1&&(i(0,"div",22)(1,"p",23),o(2,"\u0647\u06CC\u0686 \u06AF\u0632\u0627\u0631\u0634\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."),t()())}function Lr(n,a){if(n&1&&(i(0,"tr",31)(1,"td",32),o(2),b(3,"date"),t(),i(4,"td",33),o(5),t(),i(6,"td",33)(7,"span",34),b(8,"statusClass"),o(9),t()(),i(10,"td",33),o(11),t(),i(12,"td",35),o(13),t(),i(14,"td",36),o(15),t()()),n&2){let s=a.$implicit;d(2),g(fe(3,7,s.timestamp,"yyyy/MM/dd HH:mm:ss")),d(3),g(s.userId||"\u0633\u06CC\u0633\u062A\u0645"),d(2),l("ngClass",A(8,10,s.eventType)),d(2),g(s.eventType),d(2),g(s.action),d(2),g(s.details),d(2),g(s.ipAddress)}}function Dr(n,a){if(n&1&&(i(0,"div",24)(1,"table",25)(2,"thead",26)(3,"tr",27)(4,"th",28),o(5,"\u062A\u0627\u0631\u06CC\u062E"),t(),i(6,"th",28),o(7,"\u06A9\u0627\u0631\u0628\u0631"),t(),i(8,"th",28),o(9,"\u0646\u0648\u0639 \u0631\u0648\u06CC\u062F\u0627\u062F"),t(),i(10,"th",28),o(11,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t(),i(12,"th",28),o(13,"\u062C\u0632\u0626\u06CC\u0627\u062A"),t(),i(14,"th",28),o(15,"IP"),t()()(),i(16,"tbody",29),c(17,Lr,16,12,"tr",30),t()()()),n&2){let s=f();d(17),l("ngForOf",s.logs)}}var Tt=(()=>{let a=class a{constructor(e,r){this.AdminAuditService=e,this.notificationService=r,this.logs=[],this.pagination=null,this.isLoading=!0,this.currentPage=1,this.filterForm=new ee({userId:new w(null),eventType:new w(null),fromDate:new w(null),toDate:new w(null)})}ngOnInit(){this.loadLogs()}loadLogs(e=1){this.isLoading=!0,this.currentPage=e;let r=Me({page:e,pageSize:20},this.filterForm.value);r.fromDate&&(r.fromDate=new Date(r.fromDate).toISOString()),r.toDate&&(r.toDate=new Date(r.toDate).toISOString()),this.AdminAuditService.getAuditLogs(r).pipe(O(()=>this.isLoading=!1)).subscribe({next:u=>{this.logs=u.items??[],this.pagination=u},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u06AF\u0632\u0627\u0631\u0634\u0627\u062A","error")}})}applyFilters(){this.loadLogs(1)}clearFilters(){this.filterForm.reset(),this.loadLogs(1)}};a.\u0275fac=function(r){return new(r||a)(p(Vt),p(k))},a.\u0275cmp=F({type:a,selectors:[["app-audit-logs"]],decls:30,vars:4,consts:[[1,"space-y-6"],[1,"text-2xl","font-bold","text-foreground"],[1,"card","p-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4",3,"ngSubmit","formGroup"],[1,"space-y-2"],["for","userId",1,"text-sm","font-medium"],["type","number","id","userId","formControlName","userId","placeholder","\u0645\u062B\u0627\u0644: 123",1,"input"],["for","eventType",1,"text-sm","font-medium"],["type","text","id","eventType","formControlName","eventType","placeholder","\u0645\u062B\u0627\u0644: UserAction",1,"input"],["for","fromDate",1,"text-sm","font-medium"],["type","date","id","fromDate","formControlName","fromDate",1,"input"],["for","toDate",1,"text-sm","font-medium"],["type","date","id","toDate","formControlName","toDate",1,"input"],[1,"flex","items-end","gap-2","col-span-full"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-outline",3,"click"],[1,"card","overflow-hidden"],["class","flex justify-center items-center p-10",4,"ngIf"],["class","text-center p-10",4,"ngIf"],["class","w-full overflow-x-auto",4,"ngIf"],[1,"flex","justify-center","items-center","p-10"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"text-center","p-10"],[1,"text-muted-foreground"],[1,"w-full","overflow-x-auto"],[1,"w-full","caption-bottom","text-base","min-w-[900px]"],[1,"[&_tr]:border-b","[&_tr]:border-border"],[1,"border-b","transition-colors","hover:bg-muted"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground"],[1,"[&_tr:last-child]:border-0"],["class","border-b transition-colors hover:bg-muted/50",4,"ngFor","ngForOf"],[1,"border-b","transition-colors","hover:bg-muted/50"],[1,"p-4","align-middle","whitespace-nowrap","text-sm"],[1,"p-4","align-middle"],[1,"px-2","py-1","text-xs","font-semibold","rounded-full",3,"ngClass"],[1,"p-4","align-middle","text-sm","text-muted-foreground","max-w-xs","truncate"],[1,"p-4","align-middle","text-sm"]],template:function(r,u){r&1&&(i(0,"div",0)(1,"h1",1),o(2,"\u06AF\u0632\u0627\u0631\u0634\u0627\u062A \u0633\u06CC\u0633\u062A\u0645\u06CC (Audit Logs)"),t(),i(3,"div",2)(4,"form",3),h("ngSubmit",function(){return u.applyFilters()}),i(5,"div",4)(6,"label",5),o(7,"\u0634\u0646\u0627\u0633\u0647 \u06A9\u0627\u0631\u0628\u0631"),t(),x(8,"input",6),t(),i(9,"div",4)(10,"label",7),o(11,"\u0646\u0648\u0639 \u0631\u0648\u06CC\u062F\u0627\u062F"),t(),x(12,"input",8),t(),i(13,"div",4)(14,"label",9),o(15,"\u0627\u0632 \u062A\u0627\u0631\u06CC\u062E"),t(),x(16,"input",10),t(),i(17,"div",4)(18,"label",11),o(19,"\u062A\u0627 \u062A\u0627\u0631\u06CC\u062E"),t(),x(20,"input",12),t(),i(21,"div",13)(22,"button",14),o(23,"\u0627\u0639\u0645\u0627\u0644 \u0641\u06CC\u0644\u062A\u0631"),t(),i(24,"button",15),h("click",function(){return u.clearFilters()}),o(25,"\u067E\u0627\u06A9 \u06A9\u0631\u062F\u0646"),t()()()(),i(26,"div",16),c(27,Mr,3,0,"div",17)(28,Pr,3,0,"div",18)(29,Dr,18,1,"div",19),t()()),r&2&&(d(4),l("formGroup",u.filterForm),d(23),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.logs.length===0),d(),l("ngIf",!u.isLoading&&u.logs.length>0))},dependencies:[E,ne,L,I,W,q,R,oe,V,B,z,H,ge,Ie],encapsulation:2});let n=a;return n})();var He=(()=>{let a=class a{constructor(e){this.http=e,this.baseUrl=`${$.API_URL}admin/shipping-methods`}getShippingMethods(e=!1){return this.http.get(`${this.baseUrl}?includeDeleted=${e}`)}getShippingMethodById(e){return this.http.get(`${this.baseUrl}/${e}`)}createShippingMethod(e){return this.http.post(this.baseUrl,e)}updateShippingMethod(e,r){return this.http.put(`${this.baseUrl}/${e}`,r)}deleteShippingMethod(e){return this.http.delete(`${this.baseUrl}/${e}`)}restoreShippingMethod(e){return this.http.post(`${this.baseUrl}/${e}/restore`,{})}};a.\u0275fac=function(r){return new(r||a)(Q(X))},a.\u0275prov=K({token:a,factory:a.\u0275fac,providedIn:"root"});let n=a;return n})();var Nr=n=>["/admin/shipping-methods/edit",n];function Or(n,a){n&1&&(i(0,"div",10)(1,"span",11),o(2,"sync"),t()())}function Ur(n,a){n&1&&(i(0,"div",12)(1,"p",13),o(2,"\u0647\u06CC\u0686 \u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."),t()())}function Vr(n,a){if(n&1){let s=P();i(0,"button",31),h("click",function(){_(s);let r=f().$implicit,u=f(2);return y(u.deleteMethod(r.id))}),i(1,"span",28),o(2,"delete"),t()()}}function Tr(n,a){if(n&1){let s=P();i(0,"button",32),h("click",function(){_(s);let r=f().$implicit,u=f(2);return y(u.restoreMethod(r.id))}),i(1,"span",28),o(2,"restore_from_trash"),t()()}}function jr(n,a){if(n&1&&(i(0,"tr",22)(1,"td",23),o(2),t(),i(3,"td",24),o(4),b(5,"number"),t(),i(6,"td",24)(7,"span",25),b(8,"statusClass"),o(9),t()(),i(10,"td",26)(11,"a",27)(12,"span",28),o(13,"edit"),t()(),c(14,Vr,3,0,"button",29)(15,Tr,3,0,"button",30),t()()),n&2){let s=a.$implicit;le("opacity-50",s.isDeleted),d(2),g(s.name),d(2),C("",A(5,9,s.cost)," \u062A\u0648\u0645\u0627\u0646"),d(3),l("ngClass",A(8,11,s.isDeleted?"\u062D\u0630\u0641 \u0634\u062F\u0647":s.isActive?"\u0641\u0639\u0627\u0644":"\u063A\u06CC\u0631\u0641\u0639\u0627\u0644")),d(2),C(" ",s.isDeleted?"\u062D\u0630\u0641 \u0634\u062F\u0647":s.isActive?"\u0641\u0639\u0627\u0644":"\u063A\u06CC\u0631\u0641\u0639\u0627\u0644"," "),d(2),l("routerLink",G(13,Nr,s.id)),d(3),l("ngIf",!s.isDeleted),d(),l("ngIf",s.isDeleted)}}function Gr(n,a){if(n&1&&(i(0,"div",14)(1,"table",15)(2,"thead",16)(3,"tr",17)(4,"th",18),o(5,"\u0646\u0627\u0645"),t(),i(6,"th",18),o(7,"\u0647\u0632\u06CC\u0646\u0647"),t(),i(8,"th",18),o(9,"\u0648\u0636\u0639\u06CC\u062A"),t(),i(10,"th",19),o(11,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t()()(),i(12,"tbody",20),c(13,jr,16,15,"tr",21),t()()()),n&2){let s=f();d(13),l("ngForOf",s.methods)}}var Gt=(()=>{let a=class a{constructor(e,r){this.adminShippingMethodService=e,this.notificationService=r,this.methods=[],this.isLoading=!0,this.includeDeleted=!1}ngOnInit(){this.loadMethods()}loadMethods(){this.isLoading=!0,this.adminShippingMethodService.getShippingMethods(this.includeDeleted).pipe(O(()=>this.isLoading=!1)).subscribe({next:e=>{this.methods=e},error:e=>{this.notificationService.show(e?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0631\u0648\u0634\u200C\u0647\u0627\u06CC \u0627\u0631\u0633\u0627\u0644","error")}})}deleteMethod(e){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F")&&this.adminShippingMethodService.deleteShippingMethod(e).subscribe({next:()=>{this.notificationService.show("\u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadMethods()},error:r=>this.notificationService.show(r?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641","error")})}restoreMethod(e){this.adminShippingMethodService.restoreShippingMethod(e).subscribe({next:()=>{this.notificationService.show("\u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0628\u0627\u0632\u06CC\u0627\u0628\u06CC \u0634\u062F","success"),this.loadMethods()},error:r=>this.notificationService.show(r?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0632\u06CC\u0627\u0628\u06CC","error")})}};a.\u0275fac=function(r){return new(r||a)(p(He),p(k))},a.\u0275cmp=F({type:a,selectors:[["app-shipping-method-list"]],decls:13,vars:4,consts:[[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-foreground"],["routerLink","/admin/shipping-methods/new",1,"btn","btn-primary","btn-sm"],[1,"card","overflow-hidden"],[1,"flex","items-center","p-4","border-b"],["type","checkbox","id","includeDeleted",1,"checkbox",3,"ngModelChange","ngModel"],["for","includeDeleted",1,"ms-2","font-medium","cursor-pointer"],["class","flex justify-center items-center p-10",4,"ngIf"],["class","text-center p-10",4,"ngIf"],["class","w-full overflow-x-auto",4,"ngIf"],[1,"flex","justify-center","items-center","p-10"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"text-center","p-10"],[1,"text-muted-foreground"],[1,"w-full","overflow-x-auto"],[1,"w-full","caption-bottom","text-base","min-w-[600px]"],[1,"[&_tr]:border-b","[&_tr]:border-border"],[1,"border-b","transition-colors","hover:bg-muted"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground","w-40"],[1,"[&_tr:last-child]:border-0"],["class","border-b transition-colors hover:bg-muted/50",3,"opacity-50",4,"ngFor","ngForOf"],[1,"border-b","transition-colors","hover:bg-muted/50"],[1,"p-4","align-middle","font-medium","text-foreground"],[1,"p-4","align-middle"],[1,"px-2","py-1","text-xs","font-semibold","rounded-full",3,"ngClass"],[1,"p-4","align-middle","space-x-2","space-x-reverse","whitespace-nowrap"],["title","\u0648\u06CC\u0631\u0627\u06CC\u0634",1,"btn","btn-ghost","btn-sm","btn-icon",3,"routerLink"],[1,"material-icons","text-base"],["class","btn btn-ghost btn-sm btn-icon text-destructive hover:bg-destructive/10","title","\u062D\u0630\u0641",3,"click",4,"ngIf"],["class","btn btn-ghost btn-sm btn-icon text-success hover:bg-success/10","title","\u0628\u0627\u0632\u06CC\u0627\u0628\u06CC",3,"click",4,"ngIf"],["title","\u062D\u0630\u0641",1,"btn","btn-ghost","btn-sm","btn-icon","text-destructive","hover:bg-destructive/10",3,"click"],["title","\u0628\u0627\u0632\u06CC\u0627\u0628\u06CC",1,"btn","btn-ghost","btn-sm","btn-icon","text-success","hover:bg-success/10",3,"click"]],template:function(r,u){r&1&&(i(0,"div",0)(1,"h1",1),o(2,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u0631\u0648\u0634\u200C\u0647\u0627\u06CC \u0627\u0631\u0633\u0627\u0644"),t(),i(3,"a",2),o(4,"\u0627\u0641\u0632\u0648\u062F\u0646 \u0631\u0648\u0634 \u062C\u062F\u06CC\u062F"),t()(),i(5,"div",3)(6,"div",4)(7,"input",5),be("ngModelChange",function(v){return Ce(u.includeDeleted,v)||(u.includeDeleted=v),v}),h("ngModelChange",function(){return u.loadMethods()}),t(),i(8,"label",6),o(9,"\u0646\u0645\u0627\u06CC\u0634 \u062D\u0630\u0641 \u0634\u062F\u0647\u200C\u0647\u0627"),t()(),c(10,Or,3,0,"div",7)(11,Ur,3,0,"div",8)(12,Gr,14,1,"div",9),t()),r&2&&(d(7),xe("ngModel",u.includeDeleted),d(3),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.methods.length===0),d(),l("ngIf",!u.isLoading&&u.methods.length>0))},dependencies:[E,ne,L,I,D,N,Ae,he,V,ye,j,Ie],encapsulation:2});let n=a;return n})();function $r(n,a){n&1&&(i(0,"div",19),o(1," \u0646\u0627\u0645 \u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 \u0627\u0644\u0632\u0627\u0645\u06CC \u0627\u0633\u062A. "),t())}function Rr(n,a){n&1&&(i(0,"div",19),o(1," \u0647\u0632\u06CC\u0646\u0647 \u0627\u0644\u0632\u0627\u0645\u06CC \u0648 \u0628\u0627\u06CC\u062F \u06CC\u06A9 \u0639\u062F\u062F \u0645\u062B\u0628\u062A \u0628\u0627\u0634\u062F. "),t())}function Br(n,a){n&1&&(i(0,"div",20),x(1,"input",21),i(2,"label",22),o(3,"\u0641\u0639\u0627\u0644"),t()())}function qr(n,a){n&1&&(i(0,"span",23),o(1,"sync"),t())}var tt=(()=>{let a=class a{constructor(e,r,u,m,v){this.fb=e,this.route=r,this.router=u,this.adminShippingMethodService=m,this.notificationService=v,this.isEditMode=!1,this.methodId=null,this.isSubmitting=!1,this.shippingForm=this.fb.group({name:["",[S.required,S.maxLength(100)]],cost:[0,[S.required,S.min(0)]],description:["",S.maxLength(500)],estimatedDeliveryTime:["",S.maxLength(100)],isActive:[!0],rowVersion:[null]})}ngOnInit(){let e=this.route.snapshot.paramMap.get("id");e&&(this.methodId=+e,this.isEditMode=!0,this.loadMethodData())}loadMethodData(){this.methodId&&this.adminShippingMethodService.getShippingMethodById(this.methodId).subscribe({next:e=>{this.shippingForm.patchValue(e)},error:e=>{this.notificationService.show(e?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A","error"),this.router.navigate(["/admin/shipping-methods"])}})}onSubmit(){if(this.shippingForm.invalid){this.shippingForm.markAllAsTouched();return}this.isSubmitting=!0;let e=this.shippingForm.getRawValue();(this.isEditMode&&this.methodId?this.adminShippingMethodService.updateShippingMethod(this.methodId,e):this.adminShippingMethodService.createShippingMethod(e)).pipe(O(()=>this.isSubmitting=!1)).subscribe({next:()=>{this.notificationService.show(`\u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A ${this.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"} \u0634\u062F`,"success"),this.router.navigate(["/admin/shipping-methods"])},error:u=>{u.status===409?(this.notificationService.show("\u0627\u06CC\u0646 \u0631\u06A9\u0648\u0631\u062F \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627 \u0635\u0641\u062D\u0647 \u0631\u0627 \u0631\u0641\u0631\u0634 \u06A9\u0646\u06CC\u062F.","error"),this.loadMethodData()):this.notificationService.show(u?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062B\u0628\u062A \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A","error")}})}};a.\u0275fac=function(r){return new(r||a)(p(Ge),p(te),p(ce),p(He),p(k))},a.\u0275cmp=F({type:a,selectors:[["app-shipping-method-form"]],decls:31,vars:8,consts:[[1,"max-w-2xl","mx-auto"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold"],["routerLink","/admin/shipping-methods",1,"btn","btn-outline","btn-sm"],[1,"card","p-6","space-y-6",3,"ngSubmit","formGroup"],[1,"space-y-2"],["for","name",1,"font-medium"],["type","text","id","name","formControlName","name","placeholder","\u0645\u062B\u0627\u0644: \u067E\u0633\u062A \u067E\u06CC\u0634\u062A\u0627\u0632","maxlength","100",1,"input"],["class","text-xs text-destructive pt-1",4,"ngIf"],["for","cost",1,"font-medium"],["type","number","id","cost","formControlName","cost","placeholder","\u0647\u0632\u06CC\u0646\u0647 \u0628\u0647 \u062A\u0648\u0645\u0627\u0646",1,"input"],["for","estimatedDeliveryTime",1,"font-medium"],["type","text","id","estimatedDeliveryTime","formControlName","estimatedDeliveryTime","placeholder","\u0645\u062B\u0627\u0644: \u06F2 \u062A\u0627 \u06F4 \u0631\u0648\u0632 \u06A9\u0627\u0631\u06CC","maxlength","100",1,"input"],["for","description",1,"font-medium"],["id","description","formControlName","description","rows","3","placeholder","\u062A\u0648\u0636\u06CC\u062D\u0627\u062A \u062A\u06A9\u0645\u06CC\u0644\u06CC","maxlength","500",1,"input"],["class","flex items-center pt-2",4,"ngIf"],[1,"flex","rtl:justify-start","pt-4","border-t"],["type","submit",1,"btn","btn-primary","btn-md",3,"disabled"],["class","material-icons animate-spin me-2",4,"ngIf"],[1,"text-xs","text-destructive","pt-1"],[1,"flex","items-center","pt-2"],["type","checkbox","id","isActive","formControlName","isActive",1,"checkbox"],["for","isActive",1,"ms-2","font-medium","cursor-pointer"],[1,"material-icons","animate-spin","me-2"]],template:function(r,u){if(r&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),o(3),t(),i(4,"a",3),o(5,"\u0628\u0627\u0632\u06AF\u0634\u062A"),t()(),i(6,"form",4),h("ngSubmit",function(){return u.onSubmit()}),i(7,"div",5)(8,"label",6),o(9,"\u0646\u0627\u0645 \u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644"),t(),x(10,"input",7),c(11,$r,2,0,"div",8),t(),i(12,"div",5)(13,"label",9),o(14,"\u0647\u0632\u06CC\u0646\u0647"),t(),x(15,"input",10),c(16,Rr,2,0,"div",8),t(),i(17,"div",5)(18,"label",11),o(19,"\u0632\u0645\u0627\u0646 \u062A\u062E\u0645\u06CC\u0646\u06CC \u062A\u062D\u0648\u06CC\u0644"),t(),x(20,"input",12),t(),i(21,"div",5)(22,"label",13),o(23,"\u062A\u0648\u0636\u06CC\u062D\u0627\u062A (\u0627\u062E\u062A\u06CC\u0627\u0631\u06CC)"),t(),x(24,"textarea",14),t(),c(25,Br,4,0,"div",15),i(26,"div",16)(27,"button",17),c(28,qr,2,0,"span",18),i(29,"span"),o(30),t()()()()()),r&2){let m,v;d(3),C("",u.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"," \u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644"),d(3),l("formGroup",u.shippingForm),d(5),l("ngIf",((m=u.shippingForm.get("name"))==null?null:m.invalid)&&((m=u.shippingForm.get("name"))==null?null:m.touched)),d(5),l("ngIf",((v=u.shippingForm.get("cost"))==null?null:v.invalid)&&((v=u.shippingForm.get("cost"))==null?null:v.touched)),d(9),l("ngIf",u.isEditMode),d(2),l("disabled",u.shippingForm.invalid||u.isSubmitting),d(),l("ngIf",u.isSubmitting),d(2),g(u.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u0630\u062E\u06CC\u0631\u0647...":"\u0630\u062E\u06CC\u0631\u0647")}},dependencies:[E,I,W,q,R,oe,he,V,B,Fe,z,H,D,N],encapsulation:2});let n=a;return n})();var uo=[{path:"",component:bt,canActivate:[ht],children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:_t},{path:"products",component:Dt},{path:"products/new",component:et},{path:"products/edit/:id",component:et},{path:"products/bulk-price-update",component:Ot},{path:"products/low-stock",component:Ut},{path:"categories",component:At},{path:"categories/new",component:Xe},{path:"categories/edit/:id",component:Xe},{path:"category-groups",component:Et},{path:"category-groups/new",component:Ye},{path:"category-groups/edit/:id",component:Ye},{path:"orders",component:Mt},{path:"orders/:id",component:wt},{path:"order-statuses",component:Pt},{path:"order-statuses/new",component:Ze},{path:"order-statuses/edit/:id",component:Ze},{path:"users",component:Nt},{path:"audit-logs",component:Tt},{path:"shipping-methods",component:Gt},{path:"shipping-methods/new",component:tt},{path:"shipping-methods/edit/:id",component:tt}]}];export{uo as ADMIN_ROUTES};
