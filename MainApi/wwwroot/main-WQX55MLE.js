import{a as bt}from"./chunk-7BCLYGTV.js";import{c as K,d as M,f as C,g as Te,h as R}from"./chunk-DUKSTT3K.js";import{a as Ct}from"./chunk-LE2SIANP.js";import{a as he}from"./chunk-GNQTMVA5.js";import{a as P}from"./chunk-5W5LZDWP.js";import{y as wt}from"./chunk-7OLIJ6IO.js";import{b as Z}from"./chunk-GTLAKDJZ.js";import{a as E}from"./chunk-I4Q63QBA.js";import{a as X}from"./chunk-WNMS36QR.js";import{A as gt,B as vt,C as yt,D as xt,E as _t,F as W,b as me,c as J,d as $,e as pe,f as rt,i as A,j as F,k as ot,l as st,m as at,n as ut,o as Ie,p as fe,q as ct,r as lt,s as dt,t as mt,u as pt,v as ft,x as ht,y as q,z as G}from"./chunk-KEVVMOUP.js";import{Ab as u,Bb as D,Ca as ze,Cb as I,D as Pe,Da as ie,E as Oe,Ea as c,Ia as Ye,Ja as Ge,Jb as et,Ka as We,Kb as Se,M as te,Mb as ke,N as b,Na as Xe,Nb as j,O as T,Oa as Ke,Ob as H,P as Le,Pa as h,Pb as tt,Q as Ne,Qa as Ze,Qb as it,Sb as nt,T as z,Ua as k,W as De,X as N,Y as w,Z as je,Za as g,ba as v,bb as Qe,ca as y,da as ae,ea as ue,f as O,fa as $e,fb as Je,g as ee,ga as Ve,gb as l,hb as o,ia as He,ib as s,j as U,jb as x,k as S,la as Ue,n as oe,nb as le,ob as de,pb as _,ra as ce,sb as f,tb as p,u as B,v as se,va as Y,w as Re,wa as Be,x as Fe,xb as qe,y as Q,z as L,zb as ne}from"./chunk-RYHSS54R.js";import{a as Ce,b as we}from"./chunk-4CLCTAJ7.js";var St=[{path:"",loadComponent:()=>import("./chunk-S77MUALB.js").then(e=>e.Home)},{path:"auth",loadChildren:()=>import("./chunk-PGXEE5RD.js").then(e=>e.AUTH_ROUTES)},{path:"cart",loadComponent:()=>import("./chunk-KIUUXW6B.js").then(e=>e.CartPage),canActivate:[he]},{path:"category",loadChildren:()=>import("./chunk-SFS6HH27.js").then(e=>e.CATEGORY_ROUTES)},{path:"products",loadChildren:()=>import("./chunk-W7NCWMBN.js").then(e=>e.PRODUCTS_ROUTES)},{path:"discounts",loadChildren:()=>import("./chunk-NFGHER76.js").then(e=>e.DISCOUNT_ROUTES)},{path:"checkout",loadChildren:()=>import("./chunk-KUB3EHTZ.js").then(e=>e.CHECKOUT_ROUTES),canActivate:[he]},{path:"payment",loadChildren:()=>import("./chunk-WDWN466L.js").then(e=>e.PAYMENT_ROUTES)},{path:"dashboard",loadChildren:()=>import("./chunk-NFJBP6HT.js").then(e=>e.DASHBOARD_ROUTES),canActivate:[he]},{path:"admin",loadChildren:()=>import("./chunk-ZBN2Z6TK.js").then(e=>e.ADMIN_ROUTES),canActivate:[bt]},{path:"**",redirectTo:"",pathMatch:"full"}];var zt="@",Yt=(()=>{class e{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=w($e);loadingSchedulerFn=w(Gt,{optional:!0});_engine;constructor(r,i,n,a,d){this.doc=r,this.delegate=i,this.zone=n,this.animationType=a,this.moduleImpl=d}ngOnDestroy(){this._engine?.flush()}loadImpl(){let r=()=>this.moduleImpl??import("./chunk-O43BTRNM.js").then(n=>n),i;return this.loadingSchedulerFn?i=this.loadingSchedulerFn(r):i=r(),i.catch(n=>{throw new Ne(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:a})=>{this._engine=n(this.animationType,this.doc);let d=new a(this.delegate,this._engine,this.zone);return this.delegate=d,d})}createRenderer(r,i){let n=this.delegate.createRenderer(r,i);if(n.\u0275type===0)return n;typeof n.throwOnSyntheticProps=="boolean"&&(n.throwOnSyntheticProps=!1);let a=new Ae(n);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(d=>{let m=d.createRenderer(r,i);a.use(m),this.scheduler??=this.injector.get(Ue,null,{optional:!0}),this.scheduler?.notify(10)}).catch(d=>{a.use(n)}),a}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(r){this._engine?.flush(),this.delegate.componentReplaced?.(r)}static \u0275fac=function(i){Ze()};static \u0275prov=z({token:e,factory:e.\u0275fac})}return e})(),Ae=class{delegate;replay=[];\u0275type=1;constructor(t){this.delegate=t}use(t){if(this.delegate=t,this.replay!==null){for(let r of this.replay)r(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,r){return this.delegate.createElement(t,r)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,r){this.delegate.appendChild(t,r)}insertBefore(t,r,i,n){this.delegate.insertBefore(t,r,i,n)}removeChild(t,r,i,n){this.delegate.removeChild(t,r,i,n)}selectRootElement(t,r){return this.delegate.selectRootElement(t,r)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,r,i,n){this.delegate.setAttribute(t,r,i,n)}removeAttribute(t,r,i){this.delegate.removeAttribute(t,r,i)}addClass(t,r){this.delegate.addClass(t,r)}removeClass(t,r){this.delegate.removeClass(t,r)}setStyle(t,r,i,n){this.delegate.setStyle(t,r,i,n)}removeStyle(t,r,i){this.delegate.removeStyle(t,r,i)}setProperty(t,r,i){this.shouldReplay(r)&&this.replay.push(n=>n.setProperty(t,r,i)),this.delegate.setProperty(t,r,i)}setValue(t,r){this.delegate.setValue(t,r)}listen(t,r,i,n){return this.shouldReplay(r)&&this.replay.push(a=>a.listen(t,r,i,n)),this.delegate.listen(t,r,i,n)}shouldReplay(t){return this.replay!==null&&t.startsWith(zt)}},Gt=new De("");function kt(e="animations"){return Ye("NgAsyncAnimations"),je([{provide:Xe,useFactory:(t,r,i)=>new Yt(t,r,i,e),deps:[Ve,ot,We]},{provide:Be,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var ge=!1,Ee=new ee(null),ve=()=>{if(typeof window>"u")return!1;let e=window.location.pathname.toLowerCase(),t=window.location.search.toLowerCase();return e.includes("/payment")||e.includes("/callback")||t.includes("authority=")||t.includes("status=")},Wt=e=>{let t=e.toLowerCase();return t.includes("/verify-payment")||t.includes("/orders/verify-payment")||t.includes("payment")},ye=(e,t)=>{let r=P.getAuthToken();if(r&&!e.url.includes("/refresh"))return e.clone({setHeaders:{Authorization:`Bearer ${r}`}});if(!t.isAuthenticated()){let i=Z.getGuestToken();if(i)return e.clone({setHeaders:{"X-Guest-Token":i}})}return e},Xt=(e,t,r,i)=>ge?Ee.pipe(Q(n=>n!=null),Pe(1),te(()=>t(ye(e,r)))):(ge=!0,Ee.next(null),r.refreshToken().pipe(te(n=>(ge=!1,n&&n.token?(Ee.next(n.token),t(ye(e,r))):(ve()||(r.logout(),i.clearLocalCart()),S(()=>new Error("Session expired."))))),L(n=>(ge=!1,ve()||(r.logout(!1),i.clearLocalCart()),S(()=>n))))),It=(e,t)=>{let r=w(P),i=w(Z),n=e.url.startsWith(X.API_URL),a=e;return ve()||Wt(e.url)?(n&&(a=ye(e,r)),a=a.clone({withCredentials:!0})):n&&(a=ye(e,r),a=a.clone({withCredentials:!0})),t(a).pipe(L(d=>{let m=e.url.includes("/login")||e.url.includes("/refresh")||e.url.includes("/verify-otp");return d instanceof Ie&&d.status===401&&m?(ve()||r.logout(!1),S(()=>d)):d instanceof Ie&&d.status===401&&n?Xt(e,t,r,i):S(()=>d)}))};var Kt=e=>{let t=e.url.toLowerCase(),r=e.headers.has("X-Payment-Verification");return t.includes("/verify-payment")||t.includes("/payment")||t.includes("/checkout")||r},Zt=()=>{if(typeof window>"u")return!1;let e=window.location.pathname.toLowerCase(),t=window.location.search.toLowerCase();return e.includes("/payment/callback")||e.includes("/payment/success")||e.includes("/payment/failure")||e.includes("/payment")||t.includes("authority=")||t.includes("status=")},Tt=(e,t)=>{let r=w(E),i=w(P);return t(e).pipe(L(n=>{let a=e.url.includes("/login")||e.url.includes("/refresh")||e.url.includes("/verify-otp");if(Kt(e)||Zt())return S(()=>n);if(n.status===401&&a)return i.logout(!1),S(()=>n);if(n.status===401&&!a)return S(()=>n);let m="\u06CC\u06A9 \u062E\u0637\u0627\u06CC \u067E\u06CC\u0634\u200C\u0628\u06CC\u0646\u06CC \u0646\u0634\u062F\u0647 \u0631\u062E \u062F\u0627\u062F.  \u0644\u0637\u0641\u0627 \u062F\u0648\u0628\u0627\u0631\u0647 \u062A\u0644\u0627\u0634 \u06A9\u0646\u06CC\u062F.";return n.status===429?m="\u062A\u0639\u062F\u0627\u062F \u062F\u0631\u062E\u0648\u0627\u0633\u062A\u200C\u0647\u0627\u06CC \u0634\u0645\u0627 \u0628\u06CC\u0634 \u0627\u0632 \u062D\u062F \u0645\u062C\u0627\u0632 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627\u064B \u0686\u0646\u062F \u0644\u062D\u0638\u0647 \u0628\u0639\u062F \u062F\u0648\u0628\u0627\u0631\u0647 \u062A\u0644\u0627\u0634 \u06A9\u0646\u06CC\u062F.":n.status===409?n.error?.message?.includes("modified by another user")||n.error?.message?.includes("Cart was updated")?m="\u0627\u06CC\u0646 \u0631\u06A9\u0648\u0631\u062F \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627\u064B \u0635\u0641\u062D\u0647 \u0631\u0627 \u0631\u0641\u0631\u0634 \u06A9\u0646\u06CC\u062F.":m=n.error?.message||"\u0627\u0637\u0644\u0627\u0639\u0627\u062A \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A.  \u0644\u0637\u0641\u0627\u064B \u0635\u0641\u062D\u0647 \u0631\u0627 \u0631\u0641\u0631\u0634 \u06A9\u0631\u062F\u0647 \u0648 \u062F\u0648\u0628\u0627\u0631\u0647 \u062A\u0644\u0627\u0634 \u06A9\u0646\u06CC\u062F.":n.error instanceof ErrorEvent?m=`\u062E\u0637\u0627: ${n.error.message}`:n.error&&typeof n.error.message=="string"?m=n.error.message:typeof n.error=="string"&&n.error.length<200?m=n.error:n.statusText&&(m=`\u062E\u0637\u0627: ${n.statusText}`),r.show(m,"error"),S(()=>n)}))};var At=(e,t)=>{let r=w(E);return t(e).pipe(L(i=>i.status===429?Qt(i,e,t,r):S(()=>i)))};function Qt(e,t,r,i){let n=e.headers.get("Retry-After"),a=parseInt(n||"60",10),d=a*1e3,m=n?`\u062F\u0631\u062E\u0648\u0627\u0633\u062A\u200C\u0647\u0627\u06CC \u0634\u0645\u0627 \u0628\u06CC\u0634 \u0627\u0632 \u062D\u062F \u0645\u062C\u0627\u0632 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627 ${a} \u062B\u0627\u0646\u06CC\u0647 \u0635\u0628\u0631 \u06A9\u0646\u06CC\u062F.`:"\u062F\u0631\u062E\u0648\u0627\u0633\u062A\u200C\u0647\u0627\u06CC \u0634\u0645\u0627 \u0628\u06CC\u0634 \u0627\u0632 \u062D\u062F \u0645\u062C\u0627\u0632 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627 \u0686\u0646\u062F \u0644\u062D\u0638\u0647 \u0635\u0628\u0631 \u06A9\u0646\u06CC\u062F.";return i.show(m,"error"),typeof window<"u"&&!window.navigator.onLine&&console.warn("[Rate Limit] Network appears to be offline"),console.warn("[Rate Limit] Too many requests. Retrying after:",a,"seconds"),se(d).pipe(T(()=>{console.info("[Rate Limit] Retrying request..."),i.show("\u062F\u0631 \u062D\u0627\u0644 \u062A\u0644\u0627\u0634 \u0645\u062C\u062F\u062F...","info")}),te(()=>r(t)),L(be=>be.status===429?(i.show("\u062F\u0631\u062E\u0648\u0627\u0633\u062A \u0634\u0645\u0627 \u0647\u0645\u0686\u0646\u0627\u0646 \u0645\u062D\u062F\u0648\u062F \u0627\u0633\u062A. \u0644\u0637\u0641\u0627 \u0628\u0639\u062F\u0627\u064B \u062A\u0644\u0627\u0634 \u06A9\u0646\u06CC\u062F.","error"),S(()=>be)):S(()=>be)))}function Jt(e){let t=e&&(e.hasOwnProperty("items")||e.hasOwnProperty("Items")),r=e&&(e.hasOwnProperty("totalItems")||e.hasOwnProperty("TotalItems")||e.hasOwnProperty("totalCount")||e.hasOwnProperty("TotalCount"));return t&&r}var Et=(e,t)=>t(e).pipe(oe(r=>{if(r instanceof ut&&r.body&&Jt(r.body)){let i=r.body,n={items:i.items??i.Items??[],totalItems:i.totalItems??i.TotalItems??i.totalCount??i.TotalCount??0,page:i.page??i.Page??i.pageNumber??i.PageNumber??1,pageSize:i.pageSize??i.PageSize??10,totalPages:i.totalPages??i.TotalPages??1};return r.clone({body:n})}return r}));var Mt=(e,t)=>{let r=w(ct);if(!(qt(e.method)&&ei(e.url)&&!ti(e.url)))return t(e);let n=r.getToken();if(n){let a=e.clone({headers:e.headers.set("X-XSRF-TOKEN",n)});return t(a)}return t(e)};function qt(e){return["POST","PUT","PATCH","DELETE"].includes(e.toUpperCase())}function ei(e){return e.startsWith(X.API_URL)||e.startsWith("/api")}function ti(e){return["/api/Users/login","/api/Users/verify-otp","/api/Users/refresh"].some(r=>e.includes(r))}var Rt=(()=>{let t=class t{constructor(i,n){this.http=i,this.platformId=n,this.apiUrl=`${X.API_URL}Security/csrf-token`,this.tokenFetched=!1}isPaymentPage(){if(!F(this.platformId))return!1;let i=window.location.pathname.toLowerCase(),n=window.location.search.toLowerCase();return i.includes("/payment")||i.includes("/callback")||n.includes("authority=")||n.includes("status=")}initializeCsrfToken(){return F(this.platformId)?this.tokenFetched?U(void 0):this.isPaymentPage()?(console.log("[CSRF] Skipping token fetch on payment page"),U(void 0)):this.http.get(this.apiUrl).pipe(T(i=>{i&&i.token&&(this.tokenFetched=!0,console.log("[CSRF] Token initialized successfully"))}),L(i=>(console.warn("[CSRF] Token fetch failed:",i),U(void 0))),oe(()=>{})):U(void 0)}refreshCsrfToken(){return this.isPaymentPage()?U(void 0):(this.tokenFetched=!1,this.initializeCsrfToken())}};t.\u0275fac=function(n){return new(n||t)(N(fe),N(Y))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function ni(e){return()=>{if(typeof window<"u"){let t=window.location.pathname.toLowerCase(),r=window.location.search.toLowerCase();if(t.includes("/payment")||r.includes("authority=")||r.includes("status="))return U(void 0)}return e.initializeCsrfToken()}}var Me=class{constructor(){this.notificationService=w(E)}isPaymentPage(){if(typeof window>"u")return!1;let t=window.location.pathname.toLowerCase(),r=window.location.search.toLowerCase();return t.includes("/payment")||t.includes("/checkout")||r.includes("authority=")||r.includes("status=")}handleError(t){if(t?.message?.includes("Loading chunk")||t?.message?.includes("ChunkLoadError")||t?.message?.includes("Failed to fetch dynamically imported module")){console.warn("Chunk loading error detected:",t.message),typeof window<"u"&&(sessionStorage.getItem("chunk_reload_attempted")?(sessionStorage.removeItem("chunk_reload_attempted"),this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0635\u0641\u062D\u0647. \u0644\u0637\u0641\u0627\u064B \u0635\u0641\u062D\u0647 \u0631\u0627 \u0631\u0641\u0631\u0634 \u06A9\u0646\u06CC\u062F.","error")):(sessionStorage.setItem("chunk_reload_attempted","true"),window.location.reload()));return}console.error("Unhandled error:",t),!t.rejection&&t.status!==401&&!this.isPaymentPage()&&this.notificationService.show("\u06CC\u06A9 \u062E\u0637\u0627\u06CC \u063A\u06CC\u0631\u0645\u0646\u062A\u0638\u0631\u0647 \u0631\u062E \u062F\u0627\u062F. \u0644\u0637\u0641\u0627\u064B \u062F\u0648\u0628\u0627\u0631\u0647 \u062A\u0644\u0627\u0634 \u06A9\u0646\u06CC\u062F.","error")}},Ft={providers:[nt({eventCoalescing:!0}),yt(St,_t(),xt(vt)),lt(pt(),dt([It,At,Tt,Et,Mt]),mt({headerName:"X-XSRF-TOKEN",cookieName:"XSRF-TOKEN"})),kt(),{provide:He,useClass:Me},{provide:Qe,useFactory:ni,deps:[Rt],multi:!0}]};var Pt=(()=>{let t=class t{constructor(i){this.http=i,this.apiUrl=`${X.API_URL}Notifications`,this.notificationsSubject=new ee([]),this.notifications$=this.notificationsSubject.asObservable(),this.unreadCountSubject=new ee(0),this.unreadCount$=this.unreadCountSubject.asObservable()}getNotifications(i=!1,n=1,a=20){let d=new at().set("unreadOnly",i.toString()).set("page",n.toString()).set("pageSize",a.toString());return this.http.get(this.apiUrl,{params:d}).pipe(T(m=>{this.notificationsSubject.next(m)}))}getUnreadCount(){return this.http.get(`${this.apiUrl}/count`).pipe(T(i=>{this.unreadCountSubject.next(i.count)}))}markAsRead(i){return this.http.patch(`${this.apiUrl}/${i}/read`,{}).pipe(T(()=>{this.getUnreadCount().subscribe();let n=this.notificationsSubject.value.map(a=>a.id===i?we(Ce({},a),{isRead:!0}):a);this.notificationsSubject.next(n)}))}markAllAsRead(){return this.http.patch(`${this.apiUrl}/read-all`,{}).pipe(T(()=>{this.unreadCountSubject.next(0);let i=this.notificationsSubject.value.map(n=>we(Ce({},n),{isRead:!0}));this.notificationsSubject.next(i)}))}deleteNotification(i){return this.http.delete(`${this.apiUrl}/${i}`).pipe(T(()=>{let n=this.notificationsSubject.value.filter(a=>a.id!==i);this.notificationsSubject.next(n),this.getUnreadCount().subscribe()}))}};t.\u0275fac=function(n){return new(n||t)(N(fe))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function oi(e,t){if(e&1&&(o(0,"span",5),u(1),s()),e&2){let r=t.ngIf;ne("hidden",r===0),c(),I(" ",r>9?"9+":r," ")}}function si(e,t){e&1&&(o(0,"div",16),x(1,"span",17),s())}function ai(e,t){e&1&&(o(0,"div",18)(1,"span",19),u(2,"notifications_off"),s(),o(3,"p",20),u(4,"\u0647\u06CC\u0686 \u0627\u0639\u0644\u0627\u0646 \u062C\u062F\u06CC\u062F\u06CC \u0646\u062F\u0627\u0631\u06CC\u062F."),s()())}function ui(e,t){e&1&&x(0,"div",29)}function ci(e,t){if(e&1){let r=_();o(0,"div",21)(1,"a",22),f("click",function(){let n=v(r).$implicit,a=p(2);return y(a.handleNotificationClick(n))}),o(2,"div",23),g(3,ui,1,0,"div",24),s(),o(4,"div",25)(5,"p",26),u(6),s(),o(7,"p",27),u(8),s(),o(9,"span",28),u(10),j(11,"date"),s()()()()}if(e&2){let r=t.$implicit;c(3),l("ngIf",!r.isRead),c(2),ne("text-foreground",!r.isRead)("text-muted-foreground",r.isRead),c(),I(" ",r.title," "),c(2),I(" ",r.message," "),c(2),I(" ",tt(11,8,r.createdAt,"short")," ")}}function li(e,t){if(e&1){let r=_();o(0,"div",6)(1,"div",7)(2,"h3",8),u(3,"\u0627\u0639\u0644\u0627\u0646\u200C\u0647\u0627"),s(),o(4,"button",9),j(5,"async"),f("click",function(){v(r);let n=p();return y(n.markAllAsRead())}),u(6," \u062E\u0648\u0627\u0646\u062F\u0645 \u0647\u0645\u0647 "),s()(),o(7,"div",10),g(8,si,2,0,"div",11)(9,ai,5,0,"div",12),j(10,"async"),g(11,ci,12,11,"div",13),j(12,"async"),s(),o(13,"div",14)(14,"a",15),u(15," \u0645\u0634\u0627\u0647\u062F\u0647 \u0647\u0645\u0647 \u0627\u0639\u0644\u0627\u0646\u200C\u0647\u0627 "),s()()()}if(e&2){let r,i=p();l("@slideFade",void 0),c(4),l("disabled",H(5,5,i.unreadCount$)===0),c(4),l("ngIf",i.isLoading),c(),l("ngIf",!i.isLoading&&((r=H(10,7,i.notifications$))==null?null:r.length)===0),c(2),l("ngForOf",H(12,9,i.notifications$))}}var Ot=(()=>{let t=class t{constructor(i,n,a){this.notificationService=i,this.elementRef=n,this.router=a,this.isMenuOpen=!1,this.isLoading=!1,this.destroy$=new O,this.notifications$=this.notificationService.notifications$,this.unreadCount$=this.notificationService.unreadCount$}ngOnInit(){this.notificationService.getUnreadCount().pipe(b(this.destroy$)).subscribe()}toggleMenu(){this.isMenuOpen=!this.isMenuOpen,this.isMenuOpen&&this.loadNotifications()}loadNotifications(){this.isLoading=!0,this.notificationService.getNotifications().pipe(b(this.destroy$)).subscribe(()=>{this.isLoading=!1})}markAllAsRead(){this.notificationService.markAllAsRead().pipe(b(this.destroy$)).subscribe()}handleNotificationClick(i){i.isRead||this.notificationService.markAsRead(i.id).pipe(b(this.destroy$)).subscribe(),i.actionUrl&&this.router.navigateByUrl(i.actionUrl),this.isMenuOpen=!1}onDocumentClick(i){this.elementRef.nativeElement.contains(i.target)||(this.isMenuOpen=!1)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};t.\u0275fac=function(n){return new(n||t)(h(Pt),h(ce),h(q))},t.\u0275cmp=k({type:t,selectors:[["app-notification-bell"]],hostBindings:function(n,a){n&1&&f("click",function(m){return a.onDocumentClick(m)},ie)},decls:7,vars:4,consts:[[1,"relative",3,"click"],["aria-label","Notifications",1,"btn","btn-ghost","btn-icon","relative","rounded-full","hover:bg-accent",3,"click"],[1,"material-icons-outlined","text-xl","text-foreground/80"],["class","absolute top-1.5 right-1.5 flex h-4 w-4 items-center justify-center rounded-full bg-destructive text-[10px] font-bold text-white ring-2 ring-background animate-in zoom-in",3,"hidden",4,"ngIf"],["class","dropdown-content end-0 sm:end-auto sm:start-1/2 sm:-translate-x-1/2 mt-2 w-80 md:w-96 origin-top-right",4,"ngIf"],[1,"absolute","top-1.5","right-1.5","flex","h-4","w-4","items-center","justify-center","rounded-full","bg-destructive","text-[10px]","font-bold","text-white","ring-2","ring-background","animate-in","zoom-in"],[1,"dropdown-content","end-0","sm:end-auto","sm:start-1/2","sm:-translate-x-1/2","mt-2","w-80","md:w-96","origin-top-right"],[1,"flex","items-center","justify-between","p-4","border-b","border-border","bg-muted/30"],[1,"font-semibold","text-sm"],[1,"text-xs","text-primary","hover:underline","disabled:opacity-50","disabled:no-underline",3,"click","disabled"],[1,"max-h-[400px]","overflow-y-auto","scrollbar-thin"],["class","flex justify-center p-8",4,"ngIf"],["class","p-8 text-center",4,"ngIf"],["class","divide-y divide-border",4,"ngFor","ngForOf"],[1,"p-2","bg-muted/30","border-t","border-border","text-center"],["routerLink","/dashboard/notifications",1,"text-xs","text-muted-foreground","hover:text-foreground","transition-colors","block","w-full","py-1"],[1,"flex","justify-center","p-8"],[1,"spinner","text-primary"],[1,"p-8","text-center"],[1,"material-icons-outlined","text-4xl","text-muted-foreground/50","mb-2"],[1,"text-sm","text-muted-foreground"],[1,"divide-y","divide-border"],[1,"flex","items-start","gap-3","p-4","hover:bg-accent/50","transition-colors","cursor-pointer","relative",3,"click"],[1,"flex-shrink-0","mt-1"],["class","w-2.5 h-2.5 rounded-full bg-primary",4,"ngIf"],[1,"flex-1","space-y-1"],[1,"text-sm","font-medium","leading-none"],[1,"text-xs","text-muted-foreground","leading-relaxed","line-clamp-2"],[1,"text-[10px]","text-muted-foreground/70","block","pt-1"],[1,"w-2.5","h-2.5","rounded-full","bg-primary"]],template:function(n,a){n&1&&(o(0,"div",0),f("click",function(m){return a.onDocumentClick(m)},ie),o(1,"button",1),f("click",function(){return a.toggleMenu()}),o(2,"span",2),u(3,"notifications"),s(),g(4,oi,2,3,"span",3),j(5,"async"),s(),g(6,li,16,11,"div",4),s()),n&2&&(c(4),l("ngIf",H(5,2,a.unreadCount$)),c(2),l("ngIf",a.isMenuOpen))},dependencies:[A,J,$,W,G,pe,rt],encapsulation:2,data:{animation:[K("slideFade",[R(":enter",[C({opacity:0,transform:"translateY(-10px)"}),M("150ms ease-out",C({opacity:1,transform:"translateY(0)"}))]),R(":leave",[M("150ms ease-in",C({opacity:0,transform:"translateY(-10px)"}))])])]}});let e=t;return e})();var di=e=>["/category",e],mi=e=>["/products/category-group",e];function pi(e,t){if(e&1){let r=_();o(0,"li")(1,"button",5),f("mouseenter",function(){let n=v(r).$implicit,a=p();return y(a.setActiveCategory(n.id))}),o(2,"span",6),u(3),s(),o(4,"span",7),u(5," chevron_left "),s()()()}if(e&2){let r=t.$implicit,i=p();c(),l("ngClass",i.activeCategoryId===r.id?"bg-background text-primary font-bold shadow-sm":"text-muted-foreground hover:bg-background/50 hover:text-foreground"),c(2),D(r.title),c(),l("ngClass",i.activeCategoryId===r.id?"text-primary":"opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0")}}function fi(e,t){if(e&1){let r=_();o(0,"a",17),f("click",function(){v(r);let n=p(3);return y(n.onItemClick())}),x(1,"span",18),u(2),s()}if(e&2){let r=t.$implicit;l("routerLink",Se(2,mi,r.id)),c(2),I(" ",r.title," ")}}function hi(e,t){if(e&1){let r=_();o(0,"div",9)(1,"div",10)(2,"h3",11),x(3,"span",12),u(4),s(),o(5,"a",13),f("click",function(){v(r);let n=p(2);return y(n.onItemClick())}),u(6," \u0645\u0634\u0627\u0647\u062F\u0647 \u0647\u0645\u0647 "),o(7,"span",14),u(8,"arrow_back"),s()()(),o(9,"div",15),g(10,fi,3,4,"a",16),s()()}if(e&2){let r=p().$implicit;c(4),I(" ",r.title," "),c(),l("routerLink",Se(3,di,r.id)),c(5),l("ngForOf",r.groups)}}function gi(e,t){if(e&1&&(le(0),g(1,hi,11,5,"div",8),de()),e&2){let r=t.$implicit,i=p();c(),l("ngIf",i.activeCategoryId===r.id)}}var Lt=(()=>{let t=class t{constructor(i){this.categoryService=i,this.categories=[],this.activeCategoryId=null,this.itemClicked=new Ge}ngOnInit(){this.categoryService.getCategoryHierarchy().subscribe({next:i=>{this.categories=i,this.categories.length>0&&(this.activeCategoryId=this.categories[0].id)}})}setActiveCategory(i){this.activeCategoryId=i}onItemClick(){this.itemClicked.emit()}};t.\u0275fac=function(n){return new(n||t)(h(Ct))},t.\u0275cmp=k({type:t,selectors:[["app-category-group-menu"]],outputs:{itemClicked:"itemClicked"},decls:6,vars:2,consts:[[1,"flex","w-full","min-h-[400px]","bg-popover","text-popover-foreground","rounded-xl","overflow-hidden","shadow-inner","border","border-border",3,"click"],[1,"w-1/4","border-l","border-border","bg-muted/30","py-4","overflow-y-auto"],[1,"space-y-1","px-2"],[4,"ngFor","ngForOf"],[1,"w-3/4","p-8","bg-background","overflow-y-auto"],[1,"w-full","text-right","px-4","py-3","text-sm","rounded-lg","transition-all","duration-200","flex","items-center","justify-between","group",3,"mouseenter","ngClass"],[1,"truncate"],[1,"material-icons","text-base","transition-transform","duration-200",3,"ngClass"],["class","animate-fade-in space-y-6",4,"ngIf"],[1,"animate-fade-in","space-y-6"],[1,"flex","items-center","justify-between","pb-4","border-b","border-border"],[1,"font-bold","text-xl","text-foreground","flex","items-center","gap-2"],[1,"w-1.5","h-6","bg-primary","rounded-full"],[1,"text-xs","font-medium","text-primary","hover:text-primary/80","flex","items-center","gap-1","transition-colors",3,"click","routerLink"],[1,"material-icons","text-sm"],[1,"grid","grid-cols-3","gap-x-6","gap-y-3"],["class","text-sm text-muted-foreground hover:text-primary hover:translate-x-1 transition-all duration-200 flex items-center gap-2 py-1.5",3,"routerLink","click",4,"ngFor","ngForOf"],[1,"text-sm","text-muted-foreground","hover:text-primary","hover:translate-x-1","transition-all","duration-200","flex","items-center","gap-2","py-1.5",3,"click","routerLink"],[1,"w-1","h-1","rounded-full","bg-border","group-hover:bg-primary","transition-colors"]],template:function(n,a){n&1&&(o(0,"div",0),f("click",function(m){return m.stopPropagation()}),o(1,"div",1)(2,"ul",2),g(3,pi,6,3,"li",3),s()(),o(4,"div",4),g(5,gi,2,1,"ng-container",3),s()()),n&2&&(c(3),l("ngForOf",a.categories),c(2),l("ngForOf",a.categories))},dependencies:[A,me,J,$,W,G],encapsulation:2});let e=t;return e})();var yi=()=>({exact:!0});function xi(e,t){if(e&1){let r=_();o(0,"div",30)(1,"div",31)(2,"app-category-group-menu",32),f("itemClicked",function(){v(r);let n=p();return y(n.closeCategoryMenu())}),s()()()}e&2&&l("@dropdownAnimation",void 0)}function _i(e,t){if(e&1){let r=_();o(0,"div",36)(1,"div",37),u(2),j(3,"async"),s(),o(4,"div",38)(5,"a",39),f("click",function(){v(r);let n=p(2);return y(n.closeMenu())}),o(6,"span",40),u(7,"dashboard"),s(),u(8," \u062F\u0627\u0634\u0628\u0648\u0631\u062F "),s(),o(9,"button",41),f("click",function(){v(r);let n=p(2);return y(n.logout())}),o(10,"span",40),u(11,"logout"),s(),u(12," \u062E\u0631\u0648\u062C "),s()()()}if(e&2){let r,i=p(2);l("@slideFade",void 0),c(2),I(" ",((r=H(3,2,i.userProfile$))==null?null:r.firstName)||"\u06A9\u0627\u0631\u0628\u0631"," \u0639\u0632\u06CC\u0632\u060C \u062E\u0648\u0634 \u0622\u0645\u062F\u06CC\u062F ")}}function bi(e,t){if(e&1){let r=_();le(0),x(1,"app-notification-bell"),o(2,"div",33)(3,"button",34),f("click",function(n){v(r);let a=p();return y(a.toggleMenu(n))}),o(4,"span",21),u(5,"person"),s()(),g(6,_i,13,4,"div",35),s(),de()}if(e&2){let r=p();c(6),l("ngIf",r.isMenuOpen)}}function Ci(e,t){e&1&&(o(0,"a",42),u(1," \u0648\u0631\u0648\u062F | \u062B\u0628\u062A\u200C\u0646\u0627\u0645 "),s(),o(2,"a",43)(3,"span",21),u(4,"login"),s()())}function wi(e,t){if(e&1&&(o(0,"span",44),u(1),s()),e&2){let r=t.ngIf;c(),I(" ",r>9?"9+":r," ")}}function Si(e,t){if(e&1){let r=_();o(0,"div",45),f("click",function(){v(r);let n=p();return y(n.isMobileMenuOpen=!1)}),s()}}function ki(e,t){if(e&1){let r=_();o(0,"a",52),f("click",function(){v(r);let n=p(2);return y(n.isMobileMenuOpen=!1)}),o(1,"span",53),u(2),s(),u(3),s()}if(e&2){let r=t.$implicit;l("routerLink",r.link),c(2),D(r.icon),c(),I(" ",r.title," ")}}function Ii(e,t){if(e&1){let r=_();o(0,"div",46)(1,"div",47)(2,"span",48),u(3,"\u0641\u0647\u0631\u0633\u062A"),s(),o(4,"button",49),f("click",function(){v(r);let n=p();return y(n.isMobileMenuOpen=!1)}),o(5,"span",21),u(6,"close"),s()()(),o(7,"nav",50),g(8,ki,4,3,"a",51),s()()}if(e&2){let r=p();c(8),l("ngForOf",r.mobileMenuItems)}}var Dt=(()=>{let t=class t{constructor(i,n,a,d,m){this.authService=i,this.cartService=n,this.elementRef=a,this.renderer=d,this.platformId=m,this.isMenuOpen=!1,this.isMobileMenuOpen=!1,this.isCategoryMenuOpen=!1,this.isScrolled=!1,this.isDarkMode=!1,this.destroy$=new O,this.mobileMenuItems=[{title:"\u062E\u0627\u0646\u0647",link:"/",icon:"home"},{title:"\u0645\u062D\u0635\u0648\u0644\u0627\u062A",link:"/products",icon:"storefront"},{title:"\u062A\u062E\u0641\u06CC\u0641\u200C\u0647\u0627",link:"/discounts",icon:"local_offer"}]}onWindowScroll(){this.isScrolled=window.scrollY>20}onDocumentClick(i){let n=this.elementRef.nativeElement.querySelector(".user-menu-container");n&&!n.contains(i.target)&&(this.isMenuOpen=!1)}ngOnInit(){this.isLoggedIn$=this.authService.isLoggedIn$,this.userProfile$=this.authService.userProfile$,this.cartItemCount$=this.cartService.cartItemCount$,this.isLoggedIn$.pipe(Oe(),b(this.destroy$)).subscribe(i=>{i?this.cartService.getCartItemsCount().subscribe():this.cartService.clearLocalCart()}),this.authService.isAuthenticated()&&this.cartService.getMyCart().subscribe(),this.initTheme()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}toggleMenu(i){i.stopPropagation(),this.isMenuOpen=!this.isMenuOpen}closeMenu(){this.isMenuOpen=!1}showCategoryMenu(){clearTimeout(this.hoverTimeout),this.isCategoryMenuOpen=!0}hideCategoryMenu(){this.hoverTimeout=setTimeout(()=>{this.isCategoryMenuOpen=!1},150)}closeCategoryMenu(){this.isCategoryMenuOpen=!1}logout(){this.closeMenu(),this.authService.logout()}initTheme(){if(F(this.platformId)){let i=localStorage.getItem("theme"),n=window.matchMedia("(prefers-color-scheme: dark)").matches;i==="dark"||!i&&n?(this.isDarkMode=!0,this.renderer.addClass(document.documentElement,"dark")):(this.isDarkMode=!1,this.renderer.removeClass(document.documentElement,"dark"))}}toggleTheme(){document.documentElement.classList.add("theme-transitioning"),this.isDarkMode=!this.isDarkMode,this.isDarkMode?(this.renderer.addClass(document.documentElement,"dark"),localStorage.setItem("theme","dark")):(this.renderer.removeClass(document.documentElement,"dark"),localStorage.setItem("theme","light")),setTimeout(()=>{document.documentElement.classList.remove("theme-transitioning")},300)}};t.\u0275fac=function(n){return new(n||t)(h(P),h(Z),h(ce),h(Ke),h(Y))},t.\u0275cmp=k({type:t,selectors:[["app-header"]],hostBindings:function(n,a){n&1&&f("scroll",function(){return a.onWindowScroll()},ze)("click",function(m){return a.onDocumentClick(m)},ie)},decls:46,vars:18,consts:[["loggedOut",""],[1,"sticky","top-0","z-50","w-full","border-b","border-border","bg-background/95","backdrop-blur","supports-[backdrop-filter]:bg-background/60","transition-all","duration-300","ease-in-out","h-16","flex","items-center"],[1,"container","flex","items-center","h-full","gap-4"],[1,"flex","items-center","lg:hidden"],["aria-label","\u0645\u0646\u0648",1,"btn","btn-ghost","btn-icon","active:scale-95","transition-transform",3,"click"],[1,"material-icons","text-2xl"],[1,"flex","items-center","gap-2","mr-auto","lg:mr-0"],["routerLink","/","aria-label","\u0628\u0627\u0632\u06AF\u0634\u062A \u0628\u0647 \u0635\u0641\u062D\u0647 \u0627\u0635\u0644\u06CC",1,"flex","items-center","gap-2","transition-transform","hover:scale-105","active:scale-95"],["src","/assets/icons/ledka-icon.jpg","alt","\u0644\u0648\u06AF\u0648 \u0641\u0631\u0648\u0634\u06AF\u0627\u0647","width","36","height","36",1,"h-9","w-auto","rounded-md","shadow-sm"],[1,"hidden","sm:inline-block","text-xl","font-bold","bg-gradient-to-r","from-primary","to-primary-600","bg-clip-text","text-transparent"],[1,"hidden","lg:flex","items-center","gap-1","text-sm","font-medium","mx-4"],["routerLink","/","routerLinkActive","bg-primary/10 text-primary",1,"nav-item",3,"routerLinkActiveOptions"],[1,"relative","h-full","flex","items-center","group",3,"mouseenter","mouseleave"],[1,"nav-item","group-hover:bg-accent","group-hover:text-accent-foreground"],[1,"material-icons","text-lg"],["class","absolute top-full right-0 w-[800px] pt-4",4,"ngIf"],["routerLink","/products","routerLinkActive","bg-primary/10 text-primary",1,"nav-item"],["routerLink","/discounts","routerLinkActive","bg-primary/10 text-primary",1,"nav-item","text-destructive"],[1,"flex-1"],[1,"flex","items-center","justify-end","gap-1","sm:gap-2"],[1,"btn","btn-ghost","btn-icon","hover:bg-accent","hover:text-accent-foreground",3,"click"],[1,"material-icons"],["aria-label","\u062C\u0633\u062A\u062C\u0648",1,"btn","btn-ghost","btn-icon","hidden","sm:flex","hover:bg-accent","hover:text-accent-foreground"],[1,"h-6","w-px","bg-border","mx-2","hidden","sm:block"],[4,"ngIf","ngIfElse"],["routerLink","/cart","aria-label","\u0633\u0628\u062F \u062E\u0631\u06CC\u062F",1,"relative","btn","btn-ghost","btn-icon","hover:bg-accent","hover:text-primary"],[1,"material-icons-outlined"],["class","absolute top-1 right-1 flex h-4 w-4 items-center justify-center rounded-full bg-primary text-[10px] font-bold text-primary-foreground ring-2 ring-background animate-in zoom-in",4,"ngIf"],["class","mobile-menu-overlay",3,"click",4,"ngIf"],["class","drawer drawer-left w-3/4 max-w-sm p-6 mobile-menu-sidebar",4,"ngIf"],[1,"absolute","top-full","right-0","w-[800px]","pt-4"],[1,"bg-popover","rounded-xl","overflow-hidden","shadow-dropdown","border","border-border"],[3,"itemClicked"],[1,"relative","user-menu-container","ml-1"],["aria-label","\u0645\u0646\u0648\u06CC \u06A9\u0627\u0631\u0628\u0631",1,"btn","btn-ghost","btn-icon","border","border-transparent","hover:border-border","hover:bg-accent",3,"click"],["class","dropdown-content left-0 mt-2 w-56 origin-top-left",4,"ngIf"],[1,"dropdown-content","left-0","mt-2","w-56","origin-top-left"],[1,"dropdown-header","border-b","border-border"],[1,"p-1"],["routerLink","/dashboard",1,"dropdown-item","rounded-md",3,"click"],[1,"material-icons-outlined","text-lg"],[1,"dropdown-item","rounded-md","text-destructive","hover:bg-destructive/10","hover:text-destructive",3,"click"],["routerLink","/auth",1,"btn","btn-primary","btn-sm","rounded-full","px-6","shadow-sm","hidden","md:inline-flex"],["routerLink","/auth","aria-label","\u0648\u0631\u0648\u062F",1,"btn","btn-ghost","btn-icon","md:hidden","text-primary"],[1,"absolute","top-1","right-1","flex","h-4","w-4","items-center","justify-center","rounded-full","bg-primary","text-[10px]","font-bold","text-primary-foreground","ring-2","ring-background","animate-in","zoom-in"],[1,"mobile-menu-overlay",3,"click"],[1,"drawer","drawer-left","w-3/4","max-w-sm","p-6","mobile-menu-sidebar"],[1,"flex","items-center","justify-between","mb-8"],[1,"text-lg","font-bold","text-foreground"],[1,"btn","btn-ghost","btn-icon","-mr-2",3,"click"],[1,"flex","flex-col","gap-2"],["class","flex items-center gap-4 rounded-lg px-4 py-3 text-sm font-medium hover:bg-accent hover:text-accent-foreground transition-colors","routerLinkActive","bg-primary/10 text-primary",3,"routerLink","click",4,"ngFor","ngForOf"],["routerLinkActive","bg-primary/10 text-primary",1,"flex","items-center","gap-4","rounded-lg","px-4","py-3","text-sm","font-medium","hover:bg-accent","hover:text-accent-foreground","transition-colors",3,"click","routerLink"],[1,"material-icons-outlined","text-xl"]],template:function(n,a){if(n&1){let d=_();o(0,"header",1)(1,"div",2)(2,"div",3)(3,"button",4),f("click",function(){return v(d),y(a.isMobileMenuOpen=!a.isMobileMenuOpen)}),o(4,"span",5),u(5,"menu"),s()()(),o(6,"div",6)(7,"a",7),x(8,"img",8),o(9,"span",9),u(10,"\u0641\u0631\u0648\u0634\u06AF\u0627\u0647 \u0644\u0650\u062F\u06A9\u0627"),s()()(),o(11,"nav",10)(12,"a",11),u(13," \u062E\u0627\u0646\u0647 "),s(),o(14,"div",12),f("mouseenter",function(){return v(d),y(a.showCategoryMenu())})("mouseleave",function(){return v(d),y(a.hideCategoryMenu())}),o(15,"button",13)(16,"span",14),u(17,"category"),s(),u(18," \u062F\u0633\u062A\u0647 \u0628\u0646\u062F\u06CC \u0645\u062D\u0635\u0648\u0644\u0627\u062A "),s(),g(19,xi,3,1,"div",15),s(),o(20,"a",16),u(21," \u0645\u062D\u0635\u0648\u0644\u0627\u062A "),s(),o(22,"a",17)(23,"span",14),u(24,"local_offer"),s(),u(25," \u062A\u062E\u0641\u06CC\u0641\u200C\u0647\u0627 "),s()(),x(26,"div",18),o(27,"div",19)(28,"button",20),f("click",function(){return v(d),y(a.toggleTheme())}),o(29,"span",21),u(30),s()(),o(31,"button",22)(32,"span",21),u(33,"search"),s()(),x(34,"div",23),g(35,bi,7,1,"ng-container",24),j(36,"async"),g(37,Ci,5,0,"ng-template",null,0,it),o(39,"a",25)(40,"span",26),u(41,"shopping_cart"),s(),g(42,wi,2,1,"span",27),j(43,"async"),s()()(),g(44,Si,1,0,"div",28)(45,Ii,9,1,"div",29),s()}if(n&2){let d=qe(38);ne("shadow-md",a.isScrolled)("bg-background/80",a.isScrolled),c(12),l("routerLinkActiveOptions",et(17,yi)),c(7),l("ngIf",a.isCategoryMenuOpen),c(9),Je("aria-label",a.isDarkMode?"\u062A\u063A\u06CC\u06CC\u0631 \u0628\u0647 \u062D\u0627\u0644\u062A \u0631\u0648\u0634\u0646":"\u062A\u063A\u06CC\u06CC\u0631 \u0628\u0647 \u062D\u0627\u0644\u062A \u062A\u0627\u0631\u06CC\u06A9"),c(2),D(a.isDarkMode?"light_mode":"dark_mode"),c(5),l("ngIf",H(36,13,a.isLoggedIn$))("ngIfElse",d),c(7),l("ngIf",H(43,15,a.cartItemCount$)),c(2),l("ngIf",a.isMobileMenuOpen),c(),l("ngIf",a.isMobileMenuOpen)}},dependencies:[A,J,$,W,G,gt,Ot,Lt,pe],encapsulation:2,data:{animation:[K("slideFade",[R(":enter",[C({opacity:0,transform:"translateY(-10px)"}),M("150ms ease-out",C({opacity:1,transform:"translateY(0)"}))]),R(":leave",[M("150ms ease-in",C({opacity:0,transform:"translateY(-10px)"}))])]),K("dropdownAnimation",[R(":enter",[C({opacity:0,transform:"translateY(10px)"}),M("200ms ease-out",C({opacity:1,transform:"translateY(0)"}))]),R(":leave",[M("150ms ease-in",C({opacity:0,transform:"translateY(10px)"}))])])]}});let e=t;return e})();var $t=(()=>{let t=class t{constructor(i){this.notificationService=i,this.newsletterEmail="",this.currentYear=new Date().getFullYear()}subscribeNewsletter(){if(this.newsletterEmail){if(!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(this.newsletterEmail)){this.notificationService.show("\u0644\u0637\u0641\u0627 \u06CC\u06A9 \u0627\u06CC\u0645\u06CC\u0644 \u0645\u0639\u062A\u0628\u0631 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F","error");return}this.notificationService.show("\u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062F\u0631 \u062E\u0628\u0631\u0646\u0627\u0645\u0647 \u0639\u0636\u0648 \u0634\u062F\u06CC\u062F","success"),this.newsletterEmail=""}else this.notificationService.show("\u0644\u0637\u0641\u0627 \u0627\u06CC\u0645\u06CC\u0644 \u062E\u0648\u062F \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F","error")}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}};t.\u0275fac=function(n){return new(n||t)(h(E))},t.\u0275cmp=k({type:t,selectors:[["app-footer"]],decls:68,vars:1,consts:[[1,"relative","mt-24"],[1,"wave-divider","text-muted/30","dark:text-muted/10","absolute","top-0","left-0","right-0","-translate-y-[99%]","z-10","w-full"],["viewBox","0 0 1200 120","preserveAspectRatio","none"],["d","M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z"],[1,"bg-muted/30","dark:bg-muted/10","pt-16","pb-8","border-t","border-border"],[1,"container"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-12","mb-12"],[1,"space-y-6"],["routerLink","/",1,"flex","items-center","gap-3","group"],["src","/assets/icons/ledka-icon.jpg","alt","Ledka Logo",1,"w-12","h-12","rounded-xl","shadow-sm","transition-transform","group-hover:scale-105"],[1,"text-2xl","font-black","text-foreground","tracking-tight"],[1,"text-sm","text-muted-foreground","leading-7","text-justify"],[1,"flex","gap-2"],["href","#","aria-label","Instagram",1,"btn","btn-icon","btn-ghost","hover:bg-primary","hover:text-primary-foreground","transition-all","duration-200"],["fill","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["d","M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"],["href","#","aria-label","Twitter",1,"btn","btn-icon","btn-ghost","hover:bg-primary","hover:text-primary-foreground","transition-all","duration-200"],["d","M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"],[1,"space-y-4"],[1,"font-bold","text-foreground"],[1,"space-y-2","text-sm","text-muted-foreground"],["routerLink","/products",1,"hover:text-primary","transition-colors","block","py-1"],["routerLink","/discounts",1,"hover:text-primary","transition-colors","block","py-1"],["routerLink","/blog",1,"hover:text-primary","transition-colors","block","py-1"],["routerLink","/about",1,"hover:text-primary","transition-colors","block","py-1"],["href","#",1,"hover:text-primary","transition-colors","block","py-1"],[1,"grid","grid-cols-2","gap-4"],[1,"card","bg-background","p-2","flex","items-center","justify-center","aspect-square","hover:shadow-md","transition-shadow"],[1,"text-xs","text-muted-foreground/50"],[1,"border-t","border-border/50","pt-8","flex","flex-col","md:flex-row","justify-between","items-center","gap-4","text-xs","text-muted-foreground"],[1,"font-mono","dir-ltr","opacity-50","hover:opacity-100","transition-opacity"]],template:function(n,a){n&1&&(o(0,"div",0)(1,"div",1),ae(),o(2,"svg",2),x(3,"path",3),s()(),ue(),o(4,"footer",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"a",8),x(9,"img",9),o(10,"span",10),u(11,"\u0644\u0650\u062F\u06A9\u0627"),s()(),o(12,"p",11),u(13," \u062A\u062C\u0631\u0628\u0647 \u062E\u0631\u06CC\u062F \u0622\u0646\u0644\u0627\u06CC\u0646 \u0645\u0637\u0645\u0626\u0646 \u0628\u0627 \u06AF\u0627\u0631\u0627\u0646\u062A\u06CC \u0627\u0635\u0627\u0644\u062A \u06A9\u0627\u0644\u0627. \u0645\u0627 \u062F\u0631 \u0644\u0650\u062F\u06A9\u0627 \u0645\u062A\u0639\u0647\u062F \u0628\u0647 \u0627\u0631\u0627\u0626\u0647 \u0628\u0647\u062A\u0631\u06CC\u0646 \u062E\u062F\u0645\u0627\u062A \u0648 \u0645\u062D\u0635\u0648\u0644\u0627\u062A \u0628\u0647 \u0634\u0645\u0627 \u0647\u0633\u062A\u06CC\u0645. "),s(),o(14,"div",12)(15,"a",13),ae(),o(16,"svg",14),x(17,"path",15),s()(),ue(),o(18,"a",16),ae(),o(19,"svg",14),x(20,"path",17),s()()()(),ue(),o(21,"div",18)(22,"h3",19),u(23,"\u062F\u0633\u062A\u0631\u0633\u06CC \u0633\u0631\u06CC\u0639"),s(),o(24,"ul",20)(25,"li")(26,"a",21),u(27,"\u0645\u062D\u0635\u0648\u0644\u0627\u062A"),s()(),o(28,"li")(29,"a",22),u(30,"\u062A\u062E\u0641\u06CC\u0641\u200C\u0647\u0627"),s()(),o(31,"li")(32,"a",23),u(33,"\u0628\u0644\u0627\u06AF"),s()(),o(34,"li")(35,"a",24),u(36,"\u062F\u0631\u0628\u0627\u0631\u0647 \u0645\u0627"),s()()()(),o(37,"div",18)(38,"h3",19),u(39,"\u062E\u062F\u0645\u0627\u062A \u0645\u0634\u062A\u0631\u06CC\u0627\u0646"),s(),o(40,"ul",20)(41,"li")(42,"a",25),u(43,"\u067E\u0631\u0633\u0634\u200C\u0647\u0627\u06CC \u0645\u062A\u062F\u0627\u0648\u0644"),s()(),o(44,"li")(45,"a",25),u(46,"\u0634\u0631\u0627\u06CC\u0637 \u0648 \u0642\u0648\u0627\u0646\u06CC\u0646"),s()(),o(47,"li")(48,"a",25),u(49,"\u062D\u0631\u06CC\u0645 \u062E\u0635\u0648\u0635\u06CC"),s()(),o(50,"li")(51,"a",25),u(52,"\u0631\u0648\u06CC\u0647 \u0628\u0627\u0632\u06AF\u0631\u062F\u0627\u0646\u062F\u0646 \u06A9\u0627\u0644\u0627"),s()()()(),o(53,"div",18)(54,"h3",19),u(55,"\u0646\u0645\u0627\u062F \u0627\u0639\u062A\u0645\u0627\u062F"),s(),o(56,"div",26)(57,"div",27)(58,"span",28),u(59,"ENAMAD"),s()(),o(60,"div",27)(61,"span",28),u(62,"SAMANDEHI"),s()()()()(),o(63,"div",29)(64,"p"),u(65),s(),o(66,"p",30),u(67,"Designed & Developed by Ledka Team "),s()()()()()),n&2&&(c(65),I("\u062A\u0645\u0627\u0645\u06CC \u062D\u0642\u0648\u0642 \u0628\u0631\u0627\u06CC \u0641\u0631\u0648\u0634\u06AF\u0627\u0647 \u0644\u0650\u062F\u06A9\u0627 \u0645\u062D\u0641\u0648\u0638 \u0627\u0633\u062A \xA9 ",a.currentYear))},dependencies:[W,G,wt,A],encapsulation:2});let e=t;return e})();var Ti=(e,t,r)=>({"toast-success":e,"toast-error":t,"toast-info":r}),Ai=(e,t,r)=>({"text-success":e,"text-destructive":t,"text-info":r});function Ei(e,t){if(e&1){let r=_();o(0,"div",1)(1,"div",2)(2,"span",3),u(3),s(),o(4,"p",4),u(5),s(),o(6,"button",5),f("click",function(){v(r);let n=p();return y(n.close())}),o(7,"span",6),u(8,"close"),s()()()()}if(e&2){let r=p();l("@slideInOut",void 0),c(),l("ngClass",ke(5,Ti,r.notification.type==="success",r.notification.type==="error",r.notification.type==="info")),c(),l("ngClass",ke(9,Ai,r.notification.type==="success",r.notification.type==="error",r.notification.type==="info")),c(),D(r.icon),c(2),D(r.notification.message)}}var Vt=(()=>{let t=class t{constructor(i){this.notificationService=i,this.notification=null}ngOnInit(){this.subscription=this.notificationService.notification$.subscribe(i=>{this.notification=i,this.timer&&clearTimeout(this.timer),i&&(this.timer=setTimeout(()=>{this.close()},5e3))})}ngOnDestroy(){this.subscription.unsubscribe(),this.timer&&clearTimeout(this.timer)}get notificationClass(){if(!this.notification)return"";switch(this.notification.type){case"success":return"bg-success text-success-foreground";case"error":return"bg-destructive text-destructive-foreground";case"info":default:return"bg-blue-500 text-white"}}get icon(){if(!this.notification)return"";switch(this.notification.type){case"success":return"check_circle";case"error":return"error";case"info":return"info";default:return"info"}}close(){this.notificationService.clear()}};t.\u0275fac=function(n){return new(n||t)(h(E))},t.\u0275cmp=k({type:t,selectors:[["app-notification"]],decls:1,vars:1,consts:[["class","fixed top-5 left-1/2 -translate-x-1/2 z-toast w-full max-w-md px-4",4,"ngIf"],[1,"fixed","top-5","left-1/2","-translate-x-1/2","z-toast","w-full","max-w-md","px-4"],[1,"toast","shadow-lg",3,"ngClass"],[1,"material-icons","text-xl",3,"ngClass"],[1,"text-sm","font-medium"],[1,"btn","btn-ghost","btn-icon","btn-sm","-my-2","ms-auto","rounded-full","hover:bg-black/5",3,"click"],[1,"material-icons","text-lg"]],template:function(n,a){n&1&&g(0,Ei,9,13,"div",0),n&2&&l("ngIf",a.notification)},dependencies:[A,me,$],encapsulation:2,data:{animation:[K("slideInOut",[Te("in",C({transform:"translate(-50%, 0)",opacity:1})),R("void => *",[C({transform:"translate(-50%, -100%)",opacity:0}),M("300ms ease-out")]),R("* => void",[M("300ms ease-in",C({transform:"translate(-50%, -100%)",opacity:0}))])])]}});let e=t;return e})();var _e=(()=>{let t=class t{constructor(i,n,a,d){this.authService=i,this.notificationService=n,this.router=a,this.platformId=d,this.INACTIVITY_TIMEOUT=1800*1e3,this.WARNING_TIME=300*1e3,this.CHECK_INTERVAL=60*1e3,this.lastActivityTime=Date.now(),this.destroy$=new O,this.isMonitoring=!1,this.warningShown=!1}isPaymentPage(){if(!F(this.platformId))return!1;let i=window.location.pathname.toLowerCase(),n=window.location.search.toLowerCase();return i.includes("/payment")||i.includes("/checkout")||i.includes("/callback")||n.includes("authority=")||n.includes("status=")}startSessionMonitoring(){if(!(!F(this.platformId)||this.isMonitoring)){if(this.isPaymentPage()){console.log("[Session] Skipping session monitoring on payment page");return}this.isMonitoring=!0,this.lastActivityTime=Date.now(),this.warningShown=!1,this.setupActivityListeners(),this.resetInactivityTimer(),this.startPeriodicCheck()}}stopSessionMonitoring(){console.log("[Session] Stopping session monitoring"),this.isMonitoring=!1,this.clearTimers(),this.warningShown=!1}setupActivityListeners(){if(!F(this.platformId))return;let i=[B(document,"mousemove"),B(document,"mousedown"),B(document,"keypress"),B(document,"scroll"),B(document,"touchstart"),B(document,"click")];Fe(...i).pipe(Le(1e4),b(this.destroy$)).subscribe(()=>{this.onUserActivity()}),B(document,"visibilitychange").pipe(b(this.destroy$)).subscribe(()=>{document.hidden||this.onUserActivity()})}onUserActivity(){!this.isMonitoring||this.isPaymentPage()||(this.lastActivityTime=Date.now(),this.warningShown=!1,this.resetInactivityTimer())}resetInactivityTimer(){this.clearTimers(),this.warningTimer=setTimeout(()=>{this.isPaymentPage()||this.showInactivityWarning()},this.INACTIVITY_TIMEOUT-this.WARNING_TIME),this.inactivityTimer=setTimeout(()=>{this.isPaymentPage()||this.handleSessionTimeout()},this.INACTIVITY_TIMEOUT)}startPeriodicCheck(){se(this.CHECK_INTERVAL,this.CHECK_INTERVAL).pipe(b(this.destroy$)).subscribe(()=>{if(!this.isMonitoring||this.isPaymentPage())return;let i=Date.now()-this.lastActivityTime;i>=this.INACTIVITY_TIMEOUT?this.handleSessionTimeout():i>=this.INACTIVITY_TIMEOUT-this.WARNING_TIME&&!this.warningShown&&this.showInactivityWarning()})}showInactivityWarning(){if(this.warningShown||!this.isMonitoring||this.isPaymentPage())return;this.warningShown=!0;let i=Math.floor(this.WARNING_TIME/6e4);this.notificationService.show(`\u0646\u0634\u0633\u062A \u0634\u0645\u0627 \u0628\u0647 \u062F\u0644\u06CC\u0644 \u0639\u062F\u0645 \u0641\u0639\u0627\u0644\u06CC\u062A ${i} \u062F\u0642\u06CC\u0642\u0647 \u062F\u06CC\u06AF\u0631 \u0645\u0646\u0642\u0636\u06CC \u0645\u06CC\u200C\u0634\u0648\u062F.  \u0628\u0631\u0627\u06CC \u0627\u062F\u0627\u0645\u0647\u060C \u0641\u0639\u0627\u0644\u06CC\u062A\u06CC \u0627\u0646\u062C\u0627\u0645 \u062F\u0647\u06CC\u062F. `,"info")}handleSessionTimeout(){!this.isMonitoring||this.isPaymentPage()||(this.stopSessionMonitoring(),this.notificationService.show("\u0646\u0634\u0633\u062A \u0634\u0645\u0627 \u0628\u0647 \u062F\u0644\u06CC\u0644 \u0639\u062F\u0645 \u0641\u0639\u0627\u0644\u06CC\u062A \u0645\u0646\u0642\u0636\u06CC \u0634\u062F. \u0644\u0637\u0641\u0627 \u0645\u062C\u062F\u062F\u0627 \u0648\u0627\u0631\u062F \u0634\u0648\u06CC\u062F.","info"),this.authService.logout(!0))}clearTimers(){this.inactivityTimer&&(clearTimeout(this.inactivityTimer),this.inactivityTimer=null),this.warningTimer&&(clearTimeout(this.warningTimer),this.warningTimer=null)}getRemainingTime(){let i=Date.now()-this.lastActivityTime;return Math.max(0,this.INACTIVITY_TIMEOUT-i)}getRemainingTimeFormatted(){let i=this.getRemainingTime(),n=Math.floor(i/6e4),a=Math.floor(i%6e4/1e3);return`${n}:${a.toString().padStart(2,"0")}`}extendSession(){this.isMonitoring&&(this.onUserActivity(),this.notificationService.show("\u0646\u0634\u0633\u062A \u0634\u0645\u0627 \u062A\u0645\u062F\u06CC\u062F \u0634\u062F","success"))}isSessionActive(){return this.isMonitoring&&this.authService.isAuthenticated()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.stopSessionMonitoring()}};t.\u0275fac=function(n){return new(n||t)(N(P),N(E),N(q),N(Y))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Mi(e,t){e&1&&(o(0,"span"),u(1,"\u062A\u0645\u062F\u06CC\u062F"),s())}function Ri(e,t){e&1&&x(0,"span",9)}function Fi(e,t){if(e&1){let r=_();o(0,"div",1)(1,"div",2)(2,"span",3),u(3,"schedule"),s(),o(4,"div")(5,"p",4),u(6,"\u0632\u0645\u0627\u0646 \u0628\u0627\u0642\u06CC\u0645\u0627\u0646\u062F\u0647 \u0646\u0634\u0633\u062A"),s(),o(7,"p",5),u(8),s()(),o(9,"button",6),f("click",function(){v(r);let n=p();return y(n.extendSession())}),g(10,Mi,2,0,"span",7)(11,Ri,1,0,"span",8),s()()()}if(e&2){let r=p();c(8),D(r.remainingTime),c(),l("disabled",r.isExtending),c(),l("ngIf",!r.isExtending),c(),l("ngIf",r.isExtending)}}var Ut=(()=>{let t=class t{constructor(i){this.sessionService=i,this.remainingTime="",this.showTimer=!1,this.isExtending=!1,this.destroy$=new O,this.SHOW_TIMER_THRESHOLD=300*1e3}ngOnInit(){Re(1e3).pipe(b(this.destroy$),Q(()=>this.sessionService.isSessionActive()),T(()=>{let i=this.sessionService.getRemainingTime();this.showTimer=i<this.SHOW_TIMER_THRESHOLD&&i>0,this.showTimer&&(this.remainingTime=this.sessionService.getRemainingTimeFormatted())})).subscribe()}extendSession(){this.isExtending=!0,this.sessionService.extendSession(),setTimeout(()=>{this.isExtending=!1},1e3)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};t.\u0275fac=function(n){return new(n||t)(h(_e))},t.\u0275cmp=k({type:t,selectors:[["app-session-timer"]],decls:1,vars:1,consts:[["class","fixed bottom-4 left-4 z-toast animate-fade-in-up",4,"ngIf"],[1,"fixed","bottom-4","left-4","z-toast","animate-fade-in-up"],[1,"toast","toast-warning","shadow-lg","border-warning/50"],[1,"material-icons","text-warning","text-xl"],[1,"text-xs","font-medium","text-foreground"],[1,"text-lg","font-bold","tabular-nums"],[1,"btn","btn-sm","btn-warning","ms-2",3,"click","disabled"],[4,"ngIf"],["class","spinner spinner-sm",4,"ngIf"],[1,"spinner","spinner-sm"]],template:function(n,a){n&1&&g(0,Fi,12,4,"div",0),n&2&&l("ngIf",a.showTimer)},dependencies:[A,$],encapsulation:2});let e=t;return e})();var Bt=(()=>{let t=class t{constructor(i,n,a,d,m){this.sessionService=i,this.authService=n,this.cartService=a,this.router=d,this.platformId=m,this.destroy$=new O}isPaymentPage(){if(!F(this.platformId))return!1;let i=window.location.pathname.toLowerCase(),n=window.location.search.toLowerCase();return i.includes("/payment")||i.includes("/callback")||n.includes("authority=")||n.includes("status=")}ngOnInit(){if(this.isPaymentPage()){console.log("[App] Payment page detected, skipping initialization");return}this.router.events.pipe(Q(i=>i instanceof ft),b(this.destroy$)).subscribe(i=>{let n=i.urlAfterRedirects.toLowerCase();(n.includes("/payment")||n.includes("/callback"))&&this.sessionService.stopSessionMonitoring()}),this.authService.isLoggedIn$.pipe(b(this.destroy$)).subscribe(i=>{i&&!this.isPaymentPage()?(this.sessionService.startSessionMonitoring(),this.cartService.getMyCart().subscribe()):this.isPaymentPage()||(this.sessionService.stopSessionMonitoring(),this.cartService.clearLocalCart())}),this.authService.isAuthenticated()&&!this.isPaymentPage()&&this.sessionService.startSessionMonitoring()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};t.\u0275fac=function(n){return new(n||t)(h(_e),h(P),h(Z),h(q),h(Y))},t.\u0275cmp=k({type:t,selectors:[["app-root"]],decls:9,vars:0,consts:[["href","#main-content",1,"skip-link"],[1,"flex","flex-col","min-h-screen","bg-background","font-sans","antialiased","selection:bg-primary","selection:text-primary-foreground"],["id","main-content",1,"flex-grow","animate-fade-in","scroll-mt-24"]],template:function(n,a){n&1&&(o(0,"a",0),u(1,"\u0628\u0631\u06AF\u0634\u062A \u0628\u0647 \u0645\u062D\u062A\u0648\u0627\u06CC \u0627\u0635\u0644\u06CC"),s(),x(2,"app-notification")(3,"app-session-timer"),o(4,"div",1),x(5,"app-header"),o(6,"main",2),x(7,"router-outlet"),s(),x(8,"app-footer"),s())},dependencies:[ht,Dt,$t,Vt,Ut],encapsulation:2});let e=t;return e})();st(Bt,Ft).catch(e=>console.error(e));
