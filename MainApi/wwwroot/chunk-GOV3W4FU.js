import{a as h}from"./chunk-YV2TEDS4.js";import{a as p}from"./chunk-NKWORGOE.js";import"./chunk-WNMS36QR.js";import{w as l,y as f}from"./chunk-PMZJQWMM.js";import{Ab as a,Bb as n,Cb as c,Ub as d,Y as r,db as m}from"./chunk-OU7FPMWK.js";import"./chunk-4CLCTAJ7.js";var x=(()=>{class i{constructor(){this.route=r(l),this.router=r(f),this.orderService=r(h),this.notification=r(p),this.statusMessage="\u062F\u0631 \u062D\u0627\u0644 \u0627\u0639\u062A\u0628\u0627\u0631\u0633\u0646\u062C\u06CC \u067E\u0631\u062F\u0627\u062E\u062A..."}ngOnInit(){let o=this.route.snapshot.queryParams,e=o.Authority,s=o.Status;if(!e||!s){this.router.navigate(["/payment/result"],{queryParams:{status:"failure",reason:"\u067E\u0627\u0631\u0627\u0645\u062A\u0631\u0647\u0627\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631"}});return}this.orderService.verifyPayment(e,s).subscribe({next:t=>{t.isVerified?(this.notification.show("\u067E\u0631\u062F\u0627\u062E\u062A \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u0646\u062C\u0627\u0645 \u0634\u062F","success"),this.router.navigate(["/payment/result"],{queryParams:{status:"success",refId:t.refId,orderId:t.orderId}})):(this.notification.show(t.message,"error"),this.router.navigate(["/payment/result"],{queryParams:{status:"failure",reason:t.message}}))},error:t=>{let u=t.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0627\u0631\u062A\u0628\u0627\u0637 \u0628\u0627 \u0633\u0631\u0648\u0631";this.notification.show(u,"error"),this.router.navigate(["/payment/result"],{queryParams:{status:"failure",reason:u}})}})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=m({type:i,selectors:[["app-payment-callback"]],decls:6,vars:0,consts:[[1,"flex","flex-col","items-center","justify-center","h-[60vh]","space-y-6"],[1,"relative","w-16","h-16"],[1,"absolute","inset-0","border-4","border-muted","rounded-full"],[1,"absolute","inset-0","border-4","border-primary","border-t-transparent","rounded-full","animate-spin"],[1,"text-lg","font-medium","text-foreground"]],template:function(e,s){e&1&&(a(0,"div",0)(1,"div",1),c(2,"div",2)(3,"div",3),n(),a(4,"p",4),d(5,"\u062F\u0631 \u062D\u0627\u0644 \u0628\u0631\u0631\u0633\u06CC \u0648\u0636\u0639\u06CC\u062A \u067E\u0631\u062F\u0627\u062E\u062A..."),n()())},encapsulation:2})}}return i})();export{x as PaymentCallbackComponent};
