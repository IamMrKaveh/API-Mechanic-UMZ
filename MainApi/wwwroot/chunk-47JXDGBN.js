import{a as Ee}from"./chunk-APFCOE5L.js";import{a as xt}from"./chunk-TFBKHAKF.js";import{a as $e}from"./chunk-ME4PHFVR.js";import{a as Ve}from"./chunk-UXBESS7U.js";import{a as Oe}from"./chunk-7WNAFBDV.js";import{a as _e}from"./chunk-A3OD476O.js";import"./chunk-Y6DY6YBM.js";import{A as Ae,B as H,a as he,b as $,c as _,d as T,e as R,f as te,g as P,h as we,i as B,j as ue,m as q,n as Ue,o as Te,p as z,q as ae,r as se,s as de,t as je,w as Fe,y as vt,z as Ge}from"./chunk-5635NGOX.js";import"./chunk-PBQKIYOO.js";import{a as L}from"./chunk-U4BXHFS4.js";import{a as G}from"./chunk-T5TNNXDL.js";import{A as N,B as ht,G as D,b as oe,c as M,d as F,f as ge,h as j,i as A,n as me,q as X,x as ie,y as gt,z as ce}from"./chunk-2CT2PKNK.js";import{Ab as r,Bb as g,Ca as d,Cb as v,Db as ve,Eb as lt,F as O,Fb as be,Gb as Ce,Ha as Ke,Hb as Se,Jb as Ne,Kb as J,Lb as mt,M as ot,Mb as ct,Na as f,Nb as y,Ob as k,Pb as fe,Qb as pt,S as K,Sa as w,Va as at,W as Q,Xa as c,Yb as ft,aa as C,ba as S,f as nt,gb as l,hb as e,ib as t,j as We,jb as b,n as Le,na as ut,nb as st,ob as dt,pb as I,sb as h,t as Me,tb as p,xb as De,z as Je,za as Z,zb as ee}from"./chunk-6VZDFBBI.js";import{a as Pe,b as rt}from"./chunk-4CLCTAJ7.js";var bt=o=>({exact:o});function Rt(o,a){if(o&1&&(e(0,"a",22)(1,"span",23),r(2),t(),r(3),t()),o&2){let s=a.$implicit;l("routerLink",s.link)("routerLinkActiveOptions",J(4,bt,s.exact)),d(2),g(s.icon),d(),v(" ",s.title," ")}}function Bt(o,a){if(o&1){let s=I();e(0,"div",24),h("click",function(){C(s);let n=p();return S(n.isMobileMenuOpen=!1)}),t()}}function qt(o,a){if(o&1){let s=I();e(0,"a",31),h("click",function(){C(s);let n=p(2);return S(n.isMobileMenuOpen=!1)}),e(1,"span",32),r(2),t(),r(3),t()}if(o&2){let s=a.$implicit;l("routerLink",s.link)("routerLinkActiveOptions",J(4,bt,s.exact)),d(2),g(s.icon),d(),v(" ",s.title," ")}}function zt(o,a){if(o&1){let s=I();e(0,"div",25)(1,"div",26)(2,"span",27),r(3,"\u0645\u0646\u0648\u06CC \u0645\u062F\u06CC\u0631\u06CC\u062A"),t(),e(4,"button",28),h("click",function(){C(s);let n=p();return S(n.isMobileMenuOpen=!1)}),e(5,"span",17),r(6,"close"),t()()(),e(7,"div",29)(8,"nav",6),c(9,qt,4,6,"a",30),t()()()}if(o&2){let s=p();d(9),l("ngForOf",s.menuItems)}}var Ct=(()=>{let a=class a{constructor(){this.isMobileMenuOpen=!1,this.menuItems=[{title:"\u062F\u0627\u0634\u0628\u0648\u0631\u062F",link:"/admin/dashboard",icon:"dashboard",exact:!0},{title:"\u0645\u062D\u0635\u0648\u0644\u0627\u062A",link:"/admin/products",icon:"inventory_2",exact:!0},{title:"\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0627\u0646\u0628\u0648\u0647 \u0642\u06CC\u0645\u062A",link:"/admin/products/bulk-price-update",icon:"edit_note",exact:!1},{title:"\u0647\u0634\u062F\u0627\u0631 \u0645\u0648\u062C\u0648\u062F\u06CC",link:"/admin/products/low-stock",icon:"notification_important",exact:!1},{title:"\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627",link:"/admin/categories",icon:"category",exact:!1},{title:"\u06AF\u0631\u0648\u0647\u200C\u0647\u0627\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC",link:"/admin/category-groups",icon:"folder",exact:!1},{title:"\u0633\u0641\u0627\u0631\u0634\u0627\u062A",link:"/admin/orders",icon:"receipt_long",exact:!1},{title:"\u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627\u06CC \u0633\u0641\u0627\u0631\u0634",link:"/admin/order-statuses",icon:"fact_check",exact:!1},{title:"\u0631\u0648\u0634\u200C\u0647\u0627\u06CC \u0627\u0631\u0633\u0627\u0644",link:"/admin/shipping-methods",icon:"local_shipping",exact:!1},{title:"\u06A9\u0627\u0631\u0628\u0631\u0627\u0646",link:"/admin/users",icon:"group",exact:!0},{title:"\u06AF\u0632\u0627\u0631\u0634\u0627\u062A \u0633\u06CC\u0633\u062A\u0645\u06CC",link:"/admin/audit-logs",icon:"policy",exact:!1}]}};a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=w({type:a,selectors:[["app-admin-layout"]],decls:32,vars:3,consts:[[1,"grid","min-h-screen","w-full","lg:grid-cols-[280px_1fr]","bg-muted/30"],[1,"hidden","border-l","border-border","bg-card","lg:block","sticky","top-0","h-screen","overflow-y-auto"],[1,"flex","h-16","items-center","border-b","border-border","px-6"],["routerLink","/",1,"flex","items-center","gap-2","font-bold","text-lg","text-foreground","transition-colors","hover:text-primary"],[1,"material-icons","text-primary"],[1,"flex-1","py-6"],[1,"grid","items-start","px-4","text-sm","font-medium","gap-1"],["routerLinkActive","bg-primary/10 text-primary font-semibold shadow-sm ring-1 ring-primary/20","class","flex items-center gap-3 rounded-md px-3 py-2.5 text-muted-foreground transition-all hover:bg-accent hover:text-accent-foreground group",3,"routerLink","routerLinkActiveOptions",4,"ngFor","ngForOf"],[1,"border-t","border-border","p-4"],[1,"flex","items-center","gap-3","rounded-lg","bg-muted/50","p-3"],[1,"h-8","w-8","rounded-full","bg-primary/20","flex","items-center","justify-center"],[1,"material-icons","text-sm","text-primary"],[1,"flex","flex-col"],[1,"text-xs","font-bold","text-foreground"],[1,"text-[10px]","text-muted-foreground"],[1,"sticky","top-0","z-30","flex","h-16","items-center","gap-4","border-b","border-border","bg-background/95","px-6","shadow-sm","backdrop-blur","lg:hidden"],[1,"btn","btn-ghost","btn-icon","-mr-2",3,"click"],[1,"material-icons"],[1,"flex-1","font-bold","text-lg"],[1,"flex-1","p-4","sm:p-6","md:p-8","max-w-[1600px]","w-full","mx-auto","animate-fade-in"],["class","fixed inset-0 z-40 bg-black/60 backdrop-blur-sm lg:hidden transition-opacity",3,"click",4,"ngIf"],["class","fixed inset-y-0 right-0 z-50 flex w-3/4 max-w-xs flex-col bg-card shadow-2xl transition-transform duration-300 lg:hidden",4,"ngIf"],["routerLinkActive","bg-primary/10 text-primary font-semibold shadow-sm ring-1 ring-primary/20",1,"flex","items-center","gap-3","rounded-md","px-3","py-2.5","text-muted-foreground","transition-all","hover:bg-accent","hover:text-accent-foreground","group",3,"routerLink","routerLinkActiveOptions"],[1,"material-icons-outlined","text-[20px]","w-6","text-center","group-hover:scale-110","transition-transform"],[1,"fixed","inset-0","z-40","bg-black/60","backdrop-blur-sm","lg:hidden","transition-opacity",3,"click"],[1,"fixed","inset-y-0","right-0","z-50","flex","w-3/4","max-w-xs","flex-col","bg-card","shadow-2xl","transition-transform","duration-300","lg:hidden"],[1,"flex","h-16","items-center","justify-between","border-b","border-border","px-6","bg-muted/30"],[1,"font-bold","text-lg"],[1,"btn","btn-ghost","btn-icon","-ml-2",3,"click"],[1,"flex-1","overflow-y-auto","py-4"],["routerLinkActive","bg-primary/10 text-primary font-semibold","class","flex items-center gap-3 rounded-md px-3 py-3 text-muted-foreground transition-colors hover:bg-accent hover:text-foreground",3,"routerLink","routerLinkActiveOptions","click",4,"ngFor","ngForOf"],["routerLinkActive","bg-primary/10 text-primary font-semibold",1,"flex","items-center","gap-3","rounded-md","px-3","py-3","text-muted-foreground","transition-colors","hover:bg-accent","hover:text-foreground",3,"click","routerLink","routerLinkActiveOptions"],[1,"material-icons-outlined","text-[20px]","w-6","text-center"]],template:function(n,u){n&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3)(4,"span",4),r(5,"storefront"),t(),e(6,"span"),r(7,"\u067E\u0646\u0644 \u0645\u062F\u06CC\u0631\u06CC\u062A"),t()()(),e(8,"div",5)(9,"nav",6),c(10,Rt,4,6,"a",7),t()(),e(11,"div",8)(12,"div",9)(13,"div",10)(14,"span",11),r(15,"person"),t()(),e(16,"div",12)(17,"span",13),r(18,"\u0645\u062F\u06CC\u0631 \u0633\u06CC\u0633\u062A\u0645"),t(),e(19,"span",14),r(20,"admin@ledka.ir"),t()()()()(),e(21,"div",12)(22,"header",15)(23,"button",16),h("click",function(){return u.isMobileMenuOpen=!u.isMobileMenuOpen}),e(24,"span",17),r(25,"menu"),t()(),e(26,"div",18),r(27,"\u067E\u0646\u0644 \u0645\u062F\u06CC\u0631\u06CC\u062A"),t()(),e(28,"main",19),b(29,"router-outlet"),t()()(),c(30,Bt,1,0,"div",20)(31,zt,10,1,"div",21)),n&2&&(d(10),l("ngForOf",u.menuItems),d(20),l("ngIf",u.isMobileMenuOpen),d(),l("ngIf",u.isMobileMenuOpen))},dependencies:[A,M,F,D,gt,N,ht],encapsulation:2});let o=a;return o})();var le=(()=>{let a=class a{constructor(i){this.http=i,this.productsUrl=`${G.API_URL}admin/products`}getProductById(i){return this.http.get(`${this.productsUrl}/${i}`)}createProduct(i){return this.http.post(this.productsUrl,i)}updateProduct(i,n){return this.http.put(`${this.productsUrl}/${i}`,n)}getAllAttributes(){return this.http.get(`${G.API_URL}Products/attributes`)}deleteProduct(i){return this.http.delete(`${this.productsUrl}/${i}`)}addStock(i){return this.http.post(`${this.productsUrl}/stock/add`,i)}removeStock(i){return this.http.post(`${this.productsUrl}/stock/remove`,i)}setDiscount(i,n){return this.http.put(`${this.productsUrl}/variants/${i}/discount`,n)}removeDiscount(i){return this.http.delete(`${this.productsUrl}/variants/${i}/discount`)}bulkUpdatePrices(i,n=!1){let u=new me().set("isPurchasePrice",n.toString());return this.http.post(`${this.productsUrl}/bulk-update-prices`,i,{params:u})}getProductStatistics(){return this.http.get(`${this.productsUrl}/statistics`)}getLowStockProducts(i=5){let n=new me().set("threshold",i.toString());return this.http.get(`${this.productsUrl}/low-stock`,{params:n})}};a.\u0275fac=function(n){return new(n||a)(Q(X))},a.\u0275prov=K({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();var ke=(()=>{let a=class a{constructor(i){this.http=i,this.ordersUrl=`${G.API_URL}admin/orders`}getOrders(i){let n=new me;return Object.keys(i).forEach(u=>{i[u]!==null&&i[u]!==void 0&&i[u]!==""&&(n=n.set(u,i[u].toString()))}),this.http.get(this.ordersUrl,{params:n})}getOrderById(i){return this.http.get(`${this.ordersUrl}/${i}`)}createOrder(i){return this.http.post(this.ordersUrl,i)}updateOrder(i,n){return this.http.put(`${this.ordersUrl}/${i}`,n)}updateOrderStatus(i,n){return this.http.patch(`${this.ordersUrl}/${i}/status`,n)}deleteOrder(i){return this.http.delete(`${this.ordersUrl}/${i}`)}getOrderStatistics(i,n){let u=new me;return i&&(u=u.set("fromDate",i.toISOString())),n&&(u=u.set("toDate",n.toISOString())),this.http.get(`${this.ordersUrl}/statistics`,{params:u})}};a.\u0275fac=function(n){return new(n||a)(Q(X))},a.\u0275prov=K({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();var Re=(()=>{let a=class a{constructor(i){this.http=i,this.usersUrl=`${G.API_URL}admin/users`}getUsers(i=!1,n=1,u=20){let m=new me().set("includeDeleted",i.toString()).set("page",n.toString()).set("pageSize",u.toString());return this.http.get(this.usersUrl,{params:m})}changeUserStatus(i,n){return this.http.patch(`${this.usersUrl}/${i}/status`,{isActive:n})}deleteUser(i){return this.http.delete(`${this.usersUrl}/${i}`)}restoreUser(i){return this.http.post(`${this.usersUrl}/${i}/restore`,{})}};a.\u0275fac=function(n){return new(n||a)(Q(X))},a.\u0275prov=K({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();var Ht=()=>[1,2,3,4];function Wt(o,a){o&1&&b(0,"div",27)}function Jt(o,a){o&1&&(e(0,"div",25),c(1,Wt,1,0,"div",26),t()),o&2&&(d(),l("ngForOf",Ne(1,Ht)))}function Kt(o,a){if(o&1&&(e(0,"div",25)(1,"div",28)(2,"div",1)(3,"p",29),r(4,"\u0645\u062C\u0645\u0648\u0639 \u062F\u0631\u0622\u0645\u062F"),t(),e(5,"span",30),r(6,"payments"),t()(),e(7,"div",31)(8,"p",32),r(9),y(10,"number"),e(11,"span",33),r(12,"\u062A\u0648\u0645\u0627\u0646"),t()(),e(13,"p",34)(14,"span",35),r(15,"trending_up"),t(),e(16,"span"),r(17,"+12% \u0646\u0633\u0628\u062A \u0628\u0647 \u0645\u0627\u0647 \u0642\u0628\u0644"),t()()()(),e(18,"div",36)(19,"div",1)(20,"p",29),r(21,"\u0645\u062C\u0645\u0648\u0639 \u0633\u0648\u062F"),t(),e(22,"span",37),r(23,"trending_up"),t()(),e(24,"div",31)(25,"p",32),r(26),y(27,"number"),e(28,"span",33),r(29,"\u062A\u0648\u0645\u0627\u0646"),t()()()(),e(30,"div",38)(31,"div",1)(32,"p",29),r(33,"\u0633\u0641\u0627\u0631\u0634\u0627\u062A \u0645\u0648\u0641\u0642"),t(),e(34,"span",39),r(35,"shopping_cart"),t()(),e(36,"div",31)(37,"p",32),r(38),y(39,"number"),t()()(),e(40,"div",40)(41,"div",1)(42,"p",29),r(43,"\u06A9\u0627\u0631\u0628\u0631\u0627\u0646 \u0641\u0639\u0627\u0644"),t(),e(44,"span",41),r(45,"group"),t()(),e(46,"div",31)(47,"p",32),r(48),y(49,"number"),t()()()()),o&2){let s=p();d(9),v("",k(10,4,(s.orderStats==null?null:s.orderStats.totalRevenue)||0)," "),d(17),v("",k(27,6,(s.orderStats==null?null:s.orderStats.totalProfit)||0)," "),d(12),g(k(39,8,(s.orderStats==null?null:s.orderStats.totalOrders)||0)),d(10),g(k(49,10,(s.userStats==null?null:s.userStats.total)||0))}}var yt=(()=>{let a=class a{constructor(i,n,u,m){this.adminProductService=i,this.adminOrderService=n,this.adminUserService=u,this.notificationService=m,this.productStats=null,this.orderStats=null,this.userStats=null,this.isLoading=!0}ngOnInit(){this.isLoading=!0,Me({products:this.adminProductService.getProductStatistics(),orders:this.adminOrderService.getOrderStatistics(),users:this.adminUserService.getUsers(!0,1,1).pipe(Le(i=>({total:i.totalItems})))}).subscribe({next:({products:i,orders:n,users:u})=>{this.productStats=i,this.orderStats=n.generalStatistics,this.userStats=u,this.isLoading=!1},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0622\u0645\u0627\u0631 \u062F\u0627\u0634\u0628\u0648\u0631\u062F","error"),this.isLoading=!1}})}};a.\u0275fac=function(n){return new(n||a)(f(le),f(ke),f(Re),f(L))},a.\u0275cmp=w({type:a,selectors:[["app-admin-dashboard"]],decls:51,vars:14,consts:[[1,"space-y-8"],[1,"flex","items-center","justify-between"],[1,"text-3xl","font-bold","tracking-tight","text-foreground"],[1,"flex","items-center","gap-2"],[1,"btn","btn-outline","btn-sm","gap-2","bg-background"],[1,"material-icons","text-sm"],["class","grid gap-6 md:grid-cols-2 lg:grid-cols-4",4,"ngIf"],[1,"grid","gap-6","md:grid-cols-2","lg:grid-cols-7"],[1,"card","p-6","lg:col-span-4"],[1,"font-semibold","text-lg","mb-4"],[1,"grid","gap-4","sm:grid-cols-3"],[1,"rounded-lg","bg-muted/50","p-4"],[1,"text-xs","font-medium","text-muted-foreground","mb-1"],[1,"text-lg","font-bold"],[1,"text-[10px]"],[1,"rounded-lg","bg-destructive/10","p-4","border","border-destructive/20"],[1,"text-xs","font-medium","text-destructive","mb-1"],[1,"text-lg","font-bold","text-destructive"],[1,"card","p-6","lg:col-span-3"],[1,"space-y-4"],[1,"flex","items-center","gap-4","rounded-lg","border","border-warning/20","bg-warning/5","p-3"],[1,"material-icons","text-warning","bg-warning/10","p-2","rounded-full"],[1,"font-medium","text-sm"],[1,"text-xs","text-muted-foreground"],["routerLink","/admin/products/low-stock",1,"btn","btn-ghost","btn-sm","mr-auto","text-warning","hover:text-warning","hover:bg-warning/10"],[1,"grid","gap-6","md:grid-cols-2","lg:grid-cols-4"],["class","card h-32 animate-pulse bg-muted/50 border-none",4,"ngFor","ngForOf"],[1,"card","h-32","animate-pulse","bg-muted/50","border-none"],[1,"card","p-6","flex","flex-col","justify-between","hover:shadow-md","transition-shadow","border-l-4","border-l-primary"],[1,"text-sm","font-medium","text-muted-foreground"],[1,"material-icons-outlined","text-primary","bg-primary/10","p-2","rounded-full"],[1,"mt-4"],[1,"text-2xl","font-bold","text-foreground"],[1,"text-xs","font-normal","text-muted-foreground"],[1,"text-xs","text-success","mt-1","flex","items-center","gap-1"],[1,"material-icons","text-[10px]"],[1,"card","p-6","flex","flex-col","justify-between","hover:shadow-md","transition-shadow","border-l-4","border-l-success"],[1,"material-icons-outlined","text-success","bg-success/10","p-2","rounded-full"],[1,"card","p-6","flex","flex-col","justify-between","hover:shadow-md","transition-shadow","border-l-4","border-l-secondary"],[1,"material-icons-outlined","text-secondary-foreground","bg-secondary","p-2","rounded-full"],[1,"card","p-6","flex","flex-col","justify-between","hover:shadow-md","transition-shadow","border-l-4","border-l-warning"],[1,"material-icons-outlined","text-warning-foreground","bg-warning/20","p-2","rounded-full"]],template:function(n,u){n&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"\u062F\u0627\u0634\u0628\u0648\u0631\u062F"),t(),e(4,"div",3)(5,"button",4)(6,"span",5),r(7,"refresh"),t(),r(8," \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC "),t()()(),c(9,Jt,2,2,"div",6)(10,Kt,50,12,"div",6),e(11,"div",7)(12,"div",8)(13,"h3",9),r(14,"\u0648\u0636\u0639\u06CC\u062A \u0627\u0646\u0628\u0627\u0631"),t(),e(15,"div",10)(16,"div",11)(17,"div",12),r(18,"\u0627\u0631\u0632\u0634 \u06A9\u0644 \u0627\u0646\u0628\u0627\u0631"),t(),e(19,"div",13),r(20),y(21,"number"),e(22,"span",14),r(23,"\u062A\u0648\u0645\u0627\u0646"),t()()(),e(24,"div",11)(25,"div",12),r(26,"\u062A\u0639\u062F\u0627\u062F \u0645\u062D\u0635\u0648\u0644\u0627\u062A"),t(),e(27,"div",13),r(28),y(29,"number"),t()(),e(30,"div",15)(31,"div",16),r(32,"\u0646\u0627\u0645\u0648\u062C\u0648\u062F"),t(),e(33,"div",17),r(34),y(35,"number"),t()()()(),e(36,"div",18)(37,"h3",9),r(38,"\u0647\u0634\u062F\u0627\u0631\u0647\u0627"),t(),e(39,"div",19)(40,"div",20)(41,"span",21),r(42,"notification_important"),t(),e(43,"div")(44,"p",22),r(45,"\u0645\u062D\u0635\u0648\u0644\u0627\u062A \u0631\u0648 \u0628\u0647 \u0627\u062A\u0645\u0627\u0645"),t(),e(46,"p",23),r(47),y(48,"number"),t()(),e(49,"a",24),r(50,"\u0628\u0631\u0631\u0633\u06CC"),t()()()()()()),n&2&&(d(9),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.orderStats),d(10),v("",k(21,6,(u.productStats==null?null:u.productStats.totalInventoryValue)||0)," "),d(8),g(k(29,8,(u.productStats==null?null:u.productStats.totalProducts)||0)),d(6),g(k(35,10,(u.productStats==null?null:u.productStats.outOfStockProducts)||0)),d(13),v("",k(48,12,(u.productStats==null?null:u.productStats.lowStockProducts)||0)," \u0645\u062D\u0635\u0648\u0644 \u0646\u06CC\u0627\u0632 \u0628\u0647 \u0634\u0627\u0631\u0698 \u062F\u0627\u0631\u0646\u062F."))},dependencies:[A,M,F,j],encapsulation:2});let o=a;return o})();var Be=(()=>{let a=class a{constructor(i){this.http=i,this.categoriesUrl=`${G.API_URL}admin/categories`}getCategoryById(i){return this.http.get(`${this.categoriesUrl}/${i}?page=1&pageSize=10`)}createCategory(i){return this.http.post(this.categoriesUrl,i)}updateCategory(i,n){return this.http.put(`${this.categoriesUrl}/${i}`,n)}deleteCategory(i){return this.http.delete(`${this.categoriesUrl}/${i}`)}};a.\u0275fac=function(n){return new(n||a)(Q(X))},a.\u0275prov=K({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();function Qt(o,a){o&1&&(e(0,"div",21),r(1," \u0646\u0627\u0645 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0627\u0644\u0632\u0627\u0645\u06CC \u0627\u0633\u062A. "),t())}function Xt(o,a){if(o&1){let s=I();e(0,"div",22),b(1,"img",23),e(2,"div",24)(3,"button",25),h("click",function(){C(s);let n=p();return n.iconPreview=null,S(n.selectedFile=null)}),e(4,"span",4),r(5,"close"),t()()()()}if(o&2){let s=p();d(),l("src",s.iconPreview,Z)}}function Yt(o,a){o&1&&(e(0,"span",26),r(1,"sync"),t())}var Xe=(()=>{let a=class a{constructor(i,n,u,m,x){this.route=i,this.router=n,this.notificationService=u,this.adminCategoryService=m,this.mediaService=x,this.isEditMode=!1,this.categoryId=null,this.isSubmitting=!1,this.iconPreview=null,this.rowVersion=null,this.selectedFile=null,this.categoryForm=new te({Name:new P("",[_.required,_.maxLength(100)]),RowVersion:new P(null)})}ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i&&(this.categoryId=Number(i),this.isEditMode=!0,this.loadCategoryData())}loadCategoryData(){this.categoryId&&this.adminCategoryService.getCategoryById(this.categoryId).subscribe({next:i=>{this.categoryForm.patchValue({Name:i.name,RowVersion:i.rowVersion}),this.iconPreview=i.iconUrl||null},error:i=>this.notificationService.show(i?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC","error")})}onFileChange(i){let n=i.target;if(n.files&&n.files.length>0){this.selectedFile=n.files[0];let u=new FileReader;u.onload=m=>this.iconPreview=m.target.result,u.readAsDataURL(this.selectedFile)}}onSubmit(){if(this.categoryForm.invalid||this.isSubmitting)return;this.isSubmitting=!0;let i=new FormData;if(i.append("Name",this.categoryForm.get("Name")?.value),this.selectedFile&&i.append("IconFile",this.selectedFile),this.isEditMode&&this.categoryId){let u=this.categoryForm.get("RowVersion")?.value;u&&i.append("RowVersion",u)}(this.isEditMode&&this.categoryId?this.adminCategoryService.updateCategory(this.categoryId,i):this.adminCategoryService.createCategory(i)).pipe(O(()=>this.isSubmitting=!1)).subscribe({next:u=>{let m=`\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A ${this.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"} \u0634\u062F`;this.notificationService.show(m,"success"),this.router.navigate(["/admin/categories"])},error:u=>{u.status===409?(this.notificationService.show("\u0627\u06CC\u0646 \u0631\u06A9\u0648\u0631\u062F \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627 \u0635\u0641\u062D\u0647 \u0631\u0627 \u0631\u0641\u0631\u0634 \u06A9\u0646\u06CC\u062F.","error"),this.loadCategoryData()):this.notificationService.show(u?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062B\u0628\u062A \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A","error")}})}getIconUrl(){return this.iconPreview?this.mediaService.getMediaUrl(this.iconPreview):""}};a.\u0275fac=function(n){return new(n||a)(f(ie),f(ce),f(L),f(Be),f(_e))},a.\u0275cmp=w({type:a,selectors:[["app-admin-category-form"]],decls:32,vars:9,consts:[[1,"max-w-xl","mx-auto"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-foreground","tracking-tight"],["routerLink","/admin/categories",1,"btn","btn-outline","btn-sm","gap-2"],[1,"material-icons","text-sm"],[1,"card","p-6","space-y-6","bg-card",3,"ngSubmit","formGroup"],[1,"space-y-2"],["for","name",1,"text-sm","font-medium","text-foreground"],[1,"text-destructive"],["type","text","id","name","formControlName","Name","placeholder","\u0645\u062B\u0627\u0644: \u06A9\u0627\u0644\u0627\u06CC \u062F\u06CC\u062C\u06CC\u062A\u0627\u0644","maxlength","100",1,"input","w-full"],["class","text-xs text-destructive",4,"ngIf"],[1,"text-sm","font-medium","text-foreground","block"],[1,"flex","items-start","gap-4"],[1,"flex-1","h-32","border-2","border-dashed","border-border","rounded-lg","cursor-pointer","hover:bg-muted/50","transition-colors","flex","flex-col","items-center","justify-center"],[1,"material-icons","text-muted-foreground","text-3xl","mb-2"],[1,"text-xs","text-muted-foreground"],["type","file","id","iconFile","accept","image/*",1,"hidden",3,"change"],["class","w-32 h-32 border border-border rounded-lg overflow-hidden bg-background relative group flex-shrink-0",4,"ngIf"],[1,"pt-6","border-t","border-border","flex","justify-end"],["type","submit",1,"btn","btn-primary","btn-lg","min-w-[140px]",3,"disabled"],["class","material-icons animate-spin me-2",4,"ngIf"],[1,"text-xs","text-destructive"],[1,"w-32","h-32","border","border-border","rounded-lg","overflow-hidden","bg-background","relative","group","flex-shrink-0"],["alt","Icon Preview",1,"w-full","h-full","object-contain","p-2",3,"src"],[1,"absolute","inset-0","bg-black/40","opacity-0","group-hover:opacity-100","transition-opacity","flex","items-center","justify-center"],["type","button",1,"btn","btn-icon","btn-destructive","btn-sm","rounded-full",3,"click"],[1,"material-icons","animate-spin","me-2"]],template:function(n,u){if(n&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),r(3),t(),e(4,"a",3)(5,"span",4),r(6,"arrow_forward"),t(),r(7," \u0628\u0627\u0632\u06AF\u0634\u062A "),t()(),e(8,"form",5),h("ngSubmit",function(){return u.onSubmit()}),e(9,"div",6)(10,"label",7),r(11," \u0646\u0627\u0645 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC "),e(12,"span",8),r(13,"*"),t()(),b(14,"input",9),c(15,Qt,2,0,"div",10),t(),e(16,"div",6)(17,"label",11),r(18,"\u0622\u06CC\u06A9\u0648\u0646 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),t(),e(19,"div",12)(20,"label",13)(21,"span",14),r(22,"add_photo_alternate"),t(),e(23,"span",15),r(24,"\u0627\u0646\u062A\u062E\u0627\u0628 \u062A\u0635\u0648\u06CC\u0631"),t(),e(25,"input",16),h("change",function(x){return u.onFileChange(x)}),t()(),c(26,Xt,6,1,"div",17),t()(),e(27,"div",18)(28,"button",19),c(29,Yt,2,0,"span",20),e(30,"span"),r(31),t()()()()()),n&2){let m,x;d(3),v("",u.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"," \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),d(5),l("formGroup",u.categoryForm),d(6),ee("input-error",((m=u.categoryForm.get("Name"))==null?null:m.invalid)&&((m=u.categoryForm.get("Name"))==null?null:m.touched)),d(),l("ngIf",((x=u.categoryForm.get("Name"))==null?null:x.invalid)&&((x=u.categoryForm.get("Name"))==null?null:x.touched)),d(11),l("ngIf",u.iconPreview),d(2),l("disabled",u.categoryForm.invalid||u.isSubmitting),d(),l("ngIf",u.isSubmitting),d(2),g(u.isSubmitting?"\u0630\u062E\u06CC\u0631\u0647 \u0633\u0627\u0632\u06CC...":"\u0630\u062E\u06CC\u0631\u0647 \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A")}},dependencies:[A,F,H,B,$,T,R,Fe,q,z,D,N],encapsulation:2});let o=a;return o})();var ei=o=>["/admin/categories/edit",o];function ti(o,a){o&1&&(e(0,"div",10)(1,"span",11),r(2,"sync"),t()())}function ii(o,a){o&1&&(e(0,"div",12)(1,"span",13),r(2,"category"),t(),e(3,"p",14),r(4,"\u0644\u06CC\u0633\u062A \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627 \u062E\u0627\u0644\u06CC \u0627\u0633\u062A"),t(),e(5,"a",15),r(6,"\u0627\u0641\u0632\u0648\u062F\u0646 \u0627\u0648\u0644\u06CC\u0646 \u0645\u0648\u0631\u062F"),t()())}function ri(o,a){if(o&1){let s=I();e(0,"tr",25)(1,"td",26)(2,"div",27),b(3,"img",28),t()(),e(4,"td",29),r(5),t(),e(6,"td",30)(7,"span",31),r(8),y(9,"number"),t()(),e(10,"td",26)(11,"div",32)(12,"a",33)(13,"span",34),r(14,"edit"),t()(),e(15,"button",35),h("click",function(){let n=C(s).$implicit,u=p(2);return S(u.deleteCategory(n.id))}),e(16,"span",34),r(17,"delete"),t()()()()()}if(o&2){let s=a.$implicit,i=p(2);d(3),l("src",i.getCategoryIconUrl(s),Z)("alt",s.name),d(2),g(s.name),d(3),v(" ",k(9,5,i.getProductCount(s))," "),d(4),l("routerLink",J(7,ei,s.id))}}function ni(o,a){if(o&1&&(e(0,"div",16)(1,"table",17)(2,"thead",18)(3,"tr")(4,"th",19),r(5,"\u0622\u06CC\u06A9\u0648\u0646"),t(),e(6,"th",20),r(7,"\u0646\u0627\u0645 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),t(),e(8,"th",21),r(9,"\u062A\u0639\u062F\u0627\u062F \u0632\u06CC\u0631\u0645\u062C\u0645\u0648\u0639\u0647"),t(),e(10,"th",22),r(11,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t()()(),e(12,"tbody",23),c(13,ri,18,9,"tr",24),t()()()),o&2){let s=p();d(13),l("ngForOf",s.categories)}}var Ft=(()=>{let a=class a{constructor(i,n,u,m){this.categoryService=i,this.adminCategoryService=n,this.notificationService=u,this.mediaService=m,this.categories=[],this.isLoading=!0}ngOnInit(){this.loadCategories()}loadCategories(){this.isLoading=!0,this.categoryService.getCategories(void 0,1,100).subscribe({next:i=>{this.categories=i.items??[],this.isLoading=!1},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627","error"),this.isLoading=!1}})}getProductCount(i){return i.categoryGroups?i.categoryGroups.reduce((n,u)=>n+u.productCount,0):0}getCategoryIconUrl(i){return i.iconUrl?this.mediaService.getMediaUrl(i.iconUrl):"https://via.placeholder.com/40"}deleteCategory(i){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F")&&this.adminCategoryService.deleteCategory(i).subscribe({next:()=>{this.notificationService.show("\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadCategories()},error:n=>this.notificationService.show(n?.error?.message||n?.error?.ErrorMessage||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC","error")})}};a.\u0275fac=function(n){return new(n||a)(f(Oe),f(Be),f(L),f(_e))},a.\u0275cmp=w({type:a,selectors:[["app-admin-category-list"]],decls:15,vars:3,consts:[[1,"space-y-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","justify-between","gap-4"],[1,"text-2xl","font-bold","text-foreground","tracking-tight"],[1,"text-sm","text-muted-foreground","mt-1"],["routerLink","/admin/categories/new",1,"btn","btn-primary"],[1,"material-icons","me-2"],[1,"card","border","border-border","shadow-sm","overflow-hidden"],["class","flex justify-center items-center py-20",4,"ngIf"],["class","flex flex-col items-center justify-center py-16 text-center",4,"ngIf"],["class","w-full overflow-x-auto",4,"ngIf"],[1,"flex","justify-center","items-center","py-20"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"flex","flex-col","items-center","justify-center","py-16","text-center"],[1,"material-icons","text-5xl","text-muted-foreground","mb-4"],[1,"text-lg","font-medium","text-foreground"],["routerLink","/admin/categories/new",1,"btn","btn-link","mt-2"],[1,"w-full","overflow-x-auto"],[1,"w-full","caption-bottom","text-sm","text-right"],[1,"bg-muted/50","[&_tr]:border-b","[&_tr]:border-border"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground","w-[80px]"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground","text-center"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground","text-end","w-[100px]"],[1,"[&_tr:last-child]:border-0"],["class","border-b border-border transition-colors hover:bg-muted/20",4,"ngFor","ngForOf"],[1,"border-b","border-border","transition-colors","hover:bg-muted/20"],[1,"p-4","align-middle"],[1,"w-10","h-10","rounded-lg","border","border-border","bg-background","overflow-hidden","flex","items-center","justify-center"],["loading","lazy",1,"w-full","h-full","object-cover",3,"src","alt"],[1,"p-4","align-middle","font-medium","text-foreground"],[1,"p-4","align-middle","text-center"],[1,"inline-flex","items-center","justify-center","min-w-[2rem]","px-2","py-1","rounded-md","bg-secondary","text-secondary-foreground","text-xs","font-bold"],[1,"flex","items-center","justify-end","gap-2"],["title","\u0648\u06CC\u0631\u0627\u06CC\u0634",1,"btn","btn-ghost","btn-icon","btn-sm","text-muted-foreground","hover:text-primary",3,"routerLink"],[1,"material-icons","text-lg"],["title","\u062D\u0630\u0641",1,"btn","btn-ghost","btn-icon","btn-sm","text-muted-foreground","hover:text-destructive",3,"click"]],template:function(n,u){n&1&&(e(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),r(4,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627"),t(),e(5,"p",3),r(6,"\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627\u06CC \u0627\u0635\u0644\u06CC \u0641\u0631\u0648\u0634\u06AF\u0627\u0647 \u0631\u0627 \u0645\u062F\u06CC\u0631\u06CC\u062A \u06A9\u0646\u06CC\u062F"),t()(),e(7,"a",4)(8,"span",5),r(9,"add"),t(),r(10," \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u062C\u062F\u06CC\u062F "),t()(),e(11,"div",6),c(12,ti,3,0,"div",7)(13,ii,7,0,"div",8)(14,ni,14,1,"div",9),t()()),n&2&&(d(12),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.categories.length===0),d(),l("ngIf",!u.isLoading&&u.categories.length>0))},dependencies:[A,M,F,D,N,j],encapsulation:2});let o=a;return o})();var qe=(()=>{let a=class a{constructor(i){this.http=i,this.categoryGroupsUrl=`${G.API_URL}admin/category-groups`}getCategoryGroupById(i){return this.http.get(`${this.categoryGroupsUrl}/${i}?page=1&pageSize=10`)}createCategoryGroup(i){return this.http.post(this.categoryGroupsUrl,i)}updateCategoryGroup(i,n){return this.http.put(`${this.categoryGroupsUrl}/${i}`,n)}deleteCategoryGroup(i){return this.http.delete(`${this.categoryGroupsUrl}/${i}`)}};a.\u0275fac=function(n){return new(n||a)(Q(X))},a.\u0275prov=K({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();function oi(o,a){o&1&&(e(0,"div",28),r(1," \u0646\u0627\u0645 \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0627\u0644\u0632\u0627\u0645\u06CC \u0627\u0633\u062A. "),t())}function ui(o,a){if(o&1&&(e(0,"option",29),r(1),t()),o&2){let s=a.$implicit;l("value",s.id),d(),g(s.name)}}function ai(o,a){o&1&&(e(0,"div",28),r(1," \u0627\u0646\u062A\u062E\u0627\u0628 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0627\u0644\u0632\u0627\u0645\u06CC \u0627\u0633\u062A. "),t())}function si(o,a){if(o&1){let s=I();e(0,"div",30),b(1,"img",31),e(2,"button",32),h("click",function(){C(s);let n=p();return n.iconPreview=null,S(n.selectedFile=null)}),e(3,"span",4),r(4,"close"),t()()()}if(o&2){let s=p();d(),l("src",s.iconPreview,Z)}}function di(o,a){o&1&&(e(0,"span",33),r(1,"sync"),t())}var Ye=(()=>{let a=class a{constructor(i,n,u,m,x){this.route=i,this.router=n,this.notificationService=u,this.adminCategoryGroupService=m,this.categoryService=x,this.isEditMode=!1,this.categoryGroupId=null,this.isSubmitting=!1,this.categories=[],this.selectedFile=null,this.iconPreview=null,this.categoryGroupForm=new te({name:new P("",[_.required,_.maxLength(100)]),categoryId:new P(null,[_.required]),rowVersion:new P(null)})}ngOnInit(){this.loadCategories();let i=this.route.snapshot.paramMap.get("id");i&&(this.categoryGroupId=Number(i),this.isEditMode=!0,this.loadCategoryGroupData())}loadCategories(){this.categoryService.getCategories(void 0,1,100).subscribe({next:i=>{this.categories=i.items??[]},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627","error")}})}loadCategoryGroupData(){this.categoryGroupId&&this.adminCategoryGroupService.getCategoryGroupById(this.categoryGroupId).subscribe({next:i=>{this.categoryGroupForm.patchValue({name:i.name,categoryId:i.categoryId,rowVersion:i.rowVersion}),this.iconPreview=i.iconUrl||null},error:i=>this.notificationService.show(i?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC","error")})}onFileChange(i){let n=i.target;if(n.files&&n.files.length>0){this.selectedFile=n.files[0];let u=new FileReader;u.onload=m=>this.iconPreview=m.target.result,u.readAsDataURL(this.selectedFile)}}onSubmit(){if(this.categoryGroupForm.invalid||this.isSubmitting)return;this.isSubmitting=!0;let i=new FormData;i.append("Name",this.categoryGroupForm.get("name")?.value),i.append("CategoryId",this.categoryGroupForm.get("categoryId")?.value),this.selectedFile&&i.append("IconFile",this.selectedFile),this.isEditMode&&this.categoryGroupForm.get("rowVersion")?.value&&i.append("RowVersion",this.categoryGroupForm.get("rowVersion")?.value),(this.isEditMode&&this.categoryGroupId?this.adminCategoryGroupService.updateCategoryGroup(this.categoryGroupId,i):this.adminCategoryGroupService.createCategoryGroup(i)).pipe(O(()=>this.isSubmitting=!1)).subscribe({next:()=>{this.notificationService.show(`\u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A ${this.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"} \u0634\u062F`,"success"),this.router.navigate(["/admin/category-groups"])},error:u=>{u.status===409?(this.notificationService.show("\u0627\u06CC\u0646 \u0631\u06A9\u0648\u0631\u062F \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627 \u0635\u0641\u062D\u0647 \u0631\u0627 \u0631\u0641\u0631\u0634 \u06A9\u0646\u06CC\u062F.","error"),this.loadCategoryGroupData()):this.notificationService.show(u?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062B\u0628\u062A \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A","error")}})}};a.\u0275fac=function(n){return new(n||a)(f(ie),f(ce),f(L),f(qe),f(Oe))},a.\u0275cmp=w({type:a,selectors:[["app-admin-category-group-form"]],decls:45,vars:14,consts:[[1,"max-w-2xl","mx-auto"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-foreground"],["routerLink","/admin/category-groups",1,"btn","btn-outline","btn-sm","gap-2"],[1,"material-icons","text-sm"],[1,"card","p-6","space-y-6","bg-card","text-card-foreground",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-2"],["for","name",1,"text-sm","font-medium","text-foreground"],[1,"text-destructive"],["type","text","id","name","formControlName","name","placeholder","\u0645\u062B\u0627\u0644: \u0644\u0648\u0627\u0632\u0645 \u062C\u0627\u0646\u0628\u06CC","maxlength","100",1,"input","w-full"],["class","text-xs text-destructive",4,"ngIf"],["for","categoryId",1,"text-sm","font-medium","text-foreground"],["id","categoryId","formControlName","categoryId",1,"input","w-full"],["disabled","",3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["for","iconFile",1,"text-sm","font-medium","text-foreground","block"],[1,"flex","items-start","gap-4"],[1,"flex-1"],[1,"flex","flex-col","items-center","justify-center","w-full","h-32","border-2","border-dashed","border-border","rounded-lg","cursor-pointer","hover:bg-muted/50","transition-colors"],[1,"flex","flex-col","items-center","justify-center","pt-5","pb-6"],[1,"material-icons","text-muted-foreground","text-3xl","mb-2"],[1,"text-sm","text-muted-foreground"],["type","file","id","iconFile","accept","image/*",1,"hidden",3,"change"],["class","w-32 h-32 flex-shrink-0 border border-border rounded-lg overflow-hidden bg-muted/20 flex items-center justify-center relative group",4,"ngIf"],[1,"flex","items-center","justify-end","pt-6","border-t","border-border"],["type","submit",1,"btn","btn-primary","btn-lg","min-w-[140px]",3,"disabled"],["class","material-icons animate-spin me-2 text-lg",4,"ngIf"],[1,"text-xs","text-destructive"],[3,"value"],[1,"w-32","h-32","flex-shrink-0","border","border-border","rounded-lg","overflow-hidden","bg-muted/20","flex","items-center","justify-center","relative","group"],["alt","Icon Preview",1,"w-full","h-full","object-contain",3,"src"],["type","button",1,"absolute","top-1","left-1","btn","btn-icon","btn-xs","btn-destructive","opacity-0","group-hover:opacity-100","transition-opacity",3,"click"],[1,"material-icons","animate-spin","me-2","text-lg"]],template:function(n,u){if(n&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),r(3),t(),e(4,"a",3)(5,"span",4),r(6,"arrow_forward"),t(),r(7," \u0628\u0627\u0632\u06AF\u0634\u062A "),t()(),e(8,"form",5),h("ngSubmit",function(){return u.onSubmit()}),e(9,"div",6)(10,"div",7)(11,"label",8),r(12," \u0646\u0627\u0645 \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC "),e(13,"span",9),r(14,"*"),t()(),b(15,"input",10),c(16,oi,2,0,"div",11),t(),e(17,"div",7)(18,"label",12),r(19," \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0648\u0627\u0644\u062F "),e(20,"span",9),r(21,"*"),t()(),e(22,"select",13)(23,"option",14),r(24,"\u06CC\u06A9 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F"),t(),c(25,ui,2,2,"option",15),t(),c(26,ai,2,0,"div",11),t()(),e(27,"div",7)(28,"label",16),r(29,"\u0622\u06CC\u06A9\u0648\u0646 \u06AF\u0631\u0648\u0647 (\u0627\u062E\u062A\u06CC\u0627\u0631\u06CC)"),t(),e(30,"div",17)(31,"div",18)(32,"label",19)(33,"div",20)(34,"span",21),r(35,"cloud_upload"),t(),e(36,"p",22),r(37,"\u0628\u0631\u0627\u06CC \u0622\u067E\u0644\u0648\u062F \u06A9\u0644\u06CC\u06A9 \u06A9\u0646\u06CC\u062F \u06CC\u0627 \u0641\u0627\u06CC\u0644 \u0631\u0627 \u0627\u06CC\u0646\u062C\u0627 \u0631\u0647\u0627 \u06A9\u0646\u06CC\u062F"),t()(),e(38,"input",23),h("change",function(x){return u.onFileChange(x)}),t()()(),c(39,si,5,1,"div",24),t()(),e(40,"div",25)(41,"button",26),c(42,di,2,0,"span",27),e(43,"span"),r(44),t()()()()()),n&2){let m,x,E,U;d(3),v("",u.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"," \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),d(5),l("formGroup",u.categoryGroupForm),d(7),ee("input-error",((m=u.categoryGroupForm.get("name"))==null?null:m.invalid)&&((m=u.categoryGroupForm.get("name"))==null?null:m.touched)),d(),l("ngIf",((x=u.categoryGroupForm.get("name"))==null?null:x.invalid)&&((x=u.categoryGroupForm.get("name"))==null?null:x.touched)),d(6),ee("input-error",((E=u.categoryGroupForm.get("categoryId"))==null?null:E.invalid)&&((E=u.categoryGroupForm.get("categoryId"))==null?null:E.touched)),d(),l("ngValue",null),d(2),l("ngForOf",u.categories),d(),l("ngIf",((U=u.categoryGroupForm.get("categoryId"))==null?null:U.invalid)&&((U=u.categoryGroupForm.get("categoryId"))==null?null:U.touched)),d(13),l("ngIf",u.iconPreview),d(2),l("disabled",u.categoryGroupForm.invalid||u.isSubmitting),d(),l("ngIf",u.isSubmitting),d(2),g(u.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u0630\u062E\u06CC\u0631\u0647...":"\u0630\u062E\u06CC\u0631\u0647 \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A")}},dependencies:[A,M,F,H,B,se,de,$,ae,T,R,Fe,q,z,D,N],encapsulation:2});let o=a;return o})();var mi=o=>["/admin/category-groups/edit",o];function ci(o,a){o&1&&(e(0,"div",10)(1,"span",11),r(2,"sync"),t()())}function pi(o,a){o&1&&(e(0,"div",12)(1,"div",13)(2,"span",14),r(3,"folder_off"),t()(),e(4,"p",15),r(5,"\u0647\u06CC\u0686 \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F"),t(),e(6,"a",16),r(7,"\u0627\u0641\u0632\u0648\u062F\u0646 \u0627\u0648\u0644\u06CC\u0646 \u06AF\u0631\u0648\u0647"),t()())}function fi(o,a){if(o&1){let s=I();e(0,"tr",26)(1,"td",27),r(2),t(),e(3,"td",28)(4,"span",29),r(5),t()(),e(6,"td",30)(7,"span",31),r(8),y(9,"number"),t()(),e(10,"td",28)(11,"div",32)(12,"a",33)(13,"span",34),r(14,"edit"),t()(),e(15,"button",35),h("click",function(){let n=C(s).$implicit,u=p(2);return S(u.deleteCategoryGroup(n.id))}),e(16,"span",34),r(17,"delete"),t()()()()()}if(o&2){let s=a.$implicit;d(2),g(s.name),d(3),v(" ",s.categoryName||"-"," "),d(3),g(k(9,4,s.productCount||0)),d(4),l("routerLink",J(6,mi,s.id))}}function gi(o,a){if(o&1&&(e(0,"div",17)(1,"table",18)(2,"thead",19)(3,"tr",20)(4,"th",21),r(5,"\u0646\u0627\u0645 \u06AF\u0631\u0648\u0647"),t(),e(6,"th",21),r(7,"\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0648\u0627\u0644\u062F"),t(),e(8,"th",22),r(9,"\u062A\u0639\u062F\u0627\u062F \u0645\u062D\u0635\u0648\u0644\u0627\u062A"),t(),e(10,"th",23),r(11,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t()()(),e(12,"tbody",24),c(13,fi,18,8,"tr",25),t()()()),o&2){let s=p();d(13),l("ngForOf",s.categoryGroups)}}var Et=(()=>{let a=class a{constructor(i,n,u,m){this.route=i,this.categoryGroupService=n,this.adminCategoryGroupService=u,this.notificationService=m,this.categoryGroups=[],this.isLoading=!0,this.categoryId=null}ngOnInit(){this.route.queryParams.subscribe(i=>{this.categoryId=i.categoryId?Number(i.categoryId):null,this.loadCategoryGroups()})}loadCategoryGroups(){this.isLoading=!0,this.categoryGroupService.getCategoryGroups(this.categoryId||void 0,void 0,1,100).subscribe({next:i=>{this.categoryGroups=i.items??[],this.isLoading=!1},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u06AF\u0631\u0648\u0647\u200C\u0647\u0627\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC","error"),this.isLoading=!1}})}deleteCategoryGroup(i){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F")&&this.adminCategoryGroupService.deleteCategoryGroup(i).subscribe({next:()=>{this.notificationService.show("\u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadCategoryGroups()},error:n=>this.notificationService.show(n?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC","error")})}};a.\u0275fac=function(n){return new(n||a)(f(ie),f($e),f(qe),f(L))},a.\u0275cmp=w({type:a,selectors:[["app-admin-category-group-list"]],decls:15,vars:3,consts:[[1,"space-y-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","justify-between","gap-4"],[1,"text-2xl","font-bold","text-foreground","tracking-tight"],[1,"text-sm","text-muted-foreground","mt-1"],["routerLink","/admin/category-groups/new",1,"btn","btn-primary"],[1,"material-icons","me-2"],[1,"card","overflow-hidden","border","border-border","shadow-sm"],["class","flex justify-center items-center py-20",4,"ngIf"],["class","flex flex-col items-center justify-center py-16 text-center",4,"ngIf"],["class","w-full overflow-x-auto",4,"ngIf"],[1,"flex","justify-center","items-center","py-20"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"flex","flex-col","items-center","justify-center","py-16","text-center"],[1,"w-16","h-16","bg-muted","rounded-full","flex","items-center","justify-center","mb-4"],[1,"material-icons","text-3xl","text-muted-foreground"],[1,"text-lg","font-medium","text-foreground"],["routerLink","/admin/category-groups/new",1,"btn","btn-link","mt-2"],[1,"w-full","overflow-x-auto"],[1,"w-full","caption-bottom","text-sm","text-right"],[1,"[&_tr]:border-b","[&_tr]:border-border","bg-muted/50"],[1,"border-b","transition-colors","hover:bg-muted/50","data-[state=selected]:bg-muted"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground","text-center"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground","text-end","w-[100px]"],[1,"[&_tr:last-child]:border-0"],["class","border-b border-border transition-colors hover:bg-muted/20",4,"ngFor","ngForOf"],[1,"border-b","border-border","transition-colors","hover:bg-muted/20"],[1,"p-4","align-middle","font-medium","text-foreground"],[1,"p-4","align-middle"],[1,"inline-flex","items-center","rounded-full","border","border-border","px-2.5","py-0.5","text-xs","font-semibold","text-foreground","transition-colors","focus:outline-none","focus:ring-2","focus:ring-ring","focus:ring-offset-2"],[1,"p-4","align-middle","text-center"],[1,"text-foreground","font-mono"],[1,"flex","items-center","justify-end","gap-2"],["title","\u0648\u06CC\u0631\u0627\u06CC\u0634",1,"btn","btn-ghost","btn-icon","btn-sm","text-muted-foreground","hover:text-primary",3,"routerLink"],[1,"material-icons","text-lg"],["title","\u062D\u0630\u0641",1,"btn","btn-ghost","btn-icon","btn-sm","text-muted-foreground","hover:text-destructive",3,"click"]],template:function(n,u){n&1&&(e(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),r(4,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u06AF\u0631\u0648\u0647\u200C\u0647\u0627\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),t(),e(5,"p",3),r(6,"\u0644\u06CC\u0633\u062A \u0648 \u0645\u062F\u06CC\u0631\u06CC\u062A \u0632\u06CC\u0631\u0645\u062C\u0645\u0648\u0639\u0647\u200C\u0647\u0627\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627"),t()(),e(7,"a",4)(8,"span",5),r(9,"add"),t(),r(10," \u0627\u0641\u0632\u0648\u062F\u0646 \u06AF\u0631\u0648\u0647 \u062C\u062F\u06CC\u062F "),t()(),e(11,"div",6),c(12,ci,3,0,"div",7)(13,pi,8,0,"div",8)(14,gi,14,1,"div",9),t()()),n&2&&(d(12),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.categoryGroups.length===0),d(),l("ngIf",!u.isLoading&&u.categoryGroups.length>0))},dependencies:[A,M,F,D,N,j],encapsulation:2});let o=a;return o})();var xe=(()=>{let a=class a{constructor(i){this.http=i,this.publicUrl=`${G.API_URL}OrderStatus`,this.adminUrl=`${G.API_URL}admin/order-statuses`}getOrderStatuses(){return this.http.get(this.publicUrl)}getOrderStatus(i){return this.http.get(`${this.publicUrl}/${i}`)}createOrderStatus(i){return this.http.post(this.adminUrl,i)}updateOrderStatus(i,n){return this.http.put(`${this.adminUrl}/${i}`,n)}deleteOrderStatus(i){return this.http.delete(`${this.adminUrl}/${i}`)}};a.\u0275fac=function(n){return new(n||a)(Q(X))},a.\u0275prov=K({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();function hi(o,a){o&1&&(e(0,"div",4)(1,"span",5),r(2,"sync"),t()())}function xi(o,a){o&1&&(e(0,"div",6)(1,"span",7),r(2,"error_outline"),t(),e(3,"h2",8),r(4,"\u0633\u0641\u0627\u0631\u0634 \u06CC\u0627\u0641\u062A \u0646\u0634\u062F"),t(),e(5,"p",9),r(6,"\u0645\u0645\u06A9\u0646 \u0627\u0633\u062A \u0627\u06CC\u0646 \u0633\u0641\u0627\u0631\u0634 \u062D\u0630\u0641 \u0634\u062F\u0647 \u06CC\u0627 \u0634\u0646\u0627\u0633\u0647 \u0622\u0646 \u0627\u0634\u062A\u0628\u0627\u0647 \u0628\u0627\u0634\u062F."),t()())}function vi(o,a){if(o&1&&(e(0,"div",42),b(1,"img",43),e(2,"div",44)(3,"p",45),r(4),t(),e(5,"p",46),r(6,"\u062A\u0639\u062F\u0627\u062F: "),e(7,"span",47),r(8),t()(),e(9,"p",46),r(10,"\u0642\u06CC\u0645\u062A \u0648\u0627\u062D\u062F: "),e(11,"span",47),r(12),y(13,"number"),t(),r(14," \u062A\u0648\u0645\u0627\u0646"),t()(),e(15,"div",48)(16,"p",49),r(17),y(18,"number"),t(),e(19,"p",46),r(20,"\u062A\u0648\u0645\u0627\u0646"),t()()()),o&2){let s=a.$implicit;d(),l("src",s.product==null?null:s.product.icon,Z)("alt",s.product==null?null:s.product.name),d(3),g(s.product==null?null:s.product.name),d(4),g(s.quantity),d(4),g(k(13,6,s.sellingPrice)),d(5),g(k(18,8,s.amount))}}function bi(o,a){if(o&1&&(e(0,"option",50),r(1),t()),o&2){let s=a.$implicit;l("value",s.id),d(),g(s.name)}}function Ci(o,a){o&1&&(e(0,"span",51),r(1,"sync"),t())}function Si(o,a){if(o&1){let s=I();e(0,"div",10)(1,"div",11)(2,"div")(3,"h1",12),r(4),t(),e(5,"p",13),r(6),y(7,"date"),t()(),e(8,"a",14)(9,"span",15),r(10,"arrow_forward"),t(),r(11," \u0628\u0627\u0632\u06AF\u0634\u062A \u0628\u0647 \u0644\u06CC\u0633\u062A "),t()(),e(12,"div",16)(13,"div",17)(14,"div",18)(15,"div",19)(16,"h2",20),r(17),t()(),e(18,"div",21),c(19,vi,21,10,"div",22),t()()(),e(20,"div",23)(21,"div",24)(22,"h2",25),r(23,"\u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0645\u0634\u062A\u0631\u06CC"),t(),e(24,"div",26)(25,"p")(26,"strong",27),r(27,"\u0646\u0627\u0645:"),t(),r(28),t(),e(29,"p")(30,"strong",27),r(31,"\u0645\u0648\u0628\u0627\u06CC\u0644:"),t(),e(32,"span",28),r(33),t()(),e(34,"p")(35,"strong",27),r(36,"\u0622\u062F\u0631\u0633:"),t(),r(37),t(),e(38,"p")(39,"strong",27),r(40,"\u06A9\u062F\u067E\u0633\u062A\u06CC:"),t(),e(41,"span",28),r(42),t()()()(),e(43,"div",24)(44,"h2",25),r(45,"\u062E\u0644\u0627\u0635\u0647 \u0645\u0627\u0644\u06CC"),t(),e(46,"div",29)(47,"div",30)(48,"span",31),r(49,"\u062C\u0645\u0639 \u06A9\u0644:"),t(),e(50,"span",32),r(51),y(52,"number"),t()(),e(53,"div",30)(54,"span",31),r(55,"\u0633\u0648\u062F \u06A9\u0644:"),t(),e(56,"span",33),r(57),y(58,"number"),t()(),e(59,"div",34)(60,"span",31),r(61,"\u0648\u0636\u0639\u06CC\u062A:"),t(),e(62,"span",35),y(63,"statusClass"),e(64,"span",36),r(65),t(),r(66),t()()()(),e(67,"div",24)(68,"h2",25),r(69,"\u062A\u063A\u06CC\u06CC\u0631 \u0648\u0636\u0639\u06CC\u062A \u0633\u0641\u0627\u0631\u0634"),t(),e(70,"div",37)(71,"select",38,0),c(73,bi,2,2,"option",39),t(),e(74,"button",40),h("click",function(){C(s);let n=De(72),u=p();return S(u.updateStatus(n.value))}),c(75,Ci,2,0,"span",41),r(76),t()()()()()()}if(o&2){let s=p();d(4),v("\u062C\u0632\u0626\u06CC\u0627\u062A \u0633\u0641\u0627\u0631\u0634 #",s.order.id),d(2),v(" \u062A\u0627\u0631\u06CC\u062E \u062B\u0628\u062A: ",fe(7,19,s.order.createdAt,"yyyy/MM/dd HH:mm")," "),d(11),v("\u0645\u062D\u0635\u0648\u0644\u0627\u062A \u0633\u0641\u0627\u0631\u0634 (",s.order.orderItems==null?null:s.order.orderItems.length," \u0645\u0648\u0631\u062F)"),d(2),l("ngForOf",s.order.orderItems),d(9),ve(" ",s.order.user==null?null:s.order.user.firstName," ",s.order.user==null?null:s.order.user.lastName),d(5),g(s.order.user==null?null:s.order.user.phoneNumber),d(4),v(" ",s.order.addressSnapshot==null?null:s.order.addressSnapshot.address),d(5),g(s.order.addressSnapshot==null?null:s.order.addressSnapshot.postalCode),d(9),v("",k(52,22,s.order.totalAmount)," \u062A\u0648\u0645\u0627\u0646"),d(6),v("",k(58,24,s.order.totalProfit)," \u062A\u0648\u0645\u0627\u0646"),d(5),l("ngClass",k(63,26,s.order.orderStatus==null?null:s.order.orderStatus.name)),d(3),g(s.order.orderStatus==null?null:s.order.orderStatus.icon),d(),v(" ",s.order.orderStatus==null?null:s.order.orderStatus.name," "),d(5),l("value",s.order.orderStatusId),d(2),l("ngForOf",s.orderStatuses),d(),l("disabled",s.isUpdatingStatus),d(),l("ngIf",s.isUpdatingStatus),d(),v(" ",s.isUpdatingStatus?"\u062F\u0631 \u062D\u0627\u0644 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC...":"\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0648\u0636\u0639\u06CC\u062A"," ")}}var It=(()=>{let a=class a{constructor(i,n,u,m){this.route=i,this.adminOrderService=n,this.adminOrderStatusService=u,this.notificationService=m,this.order=null,this.orderStatuses=[],this.isLoading=!0,this.isUpdatingStatus=!1}ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i&&(this.orderId=Number(i),this.loadOrder(),this.loadOrderStatuses())}loadOrder(){this.isLoading=!0,this.adminOrderService.getOrderById(this.orderId).subscribe({next:i=>{this.order=i,this.isLoading=!1},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0633\u0641\u0627\u0631\u0634","error"),this.isLoading=!1}})}loadOrderStatuses(){this.adminOrderStatusService.getOrderStatuses().subscribe({next:i=>{this.orderStatuses=i},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627\u06CC \u0633\u0641\u0627\u0631\u0634","error")}})}updateStatus(i){if(!this.orderId||!this.order)return;this.isUpdatingStatus=!0;let n=Number(i),u=this.order.rowVersion;this.adminOrderService.updateOrderStatus(this.orderId,{orderStatusId:n,rowVersion:u}).pipe(O(()=>this.isUpdatingStatus=!1)).subscribe({next:()=>{this.notificationService.show("\u0648\u0636\u0639\u06CC\u062A \u0633\u0641\u0627\u0631\u0634 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0634\u062F","success"),this.loadOrder()},error:m=>{m?.status===409?this.notificationService.show("\u0633\u0641\u0627\u0631\u0634 \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A. \u062F\u0631 \u062D\u0627\u0644 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062C\u062F\u062F...","error"):this.notificationService.show(m?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0648\u0636\u0639\u06CC\u062A","error"),this.loadOrder()}})}};a.\u0275fac=function(n){return new(n||a)(f(ie),f(ke),f(xe),f(L))},a.\u0275cmp=w({type:a,selectors:[["app-admin-order-detail"]],decls:3,vars:3,consts:[["statusSelect",""],["class","flex justify-center items-center py-20",4,"ngIf"],["class","flex flex-col items-center justify-center py-20 text-center",4,"ngIf"],["class","max-w-5xl mx-auto",4,"ngIf"],[1,"flex","justify-center","items-center","py-20"],[1,"material-icons","animate-spin","text-primary","text-5xl"],[1,"flex","flex-col","items-center","justify-center","py-20","text-center"],[1,"material-icons","text-6xl","text-muted-foreground","mb-4"],[1,"text-xl","font-bold","text-foreground"],[1,"text-muted-foreground","mt-2"],[1,"max-w-5xl","mx-auto"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-6","gap-4"],[1,"text-2xl","font-bold","text-foreground"],[1,"text-sm","text-muted-foreground","mt-1"],["routerLink","/admin/orders",1,"btn","btn-outline","btn-sm","self-start","sm:self-center"],[1,"material-icons","text-base","ml-1"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6","items-start"],[1,"lg:col-span-2","space-y-6"],[1,"card"],[1,"p-6","border-b","border-border"],[1,"font-semibold","text-lg","text-foreground"],[1,"divide-y","divide-border"],["class","p-4 flex items-center gap-4 hover:bg-muted/50 transition-colors",4,"ngFor","ngForOf"],[1,"space-y-6","lg:sticky","top-24"],[1,"card","p-6"],[1,"font-semibold","text-lg","text-foreground","mb-4"],[1,"space-y-2","text-base","text-foreground"],[1,"font-medium","text-muted-foreground"],["dir","ltr"],[1,"space-y-3","text-base"],[1,"flex","justify-between","items-center"],[1,"text-muted-foreground"],[1,"font-bold","text-lg","text-foreground"],[1,"font-bold","text-lg","text-success"],[1,"flex","justify-between","items-center","pt-3","border-t","border-border","mt-3"],[1,"px-2","py-1","text-sm","font-semibold","rounded-full",3,"ngClass"],[1,"material-icons-outlined","text-xs","mr-1","align-middle"],[1,"space-y-4"],[1,"input",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","w-full",3,"click","disabled"],["class","material-icons animate-spin me-2",4,"ngIf"],[1,"p-4","flex","items-center","gap-4","hover:bg-muted/50","transition-colors"],[1,"w-20","h-20","rounded-lg","border","border-border","object-cover",3,"src","alt"],[1,"flex-1"],[1,"font-medium","text-foreground"],[1,"text-sm","text-muted-foreground"],[1,"font-bold"],[1,"text-right"],[1,"font-semibold","text-foreground","text-lg"],[3,"value"],[1,"material-icons","animate-spin","me-2"]],template:function(n,u){n&1&&c(0,hi,3,0,"div",1)(1,xi,7,0,"div",2)(2,Si,77,28,"div",3),n&2&&(l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&!u.order),d(),l("ngIf",u.order))},dependencies:[A,oe,M,F,D,N,j,ge,Ee],encapsulation:2});let o=a;return o})();var kt=(()=>{let a=class a{transform(i){return i?.trim()||""}};a.\u0275fac=function(n){return new(n||a)},a.\u0275pipe=at({name:"trim",type:a,pure:!0});let o=a;return o})();var yi=o=>["/admin/orders",o];function _i(o,a){if(o&1&&(e(0,"option",23),r(1),t()),o&2){let s=a.$implicit;l("value",s.id),d(),g(s.name)}}function wi(o,a){if(o&1&&(e(0,"div",24)(1,"div",25)(2,"div",26)(3,"p",27),r(4,"\u062A\u0639\u062F\u0627\u062F \u0633\u0641\u0627\u0631\u0634\u0627\u062A"),t(),e(5,"span",28),r(6,"shopping_cart"),t()(),e(7,"p",29),r(8),y(9,"number"),t()(),e(10,"div",25)(11,"div",26)(12,"p",27),r(13,"\u0645\u062C\u0645\u0648\u0639 \u062F\u0631\u0622\u0645\u062F"),t(),e(14,"span",30),r(15,"payments"),t()(),e(16,"p",29),r(17),y(18,"number"),t()(),e(19,"div",25)(20,"div",26)(21,"p",27),r(22,"\u0645\u062C\u0645\u0648\u0639 \u0633\u0648\u062F"),t(),e(23,"span",30),r(24,"trending_up"),t()(),e(25,"p",29),r(26),y(27,"number"),t()(),e(28,"div",25)(29,"div",26)(30,"p",27),r(31,"\u0645\u06CC\u0627\u0646\u06AF\u06CC\u0646 \u0633\u0641\u0627\u0631\u0634"),t(),e(32,"span",28),r(33,"analytics"),t()(),e(34,"p",29),r(35),y(36,"number"),t()()()),o&2){let s=p();d(8),g(k(9,4,s.statistics.totalOrders)),d(9),v("",k(18,6,s.statistics.totalRevenue)," \u062A\u0648\u0645\u0627\u0646"),d(9),v("",k(27,8,s.statistics.totalProfit)," \u062A\u0648\u0645\u0627\u0646"),d(9),v("",fe(36,10,s.statistics.averageOrderValue,"1.0-0")," \u062A\u0648\u0645\u0627\u0646")}}function Fi(o,a){o&1&&(e(0,"div",31)(1,"span",32),r(2,"sync"),t()())}function Ai(o,a){o&1&&(e(0,"div",33)(1,"p",34),r(2,"\u0647\u06CC\u0686 \u0633\u0641\u0627\u0631\u0634\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."),t()())}function Ei(o,a){if(o&1&&(e(0,"option",23),r(1),t()),o&2){let s=a.$implicit;l("value",s.id),d(),v(" ",s.name," ")}}function Ii(o,a){o&1&&(e(0,"span",55),r(1," sync "),t())}function ki(o,a){if(o&1){let s=I();e(0,"tr",43)(1,"td",44),r(2),t(),e(3,"td",45),r(4),y(5,"trim"),t(),e(6,"td",45),r(7),y(8,"number"),t(),e(9,"td",46)(10,"div",47)(11,"select",48),h("change",function(n){let u=C(s).$implicit,m=p(2);return S(m.quickUpdateStatus(u.id,n))}),c(12,Ei,2,2,"option",10),t(),c(13,Ii,2,0,"span",49),e(14,"span",50),r(15),t()()(),e(16,"td",45),r(17),y(18,"date"),t(),e(19,"td",51)(20,"a",52)(21,"span",53),r(22,"visibility"),t()(),e(23,"button",54),h("click",function(){let n=C(s).$implicit,u=p(2);return S(u.deleteOrder(n.id))}),e(24,"span",53),r(25,"delete"),t()()()()}if(o&2){let s=a.$implicit,i=p(2);d(2),v("#",s.id),d(2),g(k(5,12,((s.user==null?null:s.user.firstName)||"")+" "+((s.user==null?null:s.user.lastName)||""))),d(3),v("",k(8,14,s.totalAmount)," \u062A\u0648\u0645\u0627\u0646"),d(4),ee("opacity-50",i.isUpdatingStatus[s.id]),l("value",s.orderStatusId)("disabled",i.isUpdatingStatus[s.id]),d(),l("ngForOf",i.orderStatuses),d(),l("ngIf",i.isUpdatingStatus[s.id]),d(2),v(" ",i.getStatusIcon(s.orderStatusId)," "),d(2),g(fe(18,16,s.createdAt,"yyyy/MM/dd")),d(3),l("routerLink",J(19,yi,s.id))}}function Pi(o,a){if(o&1&&(e(0,"div",35)(1,"table",36)(2,"thead",37)(3,"tr",38)(4,"th",39),r(5,"\u06A9\u062F \u0633\u0641\u0627\u0631\u0634 "),t(),e(6,"th",39),r(7,"\u06A9\u0627\u0631\u0628\u0631"),t(),e(8,"th",39),r(9,"\u0645\u0628\u0644\u063A \u06A9\u0644"),t(),e(10,"th",39),r(11,"\u0648\u0636\u0639\u06CC\u062A"),t(),e(12,"th",39),r(13,"\u062A\u0627\u0631\u06CC\u062E"),t(),e(14,"th",40),r(15,"\u0639\u0645\u0644\u06CC\u0627\u062A "),t()()(),e(16,"tbody",41),c(17,ki,26,21,"tr",42),t()()()),o&2){let s=p();d(17),l("ngForOf",s.orders)}}var Pt=(()=>{let a=class a{constructor(i,n,u){this.adminOrderService=i,this.adminOrderStatusService=n,this.notificationService=u,this.orders=[],this.orderStatuses=[],this.pagination=null,this.statistics=null,this.isLoading=!0,this.currentPage=1,this.isUpdatingStatus={},this.filterForm=new te({userId:new P(null),statusId:new P(null),fromDate:new P(null),toDate:new P(null)})}ngOnInit(){this.loadOrderStatuses(),this.loadOrders(),this.loadStatistics()}getStatusIcon(i){return this.orderStatuses.find(n=>n.id===i)?.icon||"help_outline"}loadOrderStatuses(){this.adminOrderStatusService.getOrderStatuses().subscribe({next:i=>{this.orderStatuses=i},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627\u06CC \u0633\u0641\u0627\u0631\u0634","error")}})}loadOrders(i=1){this.isLoading=!0,this.currentPage=i;let n={page:this.currentPage,pageSize:10},u=this.filterForm.value;u.userId&&(n.userId=u.userId),u.statusId&&(n.statusId=u.statusId),u.fromDate&&(n.fromDate=new Date(u.fromDate).toISOString()),u.toDate&&(n.toDate=new Date(u.toDate).toISOString()),this.adminOrderService.getOrders(n).subscribe({next:m=>{this.orders=m.items??[],this.pagination=m,this.isLoading=!1},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0633\u0641\u0627\u0631\u0634\u0627\u062A","error"),this.isLoading=!1}})}loadStatistics(){let i=this.filterForm.value,n=i.fromDate?new Date(i.fromDate):void 0,u=i.toDate?new Date(i.toDate):void 0;this.adminOrderService.getOrderStatistics(n,u).subscribe({next:m=>{this.statistics=m.generalStatistics},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0622\u0645\u0627\u0631","error")}})}applyFilters(){this.loadOrders(1),this.loadStatistics()}clearFilters(){this.filterForm.reset(),this.loadOrders(1),this.loadStatistics()}quickUpdateStatus(i,n){let u=n.target,m=Number(u.value),x=this.orders.find(U=>U.id===i);if(!x)return;this.isUpdatingStatus[i]=!0;let E=x.rowVersion;this.adminOrderService.updateOrderStatus(i,{orderStatusId:m,rowVersion:E}).pipe(O(()=>{this.isUpdatingStatus[i]=!1})).subscribe({next:()=>{this.notificationService.show("\u0648\u0636\u0639\u06CC\u062A \u0633\u0641\u0627\u0631\u0634 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0634\u062F","success"),this.orders.find(ne=>ne.id===i)&&this.adminOrderService.getOrderById(i).subscribe(ne=>{let it=this.orders.findIndex($t=>$t.id===i);it>-1&&(this.orders[it]=ne)})},error:U=>{this.notificationService.show(U?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0648\u0636\u0639\u06CC\u062A","error"),this.loadOrders(this.currentPage)}})}deleteOrder(i){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0633\u0641\u0627\u0631\u0634 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F")&&this.adminOrderService.deleteOrder(i).subscribe({next:()=>{this.notificationService.show("\u0633\u0641\u0627\u0631\u0634 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadOrders(this.currentPage),this.loadStatistics()},error:n=>{this.notificationService.show(n?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u0633\u0641\u0627\u0631\u0634","error")}})}};a.\u0275fac=function(n){return new(n||a)(f(ke),f(xe),f(L))},a.\u0275cmp=w({type:a,selectors:[["app-admin-order-list"]],decls:34,vars:7,consts:[[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-foreground"],[1,"card","p-6","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4",3,"formGroup"],[1,"space-y-2"],["for","userId",1,"text-sm","font-medium","text-foreground"],["type","number","id","userId","formControlName","userId","placeholder","\u0634\u0646\u0627\u0633\u0647 \u06A9\u0627\u0631\u0628\u0631",1,"input"],["for","statusId",1,"text-sm","font-medium","text-foreground"],["id","statusId","formControlName","statusId",1,"input"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["for","fromDate",1,"text-sm","font-medium","text-foreground"],["type","date","id","fromDate","formControlName","fromDate",1,"input"],["for","toDate",1,"text-sm","font-medium","text-foreground"],["type","date","id","toDate","formControlName","toDate",1,"input"],[1,"flex","items-end","gap-2","col-span-full"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-outline",3,"click"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",4,"ngIf"],[1,"card","overflow-hidden"],["class","flex justify-center items-center p-10",4,"ngIf"],["class","text-center p-10",4,"ngIf"],["class","w-full overflow-x-auto",4,"ngIf"],[3,"value"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4","mb-6"],[1,"card","p-6"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-muted-foreground"],[1,"material-icons","text-primary"],[1,"mt-2","text-2xl","font-bold","text-foreground"],[1,"material-icons","text-success"],[1,"flex","justify-center","items-center","p-10"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"text-center","p-10"],[1,"text-muted-foreground"],[1,"w-full","overflow-x-auto"],[1,"w-full","caption-bottom","text-base","min-w-[700px]"],[1,"[&_tr]:border-b","[&_tr]:border-border"],[1,"border-b","border-border","transition-colors","hover:bg-muted"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground","whitespace-nowrap"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground","whitespace-nowrap","w-40"],[1,"[&_tr:last-child]:border-0"],["class","border-b border-border transition-colors hover:bg-muted/50",4,"ngFor","ngForOf"],[1,"border-b","border-border","transition-colors","hover:bg-muted/50"],[1,"p-4","align-middle","font-medium","text-foreground","whitespace-nowrap"],[1,"p-4","align-middle","text-foreground","whitespace-nowrap"],[1,"p-4","align-middle"],[1,"relative","w-40"],[1,"input-sm","border","border-input","rounded-md","px-2","py-1","w-full","appearance-none","pr-7","transition-opacity",3,"change","value","disabled"],["class","absolute left-2 top-1/2 -translate-y-1/2 material-icons animate-spin text-primary text-lg","aria-label","\u062F\u0631 \u062D\u0627\u0644 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC",4,"ngIf"],[1,"material-icons","text-muted-foreground","absolute","right-2","top-1/2","-translate-y-1/2","text-lg","pointer-events-none"],[1,"p-4","align-middle","space-x-2","space-x-reverse","whitespace-nowrap"],["title","\u0645\u0634\u0627\u0647\u062F\u0647 \u062C\u0632\u0626\u06CC\u0627\u062A",1,"btn","btn-ghost","btn-sm","btn-icon",3,"routerLink"],[1,"material-icons","text-base"],["title","\u062D\u0630\u0641",1,"btn","btn-ghost","btn-sm","btn-icon","text-destructive","hover:bg-destructive/10",3,"click"],["aria-label","\u062F\u0631 \u062D\u0627\u0644 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC",1,"absolute","left-2","top-1/2","-translate-y-1/2","material-icons","animate-spin","text-primary","text-lg"]],template:function(n,u){n&1&&(e(0,"div",0)(1,"h1",1),r(2,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u0633\u0641\u0627\u0631\u0634\u0627\u062A"),t()(),e(3,"div",2)(4,"form",3)(5,"div",4)(6,"label",5),r(7,"\u0634\u0646\u0627\u0633\u0647 \u06A9\u0627\u0631\u0628\u0631"),t(),b(8,"input",6),t(),e(9,"div",4)(10,"label",7),r(11,"\u0648\u0636\u0639\u06CC\u062A"),t(),e(12,"select",8)(13,"option",9),r(14,"\u0647\u0645\u0647 \u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627"),t(),c(15,_i,2,2,"option",10),t()(),e(16,"div",4)(17,"label",11),r(18,"\u0627\u0632 \u062A\u0627\u0631\u06CC\u062E"),t(),b(19,"input",12),t(),e(20,"div",4)(21,"label",13),r(22,"\u062A\u0627 \u062A\u0627\u0631\u06CC\u062E"),t(),b(23,"input",14),t(),e(24,"div",15)(25,"button",16),h("click",function(){return u.applyFilters()}),r(26,"\u0627\u0639\u0645\u0627\u0644 \u0641\u06CC\u0644\u062A\u0631"),t(),e(27,"button",17),h("click",function(){return u.clearFilters()}),r(28,"\u067E\u0627\u06A9 \u06A9\u0631\u062F\u0646"),t()()()(),c(29,wi,37,13,"div",18),e(30,"div",19),c(31,Fi,3,0,"div",20)(32,Ai,3,0,"div",21)(33,Pi,18,1,"div",22),t()),n&2&&(d(4),l("formGroup",u.filterForm),d(9),l("ngValue",null),d(2),l("ngForOf",u.orderStatuses),d(14),l("ngIf",u.statistics),d(2),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.orders.length===0),d(),l("ngIf",!u.isLoading&&u.orders.length>0))},dependencies:[A,M,F,D,N,H,B,se,de,$,ue,ae,T,R,q,z,j,ge,kt],encapsulation:2});let o=a;return o})();function Li(o,a){o&1&&(e(0,"span",21),r(1,"sync"),t())}var Ze=(()=>{let a=class a{constructor(i,n,u,m){this.route=i,this.router=n,this.notificationService=u,this.adminOrderStatusService=m,this.isEditMode=!1,this.statusId=null,this.isSubmitting=!1,this.statusForm=new te({name:new P("",[_.required,_.maxLength(100)]),icon:new P("",[_.maxLength(50)])})}ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i&&(this.statusId=Number(i),this.isEditMode=!0,this.loadStatusData())}loadStatusData(){this.statusId&&this.adminOrderStatusService.getOrderStatus(this.statusId).subscribe({next:i=>{this.statusForm.patchValue(i)},error:i=>this.notificationService.show(i?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A","error")})}onSubmit(){if(this.statusForm.invalid||this.isSubmitting)return;this.isSubmitting=!0;let i=this.statusForm.value;(this.isEditMode&&this.statusId?this.adminOrderStatusService.updateOrderStatus(this.statusId,i):this.adminOrderStatusService.createOrderStatus(i)).pipe(O(()=>this.isSubmitting=!1)).subscribe({next:()=>{this.notificationService.show(`\u0648\u0636\u0639\u06CC\u062A \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A ${this.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"} \u0634\u062F`,"success"),this.router.navigate(["/admin/order-statuses"])},error:u=>this.notificationService.show(u?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062B\u0628\u062A \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A","error")})}};a.\u0275fac=function(n){return new(n||a)(f(ie),f(ce),f(L),f(xe))},a.\u0275cmp=w({type:a,selectors:[["app-admin-order-status-form"]],decls:34,vars:6,consts:[[1,"max-w-md","mx-auto"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-foreground","tracking-tight"],["routerLink","/admin/order-statuses",1,"btn","btn-ghost","btn-sm","text-muted-foreground","hover:text-foreground"],[1,"material-icons","text-sm","me-1"],[1,"card","p-6","space-y-6","bg-card",3,"ngSubmit","formGroup"],[1,"space-y-4"],[1,"space-y-2"],["for","name",1,"text-sm","font-medium","text-foreground"],[1,"text-destructive"],["type","text","id","name","formControlName","name","placeholder","\u0645\u062B\u0627\u0644: \u062F\u0631 \u062D\u0627\u0644 \u067E\u0631\u062F\u0627\u0632\u0634",1,"input","w-full"],["for","icon",1,"text-sm","font-medium","text-foreground"],[1,"flex","gap-3"],["type","text","id","icon","formControlName","icon","placeholder","shopping_cart",1,"input","flex-1","ltr-input"],[1,"w-10","h-10","flex","items-center","justify-center","rounded-md","border","border-input","bg-muted/30","text-foreground"],[1,"material-icons"],[1,"text-xs","text-muted-foreground"],["href","https://fonts.google.com/icons","target","_blank",1,"text-primary","underline","hover:text-primary/80"],[1,"pt-6","border-t","border-border","flex","justify-end"],["type","submit",1,"btn","btn-primary","w-full","sm:w-auto",3,"disabled"],["class","material-icons animate-spin me-2 text-lg",4,"ngIf"],[1,"material-icons","animate-spin","me-2","text-lg"]],template:function(n,u){if(n&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),r(3),t(),e(4,"a",3)(5,"span",4),r(6,"arrow_forward"),t(),r(7," \u0628\u0627\u0632\u06AF\u0634\u062A "),t()(),e(8,"form",5),h("ngSubmit",function(){return u.onSubmit()}),e(9,"div",6)(10,"div",7)(11,"label",8),r(12," \u0646\u0627\u0645 \u0648\u0636\u0639\u06CC\u062A "),e(13,"span",9),r(14,"*"),t()(),b(15,"input",10),t(),e(16,"div",7)(17,"label",11),r(18,"\u0622\u06CC\u06A9\u0648\u0646 (Material Icons)"),t(),e(19,"div",12),b(20,"input",13),e(21,"div",14)(22,"span",15),r(23),t()()(),e(24,"p",16),r(25," \u0646\u0627\u0645 \u0622\u06CC\u06A9\u0648\u0646 \u0631\u0627 \u0627\u0632 "),e(26,"a",17),r(27,"Google Fonts"),t(),r(28," \u06A9\u067E\u06CC \u06A9\u0646\u06CC\u062F. "),t()()(),e(29,"div",18)(30,"button",19),c(31,Li,2,0,"span",20),e(32,"span"),r(33),t()()()()()),n&2){let m;d(3),v("",u.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"," \u0648\u0636\u0639\u06CC\u062A \u0633\u0641\u0627\u0631\u0634"),d(5),l("formGroup",u.statusForm),d(15),g(((m=u.statusForm.get("icon"))==null?null:m.value)||"help_outline"),d(7),l("disabled",u.statusForm.invalid||u.isSubmitting),d(),l("ngIf",u.isSubmitting),d(2),g(u.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u0630\u062E\u06CC\u0631\u0647...":"\u0630\u062E\u06CC\u0631\u0647 \u0648\u0636\u0639\u06CC\u062A")}},dependencies:[A,F,H,B,$,T,R,q,z,D,N],encapsulation:2});let o=a;return o})();var Mi=o=>["/admin/order-statuses/edit",o];function Di(o,a){o&1&&(e(0,"div",9)(1,"span",10),r(2,"sync"),t()())}function Ni(o,a){o&1&&(e(0,"div",11)(1,"p",12),r(2,"\u0647\u06CC\u0686 \u0648\u0636\u0639\u06CC\u062A\u06CC \u062A\u0639\u0631\u06CC\u0641 \u0646\u0634\u062F\u0647 \u0627\u0633\u062A."),t()())}function Oi(o,a){if(o&1){let s=I();e(0,"div",15)(1,"div",16)(2,"div",17)(3,"span",18),r(4),t()(),e(5,"div")(6,"h3",19),r(7),t(),e(8,"p",20),r(9),t()()(),e(10,"div",21)(11,"a",22)(12,"span",23),r(13,"edit"),t()(),e(14,"button",24),h("click",function(){let n=C(s).$implicit,u=p(2);return S(u.deleteStatus(n.id))}),e(15,"span",23),r(16,"delete"),t()()()()}if(o&2){let s=a.$implicit;d(4),g(s.icon||"circle"),d(3),g(s.name),d(2),v("",(s.orders==null?null:s.orders.length)||0," \u0633\u0641\u0627\u0631\u0634 \u0645\u0631\u062A\u0628\u0637"),d(2),l("routerLink",J(4,Mi,s.id))}}function Vi(o,a){if(o&1&&(e(0,"div",13),c(1,Oi,17,6,"div",14),t()),o&2){let s=p();d(),l("ngForOf",s.statuses)}}var Lt=(()=>{let a=class a{constructor(i,n){this.adminOrderStatusService=i,this.notificationService=n,this.statuses=[],this.isLoading=!0}ngOnInit(){this.loadStatuses()}loadStatuses(){this.isLoading=!0,this.adminOrderStatusService.getOrderStatuses().subscribe({next:i=>{this.statuses=i,this.isLoading=!1},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627","error"),this.isLoading=!1}})}deleteStatus(i){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0648\u0636\u0639\u06CC\u062A \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F")&&this.adminOrderStatusService.deleteOrderStatus(i).subscribe({next:()=>{this.notificationService.show("\u0648\u0636\u0639\u06CC\u062A \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadStatuses()},error:n=>this.notificationService.show(n?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u0648\u0636\u0639\u06CC\u062A","error")})}};a.\u0275fac=function(n){return new(n||a)(f(xe),f(L))},a.\u0275cmp=w({type:a,selectors:[["app-admin-order-status-list"]],decls:12,vars:3,consts:[[1,"space-y-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-foreground","tracking-tight"],["routerLink","/admin/order-statuses/new",1,"btn","btn-primary","btn-sm","sm:btn-md"],[1,"material-icons","me-1","text-lg"],[1,"card","border","border-border","shadow-sm","overflow-hidden"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","text-center py-12",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 p-4",4,"ngIf"],[1,"flex","justify-center","items-center","py-12"],[1,"material-icons","animate-spin","text-primary","text-3xl"],[1,"text-center","py-12"],[1,"text-muted-foreground"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-4","p-4"],["class","flex items-center justify-between p-4 rounded-lg border border-border bg-background hover:border-primary/50 transition-colors group",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","p-4","rounded-lg","border","border-border","bg-background","hover:border-primary/50","transition-colors","group"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","rounded-full","bg-primary/10","text-primary","flex","items-center","justify-center"],[1,"material-icons"],[1,"font-semibold","text-foreground"],[1,"text-xs","text-muted-foreground","mt-0.5"],[1,"flex","gap-1","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"btn","btn-icon","btn-ghost","btn-sm","text-muted-foreground","hover:text-primary",3,"routerLink"],[1,"material-icons","text-lg"],[1,"btn","btn-icon","btn-ghost","btn-sm","text-muted-foreground","hover:text-destructive",3,"click"]],template:function(n,u){n&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"\u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627\u06CC \u0633\u0641\u0627\u0631\u0634"),t(),e(4,"a",3)(5,"span",4),r(6,"add"),t(),r(7," \u0648\u0636\u0639\u06CC\u062A \u062C\u062F\u06CC\u062F "),t()(),e(8,"div",5),c(9,Di,3,0,"div",6)(10,Ni,3,0,"div",7)(11,Vi,2,1,"div",8),t()()),n&2&&(d(9),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.statuses.length===0),d(),l("ngIf",!u.isLoading&&u.statuses.length>0))},dependencies:[A,M,F,D,N],encapsulation:2});let o=a;return o})();function Ui(o,a){if(o&1&&(e(0,"option",20),r(1),t()),o&2){let s=a.$implicit;l("value",s.id),d(),lt(" ",(s.attributes.color==null?null:s.attributes.color.value)||"\u0631\u0646\u06AF"," / ",(s.attributes.size==null?null:s.attributes.size.value)||"\u0633\u0627\u06CC\u0632"," (\u0645\u0648\u062C\u0648\u062F\u06CC: ",s.stock,") ")}}function Ti(o,a){o&1&&(e(0,"div",21),r(1," \u062A\u0639\u062F\u0627\u062F \u0628\u0627\u06CC\u062F \u0639\u062F\u062F\u06CC \u0628\u0632\u0631\u06AF\u062A\u0631 \u0627\u0632 \u0635\u0641\u0631 \u0628\u0627\u0634\u062F "),t())}function ji(o,a){o&1&&(e(0,"span",22),r(1,"sync"),t())}var Mt=(()=>{let a=class a{constructor(i,n){this.adminProductService=i,this.notificationService=n,this.stockUpdated=new Ke,this.cancelled=new Ke,this.isSubmitting=!1,this.stockForm=new te({variantId:new P(null,_.required),quantity:new P(1,[_.required,_.min(1),_.max(1e5)]),operation:new P("add",[_.required]),notes:new P("")})}ngOnInit(){this.setInitialVariant()}ngOnChanges(i){i.variants&&this.setInitialVariant()}setInitialVariant(){this.variants&&this.variants.length>0&&!this.stockForm.get("variantId")?.value&&this.stockForm.get("variantId")?.setValue(this.variants[0].id)}updateStock(){if(this.stockForm.invalid||!this.productId)return;this.isSubmitting=!0;let{variantId:i,quantity:n,operation:u,notes:m}=this.stockForm.value,x={variantId:i,quantity:n,notes:m};(u==="add"?this.adminProductService.addStock(x):this.adminProductService.removeStock(x)).pipe(O(()=>this.isSubmitting=!1)).subscribe({next:()=>{let U=u==="add"?"\u0645\u0648\u062C\u0648\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u0641\u0632\u0648\u062F\u0647 \u0634\u062F":"\u0645\u0648\u062C\u0648\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u06A9\u0633\u0631 \u0634\u062F";this.notificationService.show(U,"success"),this.stockUpdated.emit(),this.stockForm.reset({variantId:this.variants?.[0].id,operation:"add",quantity:1,notes:""})},error:U=>{this.notificationService.show(U?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0645\u0648\u062C\u0648\u062F\u06CC","error")}})}cancel(){this.cancelled.emit()}};a.\u0275fac=function(n){return new(n||a)(f(le),f(L))},a.\u0275cmp=w({type:a,selectors:[["app-stock-management"]],inputs:{productId:"productId",variants:"variants"},outputs:{stockUpdated:"stockUpdated",cancelled:"cancelled"},features:[ut],decls:32,vars:6,consts:[[1,"card","p-6"],[1,"text-lg","font-semibold","mb-4","text-foreground"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"space-y-2"],["for","variantStock",1,"text-sm","font-medium","text-foreground"],["id","variantStock","formControlName","variantId",1,"input"],[3,"value",4,"ngFor","ngForOf"],["for","quantity",1,"text-sm","font-medium","text-foreground"],["type","number","id","quantity","formControlName","quantity","min","1","placeholder","\u062A\u0639\u062F\u0627\u062F \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F",1,"input"],["class","text-xs text-destructive",4,"ngIf"],["for","operation",1,"text-sm","font-medium","text-foreground"],["id","operation","formControlName","operation",1,"input"],["value","add"],["value","remove"],["for","notes",1,"text-sm","font-medium","text-foreground"],["id","notes","formControlName","notes","placeholder","\u062A\u0648\u0636\u06CC\u062D\u0627\u062A...",1,"input","min-h-[80px]"],[1,"flex","gap-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","material-icons animate-spin me-2",4,"ngIf"],["type","button",1,"btn","btn-outline",3,"click"],[3,"value"],[1,"text-xs","text-destructive"],[1,"material-icons","animate-spin","me-2"]],template:function(n,u){if(n&1&&(e(0,"div",0)(1,"h2",1),r(2,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u0648\u062C\u0648\u062F\u06CC"),t(),e(3,"form",2),h("ngSubmit",function(){return u.updateStock()}),e(4,"div",3)(5,"label",4),r(6,"\u0627\u0646\u062A\u062E\u0627\u0628 \u062A\u0646\u0648\u0639"),t(),e(7,"select",5),c(8,Ui,2,4,"option",6),t()(),e(9,"div",3)(10,"label",7),r(11,"\u062A\u0639\u062F\u0627\u062F"),t(),b(12,"input",8),c(13,Ti,2,0,"div",9),t(),e(14,"div",3)(15,"label",10),r(16,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t(),e(17,"select",11)(18,"option",12),r(19,"\u0627\u0641\u0632\u0648\u062F\u0646 \u0628\u0647 \u0645\u0648\u062C\u0648\u062F\u06CC"),t(),e(20,"option",13),r(21,"\u06A9\u0633\u0631 \u0627\u0632 \u0645\u0648\u062C\u0648\u062F\u06CC"),t()()(),e(22,"div",3)(23,"label",14),r(24,"\u06CC\u0627\u062F\u062F\u0627\u0634\u062A (\u0627\u062E\u062A\u06CC\u0627\u0631\u06CC)"),t(),b(25,"textarea",15),t(),e(26,"div",16)(27,"button",17),c(28,ji,2,0,"span",18),r(29),t(),e(30,"button",19),h("click",function(){return u.cancel()}),r(31," \u0627\u0646\u0635\u0631\u0627\u0641 "),t()()()()),n&2){let m;d(3),l("formGroup",u.stockForm),d(5),l("ngForOf",u.variants),d(5),l("ngIf",((m=u.stockForm.get("quantity"))==null?null:m.invalid)&&((m=u.stockForm.get("quantity"))==null?null:m.touched)),d(14),l("disabled",u.stockForm.invalid||u.isSubmitting),d(),l("ngIf",u.isSubmitting),d(),v(" ",u.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u0627\u0639\u0645\u0627\u0644...":"\u0627\u0639\u0645\u0627\u0644 \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A"," ")}},dependencies:[A,M,F,H,B,se,de,$,ue,ae,T,R,je,q,z],encapsulation:2});let o=a;return o})();var Gi=()=>[];function $i(o,a){if(o&1&&(e(0,"option",46),r(1),t()),o&2){let s=a.$implicit;l("value",s.id),d(),g(s.name)}}function Ri(o,a){o&1&&(e(0,"div",52),r(1," \u0627\u0635\u0644\u06CC "),t())}function Bi(o,a){if(o&1){let s=I();e(0,"div",47),b(1,"img",48),e(2,"div",49)(3,"button",50),h("click",function(){let n=C(s).$implicit,u=p();return S(u.removeCurrentImage(n.id))}),e(4,"span",4),r(5,"close"),t()()(),c(6,Ri,2,0,"div",51),t()}if(o&2){let s=a.$implicit,i=p();d(),l("src",i.getMediaUrl(s.url),Z),d(5),l("ngIf",s.isPrimary)}}function qi(o,a){o&1&&(e(0,"div",59),r(1," \u0627\u0635\u0644\u06CC "),t())}function zi(o,a){if(o&1){let s=I();e(0,"div",47),b(1,"img",53),e(2,"div",54)(3,"div",55)(4,"button",50),h("click",function(){let n=C(s).$implicit,u=p();return S(u.removeNewImage(n.id))}),e(5,"span",4),r(6,"close"),t()()(),e(7,"button",56),h("click",function(){let n=C(s).$implicit,u=p();return S(u.setPrimaryNewImage(n.id))}),e(8,"span",4),r(9),t(),e(10,"span",57),r(11),t()()(),c(12,qi,2,0,"div",58),t()}if(o&2){let s=a.$implicit,i=p();d(),l("src",s.url,Z),d(6),ee("bg-primary",i.primaryNewFileId===s.id),d(2),g(i.primaryNewFileId===s.id?"star":"star_border"),d(2),g(i.primaryNewFileId===s.id?"\u0627\u0635\u0644\u06CC":"\u0627\u0646\u062A\u062E\u0627\u0628 \u0627\u0635\u0644\u06CC"),d(),l("ngIf",i.primaryNewFileId===s.id)}}function Hi(o,a){if(o&1){let s=I();e(0,"button",60),h("click",function(){C(s);let n=p();return S(n.openStockModal())}),e(1,"span",38),r(2,"inventory_2"),t(),r(3," \u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u0648\u062C\u0648\u062F\u06CC "),t()}}function Wi(o,a){if(o&1){let s=I();e(0,"button",78),h("click",function(){C(s);let n=p().index,u=p();return S(u.removeVariant(n))}),e(1,"span",79),r(2,"delete"),t()()}}function Ji(o,a){if(o&1&&(e(0,"option",46),r(1),t()),o&2){let s=a.$implicit;l("value",s.id),d(),g(s.displayValue)}}function Ki(o,a){if(o&1&&(e(0,"div",64)(1,"label",80),r(2),e(3,"span",13),r(4,"*"),t()(),e(5,"select",81)(6,"option",82),r(7,"\u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F"),t(),c(8,Ji,2,2,"option",21),t()()),o&2){let s=a.$implicit;d(2),v("",s.displayName," "),d(3),l("formControlName","attr_"+s.id),d(),l("ngValue",null),d(2),l("ngForOf",s.values)}}function Qi(o,a){if(o&1&&(e(0,"div",61),c(1,Wi,3,0,"button",62),e(2,"div",63)(3,"div",64)(4,"label",65),r(5,"\u06A9\u062F \u062A\u0646\u0648\u0639 (SKU)"),t(),b(6,"input",66),t(),e(7,"div",64)(8,"label",65),r(9,"\u0642\u06CC\u0645\u062A \u062E\u0631\u06CC\u062F (\u062A\u0648\u0645\u0627\u0646)"),t(),b(10,"input",67),t(),e(11,"div",64)(12,"label",65),r(13,"\u0642\u06CC\u0645\u062A \u0627\u0635\u0644\u06CC (\u062A\u0648\u0645\u0627\u0646)"),t(),b(14,"input",68),t(),e(15,"div",64)(16,"label",65),r(17,"\u0642\u06CC\u0645\u062A \u0641\u0631\u0648\u0634 (\u062A\u0648\u0645\u0627\u0646)"),t(),b(18,"input",69),t()(),e(19,"div",70)(20,"div",64)(21,"label",65),r(22,"\u0645\u0648\u062C\u0648\u062F\u06CC"),t(),b(23,"input",71),t(),c(24,Ki,9,4,"div",72),e(25,"div",73)(26,"label",74),b(27,"input",75),e(28,"span",76),r(29,"\u0645\u0648\u062C\u0648\u062F\u06CC \u0646\u0627\u0645\u062D\u062F\u0648\u062F"),t()(),e(30,"label",74),b(31,"input",77),e(32,"span",76),r(33,"\u062A\u0646\u0648\u0639 \u0641\u0639\u0627\u0644 \u0628\u0627\u0634\u062F"),t()()()()()),o&2){let s,i,n=a.$implicit,u=a.index,m=p();l("formGroupName",u),d(),l("ngIf",m.variants.length>1),d(3),l("for","sku"+u),d(2),l("id","sku"+u),d(2),l("for","purchasePrice"+u),d(2),l("id","purchasePrice"+u),d(2),l("for","originalPrice"+u),d(2),l("id","originalPrice"+u),d(2),l("for","sellingPrice"+u),d(2),l("id","sellingPrice"+u),d(3),l("for","stock"+u),d(2),ee("opacity-50",m.isEditMode||((s=n.get("isUnlimited"))==null?null:s.value)),l("id","stock"+u)("readonly",m.isEditMode||((i=n.get("isUnlimited"))==null?null:i.value)),d(),l("ngForOf",m.attributes)}}function Xi(o,a){o&1&&(e(0,"span",83),r(1,"sync"),t())}function Yi(o,a){if(o&1){let s=I();e(0,"div",84)(1,"div",85)(2,"div",86)(3,"h3",87),r(4,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u0648\u062C\u0648\u062F\u06CC"),t(),e(5,"button",88),h("click",function(){C(s);let n=p();return S(n.closeStockModal())}),e(6,"span",89),r(7,"close"),t()()(),e(8,"div",90)(9,"app-stock-management",91),h("stockUpdated",function(){C(s);let n=p();return S(n.onStockUpdated())})("cancelled",function(){C(s);let n=p();return S(n.closeStockModal())}),t()()()()}if(o&2){let s=p();d(9),l("productId",s.productId)("variants",(s.product==null?null:s.product.variants)||Ne(2,Gi))}}var et=(()=>{let a=class a{constructor(i,n,u,m,x,E,U,ne){this.fb=i,this.route=n,this.router=u,this.adminProductService=m,this.categoryGroupService=x,this.notificationService=E,this.mediaService=U,this.cdr=ne,this.isEditMode=!1,this.productId=null,this.isSubmitting=!1,this.categoryGroups=[],this.attributes=[],this.destroy$=new nt,this.product=null,this.currentImages=[],this.imagePreviews=[],this.newlyAddedFiles=[],this.deletedMediaIds=[],this.showStockModal=!1,this.primaryNewFileId=null,this.productForm=this.fb.group({name:["",[_.required,_.maxLength(200)]],sku:["",[_.maxLength(100)]],description:[""],categoryGroupId:[null,_.required],isActive:[!0],rowVersion:[null],variants:this.fb.array([])})}get variants(){return this.productForm.get("variants")}ngOnInit(){Me({categoryGroups:this.categoryGroupService.getCategoryGroups(void 0,void 0,1,500).pipe(Le(i=>i.items??[]),Je(()=>We([]))),attributes:this.adminProductService.getAllAttributes().pipe(Je(()=>We([])))}).subscribe({next:({categoryGroups:i,attributes:n})=>{this.categoryGroups=i,this.attributes=n,this.cdr.markForCheck();let u=this.route.snapshot.paramMap.get("id");u?(this.isEditMode=!0,this.productId=Number(u),this.loadProductData()):this.addVariant()},error:()=>this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0627\u0648\u0644\u06CC\u0647","error")})}loadProductData(){this.productId&&this.adminProductService.getProductById(this.productId).subscribe({next:i=>{this.product=i,this.productForm.patchValue(rt(Pe({},i),{sku:i.sku,rowVersion:i.rowVersion?i.rowVersion:null})),this.currentImages=[...i.images],this.deletedMediaIds=[],this.newlyAddedFiles=[],this.imagePreviews=[],this.primaryNewFileId=null,this.variants.clear(),i.variants.forEach(n=>{let u=this.createVariantGroup(n);this.variants.push(u)}),this.cdr.markForCheck()},error:()=>this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062D\u0635\u0648\u0644","error")})}createVariantGroup(i){let n={id:[i?.id],sku:[i?.sku||""],purchasePrice:[i?.purchasePrice||0,[_.required,_.min(0)]],originalPrice:[i?.originalPrice||0,[_.required,_.min(0)]],sellingPrice:[i?.sellingPrice||0,[_.required,_.min(0)]],stock:[{value:i?.stock||0,disabled:this.isEditMode},[_.required,_.min(0)]],isUnlimited:[i?.isUnlimited||!1],isActive:[i?.isActive??!0]};this.attributes.forEach(E=>{let U=i?.attributes?i.attributes[E.name.toLowerCase()]:null;n[`attr_${E.id}`]=new P(U?.id||null,[_.required])});let u=this.fb.group(n),m=u.get("isUnlimited"),x=u.get("stock");return m&&x&&(m.valueChanges.pipe(ot(this.destroy$)).subscribe(E=>{E?(x.setValue(0),x.disable()):this.isEditMode||x.enable()}),m.value&&x.disable()),u}addVariant(){this.variants.push(this.createVariantGroup()),this.cdr.markForCheck()}removeVariant(i){this.variants.length>1?this.variants.removeAt(i):this.notificationService.show("\u0645\u062D\u0635\u0648\u0644 \u0628\u0627\u06CC\u062F \u062D\u062F\u0627\u0642\u0644 \u06CC\u06A9 \u062A\u0646\u0648\u0639 \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F","info")}onFileChange(i){let n=i.target;n.files&&(Array.from(n.files).forEach(m=>{let x=this.generateUniqueId();this.newlyAddedFiles.push({file:m,id:x});let E=new FileReader;E.onload=U=>{this.imagePreviews.push({id:x,url:U.target.result}),this.currentImages.length===0&&!this.primaryNewFileId&&(this.primaryNewFileId=x),this.cdr.markForCheck()},E.readAsDataURL(m)}),n.value="")}setPrimaryNewImage(i){this.primaryNewFileId=i}generateUniqueId(){return`${Date.now()}-${Math.random().toString(36).substring(2,9)}`}removeNewImage(i){this.newlyAddedFiles=this.newlyAddedFiles.filter(n=>n.id!==i),this.imagePreviews=this.imagePreviews.filter(n=>n.id!==i),this.primaryNewFileId===i&&(this.primaryNewFileId=this.newlyAddedFiles.length>0?this.newlyAddedFiles[0].id:null)}removeCurrentImage(i){this.currentImages=this.currentImages.filter(n=>n.id!==i),this.deletedMediaIds.push(i)}getMediaUrl(i){return this.mediaService.getMediaUrl(i)}onSubmit(){if(this.productForm.invalid){this.productForm.markAllAsTouched(),this.notificationService.show("\u0644\u0637\u0641\u0627 \u062A\u0645\u0627\u0645 \u0641\u06CC\u0644\u062F\u0647\u0627\u06CC \u0627\u0644\u0632\u0627\u0645\u06CC \u0631\u0627 \u067E\u0631 \u06A9\u0646\u06CC\u062F","info");return}let i=this.productForm.getRawValue(),n=[];for(let E of i.variants){let U=this.attributes.map(ne=>E[`attr_${ne.id}`]).filter(ne=>ne!=null&&ne!=="").map(ne=>Number(ne));if(U.length!==this.attributes.length){this.notificationService.show("\u0644\u0637\u0641\u0627 \u062A\u0645\u0627\u0645 \u0648\u06CC\u0698\u06AF\u06CC\u200C\u0647\u0627\u06CC \u062A\u0646\u0648\u0639\u200C\u0647\u0627 \u0631\u0627 \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F.","error");return}n.push({Id:E.id||void 0,Sku:E.sku||null,PurchasePrice:E.purchasePrice,OriginalPrice:E.originalPrice,SellingPrice:E.sellingPrice,Stock:E.stock,IsUnlimited:E.isUnlimited,IsActive:E.isActive,AttributeValueIds:U})}this.isSubmitting=!0;let u=new FormData;u.append("Name",i.name),i.sku&&u.append("Sku",i.sku),u.append("Description",i.description||""),u.append("CategoryGroupId",i.categoryGroupId.toString()),u.append("IsActive",i.isActive.toString()),u.append("VariantsJson",JSON.stringify(n)),this.isEditMode&&this.productId&&(u.append("Id",this.productId.toString()),i.rowVersion&&u.append("RowVersion",i.rowVersion));let m=-1;this.newlyAddedFiles.forEach((E,U)=>{u.append("Images",E.file,E.file.name),E.id===this.primaryNewFileId&&(m=U)}),m>=0&&u.append("PrimaryImageIndex",m.toString()),this.deletedMediaIds.forEach(E=>u.append("DeletedMediaIds",E.toString())),(this.isEditMode&&this.productId?this.adminProductService.updateProduct(this.productId,u):this.adminProductService.createProduct(u)).pipe(O(()=>{this.isSubmitting=!1,this.cdr.markForCheck()})).subscribe({next:()=>{this.notificationService.show(`\u0645\u062D\u0635\u0648\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A ${this.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"} \u0634\u062F`,"success"),this.isEditMode?this.loadProductData():this.router.navigate(["/admin/products"])},error:E=>{if(E.status===409)this.notificationService.show("\u0627\u06CC\u0646 \u0631\u06A9\u0648\u0631\u062F \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627 \u0635\u0641\u062D\u0647 \u0631\u0627 \u0631\u0641\u0631\u0634 \u06A9\u0646\u06CC\u062F.","error"),this.loadProductData();else{let U=E.error?.message||E.error?.title||"\u062E\u0637\u0627 \u062F\u0631 \u062B\u0628\u062A \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A";this.notificationService.show(U,"error")}}})}openStockModal(){this.showStockModal=!0}closeStockModal(){this.showStockModal=!1}onStockUpdated(){this.loadProductData(),this.closeStockModal()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};a.\u0275fac=function(n){return new(n||a)(f(Ge),f(ie),f(ce),f(le),f($e),f(L),f(_e),f(ft))},a.\u0275cmp=w({type:a,selectors:[["app-admin-product-form"]],decls:81,vars:14,consts:[[1,"max-w-5xl","mx-auto","space-y-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-foreground","tracking-tight"],["routerLink","/admin/products",1,"btn","btn-outline","btn-sm","gap-2"],[1,"material-icons","text-sm"],[1,"space-y-8",3,"ngSubmit","formGroup"],[1,"card","p-6","space-y-6"],[1,"border-b","border-border","pb-4","mb-4"],[1,"text-lg","font-semibold","text-foreground","flex","items-center","gap-2"],[1,"material-icons","text-primary"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"space-y-2","md:col-span-2"],["for","name",1,"text-sm","font-medium","text-foreground"],[1,"text-destructive"],["type","text","id","name","formControlName","name",1,"input","w-full"],[1,"space-y-2"],["for","sku",1,"text-sm","font-medium","text-foreground"],["type","text","id","sku","formControlName","sku",1,"input","w-full"],["for","categoryGroupId",1,"text-sm","font-medium","text-foreground"],["id","categoryGroupId","formControlName","categoryGroupId",1,"input","w-full"],["disabled","",3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],[1,"space-y-2","md:col-span-2","flex","items-end","pb-2"],[1,"inline-flex","items-center","cursor-pointer","gap-3"],["type","checkbox","formControlName","isActive",1,"checkbox","h-5","w-5","rounded","border-input","text-primary","focus:ring-primary"],[1,"text-sm","font-medium","text-foreground"],["for","description",1,"text-sm","font-medium","text-foreground"],["id","description","formControlName","description","rows","4",1,"input","w-full","min-h-[120px]","resize-y"],[1,"grid","grid-cols-2","sm:grid-cols-3","md:grid-cols-4","lg:grid-cols-5","gap-4"],[1,"aspect-square","rounded-lg","border-2","border-dashed","border-border","hover:bg-muted/50","hover:border-primary/50","transition-colors","cursor-pointer","flex","flex-col","items-center","justify-center","text-muted-foreground","hover:text-primary"],[1,"material-icons","text-3xl","mb-2"],[1,"text-xs","font-medium"],["type","file","multiple","","accept","image/*",1,"hidden",3,"change"],["class","group relative aspect-square rounded-lg border border-border overflow-hidden bg-background",4,"ngFor","ngForOf"],[1,"flex","flex-col","sm:flex-row","sm:items-center","justify-between","gap-4","border-b","border-border","pb-4","mb-4"],[1,"flex","gap-2"],["type","button","class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline","btn-sm",3,"click"],[1,"material-icons","text-sm","me-2"],["formArrayName","variants",1,"space-y-4"],["class","relative rounded-xl border border-border bg-muted/30 p-4 sm:p-6 transition-all hover:border-primary/50",3,"formGroupName",4,"ngFor","ngForOf"],[1,"sticky","bottom-0","z-10","bg-background/80","backdrop-blur-md","border-t","border-border","p-4","-mx-4","sm:mx-0","sm:rounded-t-xl","flex","justify-end","gap-4","shadow-lg"],["routerLink","/admin/products",1,"btn","btn-outline","min-w-[100px]"],["type","submit",1,"btn","btn-primary","min-w-[160px]",3,"disabled"],["class","material-icons animate-spin me-2 text-lg",4,"ngIf"],["class","fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fade-in",4,"ngIf"],[3,"value"],[1,"group","relative","aspect-square","rounded-lg","border","border-border","overflow-hidden","bg-background"],["alt","Product",1,"w-full","h-full","object-cover",3,"src"],[1,"absolute","inset-0","bg-black/50","opacity-0","group-hover:opacity-100","transition-opacity","flex","items-start","justify-end","p-2"],["type","button",1,"btn","btn-icon","btn-xs","btn-destructive","rounded-full",3,"click"],["class","absolute bottom-2 right-2 bg-primary text-primary-foreground text-[10px] px-2 py-0.5 rounded-full font-bold shadow-sm",4,"ngIf"],[1,"absolute","bottom-2","right-2","bg-primary","text-primary-foreground","text-[10px]","px-2","py-0.5","rounded-full","font-bold","shadow-sm"],["alt","New Upload",1,"w-full","h-full","object-cover",3,"src"],[1,"absolute","inset-0","bg-black/50","opacity-0","group-hover:opacity-100","transition-opacity","flex","flex-col","justify-between","p-2"],[1,"flex","justify-end"],["type","button",1,"self-start","btn","btn-xs","gap-1","bg-white/20","hover:bg-white/40","text-white","backdrop-blur-sm","border-none",3,"click"],[1,"text-[10px]"],["class","absolute bottom-2 right-2 bg-primary text-primary-foreground text-[10px] px-2 py-0.5 rounded-full font-bold shadow-sm pointer-events-none",4,"ngIf"],[1,"absolute","bottom-2","right-2","bg-primary","text-primary-foreground","text-[10px]","px-2","py-0.5","rounded-full","font-bold","shadow-sm","pointer-events-none"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"relative","rounded-xl","border","border-border","bg-muted/30","p-4","sm:p-6","transition-all","hover:border-primary/50",3,"formGroupName"],["type","button","class","absolute top-4 left-4 btn btn-icon btn-xs btn-ghost text-muted-foreground hover:text-destructive transition-colors",3,"click",4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","mb-6"],[1,"space-y-1.5"],[1,"text-xs","font-medium","text-muted-foreground",3,"for"],["type","text","formControlName","sku",1,"input","w-full","bg-background",3,"id"],["type","number","formControlName","purchasePrice",1,"input","w-full","bg-background",3,"id"],["type","number","formControlName","originalPrice",1,"input","w-full","bg-background",3,"id"],["type","number","formControlName","sellingPrice",1,"input","w-full","bg-background",3,"id"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","border-t","border-border/50","pt-4"],["type","number","formControlName","stock",1,"input","w-full","bg-background",3,"id","readonly"],["class","space-y-1.5",4,"ngFor","ngForOf"],[1,"flex","flex-col","justify-end","gap-2"],[1,"inline-flex","items-center","gap-2","cursor-pointer"],["type","checkbox","formControlName","isUnlimited",1,"checkbox","rounded","border-input","text-primary","focus:ring-primary"],[1,"text-xs","font-medium","text-foreground"],["type","checkbox","formControlName","isActive",1,"checkbox","rounded","border-input","text-primary","focus:ring-primary"],["type","button",1,"absolute","top-4","left-4","btn","btn-icon","btn-xs","btn-ghost","text-muted-foreground","hover:text-destructive","transition-colors",3,"click"],[1,"material-icons","text-lg"],[1,"text-xs","font-medium","text-muted-foreground"],[1,"input","w-full","bg-background",3,"formControlName"],[3,"ngValue"],[1,"material-icons","animate-spin","me-2","text-lg"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/60","backdrop-blur-sm","p-4","animate-fade-in"],[1,"bg-card","rounded-xl","shadow-2xl","w-full","max-w-md","relative","overflow-hidden","border","border-border"],[1,"flex","items-center","justify-between","p-4","border-b","border-border","bg-muted/30"],[1,"font-bold","text-lg"],[1,"btn","btn-ghost","btn-icon","btn-sm","rounded-full","hover:bg-destructive/10","hover:text-destructive",3,"click"],[1,"material-icons"],[1,"p-4"],[3,"stockUpdated","cancelled","productId","variants"]],template:function(n,u){if(n&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),r(3),t(),e(4,"a",3)(5,"span",4),r(6,"arrow_forward"),t(),r(7," \u0628\u0627\u0632\u06AF\u0634\u062A \u0628\u0647 \u0644\u06CC\u0633\u062A "),t()(),e(8,"form",5),h("ngSubmit",function(){return u.onSubmit()}),e(9,"div",6)(10,"div",7)(11,"h2",8)(12,"span",9),r(13,"info"),t(),r(14," \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u067E\u0627\u06CC\u0647 "),t()(),e(15,"div",10)(16,"div",11)(17,"label",12),r(18,"\u0646\u0627\u0645 \u0645\u062D\u0635\u0648\u0644 "),e(19,"span",13),r(20,"*"),t()(),b(21,"input",14),t(),e(22,"div",15)(23,"label",16),r(24,"\u06A9\u062F \u0645\u062D\u0635\u0648\u0644 (SKU)"),t(),b(25,"input",17),t(),e(26,"div",15)(27,"label",18),r(28,"\u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC "),e(29,"span",13),r(30,"*"),t()(),e(31,"select",19)(32,"option",20),r(33,"\u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F"),t(),c(34,$i,2,2,"option",21),t()(),e(35,"div",22)(36,"label",23),b(37,"input",24),e(38,"span",25),r(39,"\u0645\u062D\u0635\u0648\u0644 \u0641\u0639\u0627\u0644 \u0648 \u0642\u0627\u0628\u0644 \u0646\u0645\u0627\u06CC\u0634 \u0628\u0627\u0634\u062F"),t()()()(),e(40,"div",15)(41,"label",26),r(42,"\u062A\u0648\u0636\u06CC\u062D\u0627\u062A \u0645\u062D\u0635\u0648\u0644"),t(),b(43,"textarea",27),t()(),e(44,"div",6)(45,"div",7)(46,"h2",8)(47,"span",9),r(48,"image"),t(),r(49," \u062A\u0635\u0627\u0648\u06CC\u0631 \u0645\u062D\u0635\u0648\u0644 "),t()(),e(50,"div",28)(51,"label",29)(52,"span",30),r(53,"add_a_photo"),t(),e(54,"span",31),r(55,"\u0627\u0641\u0632\u0648\u062F\u0646 \u062A\u0635\u0648\u06CC\u0631"),t(),e(56,"input",32),h("change",function(x){return u.onFileChange(x)}),t()(),c(57,Bi,7,2,"div",33)(58,zi,13,6,"div",33),t()(),e(59,"div",6)(60,"div",34)(61,"h2",8)(62,"span",9),r(63,"style"),t(),r(64," \u062A\u0646\u0648\u0639 \u0648 \u0642\u06CC\u0645\u062A\u200C\u06AF\u0630\u0627\u0631\u06CC "),t(),e(65,"div",35),c(66,Hi,4,0,"button",36),e(67,"button",37),h("click",function(){return u.addVariant()}),e(68,"span",38),r(69,"add"),t(),r(70," \u0627\u0641\u0632\u0648\u062F\u0646 \u062A\u0646\u0648\u0639 "),t()()(),e(71,"div",39),c(72,Qi,34,16,"div",40),t()(),e(73,"div",41)(74,"a",42),r(75,"\u0627\u0646\u0635\u0631\u0627\u0641"),t(),e(76,"button",43),c(77,Xi,2,0,"span",44),e(78,"span"),r(79),t()()()()(),c(80,Yi,10,3,"div",45)),n&2){let m;d(3),g(u.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634 \u0645\u062D\u0635\u0648\u0644":"\u0627\u0641\u0632\u0648\u062F\u0646 \u0645\u062D\u0635\u0648\u0644 \u062C\u062F\u06CC\u062F"),d(5),l("formGroup",u.productForm),d(13),ee("input-error",((m=u.productForm.get("name"))==null?null:m.invalid)&&((m=u.productForm.get("name"))==null?null:m.touched)),d(11),l("ngValue",null),d(2),l("ngForOf",u.categoryGroups),d(23),l("ngForOf",u.currentImages),d(),l("ngForOf",u.imagePreviews),d(8),l("ngIf",u.isEditMode),d(6),l("ngForOf",u.variants.controls),d(4),l("disabled",u.productForm.invalid||u.isSubmitting),d(),l("ngIf",u.isSubmitting),d(2),g(u.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u062B\u0628\u062A...":"\u0630\u062E\u06CC\u0631\u0647 \u0646\u0647\u0627\u06CC\u06CC"),d(),l("ngIf",u.showStockModal)}},dependencies:[A,M,F,H,B,se,de,$,ue,he,ae,T,R,q,z,Ue,Te,D,N,Mt],encapsulation:2});let o=a;return o})();var er=o=>["/admin/products/edit",o],tr=(o,a)=>({"bg-destructive/10 text-destructive":o,"bg-success/10 text-success":a});function ir(o,a){o&1&&(e(0,"div",12)(1,"span",13),r(2,"sync"),t()())}function rr(o,a){o&1&&(e(0,"div",14)(1,"span",15),r(2,"inventory_2"),t(),e(3,"p",16),r(4,"\u0647\u06CC\u0686 \u0645\u062D\u0635\u0648\u0644\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F"),t(),e(5,"a",17),r(6,"\u062B\u0628\u062A \u0627\u0648\u0644\u06CC\u0646 \u0645\u062D\u0635\u0648\u0644"),t()())}function nr(o,a){if(o&1&&(st(0),e(1,"span",44),r(2),y(3,"number"),t(),dt()),o&2){let s=p().$implicit,i=p(2);d(),l("ngClass",mt(4,tr,i.getTotalStock(s)===0,i.getTotalStock(s)>0)),d(),v(" ",k(3,2,i.getTotalStock(s))," ")}}function or(o,a){o&1&&(e(0,"span",45)(1,"span",46),r(2,"all_inclusive"),t(),r(3," \u0646\u0627\u0645\u062D\u062F\u0648\u062F "),t())}function ur(o,a){if(o&1){let s=I();e(0,"tr",28)(1,"td",29)(2,"div",30),b(3,"img",31),t()(),e(4,"td",29)(5,"div",32),r(6),t(),e(7,"div",33),r(8),t()(),e(9,"td",34)(10,"span",35),r(11),t()(),e(12,"td",36),r(13),y(14,"number"),e(15,"span",37),r(16,"\u062A\u0648\u0645\u0627\u0646"),t()(),e(17,"td",38),c(18,nr,4,7,"ng-container",39)(19,or,4,0,"ng-template",null,0,pt),t(),e(21,"td",29)(22,"div",40)(23,"a",41)(24,"span",42),r(25,"edit"),t()(),e(26,"button",43),h("click",function(){let n=C(s).$implicit,u=p(2);return S(u.deleteProduct(n.id))}),e(27,"span",42),r(28,"delete"),t()()()()()}if(o&2){let s=a.$implicit,i=De(20),n=p(2);d(3),l("src",(s.images==null||s.images[0]==null?null:s.images[0].url)||"https://via.placeholder.com/48",Z)("alt",s.name),d(3),g(s.name),d(2),g(s.categoryGroup==null?null:s.categoryGroup.categoryName),d(3),v(" ",(s.categoryGroup==null?null:s.categoryGroup.categoryName)||"-"," "),d(2),v(" ",k(14,9,s.minPrice)," "),d(5),l("ngIf",n.getTotalStock(s)!==n.Infinity)("ngIfElse",i),d(5),l("routerLink",J(11,er,s.id))}}function ar(o,a){if(o&1&&(e(0,"div",18)(1,"table",19)(2,"thead",20)(3,"tr")(4,"th",21),r(5,"\u062A\u0635\u0648\u06CC\u0631"),t(),e(6,"th",22),r(7,"\u0646\u0627\u0645 \u0645\u062D\u0635\u0648\u0644"),t(),e(8,"th",23),r(9,"\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),t(),e(10,"th",22),r(11,"\u0642\u06CC\u0645\u062A \u067E\u0627\u06CC\u0647"),t(),e(12,"th",24),r(13,"\u0645\u0648\u062C\u0648\u062F\u06CC \u06A9\u0644"),t(),e(14,"th",25),r(15,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t()()(),e(16,"tbody",26),c(17,ur,29,13,"tr",27),t()()()),o&2){let s=p();d(17),l("ngForOf",s.products)}}function sr(o,a){if(o&1){let s=I();e(0,"div",47)(1,"nav",48)(2,"button",49),h("click",function(){C(s);let n=p();return S(n.loadProducts(n.currentPage-1))}),e(3,"span",50),r(4,"chevron_right"),t()(),e(5,"span",51),r(6),t(),e(7,"button",52),h("click",function(){C(s);let n=p();return S(n.loadProducts(n.currentPage+1))}),e(8,"span",50),r(9,"chevron_left"),t()()()()}if(o&2){let s=p();d(2),l("disabled",s.currentPage===1),d(4),ve("\u0635\u0641\u062D\u0647 ",s.currentPage," \u0627\u0632 ",s.pagination.totalPages),d(),l("disabled",s.currentPage===s.pagination.totalPages)}}var Dt=(()=>{let a=class a{constructor(i,n,u){this.productService=i,this.adminProductService=n,this.notificationService=u,this.products=[],this.pagination=null,this.isLoading=!0,this.currentPage=1,this.Infinity=1/0}ngOnInit(){this.loadProducts()}getTotalStock(i){return i.variants.some(u=>u.isUnlimited)?1/0:i.variants.reduce((u,m)=>u+m.stock,0)}loadProducts(i=1){this.isLoading=!0,this.currentPage=i,this.productService.getProducts({page:this.currentPage,pageSize:10,sortBy:"Newest"}).subscribe({next:n=>{this.products=n.items??[],this.pagination=n,this.isLoading=!1},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062D\u0635\u0648\u0644\u0627\u062A","error"),this.isLoading=!1}})}deleteProduct(i){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0645\u062D\u0635\u0648\u0644 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F \u0627\u06CC\u0646 \u0639\u0645\u0644 \u062A\u0645\u0627\u0645 \u062A\u0646\u0648\u0639\u200C\u0647\u0627\u06CC \u0622\u0646 \u0631\u0627 \u0646\u06CC\u0632 \u062D\u0630\u0641 \u0645\u06CC\u200C\u06A9\u0646\u062F.")&&this.adminProductService.deleteProduct(i).subscribe({next:n=>{this.notificationService.show(n.message||"\u0645\u062D\u0635\u0648\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadProducts(this.currentPage)},error:n=>this.notificationService.show(n?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u0645\u062D\u0635\u0648\u0644","error")})}};a.\u0275fac=function(n){return new(n||a)(f(Ve),f(le),f(L))},a.\u0275cmp=w({type:a,selectors:[["app-admin-product-list"]],decls:16,vars:4,consts:[["unlimited",""],[1,"space-y-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","justify-between","gap-4"],[1,"text-2xl","font-bold","text-foreground","tracking-tight"],[1,"text-sm","text-muted-foreground","mt-1"],["routerLink","/admin/products/new",1,"btn","btn-primary"],[1,"material-icons","me-2"],[1,"card","border","border-border","shadow-sm","overflow-hidden"],["class","flex justify-center items-center py-20",4,"ngIf"],["class","flex flex-col items-center justify-center py-16 text-center",4,"ngIf"],["class","w-full overflow-x-auto",4,"ngIf"],["class","flex justify-center mt-6",4,"ngIf"],[1,"flex","justify-center","items-center","py-20"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"flex","flex-col","items-center","justify-center","py-16","text-center"],[1,"material-icons","text-5xl","text-muted-foreground","mb-4"],[1,"text-lg","font-medium","text-foreground"],["routerLink","/admin/products/new",1,"btn","btn-link","mt-2"],[1,"w-full","overflow-x-auto"],[1,"w-full","caption-bottom","text-sm","text-right"],[1,"bg-muted/50","[&_tr]:border-b","[&_tr]:border-border"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground","w-[80px]"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground","hidden","md:table-cell"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground","text-center"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground","text-end","w-[100px]"],[1,"[&_tr:last-child]:border-0"],["class","border-b border-border transition-colors hover:bg-muted/20",4,"ngFor","ngForOf"],[1,"border-b","border-border","transition-colors","hover:bg-muted/20"],[1,"p-4","align-middle"],[1,"w-12","h-12","rounded-lg","border","border-border","bg-background","overflow-hidden","flex","items-center","justify-center"],["loading","lazy",1,"w-full","h-full","object-cover",3,"src","alt"],[1,"font-medium","text-foreground","line-clamp-1"],[1,"text-xs","text-muted-foreground","mt-0.5","md:hidden"],[1,"p-4","align-middle","hidden","md:table-cell"],[1,"inline-flex","items-center","rounded-full","bg-muted","px-2.5","py-0.5","text-xs","font-medium","text-muted-foreground"],[1,"p-4","align-middle","font-medium","text-foreground","whitespace-nowrap"],[1,"text-[10px]","text-muted-foreground","font-normal"],[1,"p-4","align-middle","text-center"],[4,"ngIf","ngIfElse"],[1,"flex","items-center","justify-end","gap-2"],["title","\u0648\u06CC\u0631\u0627\u06CC\u0634",1,"btn","btn-ghost","btn-icon","btn-sm","text-muted-foreground","hover:text-primary",3,"routerLink"],[1,"material-icons","text-lg"],["title","\u062D\u0630\u0641",1,"btn","btn-ghost","btn-icon","btn-sm","text-muted-foreground","hover:text-destructive",3,"click"],[1,"inline-flex","items-center","justify-center","min-w-[2rem]","px-2","py-1","rounded-md","text-xs","font-bold",3,"ngClass"],[1,"inline-flex","items-center","px-2","py-1","rounded-md","bg-primary/10","text-primary","text-xs","font-bold"],[1,"material-icons","text-[14px]","me-1"],[1,"flex","justify-center","mt-6"],[1,"flex","items-center","gap-1"],["aria-label","Previous",1,"btn","btn-outline","btn-icon","btn-sm",3,"click","disabled"],[1,"material-icons","text-base"],[1,"text-sm","text-muted-foreground","mx-2"],["aria-label","Next",1,"btn","btn-outline","btn-icon","btn-sm",3,"click","disabled"]],template:function(n,u){n&1&&(e(0,"div",1)(1,"div",2)(2,"div")(3,"h1",3),r(4,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u062D\u0635\u0648\u0644\u0627\u062A"),t(),e(5,"p",4),r(6,"\u0645\u0634\u0627\u0647\u062F\u0647\u060C \u0648\u06CC\u0631\u0627\u06CC\u0634 \u0648 \u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u0648\u062C\u0648\u062F\u06CC \u0645\u062D\u0635\u0648\u0644\u0627\u062A"),t()(),e(7,"a",5)(8,"span",6),r(9,"add"),t(),r(10," \u0627\u0641\u0632\u0648\u062F\u0646 \u0645\u062D\u0635\u0648\u0644 "),t()(),e(11,"div",7),c(12,ir,3,0,"div",8)(13,rr,7,0,"div",9)(14,ar,18,1,"div",10)(15,sr,10,4,"div",11),t()()),n&2&&(d(12),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.products.length===0),d(),l("ngIf",!u.isLoading&&u.products.length>0),d(),l("ngIf",u.pagination&&u.pagination.totalPages>1))},dependencies:[A,oe,M,F,D,N,j],encapsulation:2});let o=a;return o})();function dr(o,a){o&1&&(e(0,"div",11)(1,"span",12),r(2,"sync"),t()())}function lr(o,a){o&1&&(e(0,"div",13)(1,"p",14),r(2,"\u0647\u06CC\u0686 \u06A9\u0627\u0631\u0628\u0631\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."),t()())}function mr(o,a){if(o&1){let s=I();e(0,"button",33),h("click",function(){C(s);let n=p().$implicit,u=p(2);return S(u.changeUserStatus(n,!n.isActive))}),e(1,"span",34),r(2),t()()}if(o&2){let s=p().$implicit;l("title",s.isActive?"\u063A\u06CC\u0631\u0641\u0639\u0627\u0644 \u06A9\u0631\u062F\u0646":"\u0641\u0639\u0627\u0644 \u06A9\u0631\u062F\u0646"),d(2),g(s.isActive?"toggle_off":"toggle_on")}}function cr(o,a){if(o&1){let s=I();e(0,"button",35),h("click",function(){C(s);let n=p().$implicit,u=p(2);return S(u.deleteUser(n.id))}),e(1,"span",34),r(2,"delete"),t()()}}function pr(o,a){if(o&1){let s=I();e(0,"button",36),h("click",function(){C(s);let n=p().$implicit,u=p(2);return S(u.restoreUser(n.id))}),e(1,"span",34),r(2,"restore_from_trash"),t()()}}function fr(o,a){if(o&1&&(e(0,"tr",24)(1,"td",25),r(2),t(),e(3,"td",26),r(4),t(),e(5,"td",27)(6,"span",28),r(7),t()(),e(8,"td",26),r(9),y(10,"date"),t(),e(11,"td",29),c(12,mr,3,2,"button",30)(13,cr,3,0,"button",31)(14,pr,3,0,"button",32),t()()),o&2){let s=a.$implicit;ee("opacity-50",s.isDeleted),d(2),ve("",s.firstName||""," ",s.lastName||""),d(2),g(s.phoneNumber),d(2),l("ngClass",s.isActive&&!s.isDeleted?"bg-success text-success-foreground":"bg-destructive text-destructive-foreground"),d(),v(" ",s.isDeleted?"\u062D\u0630\u0641 \u0634\u062F\u0647":s.isActive?"\u0641\u0639\u0627\u0644":"\u063A\u06CC\u0631\u0641\u0639\u0627\u0644"," "),d(2),g(fe(10,11,s.createdAt,"yyyy/MM/dd")),d(3),l("ngIf",!s.isDeleted),d(),l("ngIf",!s.isDeleted),d(),l("ngIf",s.isDeleted)}}function gr(o,a){if(o&1&&(e(0,"div",15)(1,"table",16)(2,"thead",17)(3,"tr",18)(4,"th",19),r(5,"\u0646\u0627\u0645 \u0648 \u0646\u0627\u0645 \u062E\u0627\u0646\u0648\u0627\u062F\u06AF\u06CC"),t(),e(6,"th",19),r(7,"\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06CC\u0644"),t(),e(8,"th",20),r(9,"\u0648\u0636\u0639\u06CC\u062A"),t(),e(10,"th",19),r(11,"\u062A\u0627\u0631\u06CC\u062E \u0639\u0636\u0648\u06CC\u062A"),t(),e(12,"th",21),r(13,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t()()(),e(14,"tbody",22),c(15,fr,15,14,"tr",23),t()()()),o&2){let s=p();d(15),l("ngForOf",s.users)}}function hr(o,a){if(o&1){let s=I();e(0,"div",37)(1,"button",38),h("click",function(){C(s);let n=p();return S(n.loadUsers(n.currentPage-1))}),r(2,"\u0642\u0628\u0644\u06CC"),t(),e(3,"span",39),r(4),t(),e(5,"button",38),h("click",function(){C(s);let n=p();return S(n.loadUsers(n.currentPage+1))}),r(6,"\u0628\u0639\u062F\u06CC"),t()()}if(o&2){let s=p();d(),l("disabled",s.currentPage===1),d(3),ve("\u0635\u0641\u062D\u0647 ",s.currentPage," \u0627\u0632 ",s.pagination.totalPages),d(),l("disabled",s.currentPage===s.pagination.totalPages)}}var Nt=(()=>{let a=class a{constructor(i,n){this.adminUserService=i,this.notificationService=n,this.users=[],this.isLoading=!0,this.showDeleted=!1,this.pagination=null,this.currentPage=1}ngOnInit(){this.loadUsers()}loadUsers(i=1){this.isLoading=!0,this.currentPage=i,this.adminUserService.getUsers(this.showDeleted,i,20).pipe(O(()=>this.isLoading=!1)).subscribe({next:n=>{this.users=n.items??[],this.pagination=n},error:n=>{this.notificationService.show(n?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u06A9\u0627\u0631\u0628\u0631\u0627\u0646","error")}})}toggleShowDeleted(){this.showDeleted=!this.showDeleted,this.loadUsers(1)}changeUserStatus(i,n){this.adminUserService.changeUserStatus(i.id,n).subscribe({next:()=>{i.isActive=n,this.notificationService.show("\u0648\u0636\u0639\u06CC\u062A \u06A9\u0627\u0631\u0628\u0631 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F","success")},error:()=>this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u062A\u063A\u06CC\u06CC\u0631 \u0648\u0636\u0639\u06CC\u062A \u06A9\u0627\u0631\u0628\u0631","error")})}deleteUser(i){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u06A9\u0627\u0631\u0628\u0631 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F \u0627\u06CC\u0646 \u0639\u0645\u0644 \u063A\u06CC\u0631\u0642\u0627\u0628\u0644 \u0628\u0627\u0632\u06AF\u0634\u062A \u0627\u0633\u062A.")&&this.adminUserService.deleteUser(i).subscribe({next:()=>{this.notificationService.show("\u06A9\u0627\u0631\u0628\u0631 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadUsers(this.currentPage)},error:n=>this.notificationService.show(n?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u06A9\u0627\u0631\u0628\u0631","error")})}restoreUser(i){this.adminUserService.restoreUser(i).subscribe({next:()=>{this.notificationService.show("\u06A9\u0627\u0631\u0628\u0631 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0628\u0627\u0632\u06CC\u0627\u0628\u06CC \u0634\u062F","success"),this.loadUsers(this.currentPage)},error:n=>this.notificationService.show(n?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0632\u06CC\u0627\u0628\u06CC \u06A9\u0627\u0631\u0628\u0631","error")})}};a.\u0275fac=function(n){return new(n||a)(f(Re),f(L))},a.\u0275cmp=w({type:a,selectors:[["app-admin-user-list"]],decls:13,vars:5,consts:[[1,"space-y-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-foreground"],[1,"flex","items-center","space-x-2","space-x-reverse"],["for","showDeleted",1,"text-sm","font-medium"],["type","checkbox","id","showDeleted",1,"checkbox",3,"change","checked"],[1,"card"],["class","flex justify-center items-center p-10",4,"ngIf"],["class","text-center p-10",4,"ngIf"],["class","relative w-full overflow-x-auto",4,"ngIf"],["class","flex justify-center items-center space-x-2 space-x-reverse mt-6",4,"ngIf"],[1,"flex","justify-center","items-center","p-10"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"text-center","p-10"],[1,"text-muted-foreground"],[1,"relative","w-full","overflow-x-auto"],[1,"w-full","caption-bottom","text-base","min-w-[800px]"],[1,"[&_tr]:border-b","[&_tr]:border-border"],[1,"border-b","transition-colors","hover:bg-muted"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground"],[1,"h-12","px-4","text-center","align-middle","font-medium","text-muted-foreground"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground","w-40"],[1,"[&_tr:last-child]:border-0"],["class","border-b transition-colors hover:bg-muted/50",3,"opacity-50",4,"ngFor","ngForOf"],[1,"border-b","transition-colors","hover:bg-muted/50"],[1,"p-4","align-middle","font-medium","text-foreground"],[1,"p-4","align-middle","text-muted-foreground"],[1,"p-4","align-middle","text-center"],[1,"px-2","py-1","text-xs","font-semibold","rounded-full",3,"ngClass"],[1,"p-4","align-middle","space-x-2","space-x-reverse","whitespace-nowrap"],["class","btn btn-ghost btn-sm btn-icon",3,"title","click",4,"ngIf"],["class","btn btn-ghost btn-sm btn-icon text-destructive hover:bg-destructive/10","title","\u062D\u0630\u0641",3,"click",4,"ngIf"],["class","btn btn-ghost btn-sm btn-icon text-success hover:bg-success/10","title","\u0628\u0627\u0632\u06CC\u0627\u0628\u06CC",3,"click",4,"ngIf"],[1,"btn","btn-ghost","btn-sm","btn-icon",3,"click","title"],[1,"material-icons","text-base"],["title","\u062D\u0630\u0641",1,"btn","btn-ghost","btn-sm","btn-icon","text-destructive","hover:bg-destructive/10",3,"click"],["title","\u0628\u0627\u0632\u06CC\u0627\u0628\u06CC",1,"btn","btn-ghost","btn-sm","btn-icon","text-success","hover:bg-success/10",3,"click"],[1,"flex","justify-center","items-center","space-x-2","space-x-reverse","mt-6"],[1,"btn","btn-sm","btn-outline",3,"click","disabled"],[1,"text-sm"]],template:function(n,u){n&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u06A9\u0627\u0631\u0628\u0631\u0627\u0646"),t(),e(4,"div",3)(5,"label",4),r(6,"\u0646\u0645\u0627\u06CC\u0634 \u062D\u0630\u0641 \u0634\u062F\u0647\u200C\u0647\u0627"),t(),e(7,"input",5),h("change",function(){return u.toggleShowDeleted()}),t()()(),e(8,"div",6),c(9,dr,3,0,"div",7)(10,lr,3,0,"div",8)(11,gr,16,1,"div",9),t(),c(12,hr,7,4,"div",10),t()),n&2&&(d(7),l("checked",u.showDeleted),d(2),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.users.length===0),d(),l("ngIf",!u.isLoading&&u.users.length>0),d(),l("ngIf",u.pagination&&u.pagination.totalPages>1))},dependencies:[A,oe,M,F,D,ge],encapsulation:2});let o=a;return o})();function xr(o,a){o&1&&(e(0,"div",14)(1,"span",15),r(2,"sync"),t()())}function vr(o,a){o&1&&(e(0,"div",16)(1,"p",17),r(2,"\u0645\u062D\u0635\u0648\u0644\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F"),t()())}function br(o,a){if(o&1&&(e(0,"tr",32)(1,"td",33),b(2,"input",34),t(),e(3,"td",33)(4,"div",35),b(5,"img",36),e(6,"div",37)(7,"span",38),r(8),t(),e(9,"span",39),r(10),t()()()(),e(11,"td",40),r(12),y(13,"number"),t(),e(14,"td",33),b(15,"input",41),t()()),o&2){let s=a.$implicit,i=a.index,n=p(2);l("formGroupName",i),d(5),l("src",s.value.productIcon||"https://via.placeholder.com/40",Z)("alt",s.value.productName),d(3),g(s.value.productName),d(2),g(n.getVariantDisplayName(s.value.attributes)),d(2),v(" ",k(13,7,n.getCurrentPrice(s.value))," \u062A\u0648\u0645\u0627\u0646 "),d(3),l("placeholder",n.getCurrentPrice(s.value).toString())}}function Cr(o,a){o&1&&(e(0,"span",42),r(1,"sync"),t())}function Sr(o,a){if(o&1){let s=I();e(0,"form",18),h("ngSubmit",function(){C(s);let n=p();return S(n.updatePrices())}),e(1,"div",19)(2,"div",20)(3,"table",21)(4,"thead",22)(5,"tr")(6,"th",23)(7,"input",24),h("change",function(n){C(s);let u=p();return S(u.toggleAll(n))}),t()(),e(8,"th",25),r(9,"\u0646\u0627\u0645 \u0645\u062D\u0635\u0648\u0644 \u0648 \u062A\u0646\u0648\u0639"),t(),e(10,"th",25),r(11,"\u0642\u06CC\u0645\u062A \u0641\u0639\u0644\u06CC"),t(),e(12,"th",25),r(13,"\u0642\u06CC\u0645\u062A \u062C\u062F\u06CC\u062F"),t()()(),e(14,"tbody",26),c(15,br,16,9,"tr",27),t()()()(),e(16,"div",28)(17,"button",29),c(18,Cr,2,0,"span",30),r(19),t(),e(20,"button",31),h("click",function(){C(s);let n=p();return S(n.resetForm())}),r(21," \u0628\u0627\u0632\u0646\u0634\u0627\u0646\u06CC "),t()()()}if(o&2){let s=p();l("formGroup",s.priceForm),d(15),l("ngForOf",s.getVariantControls()),d(2),l("disabled",!s.hasSelectedProducts()||s.isSubmitting),d(),l("ngIf",s.isSubmitting),d(),v(" ",s.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC...":"\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0642\u06CC\u0645\u062A\u200C\u0647\u0627"," ")}}var Ot=(()=>{let a=class a{constructor(i,n,u){this.productService=i,this.adminProductService=n,this.notificationService=u,this.products=[],this.isLoading=!1,this.isSubmitting=!1,this.searchTerm="",this.isPurchasePrice=!1,this.priceForm=new te({priceUpdates:new vt([])})}ngOnInit(){this.loadProducts()}get priceUpdates(){return this.priceForm.get("priceUpdates")}getVariantControls(){return this.priceForm.get("priceUpdates").controls}loadProducts(){this.isLoading=!0,this.productService.getProducts({name:this.searchTerm,page:1,pageSize:500}).pipe(O(()=>this.isLoading=!1)).subscribe({next:i=>{this.products=i.items??[],this.buildForm()},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062D\u0635\u0648\u0644\u0627\u062A","error")}})}searchProducts(){this.loadProducts()}buildForm(){this.priceUpdates.clear(),this.products.forEach(i=>{i.variants.forEach(n=>{this.priceUpdates.push(new te({selected:new P(!1),variantId:new P(n.id),productName:new P(i.name),productIcon:new P(i.iconUrl),purchasePrice:new P(n.purchasePrice),sellingPrice:new P(n.sellingPrice),attributes:new P(n.attributes),newPrice:new P(null,[_.min(1)])}))})})}getCurrentPrice(i){return this.isPurchasePrice?i.purchasePrice:i.sellingPrice}getVariantDisplayName(i){return Object.values(i).map(n=>n.value).join(" / ")}toggleAll(i){let n=i.target.checked;this.priceUpdates.controls.forEach(u=>{u.get("selected")?.setValue(n)})}hasSelectedProducts(){return this.priceUpdates.controls.some(i=>i.get("selected")?.value&&i.get("newPrice")?.value)}updatePrices(){let i={};if(this.priceUpdates.controls.forEach(n=>{if(n.get("selected")?.value&&n.get("newPrice")?.value){let u=n.get("variantId")?.value,m=n.get("newPrice")?.value;i[u]=m}}),Object.keys(i).length===0){this.notificationService.show("\u0644\u0637\u0641\u0627\u064B \u0645\u062D\u0635\u0648\u0644\u06CC \u0631\u0627 \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0631\u062F\u0647 \u0648 \u0642\u06CC\u0645\u062A \u062C\u062F\u06CC\u062F\u06CC \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F","error");return}this.isSubmitting=!0,this.adminProductService.bulkUpdatePrices(i,this.isPurchasePrice).pipe(O(()=>this.isSubmitting=!1)).subscribe({next:()=>{this.notificationService.show("\u0642\u06CC\u0645\u062A\u200C\u0647\u0627 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0634\u062F\u0646\u062F","success"),this.loadProducts()},error:n=>{this.notificationService.show(n?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0642\u06CC\u0645\u062A\u200C\u0647\u0627","error")}})}resetForm(){this.priceForm.reset(),this.buildForm()}};a.\u0275fac=function(n){return new(n||a)(f(Ve),f(le),f(L))},a.\u0275cmp=w({type:a,selectors:[["app-bulk-price-update"]],decls:21,vars:7,consts:[[1,"space-y-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-foreground"],[1,"card","p-6","space-y-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"space-y-2"],["for","search",1,"text-sm","font-medium","text-foreground"],["type","text","id","search","placeholder","\u0646\u0627\u0645 \u0645\u062D\u0635\u0648\u0644 \u06CC\u0627 SKU...",1,"input",3,"ngModelChange","ngModel"],["for","priceType",1,"text-sm","font-medium","text-foreground"],["id","priceType",1,"input",3,"ngModelChange","ngModel"],[3,"ngValue"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","card p-12 text-center",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"flex","justify-center","items-center","py-12"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"card","p-12","text-center"],[1,"text-muted-foreground"],[3,"ngSubmit","formGroup"],[1,"card","overflow-hidden"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-muted"],[1,"p-4","text-right"],["type","checkbox",1,"h-4","w-4",3,"change"],[1,"p-4","text-right","text-sm","font-medium","text-foreground"],["formArrayName","priceUpdates"],["class","border-b border-border hover:bg-muted/50",3,"formGroupName",4,"ngFor","ngForOf"],[1,"flex","gap-4","mt-6"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","material-icons animate-spin me-2",4,"ngIf"],["type","button",1,"btn","btn-outline",3,"click"],[1,"border-b","border-border","hover:bg-muted/50",3,"formGroupName"],[1,"p-4"],["type","checkbox","formControlName","selected",1,"h-4","w-4"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","rounded","object-cover",3,"src","alt"],[1,"flex","flex-col"],[1,"font-medium","text-foreground"],[1,"text-xs","text-muted-foreground"],[1,"p-4","text-foreground"],["type","number","formControlName","newPrice","min","1",1,"input","w-40",3,"placeholder"],[1,"material-icons","animate-spin","me-2"]],template:function(n,u){n&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0627\u0646\u0628\u0648\u0647 \u0642\u06CC\u0645\u062A"),t()(),e(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6),r(8,"\u062C\u0633\u062A\u062C\u0648"),t(),e(9,"input",7),Se("ngModelChange",function(x){return Ce(u.searchTerm,x)||(u.searchTerm=x),x}),h("ngModelChange",function(){return u.searchProducts()}),t()(),e(10,"div",5)(11,"label",8),r(12,"\u0646\u0648\u0639 \u0642\u06CC\u0645\u062A"),t(),e(13,"select",9),Se("ngModelChange",function(x){return Ce(u.isPurchasePrice,x)||(u.isPurchasePrice=x),x}),e(14,"option",10),r(15,"\u0642\u06CC\u0645\u062A \u0641\u0631\u0648\u0634"),t(),e(16,"option",10),r(17,"\u0642\u06CC\u0645\u062A \u062E\u0631\u06CC\u062F"),t()()()()(),c(18,xr,3,0,"div",11)(19,vr,3,0,"div",12)(20,Sr,22,5,"form",13),t()),n&2&&(d(9),be("ngModel",u.searchTerm),d(4),be("ngModel",u.isPurchasePrice),d(),l("ngValue",!1),d(2),l("ngValue",!0),d(2),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.products.length===0),d(),l("ngIf",!u.isLoading&&u.products.length>0))},dependencies:[A,M,F,H,B,se,de,$,ue,he,ae,T,R,je,q,z,Ue,Te,Ae,we,j],encapsulation:2});let o=a;return o})();var yr=(o,a,s)=>({"bg-destructive/10 text-destructive":o,"bg-warning/10 text-warning":a,"bg-secondary/10 text-secondary":s}),_r=o=>["/admin/products/edit",o];function wr(o,a){o&1&&(e(0,"div",11)(1,"span",12),r(2,"sync"),t()())}function Fr(o,a){o&1&&(e(0,"div",13)(1,"div",14)(2,"span",15),r(3,"check_circle"),t(),e(4,"p",16),r(5,"\u0647\u0645\u0647 \u0645\u062D\u0635\u0648\u0644\u0627\u062A \u0645\u0648\u062C\u0648\u062F\u06CC \u06A9\u0627\u0641\u06CC \u062F\u0627\u0631\u0646\u062F"),t()()())}function Ar(o,a){if(o&1&&(e(0,"tr",26)(1,"td",27),r(2),t(),e(3,"td",28),r(4),t(),e(5,"td",28),r(6),t(),e(7,"td",29)(8,"span",30),r(9),t()(),e(10,"td",31),r(11),y(12,"number"),t(),e(13,"td",29)(14,"a",32),r(15," \u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u062D\u0635\u0648\u0644 "),t()()()),o&2){let s=a.$implicit;d(2),g(s.productName),d(2),g(s.variantDisplayName),d(2),g(s.category||"-"),d(2),l("ngClass",ct(9,yr,s.stock===0,s.stock>0&&s.stock<=5,s.stock>5)),d(),v(" ",s.stock," \u0639\u062F\u062F "),d(2),v("",k(12,7,s.sellingPrice)," \u062A\u0648\u0645\u0627\u0646"),d(3),l("routerLink",J(13,_r,s.productId))}}function Er(o,a){if(o&1&&(e(0,"div")(1,"div",17)(2,"div",18)(3,"span",19),r(4,"warning"),t(),e(5,"p",20),r(6),t()(),e(7,"div",21)(8,"table",22)(9,"thead",23)(10,"tr")(11,"th",24),r(12,"\u0646\u0627\u0645 \u0645\u062D\u0635\u0648\u0644"),t(),e(13,"th",24),r(14,"\u062A\u0646\u0648\u0639"),t(),e(15,"th",24),r(16,"\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),t(),e(17,"th",24),r(18,"\u0645\u0648\u062C\u0648\u062F\u06CC"),t(),e(19,"th",24),r(20,"\u0642\u06CC\u0645\u062A"),t(),e(21,"th",24),r(22,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t()()(),e(23,"tbody"),c(24,Ar,16,15,"tr",25),t()()()()()),o&2){let s=p();d(6),v(" ",s.products.length," \u062A\u0646\u0648\u0639 \u0645\u062D\u0635\u0648\u0644 \u0646\u06CC\u0627\u0632 \u0628\u0647 \u062A\u0627\u0645\u06CC\u0646 \u0645\u0648\u062C\u0648\u062F\u06CC \u062F\u0627\u0631\u0646\u062F "),d(18),l("ngForOf",s.products)}}var Vt=(()=>{let a=class a{constructor(i){this.adminProductService=i,this.products=[],this.isLoading=!1,this.threshold=5}ngOnInit(){this.loadLowStockProducts()}loadLowStockProducts(){this.isLoading=!0,this.adminProductService.getLowStockProducts(this.threshold).pipe(O(()=>this.isLoading=!1)).subscribe({next:i=>{this.products=i},error:()=>{this.products=[]}})}};a.\u0275fac=function(n){return new(n||a)(f(le))},a.\u0275cmp=w({type:a,selectors:[["app-low-stock-alerts"]],decls:20,vars:8,consts:[[1,"space-y-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-foreground"],[1,"card","p-6","space-y-4"],[1,"flex","items-center","gap-4"],["for","threshold",1,"text-sm","font-medium","text-foreground"],["id","threshold",1,"input","w-32",3,"ngModelChange","ngModel"],[3,"value"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","card p-12 text-center",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-center","items-center","py-12"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"card","p-12","text-center"],[1,"flex","flex-col","items-center","gap-4"],[1,"material-icons","text-5xl","text-success"],[1,"text-foreground","font-semibold"],[1,"card"],[1,"p-4","bg-warning/10","border-b","border-border","flex","items-center","gap-3"],[1,"material-icons","text-warning"],[1,"text-warning","font-semibold"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-muted"],[1,"p-4","text-right","text-sm","font-medium","text-foreground"],["class","border-b border-border hover:bg-muted/50",4,"ngFor","ngForOf"],[1,"border-b","border-border","hover:bg-muted/50"],[1,"p-4","font-medium","text-foreground"],[1,"p-4","text-muted-foreground"],[1,"p-4"],[1,"px-2","py-1","rounded-full","text-xs","font-semibold",3,"ngClass"],[1,"p-4","text-foreground"],[1,"btn","btn-sm","btn-primary",3,"routerLink"]],template:function(n,u){n&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"\u0645\u062D\u0635\u0648\u0644\u0627\u062A \u0631\u0648 \u0628\u0647 \u0627\u062A\u0645\u0627\u0645"),t()(),e(4,"div",3)(5,"div",4)(6,"label",5),r(7,"\u0622\u0633\u062A\u0627\u0646\u0647 \u0647\u0634\u062F\u0627\u0631:"),t(),e(8,"select",6),Se("ngModelChange",function(x){return Ce(u.threshold,x)||(u.threshold=x),x}),h("ngModelChange",function(){return u.loadLowStockProducts()}),e(9,"option",7),r(10,"5 \u0639\u062F\u062F"),t(),e(11,"option",7),r(12,"10 \u0639\u062F\u062F"),t(),e(13,"option",7),r(14,"20 \u0639\u062F\u062F"),t(),e(15,"option",7),r(16,"50 \u0639\u062F\u062F"),t()()()(),c(17,wr,3,0,"div",8)(18,Fr,6,0,"div",9)(19,Er,25,2,"div",10),t()),n&2&&(d(8),be("ngModel",u.threshold),d(),l("value",5),d(2),l("value",10),d(2),l("value",20),d(2),l("value",50),d(2),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.products.length===0),d(),l("ngIf",!u.isLoading&&u.products.length>0))},dependencies:[A,oe,M,F,D,N,Ae,se,de,ae,T,we,j],encapsulation:2});let o=a;return o})();var Ut=(()=>{let a=class a{constructor(i){this.http=i,this.auditUrl=`${G.API_URL}admin/AuditLogs`}getAuditLogs(i){let n=new me;return Object.keys(i).forEach(u=>{let m=i[u];m!=null&&m!==""&&(n=n.set(u,m.toString()))}),this.http.get(this.auditUrl,{params:n})}};a.\u0275fac=function(n){return new(n||a)(Q(X))},a.\u0275prov=K({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();function kr(o,a){o&1&&(e(0,"div",20)(1,"span",21),r(2,"sync"),t()())}function Pr(o,a){o&1&&(e(0,"div",22)(1,"p",23),r(2,"\u0647\u06CC\u0686 \u06AF\u0632\u0627\u0631\u0634\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."),t()())}function Lr(o,a){if(o&1&&(e(0,"tr",31)(1,"td",32),r(2),y(3,"date"),t(),e(4,"td",33),r(5),t(),e(6,"td",33)(7,"span",34),y(8,"statusClass"),r(9),t()(),e(10,"td",33),r(11),t(),e(12,"td",35),r(13),t(),e(14,"td",36),r(15),t()()),o&2){let s=a.$implicit;d(2),g(fe(3,7,s.timestamp,"yyyy/MM/dd HH:mm:ss")),d(3),g(s.userId||"\u0633\u06CC\u0633\u062A\u0645"),d(2),l("ngClass",k(8,10,s.eventType)),d(2),g(s.eventType),d(2),g(s.action),d(2),g(s.details),d(2),g(s.ipAddress)}}function Mr(o,a){if(o&1&&(e(0,"div",24)(1,"table",25)(2,"thead",26)(3,"tr",27)(4,"th",28),r(5,"\u062A\u0627\u0631\u06CC\u062E"),t(),e(6,"th",28),r(7,"\u06A9\u0627\u0631\u0628\u0631"),t(),e(8,"th",28),r(9,"\u0646\u0648\u0639 \u0631\u0648\u06CC\u062F\u0627\u062F"),t(),e(10,"th",28),r(11,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t(),e(12,"th",28),r(13,"\u062C\u0632\u0626\u06CC\u0627\u062A"),t(),e(14,"th",28),r(15,"IP"),t()()(),e(16,"tbody",29),c(17,Lr,16,12,"tr",30),t()()()),o&2){let s=p();d(17),l("ngForOf",s.logs)}}var Tt=(()=>{let a=class a{constructor(i,n){this.AdminAuditService=i,this.notificationService=n,this.logs=[],this.pagination=null,this.isLoading=!0,this.currentPage=1,this.filterForm=new te({userId:new P(null),eventType:new P(null),fromDate:new P(null),toDate:new P(null)})}ngOnInit(){this.loadLogs()}loadLogs(i=1){this.isLoading=!0,this.currentPage=i;let n=Pe({page:i,pageSize:20},this.filterForm.value);n.fromDate&&(n.fromDate=new Date(n.fromDate).toISOString()),n.toDate&&(n.toDate=new Date(n.toDate).toISOString()),this.AdminAuditService.getAuditLogs(n).pipe(O(()=>this.isLoading=!1)).subscribe({next:u=>{this.logs=u.items??[],this.pagination=u},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u06AF\u0632\u0627\u0631\u0634\u0627\u062A","error")}})}applyFilters(){this.loadLogs(1)}clearFilters(){this.filterForm.reset(),this.loadLogs(1)}};a.\u0275fac=function(n){return new(n||a)(f(Ut),f(L))},a.\u0275cmp=w({type:a,selectors:[["app-audit-logs"]],decls:30,vars:4,consts:[[1,"space-y-6"],[1,"text-2xl","font-bold","text-foreground"],[1,"card","p-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4",3,"ngSubmit","formGroup"],[1,"space-y-2"],["for","userId",1,"text-sm","font-medium"],["type","number","id","userId","formControlName","userId","placeholder","\u0645\u062B\u0627\u0644: 123",1,"input"],["for","eventType",1,"text-sm","font-medium"],["type","text","id","eventType","formControlName","eventType","placeholder","\u0645\u062B\u0627\u0644: UserAction",1,"input"],["for","fromDate",1,"text-sm","font-medium"],["type","date","id","fromDate","formControlName","fromDate",1,"input"],["for","toDate",1,"text-sm","font-medium"],["type","date","id","toDate","formControlName","toDate",1,"input"],[1,"flex","items-end","gap-2","col-span-full"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-outline",3,"click"],[1,"card","overflow-hidden"],["class","flex justify-center items-center p-10",4,"ngIf"],["class","text-center p-10",4,"ngIf"],["class","w-full overflow-x-auto",4,"ngIf"],[1,"flex","justify-center","items-center","p-10"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"text-center","p-10"],[1,"text-muted-foreground"],[1,"w-full","overflow-x-auto"],[1,"w-full","caption-bottom","text-base","min-w-[900px]"],[1,"[&_tr]:border-b","[&_tr]:border-border"],[1,"border-b","transition-colors","hover:bg-muted"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground"],[1,"[&_tr:last-child]:border-0"],["class","border-b transition-colors hover:bg-muted/50",4,"ngFor","ngForOf"],[1,"border-b","transition-colors","hover:bg-muted/50"],[1,"p-4","align-middle","whitespace-nowrap","text-sm"],[1,"p-4","align-middle"],[1,"px-2","py-1","text-xs","font-semibold","rounded-full",3,"ngClass"],[1,"p-4","align-middle","text-sm","text-muted-foreground","max-w-xs","truncate"],[1,"p-4","align-middle","text-sm"]],template:function(n,u){n&1&&(e(0,"div",0)(1,"h1",1),r(2,"\u06AF\u0632\u0627\u0631\u0634\u0627\u062A \u0633\u06CC\u0633\u062A\u0645\u06CC (Audit Logs)"),t(),e(3,"div",2)(4,"form",3),h("ngSubmit",function(){return u.applyFilters()}),e(5,"div",4)(6,"label",5),r(7,"\u0634\u0646\u0627\u0633\u0647 \u06A9\u0627\u0631\u0628\u0631"),t(),b(8,"input",6),t(),e(9,"div",4)(10,"label",7),r(11,"\u0646\u0648\u0639 \u0631\u0648\u06CC\u062F\u0627\u062F"),t(),b(12,"input",8),t(),e(13,"div",4)(14,"label",9),r(15,"\u0627\u0632 \u062A\u0627\u0631\u06CC\u062E"),t(),b(16,"input",10),t(),e(17,"div",4)(18,"label",11),r(19,"\u062A\u0627 \u062A\u0627\u0631\u06CC\u062E"),t(),b(20,"input",12),t(),e(21,"div",13)(22,"button",14),r(23,"\u0627\u0639\u0645\u0627\u0644 \u0641\u06CC\u0644\u062A\u0631"),t(),e(24,"button",15),h("click",function(){return u.clearFilters()}),r(25,"\u067E\u0627\u06A9 \u06A9\u0631\u062F\u0646"),t()()()(),e(26,"div",16),c(27,kr,3,0,"div",17)(28,Pr,3,0,"div",18)(29,Mr,18,1,"div",19),t()()),n&2&&(d(4),l("formGroup",u.filterForm),d(23),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.logs.length===0),d(),l("ngIf",!u.isLoading&&u.logs.length>0))},dependencies:[A,oe,M,F,H,B,$,ue,T,R,q,z,ge,Ee],encapsulation:2});let o=a;return o})();var He=(()=>{let a=class a{constructor(i){this.http=i,this.baseUrl=`${G.API_URL}admin/shipping-methods`}getShippingMethods(i=!1){return this.http.get(`${this.baseUrl}?includeDeleted=${i}`)}getShippingMethodById(i){return this.http.get(`${this.baseUrl}/${i}`)}createShippingMethod(i){return this.http.post(this.baseUrl,i)}updateShippingMethod(i,n){return this.http.put(`${this.baseUrl}/${i}`,n)}deleteShippingMethod(i){return this.http.delete(`${this.baseUrl}/${i}`)}restoreShippingMethod(i){return this.http.post(`${this.baseUrl}/${i}/restore`,{})}};a.\u0275fac=function(n){return new(n||a)(Q(X))},a.\u0275prov=K({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();var Dr=o=>["/admin/shipping-methods/edit",o];function Nr(o,a){o&1&&(e(0,"div",10)(1,"span",11),r(2,"sync"),t()())}function Or(o,a){o&1&&(e(0,"div",12)(1,"p",13),r(2,"\u0647\u06CC\u0686 \u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."),t()())}function Vr(o,a){if(o&1){let s=I();e(0,"button",31),h("click",function(){C(s);let n=p().$implicit,u=p(2);return S(u.deleteMethod(n.id))}),e(1,"span",28),r(2,"delete"),t()()}}function Ur(o,a){if(o&1){let s=I();e(0,"button",32),h("click",function(){C(s);let n=p().$implicit,u=p(2);return S(u.restoreMethod(n.id))}),e(1,"span",28),r(2,"restore_from_trash"),t()()}}function Tr(o,a){if(o&1&&(e(0,"tr",22)(1,"td",23),r(2),t(),e(3,"td",24),r(4),y(5,"number"),t(),e(6,"td",24)(7,"span",25),y(8,"statusClass"),r(9),t()(),e(10,"td",26)(11,"a",27)(12,"span",28),r(13,"edit"),t()(),c(14,Vr,3,0,"button",29)(15,Ur,3,0,"button",30),t()()),o&2){let s=a.$implicit;ee("opacity-50",s.isDeleted),d(2),g(s.name),d(2),v("",k(5,9,s.cost)," \u062A\u0648\u0645\u0627\u0646"),d(3),l("ngClass",k(8,11,s.isDeleted?"\u062D\u0630\u0641 \u0634\u062F\u0647":s.isActive?"\u0641\u0639\u0627\u0644":"\u063A\u06CC\u0631\u0641\u0639\u0627\u0644")),d(2),v(" ",s.isDeleted?"\u062D\u0630\u0641 \u0634\u062F\u0647":s.isActive?"\u0641\u0639\u0627\u0644":"\u063A\u06CC\u0631\u0641\u0639\u0627\u0644"," "),d(2),l("routerLink",J(13,Dr,s.id)),d(3),l("ngIf",!s.isDeleted),d(),l("ngIf",s.isDeleted)}}function jr(o,a){if(o&1&&(e(0,"div",14)(1,"table",15)(2,"thead",16)(3,"tr",17)(4,"th",18),r(5,"\u0646\u0627\u0645"),t(),e(6,"th",18),r(7,"\u0647\u0632\u06CC\u0646\u0647"),t(),e(8,"th",18),r(9,"\u0648\u0636\u0639\u06CC\u062A"),t(),e(10,"th",19),r(11,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t()()(),e(12,"tbody",20),c(13,Tr,16,15,"tr",21),t()()()),o&2){let s=p();d(13),l("ngForOf",s.methods)}}var Gt=(()=>{let a=class a{constructor(i,n){this.adminShippingMethodService=i,this.notificationService=n,this.methods=[],this.isLoading=!0,this.includeDeleted=!1}ngOnInit(){this.loadMethods()}loadMethods(){this.isLoading=!0,this.adminShippingMethodService.getShippingMethods(this.includeDeleted).pipe(O(()=>this.isLoading=!1)).subscribe({next:i=>{this.methods=i},error:i=>{this.notificationService.show(i?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0631\u0648\u0634\u200C\u0647\u0627\u06CC \u0627\u0631\u0633\u0627\u0644","error")}})}deleteMethod(i){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F")&&this.adminShippingMethodService.deleteShippingMethod(i).subscribe({next:()=>{this.notificationService.show("\u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadMethods()},error:n=>this.notificationService.show(n?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641","error")})}restoreMethod(i){this.adminShippingMethodService.restoreShippingMethod(i).subscribe({next:()=>{this.notificationService.show("\u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0628\u0627\u0632\u06CC\u0627\u0628\u06CC \u0634\u062F","success"),this.loadMethods()},error:n=>this.notificationService.show(n?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0632\u06CC\u0627\u0628\u06CC","error")})}};a.\u0275fac=function(n){return new(n||a)(f(He),f(L))},a.\u0275cmp=w({type:a,selectors:[["app-shipping-method-list"]],decls:13,vars:4,consts:[[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-foreground"],["routerLink","/admin/shipping-methods/new",1,"btn","btn-primary","btn-sm"],[1,"card","overflow-hidden"],[1,"flex","items-center","p-4","border-b"],["type","checkbox","id","includeDeleted",1,"checkbox",3,"ngModelChange","ngModel"],["for","includeDeleted",1,"ms-2","font-medium","cursor-pointer"],["class","flex justify-center items-center p-10",4,"ngIf"],["class","text-center p-10",4,"ngIf"],["class","w-full overflow-x-auto",4,"ngIf"],[1,"flex","justify-center","items-center","p-10"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"text-center","p-10"],[1,"text-muted-foreground"],[1,"w-full","overflow-x-auto"],[1,"w-full","caption-bottom","text-base","min-w-[600px]"],[1,"[&_tr]:border-b","[&_tr]:border-border"],[1,"border-b","transition-colors","hover:bg-muted"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground","w-40"],[1,"[&_tr:last-child]:border-0"],["class","border-b transition-colors hover:bg-muted/50",3,"opacity-50",4,"ngFor","ngForOf"],[1,"border-b","transition-colors","hover:bg-muted/50"],[1,"p-4","align-middle","font-medium","text-foreground"],[1,"p-4","align-middle"],[1,"px-2","py-1","text-xs","font-semibold","rounded-full",3,"ngClass"],[1,"p-4","align-middle","space-x-2","space-x-reverse","whitespace-nowrap"],["title","\u0648\u06CC\u0631\u0627\u06CC\u0634",1,"btn","btn-ghost","btn-sm","btn-icon",3,"routerLink"],[1,"material-icons","text-base"],["class","btn btn-ghost btn-sm btn-icon text-destructive hover:bg-destructive/10","title","\u062D\u0630\u0641",3,"click",4,"ngIf"],["class","btn btn-ghost btn-sm btn-icon text-success hover:bg-success/10","title","\u0628\u0627\u0632\u06CC\u0627\u0628\u06CC",3,"click",4,"ngIf"],["title","\u062D\u0630\u0641",1,"btn","btn-ghost","btn-sm","btn-icon","text-destructive","hover:bg-destructive/10",3,"click"],["title","\u0628\u0627\u0632\u06CC\u0627\u0628\u06CC",1,"btn","btn-ghost","btn-sm","btn-icon","text-success","hover:bg-success/10",3,"click"]],template:function(n,u){n&1&&(e(0,"div",0)(1,"h1",1),r(2,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u0631\u0648\u0634\u200C\u0647\u0627\u06CC \u0627\u0631\u0633\u0627\u0644"),t(),e(3,"a",2),r(4,"\u0627\u0641\u0632\u0648\u062F\u0646 \u0631\u0648\u0634 \u062C\u062F\u06CC\u062F"),t()(),e(5,"div",3)(6,"div",4)(7,"input",5),Se("ngModelChange",function(x){return Ce(u.includeDeleted,x)||(u.includeDeleted=x),x}),h("ngModelChange",function(){return u.loadMethods()}),t(),e(8,"label",6),r(9,"\u0646\u0645\u0627\u06CC\u0634 \u062D\u0630\u0641 \u0634\u062F\u0647\u200C\u0647\u0627"),t()(),c(10,Nr,3,0,"div",7)(11,Or,3,0,"div",8)(12,jr,14,1,"div",9),t()),n&2&&(d(7),be("ngModel",u.includeDeleted),d(3),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.methods.length===0),d(),l("ngIf",!u.isLoading&&u.methods.length>0))},dependencies:[A,oe,M,F,D,N,Ae,he,T,we,j,Ee],encapsulation:2});let o=a;return o})();function Gr(o,a){o&1&&(e(0,"div",19),r(1," \u0646\u0627\u0645 \u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 \u0627\u0644\u0632\u0627\u0645\u06CC \u0627\u0633\u062A. "),t())}function $r(o,a){o&1&&(e(0,"div",19),r(1," \u0647\u0632\u06CC\u0646\u0647 \u0627\u0644\u0632\u0627\u0645\u06CC \u0648 \u0628\u0627\u06CC\u062F \u06CC\u06A9 \u0639\u062F\u062F \u0645\u062B\u0628\u062A \u0628\u0627\u0634\u062F. "),t())}function Rr(o,a){o&1&&(e(0,"div",20),b(1,"input",21),e(2,"label",22),r(3,"\u0641\u0639\u0627\u0644"),t()())}function Br(o,a){o&1&&(e(0,"span",23),r(1,"sync"),t())}var tt=(()=>{let a=class a{constructor(i,n,u,m,x){this.fb=i,this.route=n,this.router=u,this.adminShippingMethodService=m,this.notificationService=x,this.isEditMode=!1,this.methodId=null,this.isSubmitting=!1,this.shippingForm=this.fb.group({name:["",[_.required,_.maxLength(100)]],cost:[0,[_.required,_.min(0)]],description:["",_.maxLength(500)],estimatedDeliveryTime:["",_.maxLength(100)],isActive:[!0],rowVersion:[null]})}ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i&&(this.methodId=+i,this.isEditMode=!0,this.loadMethodData())}loadMethodData(){this.methodId&&this.adminShippingMethodService.getShippingMethodById(this.methodId).subscribe({next:i=>{this.shippingForm.patchValue(i)},error:i=>{this.notificationService.show(i?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A","error"),this.router.navigate(["/admin/shipping-methods"])}})}onSubmit(){if(this.shippingForm.invalid){this.shippingForm.markAllAsTouched();return}this.isSubmitting=!0;let i=this.shippingForm.getRawValue();(this.isEditMode&&this.methodId?this.adminShippingMethodService.updateShippingMethod(this.methodId,i):this.adminShippingMethodService.createShippingMethod(i)).pipe(O(()=>this.isSubmitting=!1)).subscribe({next:()=>{this.notificationService.show(`\u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A ${this.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"} \u0634\u062F`,"success"),this.router.navigate(["/admin/shipping-methods"])},error:u=>{u.status===409?(this.notificationService.show("\u0627\u06CC\u0646 \u0631\u06A9\u0648\u0631\u062F \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627 \u0635\u0641\u062D\u0647 \u0631\u0627 \u0631\u0641\u0631\u0634 \u06A9\u0646\u06CC\u062F.","error"),this.loadMethodData()):this.notificationService.show(u?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062B\u0628\u062A \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A","error")}})}};a.\u0275fac=function(n){return new(n||a)(f(Ge),f(ie),f(ce),f(He),f(L))},a.\u0275cmp=w({type:a,selectors:[["app-shipping-method-form"]],decls:31,vars:8,consts:[[1,"max-w-2xl","mx-auto"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold"],["routerLink","/admin/shipping-methods",1,"btn","btn-outline","btn-sm"],[1,"card","p-6","space-y-6",3,"ngSubmit","formGroup"],[1,"space-y-2"],["for","name",1,"font-medium"],["type","text","id","name","formControlName","name","placeholder","\u0645\u062B\u0627\u0644: \u067E\u0633\u062A \u067E\u06CC\u0634\u062A\u0627\u0632","maxlength","100",1,"input"],["class","text-xs text-destructive pt-1",4,"ngIf"],["for","cost",1,"font-medium"],["type","number","id","cost","formControlName","cost","placeholder","\u0647\u0632\u06CC\u0646\u0647 \u0628\u0647 \u062A\u0648\u0645\u0627\u0646",1,"input"],["for","estimatedDeliveryTime",1,"font-medium"],["type","text","id","estimatedDeliveryTime","formControlName","estimatedDeliveryTime","placeholder","\u0645\u062B\u0627\u0644: \u06F2 \u062A\u0627 \u06F4 \u0631\u0648\u0632 \u06A9\u0627\u0631\u06CC","maxlength","100",1,"input"],["for","description",1,"font-medium"],["id","description","formControlName","description","rows","3","placeholder","\u062A\u0648\u0636\u06CC\u062D\u0627\u062A \u062A\u06A9\u0645\u06CC\u0644\u06CC","maxlength","500",1,"input"],["class","flex items-center pt-2",4,"ngIf"],[1,"flex","rtl:justify-start","pt-4","border-t"],["type","submit",1,"btn","btn-primary","btn-md",3,"disabled"],["class","material-icons animate-spin me-2",4,"ngIf"],[1,"text-xs","text-destructive","pt-1"],[1,"flex","items-center","pt-2"],["type","checkbox","id","isActive","formControlName","isActive",1,"checkbox"],["for","isActive",1,"ms-2","font-medium","cursor-pointer"],[1,"material-icons","animate-spin","me-2"]],template:function(n,u){if(n&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),r(3),t(),e(4,"a",3),r(5,"\u0628\u0627\u0632\u06AF\u0634\u062A"),t()(),e(6,"form",4),h("ngSubmit",function(){return u.onSubmit()}),e(7,"div",5)(8,"label",6),r(9,"\u0646\u0627\u0645 \u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644"),t(),b(10,"input",7),c(11,Gr,2,0,"div",8),t(),e(12,"div",5)(13,"label",9),r(14,"\u0647\u0632\u06CC\u0646\u0647"),t(),b(15,"input",10),c(16,$r,2,0,"div",8),t(),e(17,"div",5)(18,"label",11),r(19,"\u0632\u0645\u0627\u0646 \u062A\u062E\u0645\u06CC\u0646\u06CC \u062A\u062D\u0648\u06CC\u0644"),t(),b(20,"input",12),t(),e(21,"div",5)(22,"label",13),r(23,"\u062A\u0648\u0636\u06CC\u062D\u0627\u062A (\u0627\u062E\u062A\u06CC\u0627\u0631\u06CC)"),t(),b(24,"textarea",14),t(),c(25,Rr,4,0,"div",15),e(26,"div",16)(27,"button",17),c(28,Br,2,0,"span",18),e(29,"span"),r(30),t()()()()()),n&2){let m,x;d(3),v("",u.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"," \u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644"),d(3),l("formGroup",u.shippingForm),d(5),l("ngIf",((m=u.shippingForm.get("name"))==null?null:m.invalid)&&((m=u.shippingForm.get("name"))==null?null:m.touched)),d(5),l("ngIf",((x=u.shippingForm.get("cost"))==null?null:x.invalid)&&((x=u.shippingForm.get("cost"))==null?null:x.touched)),d(9),l("ngIf",u.isEditMode),d(2),l("disabled",u.shippingForm.invalid||u.isSubmitting),d(),l("ngIf",u.isSubmitting),d(2),g(u.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u0630\u062E\u06CC\u0631\u0647...":"\u0630\u062E\u06CC\u0631\u0647")}},dependencies:[A,F,H,B,$,ue,he,T,R,Fe,q,z,D,N],encapsulation:2});let o=a;return o})();var u0=[{path:"",component:Ct,canActivate:[xt],children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:yt},{path:"products",component:Dt},{path:"products/new",component:et},{path:"products/edit/:id",component:et},{path:"products/bulk-price-update",component:Ot},{path:"products/low-stock",component:Vt},{path:"categories",component:Ft},{path:"categories/new",component:Xe},{path:"categories/edit/:id",component:Xe},{path:"category-groups",component:Et},{path:"category-groups/new",component:Ye},{path:"category-groups/edit/:id",component:Ye},{path:"orders",component:Pt},{path:"orders/:id",component:It},{path:"order-statuses",component:Lt},{path:"order-statuses/new",component:Ze},{path:"order-statuses/edit/:id",component:Ze},{path:"users",component:Nt},{path:"audit-logs",component:Tt},{path:"shipping-methods",component:Gt},{path:"shipping-methods/new",component:tt},{path:"shipping-methods/edit/:id",component:tt}]}];export{u0 as ADMIN_ROUTES};
