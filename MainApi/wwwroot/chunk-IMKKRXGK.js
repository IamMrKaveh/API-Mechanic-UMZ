import{a as E}from"./chunk-UCZDBRZX.js";import{B as C,H as w,d as P,h as S,i as k}from"./chunk-H5ECWNVP.js";import{Hb as l,Oa as h,Ob as _,Pb as d,Rb as p,Sa as r,Zb as v,ac as m,bb as b,bc as x,cc as I,gb as y,lb as s,ub as u,vb as n,wb as c,xb as f}from"./chunk-C5CPS5UB.js";var F=t=>["/products",t];function z(t,o){if(t&1&&(n(0,"div",24)(1,"div",25),d(2),m(3,"number"),c()()),t&2){let e=l(2);r(2),p(" ",I(3,1,e.discountPercentage,"1.0-0"),"% ")}}function D(t,o){t&1&&(n(0,"div",26),f(1,"span",27),c())}function U(t,o){t&1&&(n(0,"div",28)(1,"span",29),d(2,"\u0646\u0627\u0645\u0648\u062C\u0648\u062F"),c()())}function M(t,o){if(t&1&&(n(0,"span",30),d(1),m(2,"number"),c()),t&2){let e=l(2);r(),p(" ",x(2,1,e.originalPrice)," ")}}function T(t,o){if(t&1&&(n(0,"div",1)(1,"a",2)(2,"span",3),d(3),c()(),n(4,"div",4),f(5,"div",5)(6,"img",6),s(7,z,4,4,"div",7)(8,D,2,0,"div",8)(9,U,3,0,"div",9),n(10,"div",10)(11,"button",11)(12,"span",12),d(13,"visibility"),c()(),n(14,"button",13)(15,"span",14),d(16,"add_shopping_cart"),c()()()(),n(17,"div",15)(18,"h3",16),d(19),c(),n(20,"div",17)(21,"div",18)(22,"div",19),s(23,M,3,3,"span",20),n(24,"div",21)(25,"span",22),d(26),m(27,"number"),c(),n(28,"span",23),d(29,"\u062A\u0648\u0645\u0627\u0646"),c()()()()()()()),t&2){let e=l();r(),u("routerLink",v(17,F,e.product.id))("title",e.product.name),r(2),p("\u0645\u0634\u0627\u0647\u062F\u0647 ",e.product.name),r(3),u("src",e.productIconUrl,h)("alt",e.product.name),r(),u("ngIf",e.hasDiscount),r(),u("ngIf",e.isInStock()),r(),u("ngIf",!e.isInStock()),r(2),u("routerLink",v(19,F,e.product.id)),r(3),u("disabled",!e.isInStock()),r(5),p(" ",e.product.name," "),r(4),u("ngIf",e.hasDiscount),r(2),_("price-discount",e.hasDiscount),r(),p(" ",x(27,15,e.displayPrice)," ")}}var N=(()=>{let o=class o{constructor(i){this.mediaService=i}isInStock(){return this.product?this.product.variants.some(a=>a.isUnlimited)?!0:this.product.totalStock>0:!1}get productIconUrl(){let a=this.product?.images?.find(g=>g.isPrimary)?.url||this.product?.images?.[0]?.url;return a?this.mediaService.getMediaUrl(a):"https://via.placeholder.com/300"}get displayVariant(){if(!(!this.product||!this.product.variants||this.product.variants.length===0))return this.product.variants.reduce((i,a)=>a.sellingPrice<i.sellingPrice?a:i)}get hasDiscount(){let i=this.displayVariant;return i?i.originalPrice>i.sellingPrice:!1}get discountPercentage(){let i=this.displayVariant;return!i||!this.hasDiscount?0:i.discountPercentage}get displayPrice(){return this.displayVariant?.sellingPrice||0}get originalPrice(){return this.displayVariant?.originalPrice||0}};o.\u0275fac=function(a){return new(a||o)(b(E))},o.\u0275cmp=y({type:o,selectors:[["app-product-card"]],inputs:{product:"product"},decls:1,vars:1,consts:[["class","product-card card-interactive group h-full",4,"ngIf"],[1,"product-card","card-interactive","group","h-full"],[1,"absolute","inset-0","z-10",3,"routerLink","title"],[1,"sr-only"],[1,"product-image"],[1,"absolute","inset-0","bg-gradient-to-t","from-black/5","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity","duration-300"],["loading","lazy","decoding","async",3,"src","alt"],["class","product-badge top-3 left-3",4,"ngIf"],["class","absolute top-3 right-3 z-20",4,"ngIf"],["class","absolute inset-0 z-20 flex items-center justify-center bg-background/60 backdrop-blur-[2px]",4,"ngIf"],[1,"product-actions"],["title","\u0645\u0634\u0627\u0647\u062F\u0647 \u062C\u0632\u0626\u06CC\u0627\u062A",1,"icon-wrapper","icon-wrapper-lg","icon-wrapper-primary","bg-background","rounded-full","shadow-lg","mx-1","hover-scale","hover-lift","z-20",3,"routerLink"],[1,"material-icons","text-xl","group-hover:icon-pulse"],["title","\u0627\u0641\u0632\u0648\u062F\u0646 \u0628\u0647 \u0633\u0628\u062F",1,"icon-wrapper","icon-wrapper-lg","icon-wrapper-primary","bg-background","rounded-full","shadow-lg","mx-1","hover-scale","hover-lift","z-20",3,"disabled"],[1,"material-icons","text-xl","group-hover:icon-beat"],[1,"product-info","flex-1","flex","flex-col"],[1,"product-title","group-hover:text-primary","transition-colors"],[1,"mt-auto","pt-3","border-t","border-border/50"],[1,"product-price","justify-end"],[1,"flex","flex-col","items-end"],["class","price-original",4,"ngIf"],[1,"flex","items-baseline","gap-1"],[1,"price","text-lg"],[1,"text-xs","font-medium","text-muted-foreground"],[1,"product-badge","top-3","left-3"],[1,"badge","badge-lg","badge-destructive","shadow-sm","animate-fade-in"],[1,"absolute","top-3","right-3","z-20"],["title","\u0645\u0648\u062C\u0648\u062F \u062F\u0631 \u0627\u0646\u0628\u0627\u0631",1,"badge-dot","text-success"],[1,"absolute","inset-0","z-20","flex","items-center","justify-center","bg-background/60","backdrop-blur-[2px]"],[1,"badge","badge-secondary","shadow-lg"],[1,"price-original"]],template:function(a,g){a&1&&s(0,T,30,21,"div",0),a&2&&u("ngIf",g.product)},dependencies:[k,P,w,C,S],encapsulation:2});let t=o;return t})();export{N as a};
