import{a as we}from"./chunk-APFCOE5L.js";import{a as V,b as Ae}from"./chunk-LMJRAKE3.js";import{a as ve}from"./chunk-ZWNO2NBS.js";import{a as q}from"./chunk-Y6DY6YBM.js";import{B as Q,a as he,b as G,c as m,d as H,e as U,f as ee,g as y,i as z,m as J,p as K,q as be,r as ye,s as Se,w as _e,z as Ce}from"./chunk-5635NGOX.js";import"./chunk-PBQKIYOO.js";import{a as j}from"./chunk-U4BXHFS4.js";import{a as Ee}from"./chunk-A4FOPVB5.js";import"./chunk-T5TNNXDL.js";import{A as T,B as ge,G as M,b as me,c as D,d as w,e as $,f as ce,h as pe,i as F,x as fe,y as xe,z as O}from"./chunk-2CT2PKNK.js";import{Ab as i,Bb as v,Ca as d,Cb as h,Db as ae,Eb as ue,F as E,Jb as de,Kb as le,N as se,Na as c,Nb as S,Ob as I,Pb as Z,Sa as A,Xa as p,aa as k,ba as L,g as re,gb as l,hb as t,ib as e,j as ne,jb as x,nb as B,ob as R,pb as P,sb as b,tb as g,z as oe}from"./chunk-6VZDFBBI.js";import{a as C,b as N}from"./chunk-4CLCTAJ7.js";var je=()=>({exact:!0});function Pe(r,n){if(r&1&&(B(0),t(1,"h2",19),i(2),e(),t(3,"p",20),i(4),e(),R()),r&2){let s=n.ngIf;d(2),ae("",s.firstName," ",s.lastName),d(2),v(s.phoneNumber)}}function Te(r,n){if(r&1&&(t(0,"li")(1,"a",21)(2,"span",16),i(3),e(),t(4,"span"),i(5),e()()()),r&2){let s=n.$implicit;d(),l("routerLink",s.link)("routerLinkActiveOptions",de(4,je)),d(2),v(s.icon),d(2),v(s.title)}}var Fe=(()=>{let n=class n{constructor(o,a){this.authService=o,this.router=a,this.menuItems=[{title:"\u067E\u0631\u0648\u0641\u0627\u06CC\u0644",link:"/dashboard/profile",icon:"account_circle"},{title:"\u062A\u0627\u0631\u06CC\u062E\u0686\u0647 \u0633\u0641\u0627\u0631\u0634\u0627\u062A",link:"/dashboard/order-history",icon:"history"},{title:"\u0622\u062F\u0631\u0633\u200C\u0647\u0627\u06CC \u0645\u0646",icon:"home",link:"/dashboard/addresses"}],this.user$=this.authService.userProfile$}ngOnInit(){}logout(){this.authService.logout(),this.router.navigate(["/"])}};n.\u0275fac=function(a){return new(a||n)(c(q),c(O))},n.\u0275cmp=A({type:n,selectors:[["app-dashboard-page"]],decls:26,vars:4,consts:[[1,"min-h-screen","bg-muted/20","pb-12"],[1,"container","py-8","md:py-10"],[1,"md:hidden","mb-6"],[1,"text-2xl","font-bold","text-foreground"],[1,"grid","grid-cols-1","md:grid-cols-12","gap-6","lg:gap-8"],[1,"md:col-span-4","lg:col-span-3"],[1,"sticky","top-24","space-y-6"],[1,"bg-card","rounded-xl","border","border-border","shadow-sm","p-6","flex","flex-col","items-center","text-center"],[1,"w-20","h-20","rounded-full","bg-primary/10","text-primary","flex","items-center","justify-center","mb-4","ring-4","ring-background","shadow-sm"],[1,"material-icons","text-4xl"],[4,"ngIf"],[1,"bg-card","rounded-xl","border","border-border","shadow-sm","overflow-hidden","p-2"],[1,"space-y-1"],[4,"ngFor","ngForOf"],[1,"pt-2","mt-2","border-t","border-border"],[1,"w-full","flex","items-center","gap-3","px-4","py-3","rounded-lg","text-sm","text-destructive","hover:bg-destructive/10","transition-colors",3,"click"],[1,"material-icons-outlined","text-xl","w-6","text-center"],[1,"md:col-span-8","lg:col-span-9"],[1,"bg-card","rounded-xl","border","border-border","shadow-sm","min-h-[500px]","overflow-hidden"],[1,"font-bold","text-lg","text-foreground","mb-1"],[1,"text-sm","text-muted-foreground","dir-ltr"],["routerLinkActive","bg-primary/10 text-primary font-semibold shadow-sm",1,"flex","items-center","gap-3","px-4","py-3","rounded-lg","text-sm","text-muted-foreground","hover:bg-muted","hover:text-foreground","transition-all","duration-200",3,"routerLink","routerLinkActiveOptions"]],template:function(a,u){a&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),i(4,"\u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC"),e()(),t(5,"div",4)(6,"aside",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"span",9),i(11,"person"),e()(),p(12,Pe,5,3,"ng-container",10),S(13,"async"),e(),t(14,"nav",11)(15,"ul",12),p(16,Te,6,5,"li",13),t(17,"li",14)(18,"button",15),b("click",function(){return u.logout()}),t(19,"span",16),i(20,"logout"),e(),t(21,"span"),i(22,"\u062E\u0631\u0648\u062C \u0627\u0632 \u062D\u0633\u0627\u0628"),e()()()()()()(),t(23,"main",17)(24,"div",18),x(25,"router-outlet"),e()()()()()),a&2&&(d(12),l("ngIf",I(13,2,u.user$)),d(4),l("ngForOf",u.menuItems))},dependencies:[F,D,w,M,xe,T,ge,$],encapsulation:2});let r=n;return r})();function Ve(r,n){r&1&&(t(0,"div",8)(1,"span",9),i(2,"sync"),e()())}function Be(r,n){if(r&1&&(t(0,"div",10),i(1),e()),r&2){let s=g().ngIf;d(),h(" ",s.error," ")}}function Re(r,n){r&1&&(t(0,"span",30),i(1,"person"),e())}function $e(r,n){r&1&&(t(0,"span",31),i(1,"sync"),e())}function qe(r,n){if(r&1){let s=P();t(0,"form",11),b("ngSubmit",function(){k(s);let a=g(2);return L(a.updateProfile())}),t(1,"div",12)(2,"div",13)(3,"div",14),p(4,Re,2,0,"span",15),e(),t(5,"div",16)(6,"span",17),i(7,"edit"),e()()(),t(8,"p",18),i(9,"\u0628\u0631\u0627\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u062A\u0635\u0648\u06CC\u0631 \u06A9\u0644\u06CC\u06A9 \u06A9\u0646\u06CC\u062F"),e()(),t(10,"div",19)(11,"div",20)(12,"label",21),i(13,"\u0646\u0627\u0645"),e(),x(14,"input",22),e(),t(15,"div",20)(16,"label",21),i(17,"\u0646\u0627\u0645 \u062E\u0627\u0646\u0648\u0627\u062F\u06AF\u06CC"),e(),x(18,"input",23),e(),t(19,"div",20)(20,"label",21),i(21,"\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06CC\u0644"),e(),x(22,"input",24),e(),t(23,"div",20)(24,"label",21),i(25,"\u062A\u0627\u0631\u06CC\u062E \u0639\u0636\u0648\u06CC\u062A"),e(),x(26,"input",25),e()(),t(27,"div",26)(28,"button",27),b("click",function(){k(s);let a=g(2);return L(a.deleteAccount())}),i(29," \u062D\u0630\u0641 \u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC "),e(),t(30,"button",28),p(31,$e,2,0,"span",29),t(32,"span"),i(33),e()()()()}if(r&2){let s=g().ngIf,o=g();l("formGroup",o.profileForm),d(4),l("ngIf",!0),d(26),l("disabled",o.profileForm.pristine||s.isSubmitting),d(),l("ngIf",s.isSubmitting),d(2),v(s.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u0630\u062E\u06CC\u0631\u0647...":"\u062B\u0628\u062A \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A")}}function Ge(r,n){if(r&1&&(B(0),p(1,Ve,3,0,"div",5)(2,Be,2,1,"div",6)(3,qe,34,5,"form",7),R()),r&2){let s=n.ngIf,o=g();d(),l("ngIf",s.isLoading),d(),l("ngIf",s.error),d(),l("ngIf",!s.isLoading&&o.profileForm)}}var Ne=(()=>{let n=class n{constructor(o,a,u,f){this.profileService=o,this.authService=a,this.notificationService=u,this.router=f,this.showAddressModal=!1,this.editingAddress=null,this.store=new re({profile:null,isLoading:!0,isSubmitting:!1,error:null}),this.vm$=this.store.asObservable()}ngOnInit(){this.profileForm=new ee({phoneNumber:new y({value:"",disabled:!0}),createdAt:new y({value:"",disabled:!0}),firstName:new y("",[m.maxLength(100)]),lastName:new y("",[m.maxLength(100)]),isAdmin:new y({value:!1,disabled:!0})}),this.addressForm=new ee({title:new y("",m.required),receiverName:new y("",m.required),phoneNumber:new y("",m.required),province:new y("",m.required),city:new y("",m.required),address:new y("",m.required),postalCode:new y("",m.required)}),this.loadProfile()}loadProfile(){this.store.next(N(C({},this.store.value),{isLoading:!0})),this.profileService.getProfile().pipe(se(o=>{this.profileForm.patchValue({phoneNumber:o.phoneNumber,createdAt:o.createdAt?new Date(o.createdAt).toLocaleDateString("fa-IR"):"",firstName:o.firstName,lastName:o.lastName,isAdmin:o.isAdmin}),this.authService.updateUserProfile(o),this.store.next(N(C({},this.store.value),{profile:o,isLoading:!1,error:null})),this.profileForm.markAsPristine()}),oe(o=>{let a=o?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062F\u0631\u06CC\u0627\u0641\u062A \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u067E\u0631\u0648\u0641\u0627\u06CC\u0644";return this.store.next(N(C({},this.store.value),{isLoading:!1,error:a})),ne(null)})).subscribe()}updateProfile(){if(this.profileForm.invalid||this.profileForm.pristine)return;this.store.next(N(C({},this.store.value),{isSubmitting:!0}));let o={firstName:this.profileForm.value.firstName?.trim()||void 0,lastName:this.profileForm.value.lastName?.trim()||void 0};this.profileService.updateProfile(o).pipe(E(()=>this.store.next(N(C({},this.store.value),{isSubmitting:!1})))).subscribe({next:()=>{this.notificationService.show("\u067E\u0631\u0648\u0641\u0627\u06CC\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0628\u0647\u200C\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0634\u062F","success"),this.loadProfile()},error:a=>{let u=a?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0647\u200C\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u067E\u0631\u0648\u0641\u0627\u06CC\u0644";this.notificationService.show(u,"error")}})}deleteAccount(){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC \u062E\u0648\u062F \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F \u0627\u06CC\u0646 \u0639\u0645\u0644 \u063A\u06CC\u0631\u0642\u0627\u0628\u0644 \u0628\u0627\u0632\u06AF\u0634\u062A \u0627\u0633\u062A.")&&(this.store.next(N(C({},this.store.value),{isSubmitting:!0})),this.profileService.deleteAccount().pipe(E(()=>this.store.next(N(C({},this.store.value),{isSubmitting:!1})))).subscribe({next:()=>{this.notificationService.show("\u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC \u0634\u0645\u0627 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F.","success"),this.authService.logout(),this.router.navigate(["/"])},error:o=>{let a=o?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC.";this.notificationService.show(a,"error")}}))}};n.\u0275fac=function(a){return new(a||n)(c(V),c(q),c(j),c(O))},n.\u0275cmp=A({type:n,selectors:[["app-profile"]],decls:7,vars:3,consts:[[1,"flex","flex-col","h-full"],[1,"p-6","border-b","border-border","bg-muted/10","flex","items-center","justify-between"],[1,"text-xl","font-bold","text-foreground"],[1,"p-6","max-w-2xl","mx-auto","w-full","flex-1"],[4,"ngIf"],["class","flex justify-center py-12",4,"ngIf"],["class","p-4 mb-6 rounded-lg bg-destructive/10 text-destructive text-sm text-center",4,"ngIf"],["class","space-y-8",3,"formGroup","ngSubmit",4,"ngIf"],[1,"flex","justify-center","py-12"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"p-4","mb-6","rounded-lg","bg-destructive/10","text-destructive","text-sm","text-center"],[1,"space-y-8",3,"ngSubmit","formGroup"],[1,"flex","flex-col","items-center","mb-8"],[1,"relative","group","cursor-pointer"],[1,"w-24","h-24","rounded-full","bg-primary/10","flex","items-center","justify-center","text-primary","text-4xl","ring-4","ring-background","shadow-lg","overflow-hidden"],["class","material-icons",4,"ngIf"],[1,"absolute","inset-0","bg-black/40","rounded-full","opacity-0","group-hover:opacity-100","transition-opacity","flex","items-center","justify-center","text-white"],[1,"material-icons","text-sm"],[1,"text-xs","text-muted-foreground","mt-2"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-6"],[1,"space-y-2"],[1,"text-sm","font-medium","text-foreground"],["type","text","formControlName","firstName",1,"input","w-full"],["type","text","formControlName","lastName",1,"input","w-full"],["type","text","formControlName","phoneNumber","readonly","",1,"input","w-full","bg-muted/50","text-muted-foreground","dir-ltr"],["type","text","formControlName","createdAt","readonly","",1,"input","w-full","bg-muted/50","text-muted-foreground","text-center"],[1,"pt-6","border-t","border-border","flex","flex-col-reverse","sm:flex-row","justify-between","gap-4"],["type","button",1,"btn","btn-outline","text-destructive","hover:bg-destructive","hover:text-destructive-foreground","border-destructive/30","w-full","sm:w-auto",3,"click"],["type","submit",1,"btn","btn-primary","w-full","sm:w-auto","min-w-[120px]",3,"disabled"],["class","material-icons animate-spin me-2 text-sm",4,"ngIf"],[1,"material-icons"],[1,"material-icons","animate-spin","me-2","text-sm"]],template:function(a,u){a&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),i(3,"\u0648\u06CC\u0631\u0627\u06CC\u0634 \u067E\u0631\u0648\u0641\u0627\u06CC\u0644"),e()(),t(4,"div",3),p(5,Ge,4,3,"ng-container",4),S(6,"async"),e()()),a&2&&(d(5),l("ngIf",I(6,1,u.vm$)))},dependencies:[F,w,Q,z,G,H,U,J,K,$],encapsulation:2});let r=n;return r})();function He(r,n){r&1&&(t(0,"div",7)(1,"span",8),i(2,"sync"),e(),t(3,"span",9),i(4,"\u062F\u0631 \u062D\u0627\u0644 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0633\u0641\u0627\u0631\u0634\u0627\u062A..."),e()())}function Ue(r,n){r&1&&(t(0,"div",10)(1,"span",11),i(2,"receipt_long"),e(),t(3,"h3",12),i(4,"\u0647\u0646\u0648\u0632 \u0633\u0641\u0627\u0631\u0634\u06CC \u062B\u0628\u062A \u0646\u06A9\u0631\u062F\u0647\u200C\u0627\u06CC\u062F"),e(),t(5,"a",13),i(6,"\u0634\u0631\u0648\u0639 \u062E\u0631\u06CC\u062F"),e()())}function ze(r,n){if(r&1){let s=P();t(0,"tr",24)(1,"td",25),i(2),e(),t(3,"td",26),i(4),S(5,"date"),e(),t(6,"td",27),i(7),S(8,"number"),e(),t(9,"td",28)(10,"span",29),S(11,"statusClass"),i(12),e()(),t(13,"td",30)(14,"button",31),b("click",function(){let a=k(s).$implicit,u=g(2);return L(u.viewOrderDetails(a.id))}),t(15,"span"),i(16,"\u062C\u0632\u0626\u06CC\u0627\u062A"),e(),t(17,"span",32),i(18,"chevron_left"),e()()()()}if(r&2){let s=n.$implicit;d(2),h("#",s.id),d(2),v(Z(5,5,s.createdAt,"yyyy/MM/dd")),d(3),h("",I(8,8,s.totalAmount)," \u062A\u0648\u0645\u0627\u0646"),d(3),l("ngClass",I(11,10,s.orderStatus==null?null:s.orderStatus.name)),d(2),h(" ",(s.orderStatus==null?null:s.orderStatus.name)||"\u0646\u0627\u0645\u0634\u062E\u0635"," ")}}function Je(r,n){if(r&1){let s=P();t(0,"div",33),b("click",function(){let a=k(s).$implicit,u=g(2);return L(u.viewOrderDetails(a.id))}),t(1,"div",34)(2,"div")(3,"span",35),i(4,"\u0634\u0645\u0627\u0631\u0647 \u0633\u0641\u0627\u0631\u0634"),e(),t(5,"span",36),i(6),e()(),t(7,"span",37),S(8,"statusClass"),i(9),e()(),t(10,"div",38)(11,"div")(12,"span",35),i(13),S(14,"date"),e(),t(15,"span",39),i(16),S(17,"number"),e()(),t(18,"button",40)(19,"span",41),i(20,"chevron_left"),e()()()()}if(r&2){let s=n.$implicit;d(6),h("#",s.id),d(),l("ngClass",I(8,5,s.orderStatus==null?null:s.orderStatus.name)),d(2),h(" ",s.orderStatus==null?null:s.orderStatus.name," "),d(4),v(Z(14,7,s.createdAt,"yyyy/MM/dd")),d(3),h("",I(17,10,s.totalAmount)," \u062A\u0648\u0645\u0627\u0646")}}function Ke(r,n){if(r&1&&(t(0,"div",14)(1,"div",15)(2,"table",16)(3,"thead",17)(4,"tr")(5,"th",18),i(6,"\u0634\u0645\u0627\u0631\u0647 \u0633\u0641\u0627\u0631\u0634"),e(),t(7,"th",18),i(8,"\u062A\u0627\u0631\u06CC\u062E"),e(),t(9,"th",18),i(10,"\u0645\u0628\u0644\u063A \u06A9\u0644"),e(),t(11,"th",18),i(12,"\u0648\u0636\u0639\u06CC\u062A"),e(),t(13,"th",19),i(14,"\u0639\u0645\u0644\u06CC\u0627\u062A"),e()()(),t(15,"tbody",20),p(16,ze,19,12,"tr",21),e()()(),t(17,"div",22),p(18,Je,21,12,"div",23),e()()),r&2){let s=g();d(16),l("ngForOf",s.orders),d(2),l("ngForOf",s.orders)}}var ke=(()=>{let n=class n{constructor(o,a,u){this.orderService=o,this.notificationService=a,this.router=u,this.orders=[],this.isLoading=!0,this.paginationInfo=null}ngOnInit(){this.loadOrders()}loadOrders(o=1,a=10){this.isLoading=!0,this.orderService.getOrders(o,a).pipe(E(()=>this.isLoading=!1)).subscribe({next:u=>{this.orders=u.items??[],this.paginationInfo=u},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u062F\u0631\u06CC\u0627\u0641\u062A \u062A\u0627\u0631\u06CC\u062E\u0686\u0647 \u0633\u0641\u0627\u0631\u0634\u0627\u062A","error")}})}viewOrderDetails(o){this.router.navigate(["/dashboard/order",o])}};n.\u0275fac=function(a){return new(a||n)(c(Ee),c(j),c(O))},n.\u0275cmp=A({type:n,selectors:[["app-order-history"]],decls:8,vars:3,consts:[[1,"flex","flex-col","h-full"],[1,"p-6","border-b","border-border","bg-muted/10"],[1,"text-xl","font-bold","text-foreground"],[1,"p-6","flex-1"],["class","flex flex-col items-center justify-center h-64 space-y-4",4,"ngIf"],["class","flex flex-col items-center justify-center h-64 text-center border-2 border-dashed border-border rounded-xl bg-muted/20",4,"ngIf"],["class","space-y-4",4,"ngIf"],[1,"flex","flex-col","items-center","justify-center","h-64","space-y-4"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"text-muted-foreground","text-sm"],[1,"flex","flex-col","items-center","justify-center","h-64","text-center","border-2","border-dashed","border-border","rounded-xl","bg-muted/20"],[1,"material-icons","text-5xl","text-muted-foreground/40","mb-4"],[1,"text-lg","font-semibold","text-foreground"],["routerLink","/products",1,"btn","btn-primary","mt-4"],[1,"space-y-4"],[1,"hidden","md:block","overflow-hidden","rounded-lg","border","border-border"],[1,"w-full","text-sm","text-right"],[1,"bg-muted/50","font-medium","text-muted-foreground"],[1,"px-4","py-3"],[1,"px-4","py-3","text-left"],[1,"divide-y","divide-border","bg-card"],["class","hover:bg-muted/20 transition-colors",4,"ngFor","ngForOf"],[1,"md:hidden","space-y-4"],["class","card p-4 active:scale-[0.98] transition-transform cursor-pointer border border-border hover:border-primary/50",3,"click",4,"ngFor","ngForOf"],[1,"hover:bg-muted/20","transition-colors"],[1,"px-4","py-4","font-mono","text-foreground"],[1,"px-4","py-4","text-muted-foreground"],[1,"px-4","py-4","font-medium","text-foreground"],[1,"px-4","py-4"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"px-4","py-4","text-left"],[1,"btn","btn-ghost","btn-sm","gap-1","text-primary","hover:bg-primary/10",3,"click"],[1,"material-icons","text-sm"],[1,"card","p-4","active:scale-[0.98]","transition-transform","cursor-pointer","border","border-border","hover:border-primary/50",3,"click"],[1,"flex","justify-between","items-start","mb-3"],[1,"text-xs","text-muted-foreground","block","mb-1"],[1,"font-mono","font-bold","text-foreground"],[1,"inline-flex","items-center","px-2","py-1","rounded-md","text-xs","font-medium",3,"ngClass"],[1,"flex","justify-between","items-end","border-t","border-border","pt-3"],[1,"font-bold","text-primary"],[1,"btn","btn-icon","btn-ghost","btn-sm","rounded-full"],[1,"material-icons","text-muted-foreground"]],template:function(a,u){a&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),i(3,"\u062A\u0627\u0631\u06CC\u062E\u0686\u0647 \u0633\u0641\u0627\u0631\u0634\u0627\u062A"),e()(),t(4,"div",3),p(5,He,5,0,"div",4)(6,Ue,7,0,"div",5)(7,Ke,19,2,"div",6),e()()),a&2&&(d(5),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&(!u.orders||u.orders.length===0)),d(),l("ngIf",!u.isLoading&&u.orders&&u.orders.length>0))},dependencies:[F,me,D,w,pe,ce,we],encapsulation:2});let r=n;return r})();function Qe(r,n){r&1&&(t(0,"span",28),i(1,"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0632\u0627\u0645\u06CC \u0627\u0633\u062A."),e())}function We(r,n){if(r&1&&(t(0,"option",29),i(1),e()),r&2){let s=n.$implicit;l("value",s.name),d(),v(s.name)}}function Xe(r,n){if(r&1&&(t(0,"option",29),i(1),e()),r&2){let s=n.$implicit;l("value",s.name),d(),v(s.name)}}function Ye(r,n){r&1&&(t(0,"span",30),i(1,"sync"),e())}var ie=(()=>{let n=class n{constructor(o,a,u,f,_,De){this.fb=o,this.route=a,this.router=u,this.profileService=f,this.locationService=_,this.notificationService=De,this.isEditMode=!1,this.addressId=null,this.isSubmitting=!1,this.states=[],this.cities=[],this.citiesLoading=!1,this.addressForm=this.fb.group({title:["",[m.required,m.maxLength(100)]],receiverName:["",[m.required,m.maxLength(100)]],phoneNumber:["",[m.required,m.pattern(/^\+?\d{10,15}$/)]],postalCode:["",[m.required,m.pattern(/^\d{10}$/),m.minLength(10),m.maxLength(10)]],province:[null,m.required],city:[{value:null,disabled:!0},m.required],address:["",[m.required,m.maxLength(500)]],isDefault:[!1]})}ngOnInit(){this.loadStates();let o=this.route.snapshot.paramMap.get("id");o&&(this.addressId=+o,this.isEditMode=!0,this.loadAddressData())}loadStates(){this.locationService.getStates().subscribe(o=>this.states=o)}onProvinceChange(o){let u=o.target.value,f=this.states.find(_=>_.name===u);this.cities=[],this.addressForm.get("city")?.reset(),this.addressForm.get("city")?.disable(),f&&(this.citiesLoading=!0,this.addressForm.get("city")?.enable(),this.locationService.getCitiesByState(f.id).pipe(E(()=>this.citiesLoading=!1)).subscribe(_=>this.cities=_))}loadAddressData(){this.addressId&&this.profileService.getProfile().subscribe(o=>{let a=o.userAddresses?.find(u=>u.id===this.addressId);if(a){this.addressForm.patchValue(a);let u=this.states.find(f=>f.name===a.province);u&&(this.addressForm.get("city")?.enable(),this.locationService.getCitiesByState(u.id).subscribe(f=>{this.cities=f,this.addressForm.get("city")?.patchValue(a.city)}))}else this.notificationService.show("\u0622\u062F\u0631\u0633 \u0645\u0648\u0631\u062F \u0646\u0638\u0631 \u06CC\u0627\u0641\u062A \u0646\u0634\u062F","error"),this.router.navigate(["/dashboard/addresses"])})}onSubmit(){if(this.addressForm.invalid){this.addressForm.markAllAsTouched();return}this.isSubmitting=!0;let o=this.addressForm.getRawValue();(this.isEditMode&&this.addressId?this.profileService.updateAddress(this.addressId,C({id:this.addressId},o)):this.profileService.addAddress(o)).pipe(E(()=>this.isSubmitting=!1)).subscribe({next:()=>{this.notificationService.show(`\u0622\u062F\u0631\u0633 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A ${this.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u0641\u0632\u0648\u062F\u0647"} \u0634\u062F`,"success"),this.router.navigate(["/dashboard/addresses"])},error:u=>this.notificationService.show(u?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062B\u0628\u062A \u0622\u062F\u0631\u0633","error")})}};n.\u0275fac=function(a){return new(a||n)(c(Ce),c(fe),c(O),c(V),c(Ae),c(j))},n.\u0275cmp=A({type:n,selectors:[["app-address-form"]],decls:57,vars:11,consts:[[1,"flex","flex-col","h-full"],[1,"p-6","border-b","border-border","bg-muted/10","flex","items-center","justify-between"],[1,"text-xl","font-bold","text-foreground"],["routerLink","/dashboard/addresses",1,"btn","btn-ghost","btn-sm","text-muted-foreground"],[1,"material-icons","text-sm","me-1"],[1,"p-6","max-w-2xl","mx-auto","w-full","flex-1"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"space-y-2"],[1,"text-sm","font-medium","text-foreground"],["type","text","formControlName","title","placeholder","\u0645\u062B\u0627\u0644: \u0645\u0646\u0632\u0644\u060C \u0645\u062D\u0644 \u06A9\u0627\u0631",1,"input","w-full"],["class","text-xs text-destructive block",4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-6"],["type","text","formControlName","receiverName",1,"input","w-full"],["type","tel","formControlName","phoneNumber","placeholder","09xxxxxxxxx",1,"input","w-full","ltr-input"],["formControlName","province",1,"input","w-full",3,"change"],["disabled","",3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["formControlName","city",1,"input","w-full",3,"disabled"],[1,"grid","grid-cols-1","sm:grid-cols-3","gap-6"],[1,"sm:col-span-2","space-y-2"],["formControlName","address","rows","2",1,"input","w-full","min-h-[50px]"],["type","text","formControlName","postalCode","maxlength","10",1,"input","w-full","ltr-input"],[1,"flex","items-center","gap-2","py-2"],["type","checkbox","id","isDefault","formControlName","isDefault",1,"checkbox","rounded","border-input","text-primary","focus:ring-primary"],["for","isDefault",1,"text-sm","font-medium","text-foreground","cursor-pointer"],[1,"pt-6","border-t","border-border","flex","justify-end"],["type","submit",1,"btn","btn-primary","w-full","sm:w-auto","min-w-[140px]",3,"disabled"],["class","material-icons animate-spin me-2 text-sm",4,"ngIf"],[1,"text-xs","text-destructive","block"],[3,"value"],[1,"material-icons","animate-spin","me-2","text-sm"]],template:function(a,u){if(a&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),i(3),e(),t(4,"a",3)(5,"span",4),i(6,"arrow_forward"),e(),i(7," \u0628\u0627\u0632\u06AF\u0634\u062A "),e()(),t(8,"div",5)(9,"form",6),b("ngSubmit",function(){return u.onSubmit()}),t(10,"div",7)(11,"label",8),i(12,"\u0639\u0646\u0648\u0627\u0646 \u0622\u062F\u0631\u0633"),e(),x(13,"input",9),p(14,Qe,2,0,"span",10),e(),t(15,"div",11)(16,"div",7)(17,"label",8),i(18,"\u0646\u0627\u0645 \u06AF\u06CC\u0631\u0646\u062F\u0647"),e(),x(19,"input",12),e(),t(20,"div",7)(21,"label",8),i(22,"\u0634\u0645\u0627\u0631\u0647 \u062A\u0645\u0627\u0633"),e(),x(23,"input",13),e()(),t(24,"div",11)(25,"div",7)(26,"label",8),i(27,"\u0627\u0633\u062A\u0627\u0646"),e(),t(28,"select",14),b("change",function(_){return u.onProvinceChange(_)}),t(29,"option",15),i(30,"\u0627\u0646\u062A\u062E\u0627\u0628 \u0627\u0633\u062A\u0627\u0646"),e(),p(31,We,2,2,"option",16),e()(),t(32,"div",7)(33,"label",8),i(34,"\u0634\u0647\u0631"),e(),t(35,"select",17)(36,"option",15),i(37,"\u0627\u0646\u062A\u062E\u0627\u0628 \u0634\u0647\u0631"),e(),p(38,Xe,2,2,"option",16),e()()(),t(39,"div",18)(40,"div",19)(41,"label",8),i(42,"\u0622\u062F\u0631\u0633 \u067E\u0633\u062A\u06CC"),e(),x(43,"textarea",20),e(),t(44,"div",7)(45,"label",8),i(46,"\u06A9\u062F \u067E\u0633\u062A\u06CC"),e(),x(47,"input",21),e()(),t(48,"div",22),x(49,"input",23),t(50,"label",24),i(51,"\u0627\u06CC\u0646 \u0622\u062F\u0631\u0633 \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u067E\u06CC\u0634\u200C\u0641\u0631\u0636 \u062A\u0646\u0638\u06CC\u0645 \u0634\u0648\u062F"),e()(),t(52,"div",25)(53,"button",26),p(54,Ye,2,0,"span",27),t(55,"span"),i(56),e()()()()()()),a&2){let f,_;d(3),v(u.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634 \u0622\u062F\u0631\u0633":"\u0622\u062F\u0631\u0633 \u062C\u062F\u06CC\u062F"),d(6),l("formGroup",u.addressForm),d(5),l("ngIf",((f=u.addressForm.get("title"))==null?null:f.invalid)&&((f=u.addressForm.get("title"))==null?null:f.touched)),d(15),l("ngValue",null),d(2),l("ngForOf",u.states),d(4),l("disabled",u.citiesLoading||!((_=u.addressForm.get("province"))!=null&&_.value)),d(),l("ngValue",null),d(2),l("ngForOf",u.cities),d(15),l("disabled",u.addressForm.invalid||u.isSubmitting),d(),l("ngIf",u.isSubmitting),d(2),v(u.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u0630\u062E\u06CC\u0631\u0647...":"\u062B\u0628\u062A \u0622\u062F\u0631\u0633")}},dependencies:[F,D,w,Q,z,ye,Se,G,he,be,H,U,_e,J,K,M,T],encapsulation:2});let r=n;return r})();var Ze=r=>["/dashboard/addresses/edit",r];function et(r,n){r&1&&(t(0,"div",9)(1,"span",10),i(2,"sync"),e()())}function tt(r,n){r&1&&(t(0,"div",11)(1,"span",12),i(2,"location_off"),e(),t(3,"p",13),i(4,"\u0647\u0646\u0648\u0632 \u0622\u062F\u0631\u0633\u06CC \u062B\u0628\u062A \u0646\u06A9\u0631\u062F\u0647\u200C\u0627\u06CC\u062F"),e(),t(5,"a",14),i(6,"\u062B\u0628\u062A \u0627\u0648\u0644\u06CC\u0646 \u0622\u062F\u0631\u0633"),e()())}function it(r,n){r&1&&(t(0,"span",29),i(1,"\u067E\u06CC\u0634\u200C\u0641\u0631\u0636"),e())}function rt(r,n){if(r&1){let s=P();t(0,"div",17)(1,"div")(2,"div",18)(3,"h3",19)(4,"span",20),i(5,"place"),e(),i(6),e(),p(7,it,2,0,"span",21),e(),t(8,"p",22),i(9),e(),t(10,"div",23)(11,"span",24)(12,"span",25),i(13,"person"),e(),i(14),e(),t(15,"span",24)(16,"span",25),i(17,"phone"),e(),i(18),e(),t(19,"span",24)(20,"span",25),i(21,"markunread_mailbox"),e(),i(22),e()()(),t(23,"div",26)(24,"a",27)(25,"span",4),i(26,"edit"),e(),i(27," \u0648\u06CC\u0631\u0627\u06CC\u0634 "),e(),t(28,"button",28),b("click",function(){let a=k(s).$implicit,u=g(2);return L(u.deleteAddress(a.id))}),t(29,"span",4),i(30,"delete"),e(),i(31," \u062D\u0630\u0641 "),e()()()}if(r&2){let s=n.$implicit;d(6),h(" ",s.title," "),d(),l("ngIf",s.isDefault),d(2),ue(" ",s.province,"\u060C ",s.city,"\u060C ",s.address," "),d(5),h(" ",s.receiverName," "),d(4),h(" ",s.phoneNumber," "),d(4),h(" ",s.postalCode," "),d(2),l("routerLink",le(9,Ze,s.id))}}function nt(r,n){if(r&1&&(t(0,"div",15),p(1,rt,32,11,"div",16),e()),r&2){let s=g();d(),l("ngForOf",s.addresses)}}var Le=(()=>{let n=class n{constructor(o,a){this.profileService=o,this.notificationService=a,this.addresses=[],this.isLoading=!0}ngOnInit(){this.loadAddresses()}loadAddresses(){this.isLoading=!0,this.profileService.getProfile().pipe(E(()=>this.isLoading=!1)).subscribe({next:o=>{this.addresses=o.userAddresses||[]},error:()=>this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0622\u062F\u0631\u0633\u200C\u0647\u0627","error")})}deleteAddress(o){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0622\u062F\u0631\u0633 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F")&&this.profileService.deleteAddress(o).subscribe({next:()=>{this.notificationService.show("\u0622\u062F\u0631\u0633 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadAddresses()},error:a=>this.notificationService.show(a?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u0622\u062F\u0631\u0633","error")})}};n.\u0275fac=function(a){return new(a||n)(c(V),c(j))},n.\u0275cmp=A({type:n,selectors:[["app-user-addresses"]],decls:12,vars:3,consts:[[1,"flex","flex-col","h-full"],[1,"p-6","border-b","border-border","bg-muted/10","flex","items-center","justify-between"],[1,"text-xl","font-bold","text-foreground"],["routerLink","/dashboard/addresses/new",1,"btn","btn-primary","btn-sm"],[1,"material-icons","text-sm","me-1"],[1,"p-6","flex-1"],["class","flex justify-center py-12",4,"ngIf"],["class","flex flex-col items-center justify-center h-64 text-center border-2 border-dashed border-border rounded-xl bg-muted/20",4,"ngIf"],["class","grid grid-cols-1 lg:grid-cols-2 gap-6",4,"ngIf"],[1,"flex","justify-center","py-12"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"flex","flex-col","items-center","justify-center","h-64","text-center","border-2","border-dashed","border-border","rounded-xl","bg-muted/20"],[1,"material-icons","text-5xl","text-muted-foreground/40","mb-4"],[1,"text-lg","font-medium","text-foreground"],["routerLink","/dashboard/addresses/new",1,"btn","btn-link","mt-2"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],["class","card p-5 border border-border hover:border-primary/50 transition-all flex flex-col justify-between group",4,"ngFor","ngForOf"],[1,"card","p-5","border","border-border","hover:border-primary/50","transition-all","flex","flex-col","justify-between","group"],[1,"flex","items-center","justify-between","mb-3"],[1,"font-bold","text-foreground","flex","items-center","gap-2"],[1,"material-icons","text-primary"],["class","bg-primary/10 text-primary text-[10px] font-bold px-2 py-1 rounded-full",4,"ngIf"],[1,"text-sm","text-muted-foreground","leading-relaxed","mb-4"],[1,"flex","flex-wrap","gap-4","text-xs","text-muted-foreground/80"],[1,"flex","items-center","gap-1"],[1,"material-icons","text-[14px]"],[1,"border-t","border-border","mt-4","pt-3","flex","justify-end","gap-2","opacity-100","lg:opacity-0","lg:group-hover:opacity-100","transition-opacity"],[1,"btn","btn-ghost","btn-sm","text-muted-foreground","hover:text-primary",3,"routerLink"],[1,"btn","btn-ghost","btn-sm","text-muted-foreground","hover:text-destructive",3,"click"],[1,"bg-primary/10","text-primary","text-[10px]","font-bold","px-2","py-1","rounded-full"]],template:function(a,u){a&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),i(3,"\u0622\u062F\u0631\u0633\u200C\u0647\u0627\u06CC \u0645\u0646"),e(),t(4,"a",3)(5,"span",4),i(6,"add"),e(),i(7," \u0627\u0641\u0632\u0648\u062F\u0646 \u0622\u062F\u0631\u0633 "),e()(),t(8,"div",5),p(9,et,3,0,"div",6)(10,tt,7,0,"div",7)(11,nt,2,1,"div",8),e()()),a&2&&(d(9),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&(!u.addresses||u.addresses.length===0)),d(),l("ngIf",!u.isLoading&&u.addresses.length>0))},dependencies:[F,D,w,M,T],encapsulation:2});let r=n;return r})();var Mt=[{path:"",component:Fe,canActivate:[ve],children:[{path:"",redirectTo:"profile",pathMatch:"full"},{path:"profile",component:Ne},{path:"order-history",component:ke},{path:"order/:id",loadComponent:()=>import("./chunk-V2LAATW2.js").then(r=>r.OrderDetailPage)},{path:"addresses",component:Le},{path:"addresses/new",component:ie},{path:"addresses/edit/:id",component:ie}]}];export{Mt as DASHBOARD_ROUTES};
