import{a as De}from"./chunk-2RJJCBAD.js";import{a as yt}from"./chunk-TFIYW2AD.js";import{a as Ge}from"./chunk-XG2WEO2O.js";import{b as je}from"./chunk-LOBVYC2S.js";import{a as Ve}from"./chunk-36FTJBLJ.js";import{a as Ee}from"./chunk-GUVQHNME.js";import"./chunk-MUABL725.js";import{A as ye,B as be,C as J,a as xe,b as B,c as F,d as T,e as q,f as me,g as P,h as ve,i as z,j as te,m as H,n as Ue,o as $e,p as W,q as ie,r as ne,s as re,t as _t,u as Ie,x as ke,z as At}from"./chunk-YV4WRMWB.js";import"./chunk-M33O2ZB5.js";import{a as I}from"./chunk-ENYYQIQK.js";import{a as j}from"./chunk-5KULSLMJ.js";import{A as St,F as D,b as se,c as k,d as _,f as ce,h as Z,i as A,m as Q,p as G,w as ee,x as Ct,y as pe,z as N}from"./chunk-Z34MJED6.js";import{Ab as n,Bb as h,Ca as d,Cb as v,Db as Se,Eb as ft,F as V,Fb as fe,Gb as ge,Ha as Qe,Hb as he,Jb as gt,Kb as Y,Lb as ht,M as dt,Mb as xt,Na as f,Nb as w,Ob as M,Pb as ae,Qb as vt,S as U,Sa as y,Va as mt,W as $,Xa as c,Yb as bt,aa as C,ba as S,f as at,gb as l,hb as e,ib as t,j as _e,jb as b,n as st,na as lt,nb as ct,ob as pt,pb as E,sb as x,t as Pe,tb as p,xb as Te,yb as Oe,z as Ae,za as le,zb as ue}from"./chunk-MQVQRUTD.js";import{a as Ne,b as ut}from"./chunk-4CLCTAJ7.js";var wt=o=>({exact:o});function ri(o,a){if(o&1&&(e(0,"a",22)(1,"span",23),n(2),t(),n(3),t()),o&2){let s=a.$implicit;l("routerLink",s.link)("routerLinkActiveOptions",Y(4,wt,s.exact)),d(2),h(s.icon),d(),v(" ",s.title," ")}}function oi(o,a){if(o&1){let s=E();e(0,"div",24),x("click",function(){C(s);let r=p();return S(r.isMobileMenuOpen=!1)}),t()}}function ui(o,a){if(o&1){let s=E();e(0,"a",31),x("click",function(){C(s);let r=p(2);return S(r.isMobileMenuOpen=!1)}),e(1,"span",32),n(2),t(),n(3),t()}if(o&2){let s=a.$implicit;l("routerLink",s.link)("routerLinkActiveOptions",Y(4,wt,s.exact)),d(2),h(s.icon),d(),v(" ",s.title," ")}}function ai(o,a){if(o&1){let s=E();e(0,"div",25)(1,"div",26)(2,"span",27),n(3,"\u0645\u0646\u0648\u06CC \u0645\u062F\u06CC\u0631\u06CC\u062A"),t(),e(4,"button",28),x("click",function(){C(s);let r=p();return S(r.isMobileMenuOpen=!1)}),e(5,"span",17),n(6,"close"),t()()(),e(7,"div",29)(8,"nav",6),c(9,ui,4,6,"a",30),t()()()}if(o&2){let s=p();d(9),l("ngForOf",s.menuItems)}}var Ft=(()=>{let a=class a{constructor(){this.isMobileMenuOpen=!1,this.menuItems=[{title:"\u062F\u0627\u0634\u0628\u0648\u0631\u062F",link:"/admin/dashboard",icon:"dashboard",exact:!0},{title:"\u0645\u062D\u0635\u0648\u0644\u0627\u062A",link:"/admin/products",icon:"inventory_2",exact:!1},{title:"\u0648\u06CC\u0698\u06AF\u06CC\u200C\u0647\u0627\u06CC \u0645\u062D\u0635\u0648\u0644",link:"/admin/attributes",icon:"tune",exact:!1},{title:"\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627",link:"/admin/categories",icon:"category",exact:!1},{title:"\u06AF\u0631\u0648\u0647\u200C\u0647\u0627\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC",link:"/admin/category-groups",icon:"folder",exact:!1},{title:"\u0633\u0641\u0627\u0631\u0634\u0627\u062A",link:"/admin/orders",icon:"receipt_long",exact:!1},{title:"\u062A\u0631\u0627\u06A9\u0646\u0634\u200C\u0647\u0627\u06CC \u0627\u0646\u0628\u0627\u0631",link:"/admin/inventory/transactions",icon:"history",exact:!1},{title:"\u06A9\u062F\u0647\u0627\u06CC \u062A\u062E\u0641\u06CC\u0641",link:"/admin/discounts",icon:"percent",exact:!1},{title:"\u0646\u0638\u0631\u0627\u062A \u06A9\u0627\u0631\u0628\u0631\u0627\u0646",link:"/admin/reviews",icon:"reviews",exact:!1},{title:"\u06A9\u0627\u0631\u0628\u0631\u0627\u0646",link:"/admin/users",icon:"group",exact:!1},{title:"\u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627\u06CC \u0633\u0641\u0627\u0631\u0634",link:"/admin/order-statuses",icon:"fact_check",exact:!1},{title:"\u0631\u0648\u0634\u200C\u0647\u0627\u06CC \u0627\u0631\u0633\u0627\u0644",link:"/admin/shipping-methods",icon:"local_shipping",exact:!1},{title:"\u06AF\u0632\u0627\u0631\u0634\u0627\u062A \u0633\u06CC\u0633\u062A\u0645\u06CC",link:"/admin/audit-logs",icon:"policy",exact:!1}]}};a.\u0275fac=function(r){return new(r||a)},a.\u0275cmp=y({type:a,selectors:[["app-admin-layout"]],decls:32,vars:3,consts:[[1,"grid","min-h-screen","w-full","lg:grid-cols-[280px_1fr]","bg-muted/30"],[1,"hidden","border-l","border-border","bg-card","lg:block","sticky","top-0","h-screen","overflow-y-auto"],[1,"flex","h-16","items-center","border-b","border-border","px-6"],["routerLink","/",1,"flex","items-center","gap-2","font-bold","text-lg","text-foreground","transition-colors","hover:text-primary"],[1,"material-icons","text-primary"],[1,"flex-1","py-6"],[1,"grid","items-start","px-4","text-sm","font-medium","gap-1"],["routerLinkActive","bg-primary/10 text-primary font-semibold shadow-sm ring-1 ring-primary/20","class","flex items-center gap-3 rounded-md px-3 py-2.5 text-muted-foreground transition-all hover:bg-accent hover:text-accent-foreground group",3,"routerLink","routerLinkActiveOptions",4,"ngFor","ngForOf"],[1,"border-t","border-border","p-4"],[1,"flex","items-center","gap-3","rounded-lg","bg-muted/50","p-3"],[1,"h-8","w-8","rounded-full","bg-primary/20","flex","items-center","justify-center"],[1,"material-icons","text-sm","text-primary"],[1,"flex","flex-col"],[1,"text-xs","font-bold","text-foreground"],[1,"text-[10px]","text-muted-foreground"],[1,"sticky","top-0","z-30","flex","h-16","items-center","gap-4","border-b","border-border","bg-background/95","px-6","shadow-sm","backdrop-blur","lg:hidden"],[1,"btn","btn-ghost","btn-icon","-mr-2",3,"click"],[1,"material-icons"],[1,"flex-1","font-bold","text-lg"],[1,"flex-1","p-4","sm:p-6","md:p-8","max-w-[1600px]","w-full","mx-auto","animate-fade-in"],["class","fixed inset-0 z-40 bg-black/60 backdrop-blur-sm lg:hidden transition-opacity",3,"click",4,"ngIf"],["class","fixed inset-y-0 right-0 z-50 flex w-3/4 max-w-xs flex-col bg-card shadow-2xl transition-transform duration-300 lg:hidden",4,"ngIf"],["routerLinkActive","bg-primary/10 text-primary font-semibold shadow-sm ring-1 ring-primary/20",1,"flex","items-center","gap-3","rounded-md","px-3","py-2.5","text-muted-foreground","transition-all","hover:bg-accent","hover:text-accent-foreground","group",3,"routerLink","routerLinkActiveOptions"],[1,"material-icons-outlined","text-[20px]","w-6","text-center","group-hover:scale-110","transition-transform"],[1,"fixed","inset-0","z-40","bg-black/60","backdrop-blur-sm","lg:hidden","transition-opacity",3,"click"],[1,"fixed","inset-y-0","right-0","z-50","flex","w-3/4","max-w-xs","flex-col","bg-card","shadow-2xl","transition-transform","duration-300","lg:hidden"],[1,"flex","h-16","items-center","justify-between","border-b","border-border","px-6","bg-muted/30"],[1,"font-bold","text-lg"],[1,"btn","btn-ghost","btn-icon","-ml-2",3,"click"],[1,"flex-1","overflow-y-auto","py-4"],["routerLinkActive","bg-primary/10 text-primary font-semibold","class","flex items-center gap-3 rounded-md px-3 py-3 text-muted-foreground transition-colors hover:bg-accent hover:text-foreground",3,"routerLink","routerLinkActiveOptions","click",4,"ngFor","ngForOf"],["routerLinkActive","bg-primary/10 text-primary font-semibold",1,"flex","items-center","gap-3","rounded-md","px-3","py-3","text-muted-foreground","transition-colors","hover:bg-accent","hover:text-foreground",3,"click","routerLink","routerLinkActiveOptions"],[1,"material-icons-outlined","text-[20px]","w-6","text-center"]],template:function(r,u){r&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3)(4,"span",4),n(5,"storefront"),t(),e(6,"span"),n(7,"\u067E\u0646\u0644 \u0645\u062F\u06CC\u0631\u06CC\u062A"),t()()(),e(8,"div",5)(9,"nav",6),c(10,ri,4,6,"a",7),t()(),e(11,"div",8)(12,"div",9)(13,"div",10)(14,"span",11),n(15,"person"),t()(),e(16,"div",12)(17,"span",13),n(18,"\u0645\u062F\u06CC\u0631 \u0633\u06CC\u0633\u062A\u0645"),t(),e(19,"span",14),n(20,"admin@ledka.ir"),t()()()()(),e(21,"div",12)(22,"header",15)(23,"button",16),x("click",function(){return u.isMobileMenuOpen=!u.isMobileMenuOpen}),e(24,"span",17),n(25,"menu"),t()(),e(26,"div",18),n(27,"\u067E\u0646\u0644 \u0645\u062F\u06CC\u0631\u06CC\u062A"),t()(),e(28,"main",19),b(29,"router-outlet"),t()()(),c(30,oi,1,0,"div",20)(31,ai,10,1,"div",21)),r&2&&(d(10),l("ngForOf",u.menuItems),d(20),l("ngIf",u.isMobileMenuOpen),d(),l("ngIf",u.isMobileMenuOpen))},dependencies:[A,k,_,D,Ct,N,St],encapsulation:2});let o=a;return o})();var Et=(()=>{let a=class a{constructor(i){this.http=i,this.apiUrl=`${j.API_URL}admin/analytics`}getDashboardStatistics(i,r){let u=new Q;return i&&(u=u.set("fromDate",i.toISOString())),r&&(u=u.set("toDate",r.toISOString())),this.http.get(`${this.apiUrl}/dashboard`,{params:u})}getSalesChartData(i,r,u="day"){let m=new Q().set("fromDate",i.toISOString()).set("toDate",r.toISOString()).set("groupBy",u);return this.http.get(`${this.apiUrl}/sales-chart`,{params:m})}getTopSellingProducts(i=10,r,u){let m=new Q().set("count",i.toString());return r&&(m=m.set("fromDate",r.toISOString())),u&&(m=m.set("toDate",u.toISOString())),this.http.get(`${this.apiUrl}/top-products`,{params:m})}getCategoryPerformance(i,r){let u=new Q;return i&&(u=u.set("fromDate",i.toISOString())),r&&(u=u.set("toDate",r.toISOString())),this.http.get(`${this.apiUrl}/category-performance`,{params:u})}};a.\u0275fac=function(r){return new(r||a)($(G))},a.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();function di(o,a){o&1&&(e(0,"div",14)(1,"span",15),n(2,"sync"),t()())}function li(o,a){if(o&1&&(e(0,"p",27),n(1),t()),o&2){let s=p(2);d(),v("+",s.stats.users.newUsers," \u06A9\u0627\u0631\u0628\u0631 \u062C\u062F\u06CC\u062F")}}function mi(o,a){if(o&1&&(e(0,"div",16)(1,"div",17)(2,"p",18),n(3,"\u062F\u0631\u0622\u0645\u062F \u06A9\u0644"),t(),e(4,"div",19)(5,"p",20),n(6),w(7,"number"),e(8,"span",21),n(9,"\u062A\u0648\u0645\u0627\u0646"),t()()()(),e(10,"div",22)(11,"p",18),n(12,"\u0633\u0648\u062F \u062E\u0627\u0644\u0635"),t(),e(13,"div",19)(14,"p",20),n(15),w(16,"number"),e(17,"span",21),n(18,"\u062A\u0648\u0645\u0627\u0646"),t()()()(),e(19,"div",23)(20,"p",18),n(21,"\u062A\u0639\u062F\u0627\u062F \u0633\u0641\u0627\u0631\u0634\u0627\u062A"),t(),e(22,"div",19)(23,"p",20),n(24),w(25,"number"),t(),e(26,"p",24),n(27),w(28,"number"),t()()(),e(29,"div",25)(30,"p",18),n(31,"\u06A9\u0627\u0631\u0628\u0631\u0627\u0646"),t(),e(32,"div",19)(33,"p",20),n(34),w(35,"number"),t(),c(36,li,2,1,"p",26),t()()()),o&2){let s=p();d(6),v("",M(7,6,s.stats.orders.totalRevenue)," "),d(9),v("",M(16,8,s.stats.orders.totalProfit)," "),d(9),h(M(25,10,s.stats.orders.totalOrders)),d(3),v("\u0645\u06CC\u0627\u0646\u06AF\u06CC\u0646: ",M(28,12,s.stats.orders.averageOrderValue)),d(7),h(M(35,14,s.stats.users.totalUsers)),d(2),l("ngIf",s.stats.users.newUsers)}}function ci(o,a){if(o&1&&(e(0,"div",39)(1,"div",40),n(2),w(3,"number"),t()()),o&2){let s=a.$implicit,i=p(2);Oe("height",s.revenue/i.maxRevenue*100,"%"),d(2),Se(" ",s.period,": ",M(3,4,s.revenue)," ")}}function pi(o,a){if(o&1&&(e(0,"tr",41)(1,"td",42),n(2),t(),e(3,"td",43),n(4),t(),e(5,"td",43),n(6),w(7,"number"),t()()),o&2){let s=a.$implicit;d(),l("title",s.productName),d(),v(" ",s.productName," "),d(2),h(s.totalQuantity),d(2),h(M(7,4,s.totalRevenue))}}function fi(o,a){if(o&1&&(e(0,"div",28)(1,"div",29)(2,"h3",30),n(3,"\u0631\u0648\u0646\u062F \u0641\u0631\u0648\u0634"),t(),e(4,"div",31),c(5,ci,4,6,"div",32),t(),e(6,"div",33)(7,"span"),n(8),t(),e(9,"span"),n(10),t()()(),e(11,"div",29)(12,"h3",30),n(13,"\u0645\u062D\u0635\u0648\u0644\u0627\u062A \u067E\u0631\u0641\u0631\u0648\u0634"),t(),e(14,"div",34)(15,"table",35)(16,"thead")(17,"tr",36)(18,"th",37),n(19,"\u0645\u062D\u0635\u0648\u0644"),t(),e(20,"th",37),n(21,"\u062A\u0639\u062F\u0627\u062F"),t(),e(22,"th",37),n(23,"\u062F\u0631\u0622\u0645\u062F"),t()()(),e(24,"tbody"),c(25,pi,8,6,"tr",38),t()()()()()),o&2){let s=p();d(5),l("ngForOf",s.salesData),d(3),h(s.salesData[0]==null?null:s.salesData[0].period),d(2),h(s.salesData[s.salesData.length-1]==null?null:s.salesData[s.salesData.length-1].period),d(15),l("ngForOf",s.topProducts)}}function gi(o,a){if(o&1&&(e(0,"div",46)(1,"div",47)(2,"span",48),n(3),t(),e(4,"span",49),n(5),t()(),e(6,"div",50),n(7),w(8,"number"),e(9,"span",51),n(10,"\u062A\u0648\u0645\u0627\u0646"),t()(),e(11,"p",24),n(12),t()()),o&2){let s=a.$implicit;d(3),h(s.categoryName),d(2),v("",s.orderCount," \u0633\u0641\u0627\u0631\u0634"),d(2),v("",M(8,4,s.totalRevenue)," "),d(5),v("",s.totalQuantity," \u0639\u062F\u062F \u0641\u0631\u0648\u062E\u062A\u0647 \u0634\u062F\u0647")}}function hi(o,a){if(o&1&&(e(0,"div",29)(1,"h3",30),n(2,"\u0639\u0645\u0644\u06A9\u0631\u062F \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627"),t(),e(3,"div",44),c(4,gi,13,6,"div",45),t()()),o&2){let s=p();d(4),l("ngForOf",s.categoryPerformance)}}var It=(()=>{let a=class a{constructor(i){this.analyticsService=i,this.stats=null,this.salesData=[],this.topProducts=[],this.categoryPerformance=[],this.isLoading=!1,this.dateRange="month",this.maxRevenue=0}ngOnInit(){this.loadData()}loadData(){this.isLoading=!0;let{from:i,to:r}=this.getDateRange();Pe({stats:this.analyticsService.getDashboardStatistics(i,r).pipe(Ae(()=>_e(null))),sales:this.analyticsService.getSalesChartData(i,r,this.dateRange==="year"?"month":"day").pipe(Ae(()=>_e([]))),top:this.analyticsService.getTopSellingProducts(10,i,r).pipe(Ae(()=>_e([]))),cat:this.analyticsService.getCategoryPerformance(i,r).pipe(Ae(()=>_e([])))}).pipe(V(()=>this.isLoading=!1)).subscribe({next:u=>{this.stats=u.stats,this.salesData=u.sales||[],this.topProducts=u.top||[],this.categoryPerformance=u.cat||[],this.salesData.length>0?this.maxRevenue=Math.max(...this.salesData.map(m=>m.revenue),1):this.maxRevenue=0}})}getDateRange(){let i=new Date,r=new Date;return this.dateRange==="week"&&r.setDate(i.getDate()-7),this.dateRange==="month"&&r.setDate(i.getDate()-30),this.dateRange==="year"&&r.setFullYear(i.getFullYear()-1),{from:r,to:i}}};a.\u0275fac=function(r){return new(r||a)(f(Et))},a.\u0275cmp=y({type:a,selectors:[["app-admin-dashboard"]],decls:20,vars:5,consts:[[1,"space-y-8"],[1,"flex","items-center","justify-between"],[1,"text-3xl","font-bold","tracking-tight","text-foreground"],[1,"flex","items-center","gap-2"],[1,"input-sm","border","border-input","rounded-md",3,"ngModelChange","change","ngModel"],["value","week"],["value","month"],["value","year"],[1,"btn","btn-outline","btn-sm","gap-2","bg-background",3,"click"],[1,"material-icons","text-sm"],["class","flex justify-center py-10",4,"ngIf"],["class","grid gap-6 md:grid-cols-2 lg:grid-cols-4",4,"ngIf"],["class","grid gap-6 md:grid-cols-2",4,"ngIf"],["class","card p-6",4,"ngIf"],[1,"flex","justify-center","py-10"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"grid","gap-6","md:grid-cols-2","lg:grid-cols-4"],[1,"card","p-6","flex","flex-col","justify-between","border-l-4","border-l-primary","hover:shadow-md","transition-shadow"],[1,"text-sm","font-medium","text-muted-foreground"],[1,"mt-2"],[1,"text-2xl","font-bold"],[1,"text-xs","text-muted-foreground"],[1,"card","p-6","flex","flex-col","justify-between","border-l-4","border-l-success","hover:shadow-md","transition-shadow"],[1,"card","p-6","flex","flex-col","justify-between","border-l-4","border-l-secondary","hover:shadow-md","transition-shadow"],[1,"text-xs","text-muted-foreground","mt-1"],[1,"card","p-6","flex","flex-col","justify-between","border-l-4","border-l-warning","hover:shadow-md","transition-shadow"],["class","text-xs text-success mt-1",4,"ngIf"],[1,"text-xs","text-success","mt-1"],[1,"grid","gap-6","md:grid-cols-2"],[1,"card","p-6"],[1,"font-semibold","text-lg","mb-4"],[1,"h-64","flex","items-end","gap-2","border-b","border-l","border-border","p-2","relative"],["class","flex-1 bg-primary/20 hover:bg-primary/40 transition-colors rounded-t relative group",3,"height",4,"ngFor","ngForOf"],[1,"flex","justify-between","text-xs","text-muted-foreground","mt-2","px-2"],[1,"overflow-auto","max-h-64"],[1,"w-full","text-sm"],[1,"text-right","text-muted-foreground","border-b","border-border"],[1,"pb-2"],["class","border-b border-border/50 hover:bg-muted/20",4,"ngFor","ngForOf"],[1,"flex-1","bg-primary/20","hover:bg-primary/40","transition-colors","rounded-t","relative","group"],[1,"absolute","bottom-full","left-1/2","-translate-x-1/2","mb-1","bg-popover","text-popover-foreground","text-[10px]","px-2","py-1","rounded","shadow","opacity-0","group-hover:opacity-100","whitespace-nowrap","z-10"],[1,"border-b","border-border/50","hover:bg-muted/20"],[1,"py-2","truncate","max-w-[150px]",3,"title"],[1,"py-2"],[1,"grid","gap-4","sm:grid-cols-2","lg:grid-cols-3"],["class","p-4 rounded-lg bg-muted/30 border border-border",4,"ngFor","ngForOf"],[1,"p-4","rounded-lg","bg-muted/30","border","border-border"],[1,"flex","justify-between","items-start","mb-2"],[1,"font-medium"],[1,"text-xs","bg-secondary/20","px-2","py-0.5","rounded","text-secondary-foreground"],[1,"text-2xl","font-bold","text-primary"],[1,"text-xs","text-muted-foreground","font-normal"]],template:function(r,u){r&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),n(3,"\u062F\u0627\u0634\u0628\u0648\u0631\u062F \u062A\u062D\u0644\u06CC\u0644\u06CC"),t(),e(4,"div",3)(5,"select",4),he("ngModelChange",function(g){return ge(u.dateRange,g)||(u.dateRange=g),g}),x("change",function(){return u.loadData()}),e(6,"option",5),n(7,"\u06F7 \u0631\u0648\u0632 \u06AF\u0630\u0634\u062A\u0647"),t(),e(8,"option",6),n(9,"\u06F3\u06F0 \u0631\u0648\u0632 \u06AF\u0630\u0634\u062A\u0647"),t(),e(10,"option",7),n(11,"\u06CC\u06A9 \u0633\u0627\u0644 \u06AF\u0630\u0634\u062A\u0647"),t()(),e(12,"button",8),x("click",function(){return u.loadData()}),e(13,"span",9),n(14,"refresh"),t(),n(15," \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC "),t()()(),c(16,di,3,0,"div",10)(17,mi,37,16,"div",11)(18,fi,26,4,"div",12)(19,hi,5,1,"div",13),t()),r&2&&(d(5),fe("ngModel",u.dateRange),d(11),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.stats),d(),l("ngIf",!u.isLoading),d(),l("ngIf",!u.isLoading))},dependencies:[A,k,_,be,ne,re,ie,T,ve,Z],encapsulation:2});let o=a;return o})();var Re=(()=>{let a=class a{constructor(i){this.http=i,this.categoriesUrl=`${j.API_URL}admin/categories`}getCategoryById(i){return this.http.get(`${this.categoriesUrl}/${i}?page=1&pageSize=10`)}createCategory(i){return this.http.post(this.categoriesUrl,i)}updateCategory(i,r){return this.http.put(`${this.categoriesUrl}/${i}`,r)}deleteCategory(i){return this.http.delete(`${this.categoriesUrl}/${i}`)}};a.\u0275fac=function(r){return new(r||a)($(G))},a.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();function xi(o,a){o&1&&(e(0,"div",21),n(1," \u0646\u0627\u0645 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0627\u0644\u0632\u0627\u0645\u06CC \u0627\u0633\u062A. "),t())}function vi(o,a){if(o&1){let s=E();e(0,"div",22),b(1,"img",23),e(2,"div",24)(3,"button",25),x("click",function(){C(s);let r=p();return r.iconPreview=null,S(r.selectedFile=null)}),e(4,"span",4),n(5,"close"),t()()()()}if(o&2){let s=p();d(),l("src",s.iconPreview,le)}}function bi(o,a){o&1&&(e(0,"span",26),n(1,"sync"),t())}var Ye=(()=>{let a=class a{constructor(i,r,u,m,g){this.route=i,this.router=r,this.notificationService=u,this.adminCategoryService=m,this.mediaService=g,this.isEditMode=!1,this.categoryId=null,this.isSubmitting=!1,this.iconPreview=null,this.rowVersion=null,this.selectedFile=null,this.categoryForm=new me({Name:new P("",[F.required,F.maxLength(100)]),RowVersion:new P(null)})}ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i&&(this.categoryId=Number(i),this.isEditMode=!0,this.loadCategoryData())}loadCategoryData(){this.categoryId&&this.adminCategoryService.getCategoryById(this.categoryId).subscribe({next:i=>{this.categoryForm.patchValue({Name:i.name,RowVersion:i.rowVersion}),this.iconPreview=i.iconUrl||null},error:i=>this.notificationService.show(i?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC","error")})}onFileChange(i){let r=i.target;if(r.files&&r.files.length>0){this.selectedFile=r.files[0];let u=new FileReader;u.onload=m=>this.iconPreview=m.target.result,u.readAsDataURL(this.selectedFile)}}onSubmit(){if(this.categoryForm.invalid||this.isSubmitting)return;this.isSubmitting=!0;let i=new FormData;if(i.append("Name",this.categoryForm.get("Name")?.value),this.selectedFile&&i.append("IconFile",this.selectedFile),this.isEditMode&&this.categoryId){let u=this.categoryForm.get("RowVersion")?.value;u&&i.append("RowVersion",u)}(this.isEditMode&&this.categoryId?this.adminCategoryService.updateCategory(this.categoryId,i):this.adminCategoryService.createCategory(i)).pipe(V(()=>this.isSubmitting=!1)).subscribe({next:u=>{let m=`\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A ${this.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"} \u0634\u062F`;this.notificationService.show(m,"success"),this.router.navigate(["/admin/categories"])},error:u=>{u.status===409?(this.notificationService.show("\u0627\u06CC\u0646 \u0631\u06A9\u0648\u0631\u062F \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627 \u0635\u0641\u062D\u0647 \u0631\u0627 \u0631\u0641\u0631\u0634 \u06A9\u0646\u06CC\u062F.","error"),this.loadCategoryData()):this.notificationService.show(u?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062B\u0628\u062A \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A","error")}})}getIconUrl(){return this.iconPreview?this.mediaService.getMediaUrl(this.iconPreview):""}};a.\u0275fac=function(r){return new(r||a)(f(ee),f(pe),f(I),f(Re),f(Ee))},a.\u0275cmp=y({type:a,selectors:[["app-admin-category-form"]],decls:32,vars:9,consts:[[1,"max-w-xl","mx-auto"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-foreground","tracking-tight"],["routerLink","/admin/categories",1,"btn","btn-outline","btn-sm","gap-2"],[1,"material-icons","text-sm"],[1,"card","p-6","space-y-6","bg-card",3,"ngSubmit","formGroup"],[1,"space-y-2"],["for","name",1,"text-sm","font-medium","text-foreground"],[1,"text-destructive"],["type","text","id","name","formControlName","Name","placeholder","\u0645\u062B\u0627\u0644: \u06A9\u0627\u0644\u0627\u06CC \u062F\u06CC\u062C\u06CC\u062A\u0627\u0644","maxlength","100",1,"input","w-full"],["class","text-xs text-destructive",4,"ngIf"],[1,"text-sm","font-medium","text-foreground","block"],[1,"flex","items-start","gap-4"],[1,"flex-1","h-32","border-2","border-dashed","border-border","rounded-lg","cursor-pointer","hover:bg-muted/50","transition-colors","flex","flex-col","items-center","justify-center"],[1,"material-icons","text-muted-foreground","text-3xl","mb-2"],[1,"text-xs","text-muted-foreground"],["type","file","id","iconFile","accept","image/*",1,"hidden",3,"change"],["class","w-32 h-32 border border-border rounded-lg overflow-hidden bg-background relative group flex-shrink-0",4,"ngIf"],[1,"pt-6","border-t","border-border","flex","justify-end"],["type","submit",1,"btn","btn-primary","btn-lg","min-w-[140px]",3,"disabled"],["class","material-icons animate-spin me-2",4,"ngIf"],[1,"text-xs","text-destructive"],[1,"w-32","h-32","border","border-border","rounded-lg","overflow-hidden","bg-background","relative","group","flex-shrink-0"],["alt","Icon Preview",1,"w-full","h-full","object-contain","p-2",3,"src"],[1,"absolute","inset-0","bg-black/40","opacity-0","group-hover:opacity-100","transition-opacity","flex","items-center","justify-center"],["type","button",1,"btn","btn-icon","btn-destructive","btn-sm","rounded-full",3,"click"],[1,"material-icons","animate-spin","me-2"]],template:function(r,u){if(r&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),n(3),t(),e(4,"a",3)(5,"span",4),n(6,"arrow_forward"),t(),n(7," \u0628\u0627\u0632\u06AF\u0634\u062A "),t()(),e(8,"form",5),x("ngSubmit",function(){return u.onSubmit()}),e(9,"div",6)(10,"label",7),n(11," \u0646\u0627\u0645 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC "),e(12,"span",8),n(13,"*"),t()(),b(14,"input",9),c(15,xi,2,0,"div",10),t(),e(16,"div",6)(17,"label",11),n(18,"\u0622\u06CC\u06A9\u0648\u0646 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),t(),e(19,"div",12)(20,"label",13)(21,"span",14),n(22,"add_photo_alternate"),t(),e(23,"span",15),n(24,"\u0627\u0646\u062A\u062E\u0627\u0628 \u062A\u0635\u0648\u06CC\u0631"),t(),e(25,"input",16),x("change",function(g){return u.onFileChange(g)}),t()(),c(26,vi,6,1,"div",17),t()(),e(27,"div",18)(28,"button",19),c(29,bi,2,0,"span",20),e(30,"span"),n(31),t()()()()()),r&2){let m,g;d(3),v("",u.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"," \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),d(5),l("formGroup",u.categoryForm),d(6),ue("input-error",((m=u.categoryForm.get("Name"))==null?null:m.invalid)&&((m=u.categoryForm.get("Name"))==null?null:m.touched)),d(),l("ngIf",((g=u.categoryForm.get("Name"))==null?null:g.invalid)&&((g=u.categoryForm.get("Name"))==null?null:g.touched)),d(11),l("ngIf",u.iconPreview),d(2),l("disabled",u.categoryForm.invalid||u.isSubmitting),d(),l("ngIf",u.isSubmitting),d(2),h(u.isSubmitting?"\u0630\u062E\u06CC\u0631\u0647 \u0633\u0627\u0632\u06CC...":"\u0630\u062E\u06CC\u0631\u0647 \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A")}},dependencies:[A,_,J,z,B,T,q,ke,H,W,D,N],encapsulation:2});let o=a;return o})();var Si=o=>["/admin/categories/edit",o];function yi(o,a){o&1&&(e(0,"div",10)(1,"span",11),n(2,"sync"),t()())}function _i(o,a){o&1&&(e(0,"div",12)(1,"span",13),n(2,"category"),t(),e(3,"p",14),n(4,"\u0644\u06CC\u0633\u062A \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627 \u062E\u0627\u0644\u06CC \u0627\u0633\u062A"),t(),e(5,"a",15),n(6,"\u0627\u0641\u0632\u0648\u062F\u0646 \u0627\u0648\u0644\u06CC\u0646 \u0645\u0648\u0631\u062F"),t()())}function Ai(o,a){if(o&1){let s=E();e(0,"tr",25)(1,"td",26)(2,"div",27),b(3,"img",28),t()(),e(4,"td",29),n(5),t(),e(6,"td",30)(7,"span",31),n(8),w(9,"number"),t()(),e(10,"td",26)(11,"div",32)(12,"a",33)(13,"span",34),n(14,"edit"),t()(),e(15,"button",35),x("click",function(){let r=C(s).$implicit,u=p(2);return S(u.deleteCategory(r.id))}),e(16,"span",34),n(17,"delete"),t()()()()()}if(o&2){let s=a.$implicit,i=p(2);d(3),l("src",i.getCategoryIconUrl(s),le)("alt",s.name),d(2),h(s.name),d(3),v(" ",M(9,5,i.getProductCount(s))," "),d(4),l("routerLink",Y(7,Si,s.id))}}function wi(o,a){if(o&1&&(e(0,"div",16)(1,"table",17)(2,"thead",18)(3,"tr")(4,"th",19),n(5,"\u0622\u06CC\u06A9\u0648\u0646"),t(),e(6,"th",20),n(7,"\u0646\u0627\u0645 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),t(),e(8,"th",21),n(9,"\u062A\u0639\u062F\u0627\u062F \u0632\u06CC\u0631\u0645\u062C\u0645\u0648\u0639\u0647"),t(),e(10,"th",22),n(11,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t()()(),e(12,"tbody",23),c(13,Ai,18,9,"tr",24),t()()()),o&2){let s=p();d(13),l("ngForOf",s.categories)}}var Mt=(()=>{let a=class a{constructor(i,r,u,m){this.categoryService=i,this.adminCategoryService=r,this.notificationService=u,this.mediaService=m,this.categories=[],this.isLoading=!0}ngOnInit(){this.loadCategories()}loadCategories(){this.isLoading=!0,this.categoryService.getCategories(void 0,1,100).subscribe({next:i=>{this.categories=i.items??[],this.isLoading=!1},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627","error"),this.isLoading=!1}})}getProductCount(i){return i.categoryGroups?i.categoryGroups.reduce((r,u)=>r+u.productCount,0):0}getCategoryIconUrl(i){return i.iconUrl?this.mediaService.getMediaUrl(i.iconUrl):"https://via.placeholder.com/40"}deleteCategory(i){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F")&&this.adminCategoryService.deleteCategory(i).subscribe({next:()=>{this.notificationService.show("\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadCategories()},error:r=>this.notificationService.show(r?.error?.message||r?.error?.ErrorMessage||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC","error")})}};a.\u0275fac=function(r){return new(r||a)(f(Ve),f(Re),f(I),f(Ee))},a.\u0275cmp=y({type:a,selectors:[["app-admin-category-list"]],decls:15,vars:3,consts:[[1,"space-y-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","justify-between","gap-4"],[1,"text-2xl","font-bold","text-foreground","tracking-tight"],[1,"text-sm","text-muted-foreground","mt-1"],["routerLink","/admin/categories/new",1,"btn","btn-primary"],[1,"material-icons","me-2"],[1,"card","border","border-border","shadow-sm","overflow-hidden"],["class","flex justify-center items-center py-20",4,"ngIf"],["class","flex flex-col items-center justify-center py-16 text-center",4,"ngIf"],["class","w-full overflow-x-auto",4,"ngIf"],[1,"flex","justify-center","items-center","py-20"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"flex","flex-col","items-center","justify-center","py-16","text-center"],[1,"material-icons","text-5xl","text-muted-foreground","mb-4"],[1,"text-lg","font-medium","text-foreground"],["routerLink","/admin/categories/new",1,"btn","btn-link","mt-2"],[1,"w-full","overflow-x-auto"],[1,"w-full","caption-bottom","text-sm","text-right"],[1,"bg-muted/50","[&_tr]:border-b","[&_tr]:border-border"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground","w-[80px]"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground","text-center"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground","text-end","w-[100px]"],[1,"[&_tr:last-child]:border-0"],["class","border-b border-border transition-colors hover:bg-muted/20",4,"ngFor","ngForOf"],[1,"border-b","border-border","transition-colors","hover:bg-muted/20"],[1,"p-4","align-middle"],[1,"w-10","h-10","rounded-lg","border","border-border","bg-background","overflow-hidden","flex","items-center","justify-center"],["loading","lazy",1,"w-full","h-full","object-cover",3,"src","alt"],[1,"p-4","align-middle","font-medium","text-foreground"],[1,"p-4","align-middle","text-center"],[1,"inline-flex","items-center","justify-center","min-w-[2rem]","px-2","py-1","rounded-md","bg-secondary","text-secondary-foreground","text-xs","font-bold"],[1,"flex","items-center","justify-end","gap-2"],["title","\u0648\u06CC\u0631\u0627\u06CC\u0634",1,"btn","btn-ghost","btn-icon","btn-sm","text-muted-foreground","hover:text-primary",3,"routerLink"],[1,"material-icons","text-lg"],["title","\u062D\u0630\u0641",1,"btn","btn-ghost","btn-icon","btn-sm","text-muted-foreground","hover:text-destructive",3,"click"]],template:function(r,u){r&1&&(e(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),n(4,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627"),t(),e(5,"p",3),n(6,"\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627\u06CC \u0627\u0635\u0644\u06CC \u0641\u0631\u0648\u0634\u06AF\u0627\u0647 \u0631\u0627 \u0645\u062F\u06CC\u0631\u06CC\u062A \u06A9\u0646\u06CC\u062F"),t()(),e(7,"a",4)(8,"span",5),n(9,"add"),t(),n(10," \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u062C\u062F\u06CC\u062F "),t()(),e(11,"div",6),c(12,yi,3,0,"div",7)(13,_i,7,0,"div",8)(14,wi,14,1,"div",9),t()()),r&2&&(d(12),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.categories.length===0),d(),l("ngIf",!u.isLoading&&u.categories.length>0))},dependencies:[A,k,_,D,N,Z],encapsulation:2});let o=a;return o})();var Be=(()=>{let a=class a{constructor(i){this.http=i,this.categoryGroupsUrl=`${j.API_URL}admin/category-groups`}getCategoryGroupById(i){return this.http.get(`${this.categoryGroupsUrl}/${i}?page=1&pageSize=10`)}createCategoryGroup(i){return this.http.post(this.categoryGroupsUrl,i)}updateCategoryGroup(i,r){return this.http.put(`${this.categoryGroupsUrl}/${i}`,r)}deleteCategoryGroup(i){return this.http.delete(`${this.categoryGroupsUrl}/${i}`)}};a.\u0275fac=function(r){return new(r||a)($(G))},a.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();function Fi(o,a){o&1&&(e(0,"div",28),n(1," \u0646\u0627\u0645 \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0627\u0644\u0632\u0627\u0645\u06CC \u0627\u0633\u062A. "),t())}function Ei(o,a){if(o&1&&(e(0,"option",29),n(1),t()),o&2){let s=a.$implicit;l("value",s.id),d(),h(s.name)}}function Ii(o,a){o&1&&(e(0,"div",28),n(1," \u0627\u0646\u062A\u062E\u0627\u0628 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0627\u0644\u0632\u0627\u0645\u06CC \u0627\u0633\u062A. "),t())}function ki(o,a){if(o&1){let s=E();e(0,"div",30),b(1,"img",31),e(2,"button",32),x("click",function(){C(s);let r=p();return r.iconPreview=null,S(r.selectedFile=null)}),e(3,"span",4),n(4,"close"),t()()()}if(o&2){let s=p();d(),l("src",s.iconPreview,le)}}function Di(o,a){o&1&&(e(0,"span",33),n(1,"sync"),t())}var Xe=(()=>{let a=class a{constructor(i,r,u,m,g){this.route=i,this.router=r,this.notificationService=u,this.adminCategoryGroupService=m,this.categoryService=g,this.isEditMode=!1,this.categoryGroupId=null,this.isSubmitting=!1,this.categories=[],this.selectedFile=null,this.iconPreview=null,this.categoryGroupForm=new me({name:new P("",[F.required,F.maxLength(100)]),categoryId:new P(null,[F.required]),rowVersion:new P(null)})}ngOnInit(){this.loadCategories();let i=this.route.snapshot.paramMap.get("id");i&&(this.categoryGroupId=Number(i),this.isEditMode=!0,this.loadCategoryGroupData())}loadCategories(){this.categoryService.getCategories(void 0,1,100).subscribe({next:i=>{this.categories=i.items??[]},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627","error")}})}loadCategoryGroupData(){this.categoryGroupId&&this.adminCategoryGroupService.getCategoryGroupById(this.categoryGroupId).subscribe({next:i=>{this.categoryGroupForm.patchValue({name:i.name,categoryId:i.categoryId,rowVersion:i.rowVersion}),this.iconPreview=i.iconUrl||null},error:i=>this.notificationService.show(i?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC","error")})}onFileChange(i){let r=i.target;if(r.files&&r.files.length>0){this.selectedFile=r.files[0];let u=new FileReader;u.onload=m=>this.iconPreview=m.target.result,u.readAsDataURL(this.selectedFile)}}onSubmit(){if(this.categoryGroupForm.invalid||this.isSubmitting)return;this.isSubmitting=!0;let i=new FormData;i.append("Name",this.categoryGroupForm.get("name")?.value),i.append("CategoryId",this.categoryGroupForm.get("categoryId")?.value),this.selectedFile&&i.append("IconFile",this.selectedFile),this.isEditMode&&this.categoryGroupForm.get("rowVersion")?.value&&i.append("RowVersion",this.categoryGroupForm.get("rowVersion")?.value),(this.isEditMode&&this.categoryGroupId?this.adminCategoryGroupService.updateCategoryGroup(this.categoryGroupId,i):this.adminCategoryGroupService.createCategoryGroup(i)).pipe(V(()=>this.isSubmitting=!1)).subscribe({next:()=>{this.notificationService.show(`\u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A ${this.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"} \u0634\u062F`,"success"),this.router.navigate(["/admin/category-groups"])},error:u=>{u.status===409?(this.notificationService.show("\u0627\u06CC\u0646 \u0631\u06A9\u0648\u0631\u062F \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627 \u0635\u0641\u062D\u0647 \u0631\u0627 \u0631\u0641\u0631\u0634 \u06A9\u0646\u06CC\u062F.","error"),this.loadCategoryGroupData()):this.notificationService.show(u?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062B\u0628\u062A \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A","error")}})}};a.\u0275fac=function(r){return new(r||a)(f(ee),f(pe),f(I),f(Be),f(Ve))},a.\u0275cmp=y({type:a,selectors:[["app-admin-category-group-form"]],decls:45,vars:14,consts:[[1,"max-w-2xl","mx-auto"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-foreground"],["routerLink","/admin/category-groups",1,"btn","btn-outline","btn-sm","gap-2"],[1,"material-icons","text-sm"],[1,"card","p-6","space-y-6","bg-card","text-card-foreground",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-2"],["for","name",1,"text-sm","font-medium","text-foreground"],[1,"text-destructive"],["type","text","id","name","formControlName","name","placeholder","\u0645\u062B\u0627\u0644: \u0644\u0648\u0627\u0632\u0645 \u062C\u0627\u0646\u0628\u06CC","maxlength","100",1,"input","w-full"],["class","text-xs text-destructive",4,"ngIf"],["for","categoryId",1,"text-sm","font-medium","text-foreground"],["id","categoryId","formControlName","categoryId",1,"input","w-full"],["disabled","",3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["for","iconFile",1,"text-sm","font-medium","text-foreground","block"],[1,"flex","items-start","gap-4"],[1,"flex-1"],[1,"flex","flex-col","items-center","justify-center","w-full","h-32","border-2","border-dashed","border-border","rounded-lg","cursor-pointer","hover:bg-muted/50","transition-colors"],[1,"flex","flex-col","items-center","justify-center","pt-5","pb-6"],[1,"material-icons","text-muted-foreground","text-3xl","mb-2"],[1,"text-sm","text-muted-foreground"],["type","file","id","iconFile","accept","image/*",1,"hidden",3,"change"],["class","w-32 h-32 flex-shrink-0 border border-border rounded-lg overflow-hidden bg-muted/20 flex items-center justify-center relative group",4,"ngIf"],[1,"flex","items-center","justify-end","pt-6","border-t","border-border"],["type","submit",1,"btn","btn-primary","btn-lg","min-w-[140px]",3,"disabled"],["class","material-icons animate-spin me-2 text-lg",4,"ngIf"],[1,"text-xs","text-destructive"],[3,"value"],[1,"w-32","h-32","flex-shrink-0","border","border-border","rounded-lg","overflow-hidden","bg-muted/20","flex","items-center","justify-center","relative","group"],["alt","Icon Preview",1,"w-full","h-full","object-contain",3,"src"],["type","button",1,"absolute","top-1","left-1","btn","btn-icon","btn-xs","btn-destructive","opacity-0","group-hover:opacity-100","transition-opacity",3,"click"],[1,"material-icons","animate-spin","me-2","text-lg"]],template:function(r,u){if(r&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),n(3),t(),e(4,"a",3)(5,"span",4),n(6,"arrow_forward"),t(),n(7," \u0628\u0627\u0632\u06AF\u0634\u062A "),t()(),e(8,"form",5),x("ngSubmit",function(){return u.onSubmit()}),e(9,"div",6)(10,"div",7)(11,"label",8),n(12," \u0646\u0627\u0645 \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC "),e(13,"span",9),n(14,"*"),t()(),b(15,"input",10),c(16,Fi,2,0,"div",11),t(),e(17,"div",7)(18,"label",12),n(19," \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0648\u0627\u0644\u062F "),e(20,"span",9),n(21,"*"),t()(),e(22,"select",13)(23,"option",14),n(24,"\u06CC\u06A9 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F"),t(),c(25,Ei,2,2,"option",15),t(),c(26,Ii,2,0,"div",11),t()(),e(27,"div",7)(28,"label",16),n(29,"\u0622\u06CC\u06A9\u0648\u0646 \u06AF\u0631\u0648\u0647 (\u0627\u062E\u062A\u06CC\u0627\u0631\u06CC)"),t(),e(30,"div",17)(31,"div",18)(32,"label",19)(33,"div",20)(34,"span",21),n(35,"cloud_upload"),t(),e(36,"p",22),n(37,"\u0628\u0631\u0627\u06CC \u0622\u067E\u0644\u0648\u062F \u06A9\u0644\u06CC\u06A9 \u06A9\u0646\u06CC\u062F \u06CC\u0627 \u0641\u0627\u06CC\u0644 \u0631\u0627 \u0627\u06CC\u0646\u062C\u0627 \u0631\u0647\u0627 \u06A9\u0646\u06CC\u062F"),t()(),e(38,"input",23),x("change",function(g){return u.onFileChange(g)}),t()()(),c(39,ki,5,1,"div",24),t()(),e(40,"div",25)(41,"button",26),c(42,Di,2,0,"span",27),e(43,"span"),n(44),t()()()()()),r&2){let m,g,K,O;d(3),v("",u.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"," \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),d(5),l("formGroup",u.categoryGroupForm),d(7),ue("input-error",((m=u.categoryGroupForm.get("name"))==null?null:m.invalid)&&((m=u.categoryGroupForm.get("name"))==null?null:m.touched)),d(),l("ngIf",((g=u.categoryGroupForm.get("name"))==null?null:g.invalid)&&((g=u.categoryGroupForm.get("name"))==null?null:g.touched)),d(6),ue("input-error",((K=u.categoryGroupForm.get("categoryId"))==null?null:K.invalid)&&((K=u.categoryGroupForm.get("categoryId"))==null?null:K.touched)),d(),l("ngValue",null),d(2),l("ngForOf",u.categories),d(),l("ngIf",((O=u.categoryGroupForm.get("categoryId"))==null?null:O.invalid)&&((O=u.categoryGroupForm.get("categoryId"))==null?null:O.touched)),d(13),l("ngIf",u.iconPreview),d(2),l("disabled",u.categoryGroupForm.invalid||u.isSubmitting),d(),l("ngIf",u.isSubmitting),d(2),h(u.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u0630\u062E\u06CC\u0631\u0647...":"\u0630\u062E\u06CC\u0631\u0647 \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A")}},dependencies:[A,k,_,J,z,ne,re,B,ie,T,q,ke,H,W,D,N],encapsulation:2});let o=a;return o})();var Li=o=>["/admin/category-groups/edit",o];function Ni(o,a){o&1&&(e(0,"div",10)(1,"span",11),n(2,"sync"),t()())}function Pi(o,a){o&1&&(e(0,"div",12)(1,"div",13)(2,"span",14),n(3,"folder_off"),t()(),e(4,"p",15),n(5,"\u0647\u06CC\u0686 \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F"),t(),e(6,"a",16),n(7,"\u0627\u0641\u0632\u0648\u062F\u0646 \u0627\u0648\u0644\u06CC\u0646 \u06AF\u0631\u0648\u0647"),t()())}function Ti(o,a){if(o&1){let s=E();e(0,"tr",26)(1,"td",27),n(2),t(),e(3,"td",28)(4,"span",29),n(5),t()(),e(6,"td",30)(7,"span",31),n(8),w(9,"number"),t()(),e(10,"td",28)(11,"div",32)(12,"a",33)(13,"span",34),n(14,"edit"),t()(),e(15,"button",35),x("click",function(){let r=C(s).$implicit,u=p(2);return S(u.deleteCategoryGroup(r.id))}),e(16,"span",34),n(17,"delete"),t()()()()()}if(o&2){let s=a.$implicit;d(2),h(s.name),d(3),v(" ",s.categoryName||"-"," "),d(3),h(M(9,4,s.productCount||0)),d(4),l("routerLink",Y(6,Li,s.id))}}function Oi(o,a){if(o&1&&(e(0,"div",17)(1,"table",18)(2,"thead",19)(3,"tr",20)(4,"th",21),n(5,"\u0646\u0627\u0645 \u06AF\u0631\u0648\u0647"),t(),e(6,"th",21),n(7,"\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0648\u0627\u0644\u062F"),t(),e(8,"th",22),n(9,"\u062A\u0639\u062F\u0627\u062F \u0645\u062D\u0635\u0648\u0644\u0627\u062A"),t(),e(10,"th",23),n(11,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t()()(),e(12,"tbody",24),c(13,Ti,18,8,"tr",25),t()()()),o&2){let s=p();d(13),l("ngForOf",s.categoryGroups)}}var Nt=(()=>{let a=class a{constructor(i,r,u,m){this.route=i,this.categoryGroupService=r,this.adminCategoryGroupService=u,this.notificationService=m,this.categoryGroups=[],this.isLoading=!0,this.categoryId=null}ngOnInit(){this.route.queryParams.subscribe(i=>{this.categoryId=i.categoryId?Number(i.categoryId):null,this.loadCategoryGroups()})}loadCategoryGroups(){this.isLoading=!0,this.categoryGroupService.getCategoryGroups(this.categoryId||void 0,void 0,1,100).subscribe({next:i=>{this.categoryGroups=i.items??[],this.isLoading=!1},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u06AF\u0631\u0648\u0647\u200C\u0647\u0627\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC","error"),this.isLoading=!1}})}deleteCategoryGroup(i){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F")&&this.adminCategoryGroupService.deleteCategoryGroup(i).subscribe({next:()=>{this.notificationService.show("\u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadCategoryGroups()},error:r=>this.notificationService.show(r?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC","error")})}};a.\u0275fac=function(r){return new(r||a)(f(ee),f(Ge),f(Be),f(I))},a.\u0275cmp=y({type:a,selectors:[["app-admin-category-group-list"]],decls:15,vars:3,consts:[[1,"space-y-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","justify-between","gap-4"],[1,"text-2xl","font-bold","text-foreground","tracking-tight"],[1,"text-sm","text-muted-foreground","mt-1"],["routerLink","/admin/category-groups/new",1,"btn","btn-primary"],[1,"material-icons","me-2"],[1,"card","overflow-hidden","border","border-border","shadow-sm"],["class","flex justify-center items-center py-20",4,"ngIf"],["class","flex flex-col items-center justify-center py-16 text-center",4,"ngIf"],["class","w-full overflow-x-auto",4,"ngIf"],[1,"flex","justify-center","items-center","py-20"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"flex","flex-col","items-center","justify-center","py-16","text-center"],[1,"w-16","h-16","bg-muted","rounded-full","flex","items-center","justify-center","mb-4"],[1,"material-icons","text-3xl","text-muted-foreground"],[1,"text-lg","font-medium","text-foreground"],["routerLink","/admin/category-groups/new",1,"btn","btn-link","mt-2"],[1,"w-full","overflow-x-auto"],[1,"w-full","caption-bottom","text-sm","text-right"],[1,"[&_tr]:border-b","[&_tr]:border-border","bg-muted/50"],[1,"border-b","transition-colors","hover:bg-muted/50","data-[state=selected]:bg-muted"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground","text-center"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground","text-end","w-[100px]"],[1,"[&_tr:last-child]:border-0"],["class","border-b border-border transition-colors hover:bg-muted/20",4,"ngFor","ngForOf"],[1,"border-b","border-border","transition-colors","hover:bg-muted/20"],[1,"p-4","align-middle","font-medium","text-foreground"],[1,"p-4","align-middle"],[1,"inline-flex","items-center","rounded-full","border","border-border","px-2.5","py-0.5","text-xs","font-semibold","text-foreground","transition-colors","focus:outline-none","focus:ring-2","focus:ring-ring","focus:ring-offset-2"],[1,"p-4","align-middle","text-center"],[1,"text-foreground","font-mono"],[1,"flex","items-center","justify-end","gap-2"],["title","\u0648\u06CC\u0631\u0627\u06CC\u0634",1,"btn","btn-ghost","btn-icon","btn-sm","text-muted-foreground","hover:text-primary",3,"routerLink"],[1,"material-icons","text-lg"],["title","\u062D\u0630\u0641",1,"btn","btn-ghost","btn-icon","btn-sm","text-muted-foreground","hover:text-destructive",3,"click"]],template:function(r,u){r&1&&(e(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),n(4,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u06AF\u0631\u0648\u0647\u200C\u0647\u0627\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),t(),e(5,"p",3),n(6,"\u0644\u06CC\u0633\u062A \u0648 \u0645\u062F\u06CC\u0631\u06CC\u062A \u0632\u06CC\u0631\u0645\u062C\u0645\u0648\u0639\u0647\u200C\u0647\u0627\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627"),t()(),e(7,"a",4)(8,"span",5),n(9,"add"),t(),n(10," \u0627\u0641\u0632\u0648\u062F\u0646 \u06AF\u0631\u0648\u0647 \u062C\u062F\u06CC\u062F "),t()(),e(11,"div",6),c(12,Ni,3,0,"div",7)(13,Pi,8,0,"div",8)(14,Oi,14,1,"div",9),t()()),r&2&&(d(12),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.categoryGroups.length===0),d(),l("ngIf",!u.isLoading&&u.categoryGroups.length>0))},dependencies:[A,k,_,D,N,Z],encapsulation:2});let o=a;return o})();var qe=(()=>{let a=class a{constructor(i){this.http=i,this.ordersUrl=`${j.API_URL}admin/orders`}getOrders(i){let r=new Q;return Object.keys(i).forEach(u=>{i[u]!==null&&i[u]!==void 0&&i[u]!==""&&(r=r.set(u,i[u].toString()))}),this.http.get(this.ordersUrl,{params:r})}getOrderById(i){return this.http.get(`${this.ordersUrl}/${i}`)}createOrder(i){return this.http.post(this.ordersUrl,i)}updateOrder(i,r){return this.http.put(`${this.ordersUrl}/${i}`,r)}updateOrderStatus(i,r){return this.http.patch(`${this.ordersUrl}/${i}/status`,r)}deleteOrder(i){return this.http.delete(`${this.ordersUrl}/${i}`)}getOrderStatistics(i,r){let u=new Q;return i&&(u=u.set("fromDate",i.toISOString())),r&&(u=u.set("toDate",r.toISOString())),this.http.get(`${this.ordersUrl}/statistics`,{params:u})}};a.\u0275fac=function(r){return new(r||a)($(G))},a.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();var we=(()=>{let a=class a{constructor(i){this.http=i,this.publicUrl=`${j.API_URL}OrderStatus`,this.adminUrl=`${j.API_URL}admin/order-statuses`}getOrderStatuses(){return this.http.get(this.publicUrl)}getOrderStatus(i){return this.http.get(`${this.publicUrl}/${i}`)}createOrderStatus(i){return this.http.post(this.adminUrl,i)}updateOrderStatus(i,r){return this.http.put(`${this.adminUrl}/${i}`,r)}deleteOrderStatus(i){return this.http.delete(`${this.adminUrl}/${i}`)}};a.\u0275fac=function(r){return new(r||a)($(G))},a.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();function Vi(o,a){o&1&&(e(0,"div",4)(1,"span",5),n(2,"sync"),t()())}function ji(o,a){o&1&&(e(0,"div",6)(1,"span",7),n(2,"error_outline"),t(),e(3,"h2",8),n(4,"\u0633\u0641\u0627\u0631\u0634 \u06CC\u0627\u0641\u062A \u0646\u0634\u062F"),t(),e(5,"p",9),n(6,"\u0645\u0645\u06A9\u0646 \u0627\u0633\u062A \u0627\u06CC\u0646 \u0633\u0641\u0627\u0631\u0634 \u062D\u0630\u0641 \u0634\u062F\u0647 \u06CC\u0627 \u0634\u0646\u0627\u0633\u0647 \u0622\u0646 \u0627\u0634\u062A\u0628\u0627\u0647 \u0628\u0627\u0634\u062F."),t()())}function Ui(o,a){if(o&1&&(e(0,"div",42),b(1,"img",43),e(2,"div",44)(3,"p",45),n(4),t(),e(5,"p",46),n(6,"\u062A\u0639\u062F\u0627\u062F: "),e(7,"span",47),n(8),t()(),e(9,"p",46),n(10,"\u0642\u06CC\u0645\u062A \u0648\u0627\u062D\u062F: "),e(11,"span",47),n(12),w(13,"number"),t(),n(14," \u062A\u0648\u0645\u0627\u0646"),t()(),e(15,"div",48)(16,"p",49),n(17),w(18,"number"),t(),e(19,"p",46),n(20,"\u062A\u0648\u0645\u0627\u0646"),t()()()),o&2){let s=a.$implicit;d(),l("src",s.product==null?null:s.product.icon,le)("alt",s.product==null?null:s.product.name),d(3),h(s.product==null?null:s.product.name),d(4),h(s.quantity),d(4),h(M(13,6,s.sellingPrice)),d(5),h(M(18,8,s.amount))}}function $i(o,a){if(o&1&&(e(0,"option",50),n(1),t()),o&2){let s=a.$implicit;l("value",s.id),d(),h(s.name)}}function Gi(o,a){o&1&&(e(0,"span",51),n(1,"sync"),t())}function Ri(o,a){if(o&1){let s=E();e(0,"div",10)(1,"div",11)(2,"div")(3,"h1",12),n(4),t(),e(5,"p",13),n(6),w(7,"date"),t()(),e(8,"a",14)(9,"span",15),n(10,"arrow_forward"),t(),n(11," \u0628\u0627\u0632\u06AF\u0634\u062A \u0628\u0647 \u0644\u06CC\u0633\u062A "),t()(),e(12,"div",16)(13,"div",17)(14,"div",18)(15,"div",19)(16,"h2",20),n(17),t()(),e(18,"div",21),c(19,Ui,21,10,"div",22),t()()(),e(20,"div",23)(21,"div",24)(22,"h2",25),n(23,"\u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0645\u0634\u062A\u0631\u06CC"),t(),e(24,"div",26)(25,"p")(26,"strong",27),n(27,"\u0646\u0627\u0645:"),t(),n(28),t(),e(29,"p")(30,"strong",27),n(31,"\u0645\u0648\u0628\u0627\u06CC\u0644:"),t(),e(32,"span",28),n(33),t()(),e(34,"p")(35,"strong",27),n(36,"\u0622\u062F\u0631\u0633:"),t(),n(37),t(),e(38,"p")(39,"strong",27),n(40,"\u06A9\u062F\u067E\u0633\u062A\u06CC:"),t(),e(41,"span",28),n(42),t()()()(),e(43,"div",24)(44,"h2",25),n(45,"\u062E\u0644\u0627\u0635\u0647 \u0645\u0627\u0644\u06CC"),t(),e(46,"div",29)(47,"div",30)(48,"span",31),n(49,"\u062C\u0645\u0639 \u06A9\u0644:"),t(),e(50,"span",32),n(51),w(52,"number"),t()(),e(53,"div",30)(54,"span",31),n(55,"\u0633\u0648\u062F \u06A9\u0644:"),t(),e(56,"span",33),n(57),w(58,"number"),t()(),e(59,"div",34)(60,"span",31),n(61,"\u0648\u0636\u0639\u06CC\u062A:"),t(),e(62,"span",35),w(63,"statusClass"),e(64,"span",36),n(65),t(),n(66),t()()()(),e(67,"div",24)(68,"h2",25),n(69,"\u062A\u063A\u06CC\u06CC\u0631 \u0648\u0636\u0639\u06CC\u062A \u0633\u0641\u0627\u0631\u0634"),t(),e(70,"div",37)(71,"select",38,0),c(73,$i,2,2,"option",39),t(),e(74,"button",40),x("click",function(){C(s);let r=Te(72),u=p();return S(u.updateStatus(r.value))}),c(75,Gi,2,0,"span",41),n(76),t()()()()()()}if(o&2){let s=p();d(4),v("\u062C\u0632\u0626\u06CC\u0627\u062A \u0633\u0641\u0627\u0631\u0634 #",s.order.id),d(2),v(" \u062A\u0627\u0631\u06CC\u062E \u062B\u0628\u062A: ",ae(7,19,s.order.createdAt,"yyyy/MM/dd HH:mm")," "),d(11),v("\u0645\u062D\u0635\u0648\u0644\u0627\u062A \u0633\u0641\u0627\u0631\u0634 (",s.order.orderItems==null?null:s.order.orderItems.length," \u0645\u0648\u0631\u062F)"),d(2),l("ngForOf",s.order.orderItems),d(9),Se(" ",s.order.user==null?null:s.order.user.firstName," ",s.order.user==null?null:s.order.user.lastName),d(5),h(s.order.user==null?null:s.order.user.phoneNumber),d(4),v(" ",s.order.addressSnapshot==null?null:s.order.addressSnapshot.address),d(5),h(s.order.addressSnapshot==null?null:s.order.addressSnapshot.postalCode),d(9),v("",M(52,22,s.order.totalAmount)," \u062A\u0648\u0645\u0627\u0646"),d(6),v("",M(58,24,s.order.totalProfit)," \u062A\u0648\u0645\u0627\u0646"),d(5),l("ngClass",M(63,26,s.order.orderStatus==null?null:s.order.orderStatus.name)),d(3),h(s.order.orderStatus==null?null:s.order.orderStatus.icon),d(),v(" ",s.order.orderStatus==null?null:s.order.orderStatus.name," "),d(5),l("value",s.order.orderStatusId),d(2),l("ngForOf",s.orderStatuses),d(),l("disabled",s.isUpdatingStatus),d(),l("ngIf",s.isUpdatingStatus),d(),v(" ",s.isUpdatingStatus?"\u062F\u0631 \u062D\u0627\u0644 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC...":"\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0648\u0636\u0639\u06CC\u062A"," ")}}var Tt=(()=>{let a=class a{constructor(i,r,u,m){this.route=i,this.adminOrderService=r,this.adminOrderStatusService=u,this.notificationService=m,this.order=null,this.orderStatuses=[],this.isLoading=!0,this.isUpdatingStatus=!1}ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i&&(this.orderId=Number(i),this.loadOrder(),this.loadOrderStatuses())}loadOrder(){this.isLoading=!0,this.adminOrderService.getOrderById(this.orderId).subscribe({next:i=>{this.order=i,this.isLoading=!1},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0633\u0641\u0627\u0631\u0634","error"),this.isLoading=!1}})}loadOrderStatuses(){this.adminOrderStatusService.getOrderStatuses().subscribe({next:i=>{this.orderStatuses=i},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627\u06CC \u0633\u0641\u0627\u0631\u0634","error")}})}updateStatus(i){if(!this.orderId||!this.order)return;this.isUpdatingStatus=!0;let r=Number(i),u=this.order.rowVersion;this.adminOrderService.updateOrderStatus(this.orderId,{orderStatusId:r,rowVersion:u}).pipe(V(()=>this.isUpdatingStatus=!1)).subscribe({next:()=>{this.notificationService.show("\u0648\u0636\u0639\u06CC\u062A \u0633\u0641\u0627\u0631\u0634 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0634\u062F","success"),this.loadOrder()},error:m=>{m?.status===409?this.notificationService.show("\u0633\u0641\u0627\u0631\u0634 \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A. \u062F\u0631 \u062D\u0627\u0644 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062C\u062F\u062F...","error"):this.notificationService.show(m?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0648\u0636\u0639\u06CC\u062A","error"),this.loadOrder()}})}};a.\u0275fac=function(r){return new(r||a)(f(ee),f(qe),f(we),f(I))},a.\u0275cmp=y({type:a,selectors:[["app-admin-order-detail"]],decls:3,vars:3,consts:[["statusSelect",""],["class","flex justify-center items-center py-20",4,"ngIf"],["class","flex flex-col items-center justify-center py-20 text-center",4,"ngIf"],["class","max-w-5xl mx-auto",4,"ngIf"],[1,"flex","justify-center","items-center","py-20"],[1,"material-icons","animate-spin","text-primary","text-5xl"],[1,"flex","flex-col","items-center","justify-center","py-20","text-center"],[1,"material-icons","text-6xl","text-muted-foreground","mb-4"],[1,"text-xl","font-bold","text-foreground"],[1,"text-muted-foreground","mt-2"],[1,"max-w-5xl","mx-auto"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mb-6","gap-4"],[1,"text-2xl","font-bold","text-foreground"],[1,"text-sm","text-muted-foreground","mt-1"],["routerLink","/admin/orders",1,"btn","btn-outline","btn-sm","self-start","sm:self-center"],[1,"material-icons","text-base","ml-1"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-6","items-start"],[1,"lg:col-span-2","space-y-6"],[1,"card"],[1,"p-6","border-b","border-border"],[1,"font-semibold","text-lg","text-foreground"],[1,"divide-y","divide-border"],["class","p-4 flex items-center gap-4 hover:bg-muted/50 transition-colors",4,"ngFor","ngForOf"],[1,"space-y-6","lg:sticky","top-24"],[1,"card","p-6"],[1,"font-semibold","text-lg","text-foreground","mb-4"],[1,"space-y-2","text-base","text-foreground"],[1,"font-medium","text-muted-foreground"],["dir","ltr"],[1,"space-y-3","text-base"],[1,"flex","justify-between","items-center"],[1,"text-muted-foreground"],[1,"font-bold","text-lg","text-foreground"],[1,"font-bold","text-lg","text-success"],[1,"flex","justify-between","items-center","pt-3","border-t","border-border","mt-3"],[1,"px-2","py-1","text-sm","font-semibold","rounded-full",3,"ngClass"],[1,"material-icons-outlined","text-xs","mr-1","align-middle"],[1,"space-y-4"],[1,"input",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary","w-full",3,"click","disabled"],["class","material-icons animate-spin me-2",4,"ngIf"],[1,"p-4","flex","items-center","gap-4","hover:bg-muted/50","transition-colors"],[1,"w-20","h-20","rounded-lg","border","border-border","object-cover",3,"src","alt"],[1,"flex-1"],[1,"font-medium","text-foreground"],[1,"text-sm","text-muted-foreground"],[1,"font-bold"],[1,"text-right"],[1,"font-semibold","text-foreground","text-lg"],[3,"value"],[1,"material-icons","animate-spin","me-2"]],template:function(r,u){r&1&&c(0,Vi,3,0,"div",1)(1,ji,7,0,"div",2)(2,Ri,77,28,"div",3),r&2&&(l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&!u.order),d(),l("ngIf",u.order))},dependencies:[A,se,k,_,D,N,Z,ce,De],encapsulation:2});let o=a;return o})();var Ot=(()=>{let a=class a{transform(i){return i?.trim()||""}};a.\u0275fac=function(r){return new(r||a)},a.\u0275pipe=mt({name:"trim",type:a,pure:!0});let o=a;return o})();var Bi=o=>["/admin/orders",o];function qi(o,a){if(o&1&&(e(0,"option",23),n(1),t()),o&2){let s=a.$implicit;l("value",s.id),d(),h(s.name)}}function zi(o,a){if(o&1&&(e(0,"div",24)(1,"div",25)(2,"div",26)(3,"p",27),n(4,"\u062A\u0639\u062F\u0627\u062F \u0633\u0641\u0627\u0631\u0634\u0627\u062A"),t(),e(5,"span",28),n(6,"shopping_cart"),t()(),e(7,"p",29),n(8),w(9,"number"),t()(),e(10,"div",25)(11,"div",26)(12,"p",27),n(13,"\u0645\u062C\u0645\u0648\u0639 \u062F\u0631\u0622\u0645\u062F"),t(),e(14,"span",30),n(15,"payments"),t()(),e(16,"p",29),n(17),w(18,"number"),t()(),e(19,"div",25)(20,"div",26)(21,"p",27),n(22,"\u0645\u062C\u0645\u0648\u0639 \u0633\u0648\u062F"),t(),e(23,"span",30),n(24,"trending_up"),t()(),e(25,"p",29),n(26),w(27,"number"),t()(),e(28,"div",25)(29,"div",26)(30,"p",27),n(31,"\u0645\u06CC\u0627\u0646\u06AF\u06CC\u0646 \u0633\u0641\u0627\u0631\u0634"),t(),e(32,"span",28),n(33,"analytics"),t()(),e(34,"p",29),n(35),w(36,"number"),t()()()),o&2){let s=p();d(8),h(M(9,4,s.statistics.totalOrders)),d(9),v("",M(18,6,s.statistics.totalRevenue)," \u062A\u0648\u0645\u0627\u0646"),d(9),v("",M(27,8,s.statistics.totalProfit)," \u062A\u0648\u0645\u0627\u0646"),d(9),v("",ae(36,10,s.statistics.averageOrderValue,"1.0-0")," \u062A\u0648\u0645\u0627\u0646")}}function Hi(o,a){o&1&&(e(0,"div",31)(1,"span",32),n(2,"sync"),t()())}function Wi(o,a){o&1&&(e(0,"div",33)(1,"p",34),n(2,"\u0647\u06CC\u0686 \u0633\u0641\u0627\u0631\u0634\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."),t()())}function Ji(o,a){if(o&1&&(e(0,"option",23),n(1),t()),o&2){let s=a.$implicit;l("value",s.id),d(),v(" ",s.name," ")}}function Ki(o,a){o&1&&(e(0,"span",55),n(1," sync "),t())}function Qi(o,a){if(o&1){let s=E();e(0,"tr",43)(1,"td",44),n(2),t(),e(3,"td",45),n(4),w(5,"trim"),t(),e(6,"td",45),n(7),w(8,"number"),t(),e(9,"td",46)(10,"div",47)(11,"select",48),x("change",function(r){let u=C(s).$implicit,m=p(2);return S(m.quickUpdateStatus(u.id,r))}),c(12,Ji,2,2,"option",10),t(),c(13,Ki,2,0,"span",49),e(14,"span",50),n(15),t()()(),e(16,"td",45),n(17),w(18,"date"),t(),e(19,"td",51)(20,"a",52)(21,"span",53),n(22,"visibility"),t()(),e(23,"button",54),x("click",function(){let r=C(s).$implicit,u=p(2);return S(u.deleteOrder(r.id))}),e(24,"span",53),n(25,"delete"),t()()()()}if(o&2){let s=a.$implicit,i=p(2);d(2),v("#",s.id),d(2),h(M(5,12,((s.user==null?null:s.user.firstName)||"")+" "+((s.user==null?null:s.user.lastName)||""))),d(3),v("",M(8,14,s.totalAmount)," \u062A\u0648\u0645\u0627\u0646"),d(4),ue("opacity-50",i.isUpdatingStatus[s.id]),l("value",s.orderStatusId)("disabled",i.isUpdatingStatus[s.id]),d(),l("ngForOf",i.orderStatuses),d(),l("ngIf",i.isUpdatingStatus[s.id]),d(2),v(" ",i.getStatusIcon(s.orderStatusId)," "),d(2),h(ae(18,16,s.createdAt,"yyyy/MM/dd")),d(3),l("routerLink",Y(19,Bi,s.id))}}function Yi(o,a){if(o&1&&(e(0,"div",35)(1,"table",36)(2,"thead",37)(3,"tr",38)(4,"th",39),n(5,"\u06A9\u062F \u0633\u0641\u0627\u0631\u0634 "),t(),e(6,"th",39),n(7,"\u06A9\u0627\u0631\u0628\u0631"),t(),e(8,"th",39),n(9,"\u0645\u0628\u0644\u063A \u06A9\u0644"),t(),e(10,"th",39),n(11,"\u0648\u0636\u0639\u06CC\u062A"),t(),e(12,"th",39),n(13,"\u062A\u0627\u0631\u06CC\u062E"),t(),e(14,"th",40),n(15,"\u0639\u0645\u0644\u06CC\u0627\u062A "),t()()(),e(16,"tbody",41),c(17,Qi,26,21,"tr",42),t()()()),o&2){let s=p();d(17),l("ngForOf",s.orders)}}var Vt=(()=>{let a=class a{constructor(i,r,u){this.adminOrderService=i,this.adminOrderStatusService=r,this.notificationService=u,this.orders=[],this.orderStatuses=[],this.pagination=null,this.statistics=null,this.isLoading=!0,this.currentPage=1,this.isUpdatingStatus={},this.filterForm=new me({userId:new P(null),statusId:new P(null),fromDate:new P(null),toDate:new P(null)})}ngOnInit(){this.loadOrderStatuses(),this.loadOrders(),this.loadStatistics()}getStatusIcon(i){return this.orderStatuses.find(r=>r.id===i)?.icon||"help_outline"}loadOrderStatuses(){this.adminOrderStatusService.getOrderStatuses().subscribe({next:i=>{this.orderStatuses=i},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627\u06CC \u0633\u0641\u0627\u0631\u0634","error")}})}loadOrders(i=1){this.isLoading=!0,this.currentPage=i;let r={page:this.currentPage,pageSize:10},u=this.filterForm.value;u.userId&&(r.userId=u.userId),u.statusId&&(r.statusId=u.statusId),u.fromDate&&(r.fromDate=new Date(u.fromDate).toISOString()),u.toDate&&(r.toDate=new Date(u.toDate).toISOString()),this.adminOrderService.getOrders(r).subscribe({next:m=>{this.orders=m.items??[],this.pagination=m,this.isLoading=!1},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0633\u0641\u0627\u0631\u0634\u0627\u062A","error"),this.isLoading=!1}})}loadStatistics(){let i=this.filterForm.value,r=i.fromDate?new Date(i.fromDate):void 0,u=i.toDate?new Date(i.toDate):void 0;this.adminOrderService.getOrderStatistics(r,u).subscribe({next:m=>{this.statistics=m.generalStatistics},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0622\u0645\u0627\u0631","error")}})}applyFilters(){this.loadOrders(1),this.loadStatistics()}clearFilters(){this.filterForm.reset(),this.loadOrders(1),this.loadStatistics()}quickUpdateStatus(i,r){let u=r.target,m=Number(u.value),g=this.orders.find(O=>O.id===i);if(!g)return;this.isUpdatingStatus[i]=!0;let K=g.rowVersion;this.adminOrderService.updateOrderStatus(i,{orderStatusId:m,rowVersion:K}).pipe(V(()=>{this.isUpdatingStatus[i]=!1})).subscribe({next:()=>{this.notificationService.show("\u0648\u0636\u0639\u06CC\u062A \u0633\u0641\u0627\u0631\u0634 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0634\u062F","success"),this.orders.find(Le=>Le.id===i)&&this.adminOrderService.getOrderById(i).subscribe(Le=>{let ot=this.orders.findIndex(ni=>ni.id===i);ot>-1&&(this.orders[ot]=Le)})},error:O=>{this.notificationService.show(O?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0648\u0636\u0639\u06CC\u062A","error"),this.loadOrders(this.currentPage)}})}deleteOrder(i){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0633\u0641\u0627\u0631\u0634 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F")&&this.adminOrderService.deleteOrder(i).subscribe({next:()=>{this.notificationService.show("\u0633\u0641\u0627\u0631\u0634 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadOrders(this.currentPage),this.loadStatistics()},error:r=>{this.notificationService.show(r?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u0633\u0641\u0627\u0631\u0634","error")}})}};a.\u0275fac=function(r){return new(r||a)(f(qe),f(we),f(I))},a.\u0275cmp=y({type:a,selectors:[["app-admin-order-list"]],decls:34,vars:7,consts:[[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-foreground"],[1,"card","p-6","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4",3,"formGroup"],[1,"space-y-2"],["for","userId",1,"text-sm","font-medium","text-foreground"],["type","number","id","userId","formControlName","userId","placeholder","\u0634\u0646\u0627\u0633\u0647 \u06A9\u0627\u0631\u0628\u0631",1,"input"],["for","statusId",1,"text-sm","font-medium","text-foreground"],["id","statusId","formControlName","statusId",1,"input"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["for","fromDate",1,"text-sm","font-medium","text-foreground"],["type","date","id","fromDate","formControlName","fromDate",1,"input"],["for","toDate",1,"text-sm","font-medium","text-foreground"],["type","date","id","toDate","formControlName","toDate",1,"input"],[1,"flex","items-end","gap-2","col-span-full"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-outline",3,"click"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",4,"ngIf"],[1,"card","overflow-hidden"],["class","flex justify-center items-center p-10",4,"ngIf"],["class","text-center p-10",4,"ngIf"],["class","w-full overflow-x-auto",4,"ngIf"],[3,"value"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4","mb-6"],[1,"card","p-6"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-muted-foreground"],[1,"material-icons","text-primary"],[1,"mt-2","text-2xl","font-bold","text-foreground"],[1,"material-icons","text-success"],[1,"flex","justify-center","items-center","p-10"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"text-center","p-10"],[1,"text-muted-foreground"],[1,"w-full","overflow-x-auto"],[1,"w-full","caption-bottom","text-base","min-w-[700px]"],[1,"[&_tr]:border-b","[&_tr]:border-border"],[1,"border-b","border-border","transition-colors","hover:bg-muted"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground","whitespace-nowrap"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground","whitespace-nowrap","w-40"],[1,"[&_tr:last-child]:border-0"],["class","border-b border-border transition-colors hover:bg-muted/50",4,"ngFor","ngForOf"],[1,"border-b","border-border","transition-colors","hover:bg-muted/50"],[1,"p-4","align-middle","font-medium","text-foreground","whitespace-nowrap"],[1,"p-4","align-middle","text-foreground","whitespace-nowrap"],[1,"p-4","align-middle"],[1,"relative","w-40"],[1,"input-sm","border","border-input","rounded-md","px-2","py-1","w-full","appearance-none","pr-7","transition-opacity",3,"change","value","disabled"],["class","absolute left-2 top-1/2 -translate-y-1/2 material-icons animate-spin text-primary text-lg","aria-label","\u062F\u0631 \u062D\u0627\u0644 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC",4,"ngIf"],[1,"material-icons","text-muted-foreground","absolute","right-2","top-1/2","-translate-y-1/2","text-lg","pointer-events-none"],[1,"p-4","align-middle","space-x-2","space-x-reverse","whitespace-nowrap"],["title","\u0645\u0634\u0627\u0647\u062F\u0647 \u062C\u0632\u0626\u06CC\u0627\u062A",1,"btn","btn-ghost","btn-sm","btn-icon",3,"routerLink"],[1,"material-icons","text-base"],["title","\u062D\u0630\u0641",1,"btn","btn-ghost","btn-sm","btn-icon","text-destructive","hover:bg-destructive/10",3,"click"],["aria-label","\u062F\u0631 \u062D\u0627\u0644 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC",1,"absolute","left-2","top-1/2","-translate-y-1/2","material-icons","animate-spin","text-primary","text-lg"]],template:function(r,u){r&1&&(e(0,"div",0)(1,"h1",1),n(2,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u0633\u0641\u0627\u0631\u0634\u0627\u062A"),t()(),e(3,"div",2)(4,"form",3)(5,"div",4)(6,"label",5),n(7,"\u0634\u0646\u0627\u0633\u0647 \u06A9\u0627\u0631\u0628\u0631"),t(),b(8,"input",6),t(),e(9,"div",4)(10,"label",7),n(11,"\u0648\u0636\u0639\u06CC\u062A"),t(),e(12,"select",8)(13,"option",9),n(14,"\u0647\u0645\u0647 \u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627"),t(),c(15,qi,2,2,"option",10),t()(),e(16,"div",4)(17,"label",11),n(18,"\u0627\u0632 \u062A\u0627\u0631\u06CC\u062E"),t(),b(19,"input",12),t(),e(20,"div",4)(21,"label",13),n(22,"\u062A\u0627 \u062A\u0627\u0631\u06CC\u062E"),t(),b(23,"input",14),t(),e(24,"div",15)(25,"button",16),x("click",function(){return u.applyFilters()}),n(26,"\u0627\u0639\u0645\u0627\u0644 \u0641\u06CC\u0644\u062A\u0631"),t(),e(27,"button",17),x("click",function(){return u.clearFilters()}),n(28,"\u067E\u0627\u06A9 \u06A9\u0631\u062F\u0646"),t()()()(),c(29,zi,37,13,"div",18),e(30,"div",19),c(31,Hi,3,0,"div",20)(32,Wi,3,0,"div",21)(33,Yi,18,1,"div",22),t()),r&2&&(d(4),l("formGroup",u.filterForm),d(9),l("ngValue",null),d(2),l("ngForOf",u.orderStatuses),d(14),l("ngIf",u.statistics),d(2),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.orders.length===0),d(),l("ngIf",!u.isLoading&&u.orders.length>0))},dependencies:[A,k,_,D,N,J,z,ne,re,B,te,ie,T,q,H,W,Z,ce,Ot],encapsulation:2});let o=a;return o})();function Xi(o,a){o&1&&(e(0,"span",21),n(1,"sync"),t())}var Ze=(()=>{let a=class a{constructor(i,r,u,m){this.route=i,this.router=r,this.notificationService=u,this.adminOrderStatusService=m,this.isEditMode=!1,this.statusId=null,this.isSubmitting=!1,this.statusForm=new me({name:new P("",[F.required,F.maxLength(100)]),icon:new P("",[F.maxLength(50)])})}ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i&&(this.statusId=Number(i),this.isEditMode=!0,this.loadStatusData())}loadStatusData(){this.statusId&&this.adminOrderStatusService.getOrderStatus(this.statusId).subscribe({next:i=>{this.statusForm.patchValue(i)},error:i=>this.notificationService.show(i?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A","error")})}onSubmit(){if(this.statusForm.invalid||this.isSubmitting)return;this.isSubmitting=!0;let i=this.statusForm.value;(this.isEditMode&&this.statusId?this.adminOrderStatusService.updateOrderStatus(this.statusId,i):this.adminOrderStatusService.createOrderStatus(i)).pipe(V(()=>this.isSubmitting=!1)).subscribe({next:()=>{this.notificationService.show(`\u0648\u0636\u0639\u06CC\u062A \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A ${this.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"} \u0634\u062F`,"success"),this.router.navigate(["/admin/order-statuses"])},error:u=>this.notificationService.show(u?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062B\u0628\u062A \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A","error")})}};a.\u0275fac=function(r){return new(r||a)(f(ee),f(pe),f(I),f(we))},a.\u0275cmp=y({type:a,selectors:[["app-admin-order-status-form"]],decls:34,vars:6,consts:[[1,"max-w-md","mx-auto"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-foreground","tracking-tight"],["routerLink","/admin/order-statuses",1,"btn","btn-ghost","btn-sm","text-muted-foreground","hover:text-foreground"],[1,"material-icons","text-sm","me-1"],[1,"card","p-6","space-y-6","bg-card",3,"ngSubmit","formGroup"],[1,"space-y-4"],[1,"space-y-2"],["for","name",1,"text-sm","font-medium","text-foreground"],[1,"text-destructive"],["type","text","id","name","formControlName","name","placeholder","\u0645\u062B\u0627\u0644: \u062F\u0631 \u062D\u0627\u0644 \u067E\u0631\u062F\u0627\u0632\u0634",1,"input","w-full"],["for","icon",1,"text-sm","font-medium","text-foreground"],[1,"flex","gap-3"],["type","text","id","icon","formControlName","icon","placeholder","shopping_cart",1,"input","flex-1","ltr-input"],[1,"w-10","h-10","flex","items-center","justify-center","rounded-md","border","border-input","bg-muted/30","text-foreground"],[1,"material-icons"],[1,"text-xs","text-muted-foreground"],["href","https://fonts.google.com/icons","target","_blank",1,"text-primary","underline","hover:text-primary/80"],[1,"pt-6","border-t","border-border","flex","justify-end"],["type","submit",1,"btn","btn-primary","w-full","sm:w-auto",3,"disabled"],["class","material-icons animate-spin me-2 text-lg",4,"ngIf"],[1,"material-icons","animate-spin","me-2","text-lg"]],template:function(r,u){if(r&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),n(3),t(),e(4,"a",3)(5,"span",4),n(6,"arrow_forward"),t(),n(7," \u0628\u0627\u0632\u06AF\u0634\u062A "),t()(),e(8,"form",5),x("ngSubmit",function(){return u.onSubmit()}),e(9,"div",6)(10,"div",7)(11,"label",8),n(12," \u0646\u0627\u0645 \u0648\u0636\u0639\u06CC\u062A "),e(13,"span",9),n(14,"*"),t()(),b(15,"input",10),t(),e(16,"div",7)(17,"label",11),n(18,"\u0622\u06CC\u06A9\u0648\u0646 (Material Icons)"),t(),e(19,"div",12),b(20,"input",13),e(21,"div",14)(22,"span",15),n(23),t()()(),e(24,"p",16),n(25," \u0646\u0627\u0645 \u0622\u06CC\u06A9\u0648\u0646 \u0631\u0627 \u0627\u0632 "),e(26,"a",17),n(27,"Google Fonts"),t(),n(28," \u06A9\u067E\u06CC \u06A9\u0646\u06CC\u062F. "),t()()(),e(29,"div",18)(30,"button",19),c(31,Xi,2,0,"span",20),e(32,"span"),n(33),t()()()()()),r&2){let m;d(3),v("",u.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"," \u0648\u0636\u0639\u06CC\u062A \u0633\u0641\u0627\u0631\u0634"),d(5),l("formGroup",u.statusForm),d(15),h(((m=u.statusForm.get("icon"))==null?null:m.value)||"help_outline"),d(7),l("disabled",u.statusForm.invalid||u.isSubmitting),d(),l("ngIf",u.isSubmitting),d(2),h(u.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u0630\u062E\u06CC\u0631\u0647...":"\u0630\u062E\u06CC\u0631\u0647 \u0648\u0636\u0639\u06CC\u062A")}},dependencies:[A,_,J,z,B,T,q,H,W,D,N],encapsulation:2});let o=a;return o})();var Zi=o=>["/admin/order-statuses/edit",o];function en(o,a){o&1&&(e(0,"div",9)(1,"span",10),n(2,"sync"),t()())}function tn(o,a){o&1&&(e(0,"div",11)(1,"p",12),n(2,"\u0647\u06CC\u0686 \u0648\u0636\u0639\u06CC\u062A\u06CC \u062A\u0639\u0631\u06CC\u0641 \u0646\u0634\u062F\u0647 \u0627\u0633\u062A."),t()())}function nn(o,a){if(o&1){let s=E();e(0,"div",15)(1,"div",16)(2,"div",17)(3,"span",18),n(4),t()(),e(5,"div")(6,"h3",19),n(7),t(),e(8,"p",20),n(9),t()()(),e(10,"div",21)(11,"a",22)(12,"span",23),n(13,"edit"),t()(),e(14,"button",24),x("click",function(){let r=C(s).$implicit,u=p(2);return S(u.deleteStatus(r.id))}),e(15,"span",23),n(16,"delete"),t()()()()}if(o&2){let s=a.$implicit;d(4),h(s.icon||"circle"),d(3),h(s.name),d(2),v("",(s.orders==null?null:s.orders.length)||0," \u0633\u0641\u0627\u0631\u0634 \u0645\u0631\u062A\u0628\u0637"),d(2),l("routerLink",Y(4,Zi,s.id))}}function rn(o,a){if(o&1&&(e(0,"div",13),c(1,nn,17,6,"div",14),t()),o&2){let s=p();d(),l("ngForOf",s.statuses)}}var jt=(()=>{let a=class a{constructor(i,r){this.adminOrderStatusService=i,this.notificationService=r,this.statuses=[],this.isLoading=!0}ngOnInit(){this.loadStatuses()}loadStatuses(){this.isLoading=!0,this.adminOrderStatusService.getOrderStatuses().subscribe({next:i=>{this.statuses=i,this.isLoading=!1},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627","error"),this.isLoading=!1}})}deleteStatus(i){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0648\u0636\u0639\u06CC\u062A \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F")&&this.adminOrderStatusService.deleteOrderStatus(i).subscribe({next:()=>{this.notificationService.show("\u0648\u0636\u0639\u06CC\u062A \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadStatuses()},error:r=>this.notificationService.show(r?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u0648\u0636\u0639\u06CC\u062A","error")})}};a.\u0275fac=function(r){return new(r||a)(f(we),f(I))},a.\u0275cmp=y({type:a,selectors:[["app-admin-order-status-list"]],decls:12,vars:3,consts:[[1,"space-y-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-foreground","tracking-tight"],["routerLink","/admin/order-statuses/new",1,"btn","btn-primary","btn-sm","sm:btn-md"],[1,"material-icons","me-1","text-lg"],[1,"card","border","border-border","shadow-sm","overflow-hidden"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","text-center py-12",4,"ngIf"],["class","grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 p-4",4,"ngIf"],[1,"flex","justify-center","items-center","py-12"],[1,"material-icons","animate-spin","text-primary","text-3xl"],[1,"text-center","py-12"],[1,"text-muted-foreground"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-4","p-4"],["class","flex items-center justify-between p-4 rounded-lg border border-border bg-background hover:border-primary/50 transition-colors group",4,"ngFor","ngForOf"],[1,"flex","items-center","justify-between","p-4","rounded-lg","border","border-border","bg-background","hover:border-primary/50","transition-colors","group"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","rounded-full","bg-primary/10","text-primary","flex","items-center","justify-center"],[1,"material-icons"],[1,"font-semibold","text-foreground"],[1,"text-xs","text-muted-foreground","mt-0.5"],[1,"flex","gap-1","opacity-0","group-hover:opacity-100","transition-opacity"],[1,"btn","btn-icon","btn-ghost","btn-sm","text-muted-foreground","hover:text-primary",3,"routerLink"],[1,"material-icons","text-lg"],[1,"btn","btn-icon","btn-ghost","btn-sm","text-muted-foreground","hover:text-destructive",3,"click"]],template:function(r,u){r&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),n(3,"\u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627\u06CC \u0633\u0641\u0627\u0631\u0634"),t(),e(4,"a",3)(5,"span",4),n(6,"add"),t(),n(7," \u0648\u0636\u0639\u06CC\u062A \u062C\u062F\u06CC\u062F "),t()(),e(8,"div",5),c(9,en,3,0,"div",6)(10,tn,3,0,"div",7)(11,rn,2,1,"div",8),t()()),r&2&&(d(9),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.statuses.length===0),d(),l("ngIf",!u.isLoading&&u.statuses.length>0))},dependencies:[A,k,_,D,N],encapsulation:2});let o=a;return o})();var Fe=(()=>{let a=class a{constructor(i){this.http=i,this.productsUrl=`${j.API_URL}admin/products`}getProductById(i){return this.http.get(`${this.productsUrl}/${i}`)}createProduct(i){return this.http.post(this.productsUrl,i)}updateProduct(i,r){return this.http.put(`${this.productsUrl}/${i}`,r)}getAllAttributes(){return this.http.get(`${j.API_URL}Products/attributes`)}deleteProduct(i){return this.http.delete(`${this.productsUrl}/${i}`)}addStock(i){return this.http.post(`${this.productsUrl}/stock/add`,i)}removeStock(i){return this.http.post(`${this.productsUrl}/stock/remove`,i)}setDiscount(i,r){return this.http.put(`${this.productsUrl}/variants/${i}/discount`,r)}removeDiscount(i){return this.http.delete(`${this.productsUrl}/variants/${i}/discount`)}bulkUpdatePrices(i,r=!1){let u=new Q().set("isPurchasePrice",r.toString());return this.http.post(`${this.productsUrl}/bulk-update-prices`,i,{params:u})}getProductStatistics(){return this.http.get(`${this.productsUrl}/statistics`)}getLowStockProducts(i=5){let r=new Q().set("threshold",i.toString());return this.http.get(`${this.productsUrl}/low-stock`,{params:r})}};a.\u0275fac=function(r){return new(r||a)($(G))},a.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();function on(o,a){if(o&1&&(e(0,"option",20),n(1),t()),o&2){let s=a.$implicit;l("value",s.id),d(),ft(" ",(s.attributes.color==null?null:s.attributes.color.value)||"\u0631\u0646\u06AF"," / ",(s.attributes.size==null?null:s.attributes.size.value)||"\u0633\u0627\u06CC\u0632"," (\u0645\u0648\u062C\u0648\u062F\u06CC: ",s.stock,") ")}}function un(o,a){o&1&&(e(0,"div",21),n(1," \u062A\u0639\u062F\u0627\u062F \u0628\u0627\u06CC\u062F \u0639\u062F\u062F\u06CC \u0628\u0632\u0631\u06AF\u062A\u0631 \u0627\u0632 \u0635\u0641\u0631 \u0628\u0627\u0634\u062F "),t())}function an(o,a){o&1&&(e(0,"span",22),n(1,"sync"),t())}var Ut=(()=>{let a=class a{constructor(i,r){this.adminProductService=i,this.notificationService=r,this.stockUpdated=new Qe,this.cancelled=new Qe,this.isSubmitting=!1,this.stockForm=new me({variantId:new P(null,F.required),quantity:new P(1,[F.required,F.min(1),F.max(1e5)]),operation:new P("add",[F.required]),notes:new P("")})}ngOnInit(){this.setInitialVariant()}ngOnChanges(i){i.variants&&this.setInitialVariant()}setInitialVariant(){this.variants&&this.variants.length>0&&!this.stockForm.get("variantId")?.value&&this.stockForm.get("variantId")?.setValue(this.variants[0].id)}updateStock(){if(this.stockForm.invalid||!this.productId)return;this.isSubmitting=!0;let{variantId:i,quantity:r,operation:u,notes:m}=this.stockForm.value,g={variantId:i,quantity:r,notes:m};(u==="add"?this.adminProductService.addStock(g):this.adminProductService.removeStock(g)).pipe(V(()=>this.isSubmitting=!1)).subscribe({next:()=>{let O=u==="add"?"\u0645\u0648\u062C\u0648\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u0641\u0632\u0648\u062F\u0647 \u0634\u062F":"\u0645\u0648\u062C\u0648\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u06A9\u0633\u0631 \u0634\u062F";this.notificationService.show(O,"success"),this.stockUpdated.emit(),this.stockForm.reset({variantId:this.variants?.[0].id,operation:"add",quantity:1,notes:""})},error:O=>{this.notificationService.show(O?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0645\u0648\u062C\u0648\u062F\u06CC","error")}})}cancel(){this.cancelled.emit()}};a.\u0275fac=function(r){return new(r||a)(f(Fe),f(I))},a.\u0275cmp=y({type:a,selectors:[["app-stock-management"]],inputs:{productId:"productId",variants:"variants"},outputs:{stockUpdated:"stockUpdated",cancelled:"cancelled"},features:[lt],decls:32,vars:6,consts:[[1,"card","p-6"],[1,"text-lg","font-semibold","mb-4","text-foreground"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"space-y-2"],["for","variantStock",1,"text-sm","font-medium","text-foreground"],["id","variantStock","formControlName","variantId",1,"input"],[3,"value",4,"ngFor","ngForOf"],["for","quantity",1,"text-sm","font-medium","text-foreground"],["type","number","id","quantity","formControlName","quantity","min","1","placeholder","\u062A\u0639\u062F\u0627\u062F \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F",1,"input"],["class","text-xs text-destructive",4,"ngIf"],["for","operation",1,"text-sm","font-medium","text-foreground"],["id","operation","formControlName","operation",1,"input"],["value","add"],["value","remove"],["for","notes",1,"text-sm","font-medium","text-foreground"],["id","notes","formControlName","notes","placeholder","\u062A\u0648\u0636\u06CC\u062D\u0627\u062A...",1,"input","min-h-[80px]"],[1,"flex","gap-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","material-icons animate-spin me-2",4,"ngIf"],["type","button",1,"btn","btn-outline",3,"click"],[3,"value"],[1,"text-xs","text-destructive"],[1,"material-icons","animate-spin","me-2"]],template:function(r,u){if(r&1&&(e(0,"div",0)(1,"h2",1),n(2,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u0648\u062C\u0648\u062F\u06CC"),t(),e(3,"form",2),x("ngSubmit",function(){return u.updateStock()}),e(4,"div",3)(5,"label",4),n(6,"\u0627\u0646\u062A\u062E\u0627\u0628 \u062A\u0646\u0648\u0639"),t(),e(7,"select",5),c(8,on,2,4,"option",6),t()(),e(9,"div",3)(10,"label",7),n(11,"\u062A\u0639\u062F\u0627\u062F"),t(),b(12,"input",8),c(13,un,2,0,"div",9),t(),e(14,"div",3)(15,"label",10),n(16,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t(),e(17,"select",11)(18,"option",12),n(19,"\u0627\u0641\u0632\u0648\u062F\u0646 \u0628\u0647 \u0645\u0648\u062C\u0648\u062F\u06CC"),t(),e(20,"option",13),n(21,"\u06A9\u0633\u0631 \u0627\u0632 \u0645\u0648\u062C\u0648\u062F\u06CC"),t()()(),e(22,"div",3)(23,"label",14),n(24,"\u06CC\u0627\u062F\u062F\u0627\u0634\u062A (\u0627\u062E\u062A\u06CC\u0627\u0631\u06CC)"),t(),b(25,"textarea",15),t(),e(26,"div",16)(27,"button",17),c(28,an,2,0,"span",18),n(29),t(),e(30,"button",19),x("click",function(){return u.cancel()}),n(31," \u0627\u0646\u0635\u0631\u0627\u0641 "),t()()()()),r&2){let m;d(3),l("formGroup",u.stockForm),d(5),l("ngForOf",u.variants),d(5),l("ngIf",((m=u.stockForm.get("quantity"))==null?null:m.invalid)&&((m=u.stockForm.get("quantity"))==null?null:m.touched)),d(14),l("disabled",u.stockForm.invalid||u.isSubmitting),d(),l("ngIf",u.isSubmitting),d(),v(" ",u.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u0627\u0639\u0645\u0627\u0644...":"\u0627\u0639\u0645\u0627\u0644 \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A"," ")}},dependencies:[A,k,_,J,z,ne,re,B,te,ie,T,q,Ie,H,W],encapsulation:2});let o=a;return o})();var sn=()=>[];function dn(o,a){if(o&1&&(e(0,"option",46),n(1),t()),o&2){let s=a.$implicit;l("value",s.id),d(),h(s.name)}}function ln(o,a){o&1&&(e(0,"div",52),n(1," \u0627\u0635\u0644\u06CC "),t())}function mn(o,a){if(o&1){let s=E();e(0,"div",47),b(1,"img",48),e(2,"div",49)(3,"button",50),x("click",function(){let r=C(s).$implicit,u=p();return S(u.removeCurrentImage(r.id))}),e(4,"span",4),n(5,"close"),t()()(),c(6,ln,2,0,"div",51),t()}if(o&2){let s=a.$implicit,i=p();d(),l("src",i.getMediaUrl(s.url),le),d(5),l("ngIf",s.isPrimary)}}function cn(o,a){o&1&&(e(0,"div",59),n(1," \u0627\u0635\u0644\u06CC "),t())}function pn(o,a){if(o&1){let s=E();e(0,"div",47),b(1,"img",53),e(2,"div",54)(3,"div",55)(4,"button",50),x("click",function(){let r=C(s).$implicit,u=p();return S(u.removeNewImage(r.id))}),e(5,"span",4),n(6,"close"),t()()(),e(7,"button",56),x("click",function(){let r=C(s).$implicit,u=p();return S(u.setPrimaryNewImage(r.id))}),e(8,"span",4),n(9),t(),e(10,"span",57),n(11),t()()(),c(12,cn,2,0,"div",58),t()}if(o&2){let s=a.$implicit,i=p();d(),l("src",s.url,le),d(6),ue("bg-primary",i.primaryNewFileId===s.id),d(2),h(i.primaryNewFileId===s.id?"star":"star_border"),d(2),h(i.primaryNewFileId===s.id?"\u0627\u0635\u0644\u06CC":"\u0627\u0646\u062A\u062E\u0627\u0628 \u0627\u0635\u0644\u06CC"),d(),l("ngIf",i.primaryNewFileId===s.id)}}function fn(o,a){if(o&1){let s=E();e(0,"button",60),x("click",function(){C(s);let r=p();return S(r.openStockModal())}),e(1,"span",38),n(2,"inventory_2"),t(),n(3," \u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u0648\u062C\u0648\u062F\u06CC "),t()}}function gn(o,a){if(o&1){let s=E();e(0,"button",78),x("click",function(){C(s);let r=p().index,u=p();return S(u.removeVariant(r))}),e(1,"span",79),n(2,"delete"),t()()}}function hn(o,a){if(o&1&&(e(0,"option",46),n(1),t()),o&2){let s=a.$implicit;l("value",s.id),d(),h(s.displayValue)}}function xn(o,a){if(o&1&&(e(0,"div",64)(1,"label",80),n(2),e(3,"span",13),n(4,"*"),t()(),e(5,"select",81)(6,"option",82),n(7,"\u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F"),t(),c(8,hn,2,2,"option",21),t()()),o&2){let s=a.$implicit;d(2),v("",s.displayName," "),d(3),l("formControlName","attr_"+s.id),d(),l("ngValue",null),d(2),l("ngForOf",s.values)}}function vn(o,a){if(o&1&&(e(0,"div",61),c(1,gn,3,0,"button",62),e(2,"div",63)(3,"div",64)(4,"label",65),n(5,"\u06A9\u062F \u062A\u0646\u0648\u0639 (SKU)"),t(),b(6,"input",66),t(),e(7,"div",64)(8,"label",65),n(9,"\u0642\u06CC\u0645\u062A \u062E\u0631\u06CC\u062F (\u062A\u0648\u0645\u0627\u0646)"),t(),b(10,"input",67),t(),e(11,"div",64)(12,"label",65),n(13,"\u0642\u06CC\u0645\u062A \u0627\u0635\u0644\u06CC (\u062A\u0648\u0645\u0627\u0646)"),t(),b(14,"input",68),t(),e(15,"div",64)(16,"label",65),n(17,"\u0642\u06CC\u0645\u062A \u0641\u0631\u0648\u0634 (\u062A\u0648\u0645\u0627\u0646)"),t(),b(18,"input",69),t()(),e(19,"div",70)(20,"div",64)(21,"label",65),n(22,"\u0645\u0648\u062C\u0648\u062F\u06CC"),t(),b(23,"input",71),t(),c(24,xn,9,4,"div",72),e(25,"div",73)(26,"label",74),b(27,"input",75),e(28,"span",76),n(29,"\u0645\u0648\u062C\u0648\u062F\u06CC \u0646\u0627\u0645\u062D\u062F\u0648\u062F"),t()(),e(30,"label",74),b(31,"input",77),e(32,"span",76),n(33,"\u062A\u0646\u0648\u0639 \u0641\u0639\u0627\u0644 \u0628\u0627\u0634\u062F"),t()()()()()),o&2){let s,i,r=a.$implicit,u=a.index,m=p();l("formGroupName",u),d(),l("ngIf",m.variants.length>1),d(3),l("for","sku"+u),d(2),l("id","sku"+u),d(2),l("for","purchasePrice"+u),d(2),l("id","purchasePrice"+u),d(2),l("for","originalPrice"+u),d(2),l("id","originalPrice"+u),d(2),l("for","sellingPrice"+u),d(2),l("id","sellingPrice"+u),d(3),l("for","stock"+u),d(2),ue("opacity-50",m.isEditMode||((s=r.get("isUnlimited"))==null?null:s.value)),l("id","stock"+u)("readonly",m.isEditMode||((i=r.get("isUnlimited"))==null?null:i.value)),d(),l("ngForOf",m.attributes)}}function bn(o,a){o&1&&(e(0,"span",83),n(1,"sync"),t())}function Cn(o,a){if(o&1){let s=E();e(0,"div",84)(1,"div",85)(2,"div",86)(3,"h3",87),n(4,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u0648\u062C\u0648\u062F\u06CC"),t(),e(5,"button",88),x("click",function(){C(s);let r=p();return S(r.closeStockModal())}),e(6,"span",89),n(7,"close"),t()()(),e(8,"div",90)(9,"app-stock-management",91),x("stockUpdated",function(){C(s);let r=p();return S(r.onStockUpdated())})("cancelled",function(){C(s);let r=p();return S(r.closeStockModal())}),t()()()()}if(o&2){let s=p();d(9),l("productId",s.productId)("variants",(s.product==null?null:s.product.variants)||gt(2,sn))}}var et=(()=>{let a=class a{constructor(i,r,u,m,g,K,O,Le){this.fb=i,this.route=r,this.router=u,this.adminProductService=m,this.categoryGroupService=g,this.notificationService=K,this.mediaService=O,this.cdr=Le,this.isEditMode=!1,this.productId=null,this.isSubmitting=!1,this.categoryGroups=[],this.attributes=[],this.destroy$=new at,this.product=null,this.currentImages=[],this.imagePreviews=[],this.newlyAddedFiles=[],this.deletedMediaIds=[],this.showStockModal=!1,this.primaryNewFileId=null,this.productForm=this.fb.group({name:["",[F.required,F.maxLength(200)]],sku:["",[F.maxLength(100)]],description:[""],categoryGroupId:[null,F.required],isActive:[!0],rowVersion:[null],variants:this.fb.array([])})}get variants(){return this.productForm.get("variants")}ngOnInit(){Pe({categoryGroups:this.categoryGroupService.getCategoryGroups(void 0,void 0,1,500).pipe(st(i=>i.items??[]),Ae(()=>_e([]))),attributes:this.adminProductService.getAllAttributes().pipe(Ae(()=>_e([])))}).subscribe({next:({categoryGroups:i,attributes:r})=>{this.categoryGroups=i,this.attributes=r,this.cdr.markForCheck();let u=this.route.snapshot.paramMap.get("id");u?(this.isEditMode=!0,this.productId=Number(u),this.loadProductData()):this.addVariant()},error:()=>this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0627\u0648\u0644\u06CC\u0647","error")})}loadProductData(){this.productId&&this.adminProductService.getProductById(this.productId).subscribe({next:i=>{this.product=i,this.productForm.patchValue(ut(Ne({},i),{sku:i.sku,rowVersion:i.rowVersion?i.rowVersion:null})),this.currentImages=[...i.images],this.deletedMediaIds=[],this.newlyAddedFiles=[],this.imagePreviews=[],this.primaryNewFileId=null,this.variants.clear(),i.variants.forEach(r=>{let u=this.createVariantGroup(r);this.variants.push(u)}),this.cdr.markForCheck()},error:()=>this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062D\u0635\u0648\u0644","error")})}createVariantGroup(i){let r={id:[i?.id],sku:[i?.sku||""],purchasePrice:[i?.purchasePrice||0,[F.required,F.min(0)]],originalPrice:[i?.originalPrice||0,[F.required,F.min(0)]],sellingPrice:[i?.sellingPrice||0,[F.required,F.min(0)]],stock:[{value:i?.stock||0,disabled:this.isEditMode},[F.required,F.min(0)]],isUnlimited:[i?.isUnlimited||!1],isActive:[i?.isActive??!0]};this.attributes.forEach(K=>{let O=i?.attributes?i.attributes[K.name.toLowerCase()]:null;r[`attr_${K.id}`]=new P(O?.id||null,[F.required])});let u=this.fb.group(r),m=u.get("isUnlimited"),g=u.get("stock");return m&&g&&(m.valueChanges.pipe(dt(this.destroy$)).subscribe(K=>{K?(g.setValue(0),g.disable()):this.isEditMode||g.enable()}),m.value&&g.disable()),u}addVariant(){this.variants.push(this.createVariantGroup()),this.cdr.markForCheck()}removeVariant(i){this.variants.length>1?this.variants.removeAt(i):this.notificationService.show("\u0645\u062D\u0635\u0648\u0644 \u0628\u0627\u06CC\u062F \u062D\u062F\u0627\u0642\u0644 \u06CC\u06A9 \u062A\u0646\u0648\u0639 \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F","info")}onFileChange(i){let r=i.target;r.files&&(Array.from(r.files).forEach(m=>{let g=this.generateUniqueId();this.newlyAddedFiles.push({file:m,id:g});let K=new FileReader;K.onload=O=>{this.imagePreviews.push({id:g,url:O.target.result}),this.currentImages.length===0&&!this.primaryNewFileId&&(this.primaryNewFileId=g),this.cdr.markForCheck()},K.readAsDataURL(m)}),r.value="")}setPrimaryNewImage(i){this.primaryNewFileId=i}generateUniqueId(){return`${Date.now()}-${Math.random().toString(36).substring(2,9)}`}removeNewImage(i){this.newlyAddedFiles=this.newlyAddedFiles.filter(r=>r.id!==i),this.imagePreviews=this.imagePreviews.filter(r=>r.id!==i),this.primaryNewFileId===i&&(this.primaryNewFileId=this.newlyAddedFiles.length>0?this.newlyAddedFiles[0].id:null)}removeCurrentImage(i){this.currentImages=this.currentImages.filter(r=>r.id!==i),this.deletedMediaIds.push(i)}getMediaUrl(i){return this.mediaService.getMediaUrl(i)}onSubmit(){if(this.productForm.invalid){this.productForm.markAllAsTouched(),this.notificationService.show("\u0644\u0637\u0641\u0627 \u062A\u0645\u0627\u0645 \u0641\u06CC\u0644\u062F\u0647\u0627\u06CC \u0627\u0644\u0632\u0627\u0645\u06CC \u0631\u0627 \u067E\u0631 \u06A9\u0646\u06CC\u062F","error");return}this.isSubmitting=!0;let i=this.productForm.getRawValue(),r=i.variants.map(g=>{let K=this.attributes.map(O=>g[`attr_${O.id}`]).filter(O=>O!==null);return{id:g.id,sku:g.sku,purchasePrice:g.purchasePrice,originalPrice:g.originalPrice,sellingPrice:g.sellingPrice,stock:g.isUnlimited?0:g.stock,isUnlimited:g.isUnlimited,isActive:g.isActive,attributeValueIds:K}}),u=new FormData;if(u.append("name",i.name),i.sku&&u.append("sku",i.sku),i.description&&u.append("description",i.description),u.append("categoryGroupId",i.categoryGroupId),u.append("isActive",i.isActive.toString()),u.append("variantsJson",JSON.stringify(r)),this.isEditMode&&i.rowVersion&&u.append("rowVersion",i.rowVersion),this.newlyAddedFiles.forEach(g=>{u.append("images",g.file,g.file.name)}),this.primaryNewFileId){let g=this.newlyAddedFiles.findIndex(K=>K.id===this.primaryNewFileId);g>-1&&u.append("primaryImageIndex",g.toString())}this.deletedMediaIds.length>0&&this.deletedMediaIds.forEach(g=>{u.append("deletedMediaIds",g.toString())}),(this.isEditMode&&this.productId?this.adminProductService.updateProduct(this.productId,u):this.adminProductService.createProduct(u)).pipe(V(()=>this.isSubmitting=!1)).subscribe({next:()=>{this.notificationService.show(`\u0645\u062D\u0635\u0648\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A ${this.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"} \u0634\u062F`,"success"),this.router.navigate(["/admin/products"])},error:g=>{g?.status===409?this.notificationService.show("\u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0645\u062D\u0635\u0648\u0644 \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627 \u0635\u0641\u062D\u0647 \u0631\u0627 \u0631\u0641\u0631\u0634 \u06A9\u0646\u06CC\u062F.","error"):this.notificationService.show(g?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0630\u062E\u06CC\u0631\u0647 \u0645\u062D\u0635\u0648\u0644","error")}})}openStockModal(){this.showStockModal=!0}closeStockModal(){this.showStockModal=!1}onStockUpdated(){this.closeStockModal(),this.loadProductData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};a.\u0275fac=function(r){return new(r||a)(f(ye),f(ee),f(pe),f(Fe),f(Ge),f(I),f(Ee),f(bt))},a.\u0275cmp=y({type:a,selectors:[["app-admin-product-form"]],decls:81,vars:14,consts:[[1,"max-w-5xl","mx-auto","space-y-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-foreground","tracking-tight"],["routerLink","/admin/products",1,"btn","btn-outline","btn-sm","gap-2"],[1,"material-icons","text-sm"],[1,"space-y-8",3,"ngSubmit","formGroup"],[1,"card","p-6","space-y-6"],[1,"border-b","border-border","pb-4","mb-4"],[1,"text-lg","font-semibold","text-foreground","flex","items-center","gap-2"],[1,"material-icons","text-primary"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"space-y-2","md:col-span-2"],["for","name",1,"text-sm","font-medium","text-foreground"],[1,"text-destructive"],["type","text","id","name","formControlName","name",1,"input","w-full"],[1,"space-y-2"],["for","sku",1,"text-sm","font-medium","text-foreground"],["type","text","id","sku","formControlName","sku",1,"input","w-full"],["for","categoryGroupId",1,"text-sm","font-medium","text-foreground"],["id","categoryGroupId","formControlName","categoryGroupId",1,"input","w-full"],["disabled","",3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],[1,"space-y-2","md:col-span-2","flex","items-end","pb-2"],[1,"inline-flex","items-center","cursor-pointer","gap-3"],["type","checkbox","formControlName","isActive",1,"checkbox","h-5","w-5","rounded","border-input","text-primary","focus:ring-primary"],[1,"text-sm","font-medium","text-foreground"],["for","description",1,"text-sm","font-medium","text-foreground"],["id","description","formControlName","description","rows","4",1,"input","w-full","min-h-[120px]","resize-y"],[1,"grid","grid-cols-2","sm:grid-cols-3","md:grid-cols-4","lg:grid-cols-5","gap-4"],[1,"aspect-square","rounded-lg","border-2","border-dashed","border-border","hover:bg-muted/50","hover:border-primary/50","transition-colors","cursor-pointer","flex","flex-col","items-center","justify-center","text-muted-foreground","hover:text-primary"],[1,"material-icons","text-3xl","mb-2"],[1,"text-xs","font-medium"],["type","file","multiple","","accept","image/*",1,"hidden",3,"change"],["class","group relative aspect-square rounded-lg border border-border overflow-hidden bg-background",4,"ngFor","ngForOf"],[1,"flex","flex-col","sm:flex-row","sm:items-center","justify-between","gap-4","border-b","border-border","pb-4","mb-4"],[1,"flex","gap-2"],["type","button","class","btn btn-secondary btn-sm",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline","btn-sm",3,"click"],[1,"material-icons","text-sm","me-2"],["formArrayName","variants",1,"space-y-4"],["class","relative rounded-xl border border-border bg-muted/30 p-4 sm:p-6 transition-all hover:border-primary/50",3,"formGroupName",4,"ngFor","ngForOf"],[1,"sticky","bottom-0","z-10","bg-background/80","backdrop-blur-md","border-t","border-border","p-4","-mx-4","sm:mx-0","sm:rounded-t-xl","flex","justify-end","gap-4","shadow-lg"],["routerLink","/admin/products",1,"btn","btn-outline","min-w-[100px]"],["type","submit",1,"btn","btn-primary","min-w-[160px]",3,"disabled"],["class","material-icons animate-spin me-2 text-lg",4,"ngIf"],["class","fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fade-in",4,"ngIf"],[3,"value"],[1,"group","relative","aspect-square","rounded-lg","border","border-border","overflow-hidden","bg-background"],["alt","Product",1,"w-full","h-full","object-cover",3,"src"],[1,"absolute","inset-0","bg-black/50","opacity-0","group-hover:opacity-100","transition-opacity","flex","items-start","justify-end","p-2"],["type","button",1,"btn","btn-icon","btn-xs","btn-destructive","rounded-full",3,"click"],["class","absolute bottom-2 right-2 bg-primary text-primary-foreground text-[10px] px-2 py-0.5 rounded-full font-bold shadow-sm",4,"ngIf"],[1,"absolute","bottom-2","right-2","bg-primary","text-primary-foreground","text-[10px]","px-2","py-0.5","rounded-full","font-bold","shadow-sm"],["alt","New Upload",1,"w-full","h-full","object-cover",3,"src"],[1,"absolute","inset-0","bg-black/50","opacity-0","group-hover:opacity-100","transition-opacity","flex","flex-col","justify-between","p-2"],[1,"flex","justify-end"],["type","button",1,"self-start","btn","btn-xs","gap-1","bg-white/20","hover:bg-white/40","text-white","backdrop-blur-sm","border-none",3,"click"],[1,"text-[10px]"],["class","absolute bottom-2 right-2 bg-primary text-primary-foreground text-[10px] px-2 py-0.5 rounded-full font-bold shadow-sm pointer-events-none",4,"ngIf"],[1,"absolute","bottom-2","right-2","bg-primary","text-primary-foreground","text-[10px]","px-2","py-0.5","rounded-full","font-bold","shadow-sm","pointer-events-none"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],[1,"relative","rounded-xl","border","border-border","bg-muted/30","p-4","sm:p-6","transition-all","hover:border-primary/50",3,"formGroupName"],["type","button","class","absolute top-4 left-4 btn btn-icon btn-xs btn-ghost text-muted-foreground hover:text-destructive transition-colors",3,"click",4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","mb-6"],[1,"space-y-1.5"],[1,"text-xs","font-medium","text-muted-foreground",3,"for"],["type","text","formControlName","sku",1,"input","w-full","bg-background",3,"id"],["type","number","formControlName","purchasePrice",1,"input","w-full","bg-background",3,"id"],["type","number","formControlName","originalPrice",1,"input","w-full","bg-background",3,"id"],["type","number","formControlName","sellingPrice",1,"input","w-full","bg-background",3,"id"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-4","border-t","border-border/50","pt-4"],["type","number","formControlName","stock",1,"input","w-full","bg-background",3,"id","readonly"],["class","space-y-1.5",4,"ngFor","ngForOf"],[1,"flex","flex-col","justify-end","gap-2"],[1,"inline-flex","items-center","gap-2","cursor-pointer"],["type","checkbox","formControlName","isUnlimited",1,"checkbox","rounded","border-input","text-primary","focus:ring-primary"],[1,"text-xs","font-medium","text-foreground"],["type","checkbox","formControlName","isActive",1,"checkbox","rounded","border-input","text-primary","focus:ring-primary"],["type","button",1,"absolute","top-4","left-4","btn","btn-icon","btn-xs","btn-ghost","text-muted-foreground","hover:text-destructive","transition-colors",3,"click"],[1,"material-icons","text-lg"],[1,"text-xs","font-medium","text-muted-foreground"],[1,"input","w-full","bg-background",3,"formControlName"],[3,"ngValue"],[1,"material-icons","animate-spin","me-2","text-lg"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/60","backdrop-blur-sm","p-4","animate-fade-in"],[1,"bg-card","rounded-xl","shadow-2xl","w-full","max-w-md","relative","overflow-hidden","border","border-border"],[1,"flex","items-center","justify-between","p-4","border-b","border-border","bg-muted/30"],[1,"font-bold","text-lg"],[1,"btn","btn-ghost","btn-icon","btn-sm","rounded-full","hover:bg-destructive/10","hover:text-destructive",3,"click"],[1,"material-icons"],[1,"p-4"],[3,"stockUpdated","cancelled","productId","variants"]],template:function(r,u){if(r&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),n(3),t(),e(4,"a",3)(5,"span",4),n(6,"arrow_forward"),t(),n(7," \u0628\u0627\u0632\u06AF\u0634\u062A \u0628\u0647 \u0644\u06CC\u0633\u062A "),t()(),e(8,"form",5),x("ngSubmit",function(){return u.onSubmit()}),e(9,"div",6)(10,"div",7)(11,"h2",8)(12,"span",9),n(13,"info"),t(),n(14," \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u067E\u0627\u06CC\u0647 "),t()(),e(15,"div",10)(16,"div",11)(17,"label",12),n(18,"\u0646\u0627\u0645 \u0645\u062D\u0635\u0648\u0644 "),e(19,"span",13),n(20,"*"),t()(),b(21,"input",14),t(),e(22,"div",15)(23,"label",16),n(24,"\u06A9\u062F \u0645\u062D\u0635\u0648\u0644 (SKU)"),t(),b(25,"input",17),t(),e(26,"div",15)(27,"label",18),n(28,"\u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC "),e(29,"span",13),n(30,"*"),t()(),e(31,"select",19)(32,"option",20),n(33,"\u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F"),t(),c(34,dn,2,2,"option",21),t()(),e(35,"div",22)(36,"label",23),b(37,"input",24),e(38,"span",25),n(39,"\u0645\u062D\u0635\u0648\u0644 \u0641\u0639\u0627\u0644 \u0648 \u0642\u0627\u0628\u0644 \u0646\u0645\u0627\u06CC\u0634 \u0628\u0627\u0634\u062F"),t()()()(),e(40,"div",15)(41,"label",26),n(42,"\u062A\u0648\u0636\u06CC\u062D\u0627\u062A \u0645\u062D\u0635\u0648\u0644"),t(),b(43,"textarea",27),t()(),e(44,"div",6)(45,"div",7)(46,"h2",8)(47,"span",9),n(48,"image"),t(),n(49," \u062A\u0635\u0627\u0648\u06CC\u0631 \u0645\u062D\u0635\u0648\u0644 "),t()(),e(50,"div",28)(51,"label",29)(52,"span",30),n(53,"add_a_photo"),t(),e(54,"span",31),n(55,"\u0627\u0641\u0632\u0648\u062F\u0646 \u062A\u0635\u0648\u06CC\u0631"),t(),e(56,"input",32),x("change",function(g){return u.onFileChange(g)}),t()(),c(57,mn,7,2,"div",33)(58,pn,13,6,"div",33),t()(),e(59,"div",6)(60,"div",34)(61,"h2",8)(62,"span",9),n(63,"style"),t(),n(64," \u062A\u0646\u0648\u0639 \u0648 \u0642\u06CC\u0645\u062A\u200C\u06AF\u0630\u0627\u0631\u06CC "),t(),e(65,"div",35),c(66,fn,4,0,"button",36),e(67,"button",37),x("click",function(){return u.addVariant()}),e(68,"span",38),n(69,"add"),t(),n(70," \u0627\u0641\u0632\u0648\u062F\u0646 \u062A\u0646\u0648\u0639 "),t()()(),e(71,"div",39),c(72,vn,34,16,"div",40),t()(),e(73,"div",41)(74,"a",42),n(75,"\u0627\u0646\u0635\u0631\u0627\u0641"),t(),e(76,"button",43),c(77,bn,2,0,"span",44),e(78,"span"),n(79),t()()()()(),c(80,Cn,10,3,"div",45)),r&2){let m;d(3),h(u.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634 \u0645\u062D\u0635\u0648\u0644":"\u0627\u0641\u0632\u0648\u062F\u0646 \u0645\u062D\u0635\u0648\u0644 \u062C\u062F\u06CC\u062F"),d(5),l("formGroup",u.productForm),d(13),ue("input-error",((m=u.productForm.get("name"))==null?null:m.invalid)&&((m=u.productForm.get("name"))==null?null:m.touched)),d(11),l("ngValue",null),d(2),l("ngForOf",u.categoryGroups),d(23),l("ngForOf",u.currentImages),d(),l("ngForOf",u.imagePreviews),d(8),l("ngIf",u.isEditMode),d(6),l("ngForOf",u.variants.controls),d(4),l("disabled",u.productForm.invalid||u.isSubmitting),d(),l("ngIf",u.isSubmitting),d(2),h(u.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u062B\u0628\u062A...":"\u0630\u062E\u06CC\u0631\u0647 \u0646\u0647\u0627\u06CC\u06CC"),d(),l("ngIf",u.showStockModal)}},dependencies:[A,k,_,J,z,ne,re,B,te,xe,ie,T,q,H,W,Ue,$e,D,N,Ut],encapsulation:2});let o=a;return o})();var yn=o=>["/admin/products/edit",o],_n=(o,a)=>({"bg-destructive/10 text-destructive":o,"bg-success/10 text-success":a});function An(o,a){o&1&&(e(0,"div",12)(1,"span",13),n(2,"sync"),t()())}function wn(o,a){o&1&&(e(0,"div",14)(1,"span",15),n(2,"inventory_2"),t(),e(3,"p",16),n(4,"\u0647\u06CC\u0686 \u0645\u062D\u0635\u0648\u0644\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F"),t(),e(5,"a",17),n(6,"\u062B\u0628\u062A \u0627\u0648\u0644\u06CC\u0646 \u0645\u062D\u0635\u0648\u0644"),t()())}function Fn(o,a){if(o&1&&(ct(0),e(1,"span",44),n(2),w(3,"number"),t(),pt()),o&2){let s=p().$implicit,i=p(2);d(),l("ngClass",ht(4,_n,i.getTotalStock(s)===0,i.getTotalStock(s)>0)),d(),v(" ",M(3,2,i.getTotalStock(s))," ")}}function En(o,a){o&1&&(e(0,"span",45)(1,"span",46),n(2,"all_inclusive"),t(),n(3," \u0646\u0627\u0645\u062D\u062F\u0648\u062F "),t())}function In(o,a){if(o&1){let s=E();e(0,"tr",28)(1,"td",29)(2,"div",30),b(3,"img",31),t()(),e(4,"td",29)(5,"div",32),n(6),t(),e(7,"div",33),n(8),t()(),e(9,"td",34)(10,"span",35),n(11),t()(),e(12,"td",36),n(13),w(14,"number"),e(15,"span",37),n(16,"\u062A\u0648\u0645\u0627\u0646"),t()(),e(17,"td",38),c(18,Fn,4,7,"ng-container",39)(19,En,4,0,"ng-template",null,0,vt),t(),e(21,"td",29)(22,"div",40)(23,"a",41)(24,"span",42),n(25,"edit"),t()(),e(26,"button",43),x("click",function(){let r=C(s).$implicit,u=p(2);return S(u.deleteProduct(r.id))}),e(27,"span",42),n(28,"delete"),t()()()()()}if(o&2){let s=a.$implicit,i=Te(20),r=p(2);d(3),l("src",(s.images==null||s.images[0]==null?null:s.images[0].url)||"https://via.placeholder.com/48",le)("alt",s.name),d(3),h(s.name),d(2),h(s.categoryGroup==null?null:s.categoryGroup.categoryName),d(3),v(" ",(s.categoryGroup==null?null:s.categoryGroup.categoryName)||"-"," "),d(2),v(" ",M(14,9,s.minPrice)," "),d(5),l("ngIf",r.getTotalStock(s)!==r.Infinity)("ngIfElse",i),d(5),l("routerLink",Y(11,yn,s.id))}}function kn(o,a){if(o&1&&(e(0,"div",18)(1,"table",19)(2,"thead",20)(3,"tr")(4,"th",21),n(5,"\u062A\u0635\u0648\u06CC\u0631"),t(),e(6,"th",22),n(7,"\u0646\u0627\u0645 \u0645\u062D\u0635\u0648\u0644"),t(),e(8,"th",23),n(9,"\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),t(),e(10,"th",22),n(11,"\u0642\u06CC\u0645\u062A \u067E\u0627\u06CC\u0647"),t(),e(12,"th",24),n(13,"\u0645\u0648\u062C\u0648\u062F\u06CC \u06A9\u0644"),t(),e(14,"th",25),n(15,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t()()(),e(16,"tbody",26),c(17,In,29,13,"tr",27),t()()()),o&2){let s=p();d(17),l("ngForOf",s.products)}}function Dn(o,a){if(o&1){let s=E();e(0,"div",47)(1,"nav",48)(2,"button",49),x("click",function(){C(s);let r=p();return S(r.loadProducts(r.currentPage-1))}),e(3,"span",50),n(4,"chevron_right"),t()(),e(5,"span",51),n(6),t(),e(7,"button",52),x("click",function(){C(s);let r=p();return S(r.loadProducts(r.currentPage+1))}),e(8,"span",50),n(9,"chevron_left"),t()()()()}if(o&2){let s=p();d(2),l("disabled",s.currentPage===1),d(4),Se("\u0635\u0641\u062D\u0647 ",s.currentPage," \u0627\u0632 ",s.pagination.totalPages),d(),l("disabled",s.currentPage===s.pagination.totalPages)}}var $t=(()=>{let a=class a{constructor(i,r,u){this.productService=i,this.adminProductService=r,this.notificationService=u,this.products=[],this.pagination=null,this.isLoading=!0,this.currentPage=1,this.Infinity=1/0}ngOnInit(){this.loadProducts()}getTotalStock(i){return i.variants.some(u=>u.isUnlimited)?1/0:i.variants.reduce((u,m)=>u+m.stock,0)}loadProducts(i=1){this.isLoading=!0,this.currentPage=i,this.productService.getProducts({page:this.currentPage,pageSize:10,sortBy:"Newest"}).subscribe({next:r=>{this.products=r.items??[],this.pagination=r,this.isLoading=!1},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062D\u0635\u0648\u0644\u0627\u062A","error"),this.isLoading=!1}})}deleteProduct(i){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0645\u062D\u0635\u0648\u0644 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F \u0627\u06CC\u0646 \u0639\u0645\u0644 \u062A\u0645\u0627\u0645 \u062A\u0646\u0648\u0639\u200C\u0647\u0627\u06CC \u0622\u0646 \u0631\u0627 \u0646\u06CC\u0632 \u062D\u0630\u0641 \u0645\u06CC\u200C\u06A9\u0646\u062F.")&&this.adminProductService.deleteProduct(i).subscribe({next:r=>{this.notificationService.show(r.message||"\u0645\u062D\u0635\u0648\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadProducts(this.currentPage)},error:r=>this.notificationService.show(r?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u0645\u062D\u0635\u0648\u0644","error")})}};a.\u0275fac=function(r){return new(r||a)(f(je),f(Fe),f(I))},a.\u0275cmp=y({type:a,selectors:[["app-admin-product-list"]],decls:16,vars:4,consts:[["unlimited",""],[1,"space-y-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","justify-between","gap-4"],[1,"text-2xl","font-bold","text-foreground","tracking-tight"],[1,"text-sm","text-muted-foreground","mt-1"],["routerLink","/admin/products/new",1,"btn","btn-primary"],[1,"material-icons","me-2"],[1,"card","border","border-border","shadow-sm","overflow-hidden"],["class","flex justify-center items-center py-20",4,"ngIf"],["class","flex flex-col items-center justify-center py-16 text-center",4,"ngIf"],["class","w-full overflow-x-auto",4,"ngIf"],["class","flex justify-center mt-6",4,"ngIf"],[1,"flex","justify-center","items-center","py-20"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"flex","flex-col","items-center","justify-center","py-16","text-center"],[1,"material-icons","text-5xl","text-muted-foreground","mb-4"],[1,"text-lg","font-medium","text-foreground"],["routerLink","/admin/products/new",1,"btn","btn-link","mt-2"],[1,"w-full","overflow-x-auto"],[1,"w-full","caption-bottom","text-sm","text-right"],[1,"bg-muted/50","[&_tr]:border-b","[&_tr]:border-border"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground","w-[80px]"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground","hidden","md:table-cell"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground","text-center"],[1,"h-12","px-4","align-middle","font-medium","text-muted-foreground","text-end","w-[100px]"],[1,"[&_tr:last-child]:border-0"],["class","border-b border-border transition-colors hover:bg-muted/20",4,"ngFor","ngForOf"],[1,"border-b","border-border","transition-colors","hover:bg-muted/20"],[1,"p-4","align-middle"],[1,"w-12","h-12","rounded-lg","border","border-border","bg-background","overflow-hidden","flex","items-center","justify-center"],["loading","lazy",1,"w-full","h-full","object-cover",3,"src","alt"],[1,"font-medium","text-foreground","line-clamp-1"],[1,"text-xs","text-muted-foreground","mt-0.5","md:hidden"],[1,"p-4","align-middle","hidden","md:table-cell"],[1,"inline-flex","items-center","rounded-full","bg-muted","px-2.5","py-0.5","text-xs","font-medium","text-muted-foreground"],[1,"p-4","align-middle","font-medium","text-foreground","whitespace-nowrap"],[1,"text-[10px]","text-muted-foreground","font-normal"],[1,"p-4","align-middle","text-center"],[4,"ngIf","ngIfElse"],[1,"flex","items-center","justify-end","gap-2"],["title","\u0648\u06CC\u0631\u0627\u06CC\u0634",1,"btn","btn-ghost","btn-icon","btn-sm","text-muted-foreground","hover:text-primary",3,"routerLink"],[1,"material-icons","text-lg"],["title","\u062D\u0630\u0641",1,"btn","btn-ghost","btn-icon","btn-sm","text-muted-foreground","hover:text-destructive",3,"click"],[1,"inline-flex","items-center","justify-center","min-w-[2rem]","px-2","py-1","rounded-md","text-xs","font-bold",3,"ngClass"],[1,"inline-flex","items-center","px-2","py-1","rounded-md","bg-primary/10","text-primary","text-xs","font-bold"],[1,"material-icons","text-[14px]","me-1"],[1,"flex","justify-center","mt-6"],[1,"flex","items-center","gap-1"],["aria-label","Previous",1,"btn","btn-outline","btn-icon","btn-sm",3,"click","disabled"],[1,"material-icons","text-base"],[1,"text-sm","text-muted-foreground","mx-2"],["aria-label","Next",1,"btn","btn-outline","btn-icon","btn-sm",3,"click","disabled"]],template:function(r,u){r&1&&(e(0,"div",1)(1,"div",2)(2,"div")(3,"h1",3),n(4,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u062D\u0635\u0648\u0644\u0627\u062A"),t(),e(5,"p",4),n(6,"\u0645\u0634\u0627\u0647\u062F\u0647\u060C \u0648\u06CC\u0631\u0627\u06CC\u0634 \u0648 \u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u0648\u062C\u0648\u062F\u06CC \u0645\u062D\u0635\u0648\u0644\u0627\u062A"),t()(),e(7,"a",5)(8,"span",6),n(9,"add"),t(),n(10," \u0627\u0641\u0632\u0648\u062F\u0646 \u0645\u062D\u0635\u0648\u0644 "),t()(),e(11,"div",7),c(12,An,3,0,"div",8)(13,wn,7,0,"div",9)(14,kn,18,1,"div",10)(15,Dn,10,4,"div",11),t()()),r&2&&(d(12),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.products.length===0),d(),l("ngIf",!u.isLoading&&u.products.length>0),d(),l("ngIf",u.pagination&&u.pagination.totalPages>1))},dependencies:[A,se,k,_,D,N,Z],encapsulation:2});let o=a;return o})();var Gt=(()=>{let a=class a{constructor(i){this.http=i,this.usersUrl=`${j.API_URL}admin/users`}getUsers(i=!1,r=1,u=20){let m=new Q().set("includeDeleted",i.toString()).set("page",r.toString()).set("pageSize",u.toString());return this.http.get(this.usersUrl,{params:m})}changeUserStatus(i,r){return this.http.patch(`${this.usersUrl}/${i}/status`,{isActive:r})}deleteUser(i){return this.http.delete(`${this.usersUrl}/${i}`)}restoreUser(i){return this.http.post(`${this.usersUrl}/${i}/restore`,{})}};a.\u0275fac=function(r){return new(r||a)($(G))},a.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();function Ln(o,a){o&1&&(e(0,"div",11)(1,"span",12),n(2,"sync"),t()())}function Nn(o,a){o&1&&(e(0,"div",13)(1,"p",14),n(2,"\u0647\u06CC\u0686 \u06A9\u0627\u0631\u0628\u0631\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."),t()())}function Pn(o,a){if(o&1){let s=E();e(0,"button",33),x("click",function(){C(s);let r=p().$implicit,u=p(2);return S(u.changeUserStatus(r,!r.isActive))}),e(1,"span",34),n(2),t()()}if(o&2){let s=p().$implicit;l("title",s.isActive?"\u063A\u06CC\u0631\u0641\u0639\u0627\u0644 \u06A9\u0631\u062F\u0646":"\u0641\u0639\u0627\u0644 \u06A9\u0631\u062F\u0646"),d(2),h(s.isActive?"toggle_off":"toggle_on")}}function Tn(o,a){if(o&1){let s=E();e(0,"button",35),x("click",function(){C(s);let r=p().$implicit,u=p(2);return S(u.deleteUser(r.id))}),e(1,"span",34),n(2,"delete"),t()()}}function On(o,a){if(o&1){let s=E();e(0,"button",36),x("click",function(){C(s);let r=p().$implicit,u=p(2);return S(u.restoreUser(r.id))}),e(1,"span",34),n(2,"restore_from_trash"),t()()}}function Vn(o,a){if(o&1&&(e(0,"tr",24)(1,"td",25),n(2),t(),e(3,"td",26),n(4),t(),e(5,"td",27)(6,"span",28),n(7),t()(),e(8,"td",26),n(9),w(10,"date"),t(),e(11,"td",29),c(12,Pn,3,2,"button",30)(13,Tn,3,0,"button",31)(14,On,3,0,"button",32),t()()),o&2){let s=a.$implicit;ue("opacity-50",s.isDeleted),d(2),Se("",s.firstName||""," ",s.lastName||""),d(2),h(s.phoneNumber),d(2),l("ngClass",s.isActive&&!s.isDeleted?"bg-success text-success-foreground":"bg-destructive text-destructive-foreground"),d(),v(" ",s.isDeleted?"\u062D\u0630\u0641 \u0634\u062F\u0647":s.isActive?"\u0641\u0639\u0627\u0644":"\u063A\u06CC\u0631\u0641\u0639\u0627\u0644"," "),d(2),h(ae(10,11,s.createdAt,"yyyy/MM/dd")),d(3),l("ngIf",!s.isDeleted),d(),l("ngIf",!s.isDeleted),d(),l("ngIf",s.isDeleted)}}function jn(o,a){if(o&1&&(e(0,"div",15)(1,"table",16)(2,"thead",17)(3,"tr",18)(4,"th",19),n(5,"\u0646\u0627\u0645 \u0648 \u0646\u0627\u0645 \u062E\u0627\u0646\u0648\u0627\u062F\u06AF\u06CC"),t(),e(6,"th",19),n(7,"\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06CC\u0644"),t(),e(8,"th",20),n(9,"\u0648\u0636\u0639\u06CC\u062A"),t(),e(10,"th",19),n(11,"\u062A\u0627\u0631\u06CC\u062E \u0639\u0636\u0648\u06CC\u062A"),t(),e(12,"th",21),n(13,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t()()(),e(14,"tbody",22),c(15,Vn,15,14,"tr",23),t()()()),o&2){let s=p();d(15),l("ngForOf",s.users)}}function Un(o,a){if(o&1){let s=E();e(0,"div",37)(1,"button",38),x("click",function(){C(s);let r=p();return S(r.loadUsers(r.currentPage-1))}),n(2,"\u0642\u0628\u0644\u06CC"),t(),e(3,"span",39),n(4),t(),e(5,"button",38),x("click",function(){C(s);let r=p();return S(r.loadUsers(r.currentPage+1))}),n(6,"\u0628\u0639\u062F\u06CC"),t()()}if(o&2){let s=p();d(),l("disabled",s.currentPage===1),d(3),Se("\u0635\u0641\u062D\u0647 ",s.currentPage," \u0627\u0632 ",s.pagination.totalPages),d(),l("disabled",s.currentPage===s.pagination.totalPages)}}var Rt=(()=>{let a=class a{constructor(i,r){this.adminUserService=i,this.notificationService=r,this.users=[],this.isLoading=!0,this.showDeleted=!1,this.pagination=null,this.currentPage=1}ngOnInit(){this.loadUsers()}loadUsers(i=1){this.isLoading=!0,this.currentPage=i,this.adminUserService.getUsers(this.showDeleted,i,20).pipe(V(()=>this.isLoading=!1)).subscribe({next:r=>{this.users=r.items??[],this.pagination=r},error:r=>{this.notificationService.show(r?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u06A9\u0627\u0631\u0628\u0631\u0627\u0646","error")}})}toggleShowDeleted(){this.showDeleted=!this.showDeleted,this.loadUsers(1)}changeUserStatus(i,r){this.adminUserService.changeUserStatus(i.id,r).subscribe({next:()=>{i.isActive=r,this.notificationService.show("\u0648\u0636\u0639\u06CC\u062A \u06A9\u0627\u0631\u0628\u0631 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F","success")},error:()=>this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u062A\u063A\u06CC\u06CC\u0631 \u0648\u0636\u0639\u06CC\u062A \u06A9\u0627\u0631\u0628\u0631","error")})}deleteUser(i){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u06A9\u0627\u0631\u0628\u0631 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F \u0627\u06CC\u0646 \u0639\u0645\u0644 \u063A\u06CC\u0631\u0642\u0627\u0628\u0644 \u0628\u0627\u0632\u06AF\u0634\u062A \u0627\u0633\u062A.")&&this.adminUserService.deleteUser(i).subscribe({next:()=>{this.notificationService.show("\u06A9\u0627\u0631\u0628\u0631 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadUsers(this.currentPage)},error:r=>this.notificationService.show(r?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u06A9\u0627\u0631\u0628\u0631","error")})}restoreUser(i){this.adminUserService.restoreUser(i).subscribe({next:()=>{this.notificationService.show("\u06A9\u0627\u0631\u0628\u0631 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0628\u0627\u0632\u06CC\u0627\u0628\u06CC \u0634\u062F","success"),this.loadUsers(this.currentPage)},error:r=>this.notificationService.show(r?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0632\u06CC\u0627\u0628\u06CC \u06A9\u0627\u0631\u0628\u0631","error")})}};a.\u0275fac=function(r){return new(r||a)(f(Gt),f(I))},a.\u0275cmp=y({type:a,selectors:[["app-admin-user-list"]],decls:13,vars:5,consts:[[1,"space-y-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-foreground"],[1,"flex","items-center","space-x-2","space-x-reverse"],["for","showDeleted",1,"text-sm","font-medium"],["type","checkbox","id","showDeleted",1,"checkbox",3,"change","checked"],[1,"card"],["class","flex justify-center items-center p-10",4,"ngIf"],["class","text-center p-10",4,"ngIf"],["class","relative w-full overflow-x-auto",4,"ngIf"],["class","flex justify-center items-center space-x-2 space-x-reverse mt-6",4,"ngIf"],[1,"flex","justify-center","items-center","p-10"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"text-center","p-10"],[1,"text-muted-foreground"],[1,"relative","w-full","overflow-x-auto"],[1,"w-full","caption-bottom","text-base","min-w-[800px]"],[1,"[&_tr]:border-b","[&_tr]:border-border"],[1,"border-b","transition-colors","hover:bg-muted"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground"],[1,"h-12","px-4","text-center","align-middle","font-medium","text-muted-foreground"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground","w-40"],[1,"[&_tr:last-child]:border-0"],["class","border-b transition-colors hover:bg-muted/50",3,"opacity-50",4,"ngFor","ngForOf"],[1,"border-b","transition-colors","hover:bg-muted/50"],[1,"p-4","align-middle","font-medium","text-foreground"],[1,"p-4","align-middle","text-muted-foreground"],[1,"p-4","align-middle","text-center"],[1,"px-2","py-1","text-xs","font-semibold","rounded-full",3,"ngClass"],[1,"p-4","align-middle","space-x-2","space-x-reverse","whitespace-nowrap"],["class","btn btn-ghost btn-sm btn-icon",3,"title","click",4,"ngIf"],["class","btn btn-ghost btn-sm btn-icon text-destructive hover:bg-destructive/10","title","\u062D\u0630\u0641",3,"click",4,"ngIf"],["class","btn btn-ghost btn-sm btn-icon text-success hover:bg-success/10","title","\u0628\u0627\u0632\u06CC\u0627\u0628\u06CC",3,"click",4,"ngIf"],[1,"btn","btn-ghost","btn-sm","btn-icon",3,"click","title"],[1,"material-icons","text-base"],["title","\u062D\u0630\u0641",1,"btn","btn-ghost","btn-sm","btn-icon","text-destructive","hover:bg-destructive/10",3,"click"],["title","\u0628\u0627\u0632\u06CC\u0627\u0628\u06CC",1,"btn","btn-ghost","btn-sm","btn-icon","text-success","hover:bg-success/10",3,"click"],[1,"flex","justify-center","items-center","space-x-2","space-x-reverse","mt-6"],[1,"btn","btn-sm","btn-outline",3,"click","disabled"],[1,"text-sm"]],template:function(r,u){r&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),n(3,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u06A9\u0627\u0631\u0628\u0631\u0627\u0646"),t(),e(4,"div",3)(5,"label",4),n(6,"\u0646\u0645\u0627\u06CC\u0634 \u062D\u0630\u0641 \u0634\u062F\u0647\u200C\u0647\u0627"),t(),e(7,"input",5),x("change",function(){return u.toggleShowDeleted()}),t()()(),e(8,"div",6),c(9,Ln,3,0,"div",7)(10,Nn,3,0,"div",8)(11,jn,16,1,"div",9),t(),c(12,Un,7,4,"div",10),t()),r&2&&(d(7),l("checked",u.showDeleted),d(2),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.users.length===0),d(),l("ngIf",!u.isLoading&&u.users.length>0),d(),l("ngIf",u.pagination&&u.pagination.totalPages>1))},dependencies:[A,se,k,_,D,ce],encapsulation:2});let o=a;return o})();function $n(o,a){o&1&&(e(0,"div",14)(1,"span",15),n(2,"sync"),t()())}function Gn(o,a){o&1&&(e(0,"div",16)(1,"p",17),n(2,"\u0645\u062D\u0635\u0648\u0644\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F"),t()())}function Rn(o,a){if(o&1&&(e(0,"tr",32)(1,"td",33),b(2,"input",34),t(),e(3,"td",33)(4,"div",35),b(5,"img",36),e(6,"div",37)(7,"span",38),n(8),t(),e(9,"span",39),n(10),t()()()(),e(11,"td",40),n(12),w(13,"number"),t(),e(14,"td",33),b(15,"input",41),t()()),o&2){let s=a.$implicit,i=a.index,r=p(2);l("formGroupName",i),d(5),l("src",s.value.productIcon||"https://via.placeholder.com/40",le)("alt",s.value.productName),d(3),h(s.value.productName),d(2),h(r.getVariantDisplayName(s.value.attributes)),d(2),v(" ",M(13,7,r.getCurrentPrice(s.value))," \u062A\u0648\u0645\u0627\u0646 "),d(3),l("placeholder",r.getCurrentPrice(s.value).toString())}}function Bn(o,a){o&1&&(e(0,"span",42),n(1,"sync"),t())}function qn(o,a){if(o&1){let s=E();e(0,"form",18),x("ngSubmit",function(){C(s);let r=p();return S(r.updatePrices())}),e(1,"div",19)(2,"div",20)(3,"table",21)(4,"thead",22)(5,"tr")(6,"th",23)(7,"input",24),x("change",function(r){C(s);let u=p();return S(u.toggleAll(r))}),t()(),e(8,"th",25),n(9,"\u0646\u0627\u0645 \u0645\u062D\u0635\u0648\u0644 \u0648 \u062A\u0646\u0648\u0639"),t(),e(10,"th",25),n(11,"\u0642\u06CC\u0645\u062A \u0641\u0639\u0644\u06CC"),t(),e(12,"th",25),n(13,"\u0642\u06CC\u0645\u062A \u062C\u062F\u06CC\u062F"),t()()(),e(14,"tbody",26),c(15,Rn,16,9,"tr",27),t()()()(),e(16,"div",28)(17,"button",29),c(18,Bn,2,0,"span",30),n(19),t(),e(20,"button",31),x("click",function(){C(s);let r=p();return S(r.resetForm())}),n(21," \u0628\u0627\u0632\u0646\u0634\u0627\u0646\u06CC "),t()()()}if(o&2){let s=p();l("formGroup",s.priceForm),d(15),l("ngForOf",s.getVariantControls()),d(2),l("disabled",!s.hasSelectedProducts()||s.isSubmitting),d(),l("ngIf",s.isSubmitting),d(),v(" ",s.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC...":"\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0642\u06CC\u0645\u062A\u200C\u0647\u0627"," ")}}var Bt=(()=>{let a=class a{constructor(i,r,u){this.productService=i,this.adminProductService=r,this.notificationService=u,this.products=[],this.isLoading=!1,this.isSubmitting=!1,this.searchTerm="",this.isPurchasePrice=!1,this.priceForm=new me({priceUpdates:new At([])})}ngOnInit(){this.loadProducts()}get priceUpdates(){return this.priceForm.get("priceUpdates")}getVariantControls(){return this.priceForm.get("priceUpdates").controls}loadProducts(){this.isLoading=!0,this.productService.getProducts({name:this.searchTerm,page:1,pageSize:500}).pipe(V(()=>this.isLoading=!1)).subscribe({next:i=>{this.products=i.items??[],this.buildForm()},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062D\u0635\u0648\u0644\u0627\u062A","error")}})}searchProducts(){this.loadProducts()}buildForm(){this.priceUpdates.clear(),this.products.forEach(i=>{i.variants.forEach(r=>{this.priceUpdates.push(new me({selected:new P(!1),variantId:new P(r.id),productName:new P(i.name),productIcon:new P(i.iconUrl),purchasePrice:new P(r.purchasePrice),sellingPrice:new P(r.sellingPrice),attributes:new P(r.attributes),newPrice:new P(null,[F.min(1)])}))})})}getCurrentPrice(i){return this.isPurchasePrice?i.purchasePrice:i.sellingPrice}getVariantDisplayName(i){return Object.values(i).map(r=>r.value).join(" / ")}toggleAll(i){let r=i.target.checked;this.priceUpdates.controls.forEach(u=>{u.get("selected")?.setValue(r)})}hasSelectedProducts(){return this.priceUpdates.controls.some(i=>i.get("selected")?.value&&i.get("newPrice")?.value)}updatePrices(){let i={};if(this.priceUpdates.controls.forEach(r=>{if(r.get("selected")?.value&&r.get("newPrice")?.value){let u=r.get("variantId")?.value,m=r.get("newPrice")?.value;i[u]=m}}),Object.keys(i).length===0){this.notificationService.show("\u0644\u0637\u0641\u0627\u064B \u0645\u062D\u0635\u0648\u0644\u06CC \u0631\u0627 \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0631\u062F\u0647 \u0648 \u0642\u06CC\u0645\u062A \u062C\u062F\u06CC\u062F\u06CC \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F","error");return}this.isSubmitting=!0,this.adminProductService.bulkUpdatePrices(i,this.isPurchasePrice).pipe(V(()=>this.isSubmitting=!1)).subscribe({next:()=>{this.notificationService.show("\u0642\u06CC\u0645\u062A\u200C\u0647\u0627 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0634\u062F\u0646\u062F","success"),this.loadProducts()},error:r=>{this.notificationService.show(r?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0642\u06CC\u0645\u062A\u200C\u0647\u0627","error")}})}resetForm(){this.priceForm.reset(),this.buildForm()}};a.\u0275fac=function(r){return new(r||a)(f(je),f(Fe),f(I))},a.\u0275cmp=y({type:a,selectors:[["app-admin-bulk-price-update"]],decls:21,vars:7,consts:[[1,"space-y-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-foreground"],[1,"card","p-6","space-y-4"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"space-y-2"],["for","search",1,"text-sm","font-medium","text-foreground"],["type","text","id","search","placeholder","\u0646\u0627\u0645 \u0645\u062D\u0635\u0648\u0644 \u06CC\u0627 SKU...",1,"input",3,"ngModelChange","ngModel"],["for","priceType",1,"text-sm","font-medium","text-foreground"],["id","priceType",1,"input",3,"ngModelChange","ngModel"],[3,"ngValue"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","card p-12 text-center",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"flex","justify-center","items-center","py-12"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"card","p-12","text-center"],[1,"text-muted-foreground"],[3,"ngSubmit","formGroup"],[1,"card","overflow-hidden"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-muted"],[1,"p-4","text-right"],["type","checkbox",1,"h-4","w-4",3,"change"],[1,"p-4","text-right","text-sm","font-medium","text-foreground"],["formArrayName","priceUpdates"],["class","border-b border-border hover:bg-muted/50",3,"formGroupName",4,"ngFor","ngForOf"],[1,"flex","gap-4","mt-6"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","material-icons animate-spin me-2",4,"ngIf"],["type","button",1,"btn","btn-outline",3,"click"],[1,"border-b","border-border","hover:bg-muted/50",3,"formGroupName"],[1,"p-4"],["type","checkbox","formControlName","selected",1,"h-4","w-4"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","rounded","object-cover",3,"src","alt"],[1,"flex","flex-col"],[1,"font-medium","text-foreground"],[1,"text-xs","text-muted-foreground"],[1,"p-4","text-foreground"],["type","number","formControlName","newPrice","min","1",1,"input","w-40",3,"placeholder"],[1,"material-icons","animate-spin","me-2"]],template:function(r,u){r&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),n(3,"\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0627\u0646\u0628\u0648\u0647 \u0642\u06CC\u0645\u062A"),t()(),e(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6),n(8,"\u062C\u0633\u062A\u062C\u0648"),t(),e(9,"input",7),he("ngModelChange",function(g){return ge(u.searchTerm,g)||(u.searchTerm=g),g}),x("ngModelChange",function(){return u.searchProducts()}),t()(),e(10,"div",5)(11,"label",8),n(12,"\u0646\u0648\u0639 \u0642\u06CC\u0645\u062A"),t(),e(13,"select",9),he("ngModelChange",function(g){return ge(u.isPurchasePrice,g)||(u.isPurchasePrice=g),g}),e(14,"option",10),n(15,"\u0642\u06CC\u0645\u062A \u0641\u0631\u0648\u0634"),t(),e(16,"option",10),n(17,"\u0642\u06CC\u0645\u062A \u062E\u0631\u06CC\u062F"),t()()()()(),c(18,$n,3,0,"div",11)(19,Gn,3,0,"div",12)(20,qn,22,5,"form",13),t()),r&2&&(d(9),fe("ngModel",u.searchTerm),d(4),fe("ngModel",u.isPurchasePrice),d(),l("ngValue",!1),d(2),l("ngValue",!0),d(2),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.products.length===0),d(),l("ngIf",!u.isLoading&&u.products.length>0))},dependencies:[A,k,_,J,z,ne,re,B,te,xe,ie,T,q,Ie,H,W,Ue,$e,be,ve,Z],encapsulation:2});let o=a;return o})();var We=(()=>{let a=class a{constructor(i){this.http=i,this.apiUrl=`${j.API_URL}admin/inventory`}getTransactions(i,r,u,m,g=1,K=20){let O=new Q().set("page",g.toString()).set("pageSize",K.toString());return i&&(O=O.set("variantId",i.toString())),r&&(O=O.set("transactionType",r)),u&&(O=O.set("fromDate",u.toISOString())),m&&(O=O.set("toDate",m.toISOString())),this.http.get(`${this.apiUrl}/transactions`,{params:O})}getLowStockItems(i=5){let r=new Q().set("threshold",i.toString());return this.http.get(`${this.apiUrl}/low-stock`,{params:r})}getOutOfStockItems(){return this.http.get(`${this.apiUrl}/out-of-stock`)}adjustStock(i,r){return this.http.post(`${this.apiUrl}/adjust`,i)}getStatistics(){return this.http.get(`${this.apiUrl}/statistics`)}};a.\u0275fac=function(r){return new(r||a)($(G))},a.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();var zn=(o,a,s)=>({"bg-destructive/10 text-destructive":o,"bg-warning/10 text-warning":a,"bg-secondary/10 text-secondary":s}),Hn=o=>["/admin/products/edit",o];function Wn(o,a){o&1&&(e(0,"div",11)(1,"span",12),n(2,"sync"),t()())}function Jn(o,a){o&1&&(e(0,"div",13)(1,"div",14)(2,"span",15),n(3,"check_circle"),t(),e(4,"p",16),n(5,"\u0647\u0645\u0647 \u0645\u062D\u0635\u0648\u0644\u0627\u062A \u0645\u0648\u062C\u0648\u062F\u06CC \u06A9\u0627\u0641\u06CC \u062F\u0627\u0631\u0646\u062F"),t()()())}function Kn(o,a){if(o&1&&(e(0,"tr",26)(1,"td",27),n(2),t(),e(3,"td",28),n(4),t(),e(5,"td",28),n(6),t(),e(7,"td",29)(8,"span",30),n(9),t()(),e(10,"td",31),n(11),w(12,"number"),t(),e(13,"td",29)(14,"a",32),n(15," \u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u062D\u0635\u0648\u0644 "),t()()()),o&2){let s=a.$implicit;d(2),h(s.productName),d(2),h(s.variantDisplayName),d(2),h(s.categoryName||"-"),d(2),l("ngClass",xt(9,zn,s.stock===0,s.stock>0&&s.stock<=5,s.stock>5)),d(),v(" ",s.stock," \u0639\u062F\u062F "),d(2),v("",M(12,7,s.sellingPrice)," \u062A\u0648\u0645\u0627\u0646"),d(3),l("routerLink",Y(13,Hn,s.productId))}}function Qn(o,a){if(o&1&&(e(0,"div")(1,"div",17)(2,"div",18)(3,"span",19),n(4,"warning"),t(),e(5,"p",20),n(6),t()(),e(7,"div",21)(8,"table",22)(9,"thead",23)(10,"tr")(11,"th",24),n(12,"\u0646\u0627\u0645 \u0645\u062D\u0635\u0648\u0644"),t(),e(13,"th",24),n(14,"\u062A\u0646\u0648\u0639"),t(),e(15,"th",24),n(16,"\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"),t(),e(17,"th",24),n(18,"\u0645\u0648\u062C\u0648\u062F\u06CC"),t(),e(19,"th",24),n(20,"\u0642\u06CC\u0645\u062A"),t(),e(21,"th",24),n(22,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t()()(),e(23,"tbody"),c(24,Kn,16,15,"tr",25),t()()()()()),o&2){let s=p();d(6),v(" ",s.products.length," \u062A\u0646\u0648\u0639 \u0645\u062D\u0635\u0648\u0644 \u0646\u06CC\u0627\u0632 \u0628\u0647 \u062A\u0627\u0645\u06CC\u0646 \u0645\u0648\u062C\u0648\u062F\u06CC \u062F\u0627\u0631\u0646\u062F "),d(18),l("ngForOf",s.products)}}var zt=(()=>{let a=class a{constructor(i){this.inventoryService=i,this.products=[],this.isLoading=!1,this.threshold=5}ngOnInit(){this.loadLowStockProducts()}loadLowStockProducts(){this.isLoading=!0,this.inventoryService.getLowStockItems(this.threshold).pipe(V(()=>this.isLoading=!1)).subscribe({next:i=>{this.products=i},error:()=>{this.products=[]}})}};a.\u0275fac=function(r){return new(r||a)(f(We))},a.\u0275cmp=y({type:a,selectors:[["app-low-stock-alerts"]],decls:20,vars:8,consts:[[1,"space-y-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold","text-foreground"],[1,"card","p-6","space-y-4"],[1,"flex","items-center","gap-4"],["for","threshold",1,"text-sm","font-medium","text-foreground"],["id","threshold",1,"input","w-32",3,"ngModelChange","ngModel"],[3,"value"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","card p-12 text-center",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-center","items-center","py-12"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"card","p-12","text-center"],[1,"flex","flex-col","items-center","gap-4"],[1,"material-icons","text-5xl","text-success"],[1,"text-foreground","font-semibold"],[1,"card"],[1,"p-4","bg-warning/10","border-b","border-border","flex","items-center","gap-3"],[1,"material-icons","text-warning"],[1,"text-warning","font-semibold"],[1,"overflow-x-auto"],[1,"w-full"],[1,"bg-muted"],[1,"p-4","text-right","text-sm","font-medium","text-foreground"],["class","border-b border-border hover:bg-muted/50",4,"ngFor","ngForOf"],[1,"border-b","border-border","hover:bg-muted/50"],[1,"p-4","font-medium","text-foreground"],[1,"p-4","text-muted-foreground"],[1,"p-4"],[1,"px-2","py-1","rounded-full","text-xs","font-semibold",3,"ngClass"],[1,"p-4","text-foreground"],[1,"btn","btn-sm","btn-primary",3,"routerLink"]],template:function(r,u){r&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),n(3,"\u0645\u062D\u0635\u0648\u0644\u0627\u062A \u0631\u0648 \u0628\u0647 \u0627\u062A\u0645\u0627\u0645"),t()(),e(4,"div",3)(5,"div",4)(6,"label",5),n(7,"\u0622\u0633\u062A\u0627\u0646\u0647 \u0647\u0634\u062F\u0627\u0631:"),t(),e(8,"select",6),he("ngModelChange",function(g){return ge(u.threshold,g)||(u.threshold=g),g}),x("ngModelChange",function(){return u.loadLowStockProducts()}),e(9,"option",7),n(10,"5 \u0639\u062F\u062F"),t(),e(11,"option",7),n(12,"10 \u0639\u062F\u062F"),t(),e(13,"option",7),n(14,"20 \u0639\u062F\u062F"),t(),e(15,"option",7),n(16,"50 \u0639\u062F\u062F"),t()()()(),c(17,Wn,3,0,"div",8)(18,Jn,6,0,"div",9)(19,Qn,25,2,"div",10),t()),r&2&&(d(8),fe("ngModel",u.threshold),d(),l("value",5),d(2),l("value",10),d(2),l("value",20),d(2),l("value",50),d(2),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.products.length===0),d(),l("ngIf",!u.isLoading&&u.products.length>0))},dependencies:[A,se,k,_,D,N,be,ne,re,ie,T,ve,Z],encapsulation:2});let o=a;return o})();var Ht=(()=>{let a=class a{constructor(i){this.http=i,this.auditUrl=`${j.API_URL}admin/AuditLogs`}getAuditLogs(i){let r=new Q;return Object.keys(i).forEach(u=>{let m=i[u];m!=null&&m!==""&&(r=r.set(u,m.toString()))}),this.http.get(this.auditUrl,{params:r})}};a.\u0275fac=function(r){return new(r||a)($(G))},a.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();function Xn(o,a){o&1&&(e(0,"div",20)(1,"span",21),n(2,"sync"),t()())}function Zn(o,a){o&1&&(e(0,"div",22)(1,"p",23),n(2,"\u0647\u06CC\u0686 \u06AF\u0632\u0627\u0631\u0634\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."),t()())}function er(o,a){if(o&1&&(e(0,"tr",31)(1,"td",32),n(2),w(3,"date"),t(),e(4,"td",33),n(5),t(),e(6,"td",33)(7,"span",34),w(8,"statusClass"),n(9),t()(),e(10,"td",33),n(11),t(),e(12,"td",35),n(13),t(),e(14,"td",36),n(15),t()()),o&2){let s=a.$implicit;d(2),h(ae(3,7,s.timestamp,"yyyy/MM/dd HH:mm:ss")),d(3),h(s.userId||"\u0633\u06CC\u0633\u062A\u0645"),d(2),l("ngClass",M(8,10,s.eventType)),d(2),h(s.eventType),d(2),h(s.action),d(2),h(s.details),d(2),h(s.ipAddress)}}function tr(o,a){if(o&1&&(e(0,"div",24)(1,"table",25)(2,"thead",26)(3,"tr",27)(4,"th",28),n(5,"\u062A\u0627\u0631\u06CC\u062E"),t(),e(6,"th",28),n(7,"\u06A9\u0627\u0631\u0628\u0631"),t(),e(8,"th",28),n(9,"\u0646\u0648\u0639 \u0631\u0648\u06CC\u062F\u0627\u062F"),t(),e(10,"th",28),n(11,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t(),e(12,"th",28),n(13,"\u062C\u0632\u0626\u06CC\u0627\u062A"),t(),e(14,"th",28),n(15,"IP"),t()()(),e(16,"tbody",29),c(17,er,16,12,"tr",30),t()()()),o&2){let s=p();d(17),l("ngForOf",s.logs)}}var Wt=(()=>{let a=class a{constructor(i,r){this.AdminAuditService=i,this.notificationService=r,this.logs=[],this.pagination=null,this.isLoading=!0,this.currentPage=1,this.filterForm=new me({userId:new P(null),eventType:new P(null),fromDate:new P(null),toDate:new P(null)})}ngOnInit(){this.loadLogs()}loadLogs(i=1){this.isLoading=!0,this.currentPage=i;let r=Ne({page:i,pageSize:20},this.filterForm.value);r.fromDate&&(r.fromDate=new Date(r.fromDate).toISOString()),r.toDate&&(r.toDate=new Date(r.toDate).toISOString()),this.AdminAuditService.getAuditLogs(r).pipe(V(()=>this.isLoading=!1)).subscribe({next:u=>{this.logs=u.items??[],this.pagination=u},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u06AF\u0632\u0627\u0631\u0634\u0627\u062A","error")}})}applyFilters(){this.loadLogs(1)}clearFilters(){this.filterForm.reset(),this.loadLogs(1)}};a.\u0275fac=function(r){return new(r||a)(f(Ht),f(I))},a.\u0275cmp=y({type:a,selectors:[["app-admin-audit-logs"]],decls:30,vars:4,consts:[[1,"space-y-6"],[1,"text-2xl","font-bold","text-foreground"],[1,"card","p-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4",3,"ngSubmit","formGroup"],[1,"space-y-2"],["for","userId",1,"text-sm","font-medium"],["type","number","id","userId","formControlName","userId","placeholder","\u0645\u062B\u0627\u0644: 123",1,"input"],["for","eventType",1,"text-sm","font-medium"],["type","text","id","eventType","formControlName","eventType","placeholder","\u0645\u062B\u0627\u0644: UserAction",1,"input"],["for","fromDate",1,"text-sm","font-medium"],["type","date","id","fromDate","formControlName","fromDate",1,"input"],["for","toDate",1,"text-sm","font-medium"],["type","date","id","toDate","formControlName","toDate",1,"input"],[1,"flex","items-end","gap-2","col-span-full"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-outline",3,"click"],[1,"card","overflow-hidden"],["class","flex justify-center items-center p-10",4,"ngIf"],["class","text-center p-10",4,"ngIf"],["class","w-full overflow-x-auto",4,"ngIf"],[1,"flex","justify-center","items-center","p-10"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"text-center","p-10"],[1,"text-muted-foreground"],[1,"w-full","overflow-x-auto"],[1,"w-full","caption-bottom","text-base","min-w-[900px]"],[1,"[&_tr]:border-b","[&_tr]:border-border"],[1,"border-b","transition-colors","hover:bg-muted"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground"],[1,"[&_tr:last-child]:border-0"],["class","border-b transition-colors hover:bg-muted/50",4,"ngFor","ngForOf"],[1,"border-b","transition-colors","hover:bg-muted/50"],[1,"p-4","align-middle","whitespace-nowrap","text-sm"],[1,"p-4","align-middle"],[1,"px-2","py-1","text-xs","font-semibold","rounded-full",3,"ngClass"],[1,"p-4","align-middle","text-sm","text-muted-foreground","max-w-xs","truncate"],[1,"p-4","align-middle","text-sm"]],template:function(r,u){r&1&&(e(0,"div",0)(1,"h1",1),n(2,"\u06AF\u0632\u0627\u0631\u0634\u0627\u062A \u0633\u06CC\u0633\u062A\u0645\u06CC (Audit Logs)"),t(),e(3,"div",2)(4,"form",3),x("ngSubmit",function(){return u.applyFilters()}),e(5,"div",4)(6,"label",5),n(7,"\u0634\u0646\u0627\u0633\u0647 \u06A9\u0627\u0631\u0628\u0631"),t(),b(8,"input",6),t(),e(9,"div",4)(10,"label",7),n(11,"\u0646\u0648\u0639 \u0631\u0648\u06CC\u062F\u0627\u062F"),t(),b(12,"input",8),t(),e(13,"div",4)(14,"label",9),n(15,"\u0627\u0632 \u062A\u0627\u0631\u06CC\u062E"),t(),b(16,"input",10),t(),e(17,"div",4)(18,"label",11),n(19,"\u062A\u0627 \u062A\u0627\u0631\u06CC\u062E"),t(),b(20,"input",12),t(),e(21,"div",13)(22,"button",14),n(23,"\u0627\u0639\u0645\u0627\u0644 \u0641\u06CC\u0644\u062A\u0631"),t(),e(24,"button",15),x("click",function(){return u.clearFilters()}),n(25,"\u067E\u0627\u06A9 \u06A9\u0631\u062F\u0646"),t()()()(),e(26,"div",16),c(27,Xn,3,0,"div",17)(28,Zn,3,0,"div",18)(29,tr,18,1,"div",19),t()()),r&2&&(d(4),l("formGroup",u.filterForm),d(23),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.logs.length===0),d(),l("ngIf",!u.isLoading&&u.logs.length>0))},dependencies:[A,se,k,_,J,z,B,te,T,q,H,W,ce,De],encapsulation:2});let o=a;return o})();var Je=(()=>{let a=class a{constructor(i){this.http=i,this.baseUrl=`${j.API_URL}admin/shipping-methods`}getShippingMethods(i=!1){return this.http.get(`${this.baseUrl}?includeDeleted=${i}`)}getShippingMethodById(i){return this.http.get(`${this.baseUrl}/${i}`)}createShippingMethod(i){return this.http.post(this.baseUrl,i)}updateShippingMethod(i,r){return this.http.put(`${this.baseUrl}/${i}`,r)}deleteShippingMethod(i){return this.http.delete(`${this.baseUrl}/${i}`)}restoreShippingMethod(i){return this.http.post(`${this.baseUrl}/${i}/restore`,{})}};a.\u0275fac=function(r){return new(r||a)($(G))},a.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();var ir=o=>["/admin/shipping-methods/edit",o];function nr(o,a){o&1&&(e(0,"div",10)(1,"span",11),n(2,"sync"),t()())}function rr(o,a){o&1&&(e(0,"div",12)(1,"p",13),n(2,"\u0647\u06CC\u0686 \u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."),t()())}function or(o,a){if(o&1){let s=E();e(0,"button",31),x("click",function(){C(s);let r=p().$implicit,u=p(2);return S(u.deleteMethod(r.id))}),e(1,"span",28),n(2,"delete"),t()()}}function ur(o,a){if(o&1){let s=E();e(0,"button",32),x("click",function(){C(s);let r=p().$implicit,u=p(2);return S(u.restoreMethod(r.id))}),e(1,"span",28),n(2,"restore_from_trash"),t()()}}function ar(o,a){if(o&1&&(e(0,"tr",22)(1,"td",23),n(2),t(),e(3,"td",24),n(4),w(5,"number"),t(),e(6,"td",24)(7,"span",25),w(8,"statusClass"),n(9),t()(),e(10,"td",26)(11,"a",27)(12,"span",28),n(13,"edit"),t()(),c(14,or,3,0,"button",29)(15,ur,3,0,"button",30),t()()),o&2){let s=a.$implicit;ue("opacity-50",s.isDeleted),d(2),h(s.name),d(2),v("",M(5,9,s.cost)," \u062A\u0648\u0645\u0627\u0646"),d(3),l("ngClass",M(8,11,s.isDeleted?"\u062D\u0630\u0641 \u0634\u062F\u0647":s.isActive?"\u0641\u0639\u0627\u0644":"\u063A\u06CC\u0631\u0641\u0639\u0627\u0644")),d(2),v(" ",s.isDeleted?"\u062D\u0630\u0641 \u0634\u062F\u0647":s.isActive?"\u0641\u0639\u0627\u0644":"\u063A\u06CC\u0631\u0641\u0639\u0627\u0644"," "),d(2),l("routerLink",Y(13,ir,s.id)),d(3),l("ngIf",!s.isDeleted),d(),l("ngIf",s.isDeleted)}}function sr(o,a){if(o&1&&(e(0,"div",14)(1,"table",15)(2,"thead",16)(3,"tr",17)(4,"th",18),n(5,"\u0646\u0627\u0645"),t(),e(6,"th",18),n(7,"\u0647\u0632\u06CC\u0646\u0647"),t(),e(8,"th",18),n(9,"\u0648\u0636\u0639\u06CC\u062A"),t(),e(10,"th",19),n(11,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t()()(),e(12,"tbody",20),c(13,ar,16,15,"tr",21),t()()()),o&2){let s=p();d(13),l("ngForOf",s.methods)}}var Kt=(()=>{let a=class a{constructor(i,r){this.adminShippingMethodService=i,this.notificationService=r,this.methods=[],this.isLoading=!0,this.includeDeleted=!1}ngOnInit(){this.loadMethods()}loadMethods(){this.isLoading=!0,this.adminShippingMethodService.getShippingMethods(this.includeDeleted).pipe(V(()=>this.isLoading=!1)).subscribe({next:i=>{this.methods=i},error:i=>{this.notificationService.show(i?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0631\u0648\u0634\u200C\u0647\u0627\u06CC \u0627\u0631\u0633\u0627\u0644","error")}})}deleteMethod(i){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F")&&this.adminShippingMethodService.deleteShippingMethod(i).subscribe({next:()=>{this.notificationService.show("\u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadMethods()},error:r=>this.notificationService.show(r?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641","error")})}restoreMethod(i){this.adminShippingMethodService.restoreShippingMethod(i).subscribe({next:()=>{this.notificationService.show("\u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0628\u0627\u0632\u06CC\u0627\u0628\u06CC \u0634\u062F","success"),this.loadMethods()},error:r=>this.notificationService.show(r?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0632\u06CC\u0627\u0628\u06CC","error")})}};a.\u0275fac=function(r){return new(r||a)(f(Je),f(I))},a.\u0275cmp=y({type:a,selectors:[["app-admin-shipping-method-list"]],decls:13,vars:4,consts:[[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-foreground"],["routerLink","/admin/shipping-methods/new",1,"btn","btn-primary","btn-sm"],[1,"card","overflow-hidden"],[1,"flex","items-center","p-4","border-b"],["type","checkbox","id","includeDeleted",1,"checkbox",3,"ngModelChange","ngModel"],["for","includeDeleted",1,"ms-2","font-medium","cursor-pointer"],["class","flex justify-center items-center p-10",4,"ngIf"],["class","text-center p-10",4,"ngIf"],["class","w-full overflow-x-auto",4,"ngIf"],[1,"flex","justify-center","items-center","p-10"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"text-center","p-10"],[1,"text-muted-foreground"],[1,"w-full","overflow-x-auto"],[1,"w-full","caption-bottom","text-base","min-w-[600px]"],[1,"[&_tr]:border-b","[&_tr]:border-border"],[1,"border-b","transition-colors","hover:bg-muted"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground"],[1,"h-12","px-4","text-right","align-middle","font-medium","text-muted-foreground","w-40"],[1,"[&_tr:last-child]:border-0"],["class","border-b transition-colors hover:bg-muted/50",3,"opacity-50",4,"ngFor","ngForOf"],[1,"border-b","transition-colors","hover:bg-muted/50"],[1,"p-4","align-middle","font-medium","text-foreground"],[1,"p-4","align-middle"],[1,"px-2","py-1","text-xs","font-semibold","rounded-full",3,"ngClass"],[1,"p-4","align-middle","space-x-2","space-x-reverse","whitespace-nowrap"],["title","\u0648\u06CC\u0631\u0627\u06CC\u0634",1,"btn","btn-ghost","btn-sm","btn-icon",3,"routerLink"],[1,"material-icons","text-base"],["class","btn btn-ghost btn-sm btn-icon text-destructive hover:bg-destructive/10","title","\u062D\u0630\u0641",3,"click",4,"ngIf"],["class","btn btn-ghost btn-sm btn-icon text-success hover:bg-success/10","title","\u0628\u0627\u0632\u06CC\u0627\u0628\u06CC",3,"click",4,"ngIf"],["title","\u062D\u0630\u0641",1,"btn","btn-ghost","btn-sm","btn-icon","text-destructive","hover:bg-destructive/10",3,"click"],["title","\u0628\u0627\u0632\u06CC\u0627\u0628\u06CC",1,"btn","btn-ghost","btn-sm","btn-icon","text-success","hover:bg-success/10",3,"click"]],template:function(r,u){r&1&&(e(0,"div",0)(1,"h1",1),n(2,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u0631\u0648\u0634\u200C\u0647\u0627\u06CC \u0627\u0631\u0633\u0627\u0644"),t(),e(3,"a",2),n(4,"\u0627\u0641\u0632\u0648\u062F\u0646 \u0631\u0648\u0634 \u062C\u062F\u06CC\u062F"),t()(),e(5,"div",3)(6,"div",4)(7,"input",5),he("ngModelChange",function(g){return ge(u.includeDeleted,g)||(u.includeDeleted=g),g}),x("ngModelChange",function(){return u.loadMethods()}),t(),e(8,"label",6),n(9,"\u0646\u0645\u0627\u06CC\u0634 \u062D\u0630\u0641 \u0634\u062F\u0647\u200C\u0647\u0627"),t()(),c(10,nr,3,0,"div",7)(11,rr,3,0,"div",8)(12,sr,14,1,"div",9),t()),r&2&&(d(7),fe("ngModel",u.includeDeleted),d(3),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.methods.length===0),d(),l("ngIf",!u.isLoading&&u.methods.length>0))},dependencies:[A,se,k,_,D,N,be,xe,T,ve,Z,De],encapsulation:2});let o=a;return o})();function dr(o,a){o&1&&(e(0,"div",19),n(1," \u0646\u0627\u0645 \u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 \u0627\u0644\u0632\u0627\u0645\u06CC \u0627\u0633\u062A. "),t())}function lr(o,a){o&1&&(e(0,"div",19),n(1," \u0647\u0632\u06CC\u0646\u0647 \u0627\u0644\u0632\u0627\u0645\u06CC \u0648 \u0628\u0627\u06CC\u062F \u06CC\u06A9 \u0639\u062F\u062F \u0645\u062B\u0628\u062A \u0628\u0627\u0634\u062F. "),t())}function mr(o,a){o&1&&(e(0,"div",20),b(1,"input",21),e(2,"label",22),n(3,"\u0641\u0639\u0627\u0644"),t()())}function cr(o,a){o&1&&(e(0,"span",23),n(1,"sync"),t())}var tt=(()=>{let a=class a{constructor(i,r,u,m,g){this.fb=i,this.route=r,this.router=u,this.adminShippingMethodService=m,this.notificationService=g,this.isEditMode=!1,this.methodId=null,this.isSubmitting=!1,this.shippingForm=this.fb.group({name:["",[F.required,F.maxLength(100)]],cost:[0,[F.required,F.min(0)]],description:["",F.maxLength(500)],estimatedDeliveryTime:["",F.maxLength(100)],isActive:[!0],rowVersion:[null]})}ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i&&(this.methodId=+i,this.isEditMode=!0,this.loadMethodData())}loadMethodData(){this.methodId&&this.adminShippingMethodService.getShippingMethodById(this.methodId).subscribe({next:i=>{this.shippingForm.patchValue(i)},error:i=>{this.notificationService.show(i?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A","error"),this.router.navigate(["/admin/shipping-methods"])}})}onSubmit(){if(this.shippingForm.invalid){this.shippingForm.markAllAsTouched();return}this.isSubmitting=!0;let i=this.shippingForm.getRawValue();(this.isEditMode&&this.methodId?this.adminShippingMethodService.updateShippingMethod(this.methodId,i):this.adminShippingMethodService.createShippingMethod(i)).pipe(V(()=>this.isSubmitting=!1)).subscribe({next:()=>{this.notificationService.show(`\u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A ${this.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"} \u0634\u062F`,"success"),this.router.navigate(["/admin/shipping-methods"])},error:u=>{u.status===409?(this.notificationService.show("\u0627\u06CC\u0646 \u0631\u06A9\u0648\u0631\u062F \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627 \u0635\u0641\u062D\u0647 \u0631\u0627 \u0631\u0641\u0631\u0634 \u06A9\u0646\u06CC\u062F.","error"),this.loadMethodData()):this.notificationService.show(u?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062B\u0628\u062A \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A","error")}})}};a.\u0275fac=function(r){return new(r||a)(f(ye),f(ee),f(pe),f(Je),f(I))},a.\u0275cmp=y({type:a,selectors:[["app-admin-shipping-method-form"]],decls:31,vars:8,consts:[[1,"max-w-2xl","mx-auto"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold"],["routerLink","/admin/shipping-methods",1,"btn","btn-outline","btn-sm"],[1,"card","p-6","space-y-6",3,"ngSubmit","formGroup"],[1,"space-y-2"],["for","name",1,"font-medium"],["type","text","id","name","formControlName","name","placeholder","\u0645\u062B\u0627\u0644: \u067E\u0633\u062A \u067E\u06CC\u0634\u062A\u0627\u0632","maxlength","100",1,"input"],["class","text-xs text-destructive pt-1",4,"ngIf"],["for","cost",1,"font-medium"],["type","number","id","cost","formControlName","cost","placeholder","\u0647\u0632\u06CC\u0646\u0647 \u0628\u0647 \u062A\u0648\u0645\u0627\u0646",1,"input"],["for","estimatedDeliveryTime",1,"font-medium"],["type","text","id","estimatedDeliveryTime","formControlName","estimatedDeliveryTime","placeholder","\u0645\u062B\u0627\u0644: \u06F2 \u062A\u0627 \u06F4 \u0631\u0648\u0632 \u06A9\u0627\u0631\u06CC","maxlength","100",1,"input"],["for","description",1,"font-medium"],["id","description","formControlName","description","rows","3","placeholder","\u062A\u0648\u0636\u06CC\u062D\u0627\u062A \u062A\u06A9\u0645\u06CC\u0644\u06CC","maxlength","500",1,"input"],["class","flex items-center pt-2",4,"ngIf"],[1,"flex","rtl:justify-start","pt-4","border-t"],["type","submit",1,"btn","btn-primary","btn-md",3,"disabled"],["class","material-icons animate-spin me-2",4,"ngIf"],[1,"text-xs","text-destructive","pt-1"],[1,"flex","items-center","pt-2"],["type","checkbox","id","isActive","formControlName","isActive",1,"checkbox"],["for","isActive",1,"ms-2","font-medium","cursor-pointer"],[1,"material-icons","animate-spin","me-2"]],template:function(r,u){if(r&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),n(3),t(),e(4,"a",3),n(5,"\u0628\u0627\u0632\u06AF\u0634\u062A"),t()(),e(6,"form",4),x("ngSubmit",function(){return u.onSubmit()}),e(7,"div",5)(8,"label",6),n(9,"\u0646\u0627\u0645 \u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644"),t(),b(10,"input",7),c(11,dr,2,0,"div",8),t(),e(12,"div",5)(13,"label",9),n(14,"\u0647\u0632\u06CC\u0646\u0647"),t(),b(15,"input",10),c(16,lr,2,0,"div",8),t(),e(17,"div",5)(18,"label",11),n(19,"\u0632\u0645\u0627\u0646 \u062A\u062E\u0645\u06CC\u0646\u06CC \u062A\u062D\u0648\u06CC\u0644"),t(),b(20,"input",12),t(),e(21,"div",5)(22,"label",13),n(23,"\u062A\u0648\u0636\u06CC\u062D\u0627\u062A (\u0627\u062E\u062A\u06CC\u0627\u0631\u06CC)"),t(),b(24,"textarea",14),t(),c(25,mr,4,0,"div",15),e(26,"div",16)(27,"button",17),c(28,cr,2,0,"span",18),e(29,"span"),n(30),t()()()()()),r&2){let m,g;d(3),v("",u.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"," \u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644"),d(3),l("formGroup",u.shippingForm),d(5),l("ngIf",((m=u.shippingForm.get("name"))==null?null:m.invalid)&&((m=u.shippingForm.get("name"))==null?null:m.touched)),d(5),l("ngIf",((g=u.shippingForm.get("cost"))==null?null:g.invalid)&&((g=u.shippingForm.get("cost"))==null?null:g.touched)),d(9),l("ngIf",u.isEditMode),d(2),l("disabled",u.shippingForm.invalid||u.isSubmitting),d(),l("ngIf",u.isSubmitting),d(2),h(u.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u0630\u062E\u06CC\u0631\u0647...":"\u0630\u062E\u06CC\u0631\u0647")}},dependencies:[A,_,J,z,B,te,xe,T,q,ke,H,W,D,N],encapsulation:2});let o=a;return o})();var Me=(()=>{let a=class a{constructor(i){this.http=i,this.apiUrl=`${j.API_URL}admin/attributes`}getAllAttributeTypes(){return this.http.get(this.apiUrl)}getAttributeTypeById(i){return this.http.get(`${this.apiUrl}/${i}`)}createAttributeType(i){return this.http.post(this.apiUrl,i)}updateAttributeType(i,r){return this.http.put(`${this.apiUrl}/${i}`,r)}deleteAttributeType(i){return this.http.delete(`${this.apiUrl}/${i}`)}createAttributeValue(i,r){return this.http.post(`${this.apiUrl}/${i}/values`,r)}updateAttributeValue(i,r){return this.http.put(`${this.apiUrl}/values/${i}`,r)}deleteAttributeValue(i){return this.http.delete(`${this.apiUrl}/values/${i}`)}};a.\u0275fac=function(r){return new(r||a)($(G))},a.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();var pr=o=>["/admin/attributes",o,"values"],fr=o=>["/admin/attributes/edit",o];function gr(o,a){o&1&&(e(0,"div",7)(1,"span",8),n(2,"sync"),t()())}function hr(o,a){if(o&1){let s=E();e(0,"tr",15)(1,"td",16),n(2),t(),e(3,"td",17),n(4),t(),e(5,"td",12),n(6),t(),e(7,"td",18)(8,"a",19),n(9,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u0642\u0627\u062F\u06CC\u0631"),t(),e(10,"a",20)(11,"span",21),n(12,"edit"),t()(),e(13,"button",22),x("click",function(){let r=C(s).$implicit,u=p(2);return S(u.deleteType(r.id))}),e(14,"span",21),n(15,"delete"),t()()()()}if(o&2){let s=a.$implicit;d(2),h(s.displayName),d(2),h(s.name),d(2),h((s.values==null?null:s.values.length)||0),d(2),l("routerLink",Y(5,pr,s.id)),d(2),l("routerLink",Y(7,fr,s.id))}}function xr(o,a){if(o&1&&(e(0,"table",9)(1,"thead",10)(2,"tr")(3,"th",11),n(4,"\u0646\u0627\u0645 \u0646\u0645\u0627\u06CC\u0634\u06CC"),t(),e(5,"th",11),n(6,"\u0646\u0627\u0645 \u0633\u06CC\u0633\u062A\u0645\u06CC"),t(),e(7,"th",12),n(8,"\u062A\u0639\u062F\u0627\u062F \u0645\u0642\u0627\u062F\u06CC\u0631"),t(),e(9,"th",13),n(10,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t()()(),e(11,"tbody"),c(12,hr,16,9,"tr",14),t()()),o&2){let s=p();d(12),l("ngForOf",s.types)}}var Qt=(()=>{let a=class a{constructor(i,r){this.attributeService=i,this.notificationService=r,this.types=[],this.isLoading=!0}ngOnInit(){this.loadTypes()}loadTypes(){this.isLoading=!0,this.attributeService.getAllAttributeTypes().subscribe({next:i=>{this.types=i,this.isLoading=!1},error:()=>{this.isLoading=!1,this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC","error")}})}deleteType(i){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0648\u06CC\u0698\u06AF\u06CC \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F")&&this.attributeService.deleteAttributeType(i).subscribe({next:()=>{this.notificationService.show("\u062D\u0630\u0641 \u0634\u062F","success"),this.loadTypes()},error:r=>this.notificationService.show(r.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641","error")})}};a.\u0275fac=function(r){return new(r||a)(f(Me),f(I))},a.\u0275cmp=y({type:a,selectors:[["app-admin-attribute-type-list"]],decls:9,vars:2,consts:[[1,"space-y-6"],[1,"flex","justify-between","items-center"],[1,"text-2xl","font-bold","text-foreground"],["routerLink","/admin/attributes/new",1,"btn","btn-primary"],[1,"card","overflow-hidden"],["class","flex justify-center p-10",4,"ngIf"],["class","w-full text-sm text-right",4,"ngIf"],[1,"flex","justify-center","p-10"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"w-full","text-sm","text-right"],[1,"bg-muted/50","text-muted-foreground","border-b","border-border"],[1,"p-4"],[1,"p-4","text-center"],[1,"p-4","text-end"],["class","border-b border-border hover:bg-muted/20",4,"ngFor","ngForOf"],[1,"border-b","border-border","hover:bg-muted/20"],[1,"p-4","font-medium"],[1,"p-4","font-mono","text-xs"],[1,"p-4","flex","justify-end","gap-2"],[1,"btn","btn-outline","btn-sm",3,"routerLink"],[1,"btn","btn-ghost","btn-icon","btn-sm","text-primary",3,"routerLink"],[1,"material-icons","text-base"],[1,"btn","btn-ghost","btn-icon","btn-sm","text-destructive",3,"click"]],template:function(r,u){r&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),n(3,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u0648\u06CC\u0698\u06AF\u06CC\u200C\u0647\u0627"),t(),e(4,"a",3),n(5,"\u0627\u0641\u0632\u0648\u062F\u0646 \u0648\u06CC\u0698\u06AF\u06CC"),t()(),e(6,"div",4),c(7,gr,3,0,"div",5)(8,xr,13,1,"table",6),t()()),r&2&&(d(7),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading))},dependencies:[A,k,_,D,N],encapsulation:2});let o=a;return o})();function vr(o,a){o&1&&(e(0,"div",15),b(1,"input",16),e(2,"label",17),n(3,"\u0641\u0639\u0627\u0644"),t()())}function br(o,a){o&1&&(e(0,"span",18),n(1,"sync"),t())}var nt=(()=>{let a=class a{constructor(i,r,u,m,g){this.fb=i,this.route=r,this.router=u,this.attributeService=m,this.notificationService=g,this.isEditMode=!1,this.id=null,this.isSubmitting=!1,this.form=this.fb.group({name:["",[F.required]],displayName:["",[F.required]],sortOrder:[0],isActive:[!0]})}ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i&&(this.id=+i,this.isEditMode=!0,this.loadData())}loadData(){this.id&&this.attributeService.getAttributeTypeById(this.id).subscribe({next:i=>this.form.patchValue(i),error:()=>this.router.navigate(["/admin/attributes"])})}onSubmit(){if(this.form.invalid)return;this.isSubmitting=!0,(this.isEditMode&&this.id?this.attributeService.updateAttributeType(this.id,this.form.value):this.attributeService.createAttributeType(this.form.value)).pipe(V(()=>this.isSubmitting=!1)).subscribe({next:()=>{this.notificationService.show("\u0639\u0645\u0644\u06CC\u0627\u062A \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u0646\u062C\u0627\u0645 \u0634\u062F","success"),this.router.navigate(["/admin/attributes"])},error:r=>this.notificationService.show(r.error?.message||"\u062E\u0637\u0627","error")})}};a.\u0275fac=function(r){return new(r||a)(f(ye),f(ee),f(pe),f(Me),f(I))},a.\u0275cmp=y({type:a,selectors:[["app-admin-attribute-type-form"]],decls:28,vars:5,consts:[[1,"max-w-xl","mx-auto"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-foreground"],["routerLink","/admin/attributes",1,"btn","btn-outline","btn-sm"],[1,"card","p-6","space-y-6",3,"ngSubmit","formGroup"],[1,"space-y-2"],[1,"text-sm","font-medium"],[1,"text-destructive"],["type","text","formControlName","name","placeholder","Color",1,"input","w-full","ltr-input"],["type","text","formControlName","displayName","placeholder","\u0631\u0646\u06AF",1,"input","w-full"],["type","number","formControlName","sortOrder",1,"input","w-full"],["class","flex items-center pt-2",4,"ngIf"],[1,"flex","justify-end","border-t","border-border","pt-4"],["type","submit",1,"btn","btn-primary","min-w-[100px]",3,"disabled"],["class","material-icons animate-spin me-2 text-sm",4,"ngIf"],[1,"flex","items-center","pt-2"],["type","checkbox","formControlName","isActive",1,"checkbox"],[1,"ms-2","font-medium"],[1,"material-icons","animate-spin","me-2","text-sm"]],template:function(r,u){r&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),n(3),t(),e(4,"a",3),n(5,"\u0628\u0627\u0632\u06AF\u0634\u062A"),t()(),e(6,"form",4),x("ngSubmit",function(){return u.onSubmit()}),e(7,"div",5)(8,"label",6),n(9,"\u0646\u0627\u0645 \u0633\u06CC\u0633\u062A\u0645\u06CC (\u0627\u0646\u06AF\u0644\u06CC\u0633\u06CC) "),e(10,"span",7),n(11,"*"),t()(),b(12,"input",8),t(),e(13,"div",5)(14,"label",6),n(15,"\u0646\u0627\u0645 \u0646\u0645\u0627\u06CC\u0634\u06CC (\u0641\u0627\u0631\u0633\u06CC) "),e(16,"span",7),n(17,"*"),t()(),b(18,"input",9),t(),e(19,"div",5)(20,"label",6),n(21,"\u062A\u0631\u062A\u06CC\u0628 \u0646\u0645\u0627\u06CC\u0634"),t(),b(22,"input",10),t(),c(23,vr,4,0,"div",11),e(24,"div",12)(25,"button",13),c(26,br,2,0,"span",14),n(27," \u0630\u062E\u06CC\u0631\u0647 "),t()()()()),r&2&&(d(3),v("",u.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"," \u0648\u06CC\u0698\u06AF\u06CC"),d(3),l("formGroup",u.form),d(17),l("ngIf",u.isEditMode),d(2),l("disabled",u.form.invalid||u.isSubmitting),d(),l("ngIf",u.isSubmitting))},dependencies:[A,_,J,z,B,te,xe,T,q,H,W,D,N],encapsulation:2});let o=a;return o})();function Cr(o,a){if(o&1){let s=E();e(0,"button",25),x("click",function(){C(s);let r=p();return S(r.cancelEdit())}),n(1,"\u0627\u0646\u0635\u0631\u0627\u0641"),t()}}function Sr(o,a){if(o&1){let s=E();e(0,"tr",26)(1,"td",22),b(2,"div",27),t(),e(3,"td",22),n(4),t(),e(5,"td",28),n(6),t(),e(7,"td",22),n(8),t(),e(9,"td",29)(10,"button",30),x("click",function(){let r=C(s).$implicit,u=p();return S(u.editValue(r))}),e(11,"span",31),n(12,"edit"),t()(),e(13,"button",32),x("click",function(){let r=C(s).$implicit,u=p();return S(u.deleteValue(r.id))}),e(14,"span",31),n(15,"delete"),t()()()()}if(o&2){let s=a.$implicit;d(2),Oe("background-color",s.hexCode||"transparent"),d(2),h(s.displayValue),d(2),h(s.value),d(2),h(s.hexCode)}}var Yt=(()=>{let a=class a{constructor(i,r,u,m){this.route=i,this.attributeService=r,this.fb=u,this.notificationService=m,this.typeName="",this.values=[],this.isEditing=!1,this.editId=null,this.isSubmitting=!1,this.form=this.fb.group({value:["",F.required],displayValue:["",F.required],hexCode:["#000000"],sortOrder:[0]})}ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i&&(this.typeId=+i,this.loadData())}loadData(){this.attributeService.getAttributeTypeById(this.typeId).subscribe(i=>{this.typeName=i.displayName,this.values=i.values})}onSubmit(){if(this.form.invalid)return;this.isSubmitting=!0,(this.isEditing&&this.editId?this.attributeService.updateAttributeValue(this.editId,this.form.value):this.attributeService.createAttributeValue(this.typeId,this.form.value)).subscribe({next:()=>{this.notificationService.show("\u0630\u062E\u06CC\u0631\u0647 \u0634\u062F","success"),this.isSubmitting=!1,this.cancelEdit(),this.loadData()},error:r=>{this.isSubmitting=!1,this.notificationService.show(r.error?.message||"\u062E\u0637\u0627","error")}})}editValue(i){this.isEditing=!0,this.editId=i.id,this.form.patchValue({value:i.value,displayValue:i.displayValue,hexCode:i.hexCode,sortOrder:i.sortOrder||0})}cancelEdit(){this.isEditing=!1,this.editId=null,this.form.reset({hexCode:"#000000",sortOrder:0})}deleteValue(i){confirm("\u062D\u0630\u0641 \u0634\u0648\u062F\u061F")&&this.attributeService.deleteAttributeValue(i).subscribe({next:()=>this.loadData(),error:r=>this.notificationService.show(r.error?.message||"\u062E\u0637\u0627","error")})}};a.\u0275fac=function(r){return new(r||a)(f(ee),f(Me),f(ye),f(I))},a.\u0275cmp=y({type:a,selectors:[["app-attribute-values"]],decls:46,vars:7,consts:[[1,"max-w-4xl","mx-auto","space-y-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold"],["routerLink","/admin/attributes",1,"btn","btn-outline","btn-sm"],[1,"card","p-6","bg-muted/20","border-dashed"],[1,"font-semibold","mb-4"],[1,"flex","gap-4","items-end","flex-wrap",3,"ngSubmit","formGroup"],[1,"flex-1","min-w-[200px]"],[1,"text-xs","font-medium","mb-1","block"],["type","text","formControlName","displayValue","placeholder","\u0645\u062B\u0627\u0644: \u0642\u0631\u0645\u0632",1,"input","w-full"],["type","text","formControlName","value","placeholder","Red",1,"input","w-full"],[1,"w-24"],["type","color","formControlName","hexCode",1,"h-10","w-full","cursor-pointer","rounded","border","p-1"],[1,"w-20"],["type","number","formControlName","sortOrder",1,"input","w-full"],[1,"flex","gap-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button","class","btn btn-ghost",3,"click",4,"ngIf"],[1,"card","overflow-hidden"],[1,"w-full","text-sm","text-right"],[1,"bg-muted/50","border-b","border-border"],[1,"p-4","w-16"],[1,"p-4"],[1,"p-4","text-end"],["class","border-b border-border hover:bg-muted/20",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-ghost",3,"click"],[1,"border-b","border-border","hover:bg-muted/20"],[1,"w-6","h-6","rounded-full","border"],[1,"p-4","font-mono","text-xs"],[1,"p-4","flex","justify-end","gap-2"],[1,"btn","btn-ghost","btn-icon","btn-sm","text-primary",3,"click"],[1,"material-icons","text-base"],[1,"btn","btn-ghost","btn-icon","btn-sm","text-destructive",3,"click"]],template:function(r,u){r&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),n(3),t(),e(4,"a",3),n(5,"\u0628\u0627\u0632\u06AF\u0634\u062A"),t()(),e(6,"div",4)(7,"h2",5),n(8),t(),e(9,"form",6),x("ngSubmit",function(){return u.onSubmit()}),e(10,"div",7)(11,"label",8),n(12,"\u0645\u0642\u062F\u0627\u0631 (\u0646\u0645\u0627\u06CC\u0634\u06CC)"),t(),b(13,"input",9),t(),e(14,"div",7)(15,"label",8),n(16,"\u0645\u0642\u062F\u0627\u0631 (\u0633\u06CC\u0633\u062A\u0645\u06CC)"),t(),b(17,"input",10),t(),e(18,"div",11)(19,"label",8),n(20,"\u06A9\u062F \u0631\u0646\u06AF"),t(),b(21,"input",12),t(),e(22,"div",13)(23,"label",8),n(24,"\u062A\u0631\u062A\u06CC\u0628"),t(),b(25,"input",14),t(),e(26,"div",15)(27,"button",16),n(28),t(),c(29,Cr,2,0,"button",17),t()()(),e(30,"div",18)(31,"table",19)(32,"thead",20)(33,"tr")(34,"th",21),n(35,"\u0631\u0646\u06AF"),t(),e(36,"th",22),n(37,"\u0645\u0642\u062F\u0627\u0631 \u0646\u0645\u0627\u06CC\u0634\u06CC"),t(),e(38,"th",22),n(39,"\u0645\u0642\u062F\u0627\u0631 \u0633\u06CC\u0633\u062A\u0645\u06CC"),t(),e(40,"th",22),n(41,"\u062A\u0631\u062A\u06CC\u0628"),t(),e(42,"th",23),n(43,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t()()(),e(44,"tbody"),c(45,Sr,16,5,"tr",24),t()()()()),r&2&&(d(3),v("\u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u0642\u0627\u062F\u06CC\u0631: ",u.typeName),d(5),h(u.isEditing?"\u0648\u06CC\u0631\u0627\u06CC\u0634 \u0645\u0642\u062F\u0627\u0631":"\u0627\u0641\u0632\u0648\u062F\u0646 \u0645\u0642\u062F\u0627\u0631 \u062C\u062F\u06CC\u062F"),d(),l("formGroup",u.form),d(18),l("disabled",u.form.invalid||u.isSubmitting),d(),v(" ",u.isEditing?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u0641\u0632\u0648\u062F\u0646"," "),d(),l("ngIf",u.isEditing),d(16),l("ngForOf",u.values))},dependencies:[A,k,_,J,z,B,te,T,q,H,W,D,N],encapsulation:2});let o=a;return o})();var Ke=(()=>{let a=class a{constructor(i){this.http=i,this.apiUrl=`${j.API_URL}admin/discounts`}getDiscounts(i=!1,r=1,u=20){let m=new Q().set("includeExpired",i.toString()).set("page",r.toString()).set("pageSize",u.toString());return this.http.get(this.apiUrl,{params:m})}getDiscountById(i){return this.http.get(`${this.apiUrl}/${i}`)}createDiscount(i){return this.http.post(this.apiUrl,i)}updateDiscount(i,r){return this.http.put(`${this.apiUrl}/${i}`,r)}deleteDiscount(i){return this.http.delete(`${this.apiUrl}/${i}`)}getDiscountUsages(i,r=1,u=20){let m=new Q().set("page",r.toString()).set("pageSize",u.toString());return this.http.get(`${this.apiUrl}/${i}/usages`,{params:m})}};a.\u0275fac=function(r){return new(r||a)($(G))},a.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();var yr=o=>["/admin/discounts/edit",o];function _r(o,a){if(o&1&&(e(0,"span"),n(1),t()),o&2){let s=p().$implicit;d(),v("/ ",s.usageLimit)}}function Ar(o,a){if(o&1){let s=E();e(0,"tr",11)(1,"td",12),n(2),t(),e(3,"td",7),n(4),t(),e(5,"td",7),n(6),c(7,_r,2,1,"span",13),t(),e(8,"td",7),n(9),w(10,"date"),t(),e(11,"td",7)(12,"span",14),n(13),t()(),e(14,"td",15)(15,"button",16),x("click",function(){let r=C(s).$implicit,u=p();return S(u.viewUsage(r.id))}),n(16,"\u062A\u0627\u0631\u06CC\u062E\u0686\u0647"),t(),e(17,"a",17)(18,"span",18),n(19,"edit"),t()(),e(20,"button",19),x("click",function(){let r=C(s).$implicit,u=p();return S(u.deleteDiscount(r.id))}),e(21,"span",18),n(22,"delete"),t()()()()}if(o&2){let s=a.$implicit;d(2),h(s.code),d(2),v("",s.percentage,"%"),d(2),v("",s.usedCount," "),d(),l("ngIf",s.usageLimit),d(2),h(s.expiresAt?ae(10,8,s.expiresAt,"yyyy/MM/dd"):"\u0646\u0627\u0645\u062D\u062F\u0648\u062F"),d(3),l("ngClass",s.isActive?"bg-success/10 text-success":"bg-destructive/10 text-destructive"),d(),v(" ",s.isActive?"\u0641\u0639\u0627\u0644":"\u063A\u06CC\u0631\u0641\u0639\u0627\u0644"," "),d(4),l("routerLink",Y(11,yr,s.id))}}function wr(o,a){if(o&1&&(e(0,"tr",30)(1,"td",28),n(2),t(),e(3,"td",28),n(4),t(),e(5,"td",28),n(6),w(7,"number"),t(),e(8,"td",28),n(9),w(10,"date"),t()()),o&2){let s=a.$implicit;d(2),h(s.userName),d(2),v("#",s.orderId),d(2),h(M(7,4,s.discountAmount)),d(3),h(ae(10,6,s.usedAt,"short"))}}function Fr(o,a){o&1&&(e(0,"tr")(1,"td",31),n(2,"\u0645\u0648\u0631\u062F\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F"),t()())}function Er(o,a){if(o&1){let s=E();e(0,"div",20)(1,"div",21)(2,"div",22)(3,"h3",23),n(4,"\u062A\u0627\u0631\u06CC\u062E\u0686\u0647 \u0627\u0633\u062A\u0641\u0627\u062F\u0647"),t(),e(5,"button",24),x("click",function(){C(s);let r=p();return S(r.showUsageModal=!1)}),e(6,"span",25),n(7,"close"),t()()(),e(8,"div",26)(9,"table",5)(10,"thead",27)(11,"tr")(12,"th",28),n(13,"\u06A9\u0627\u0631\u0628\u0631"),t(),e(14,"th",28),n(15,"\u0633\u0641\u0627\u0631\u0634"),t(),e(16,"th",28),n(17,"\u0645\u0628\u0644\u063A \u062A\u062E\u0641\u06CC\u0641"),t(),e(18,"th",28),n(19,"\u062A\u0627\u0631\u06CC\u062E"),t()()(),e(20,"tbody"),c(21,wr,11,9,"tr",29)(22,Fr,3,0,"tr",13),t()()()()()}if(o&2){let s=p();d(21),l("ngForOf",s.usages),d(),l("ngIf",s.usages.length===0)}}var Zt=(()=>{let a=class a{constructor(i,r){this.discountService=i,this.notificationService=r,this.discounts=[],this.usages=[],this.showUsageModal=!1}ngOnInit(){this.loadDiscounts()}loadDiscounts(){this.discountService.getDiscounts(!0).subscribe(i=>{this.discounts=i.items})}deleteDiscount(i){confirm("\u062D\u0630\u0641 \u0634\u0648\u062F\u061F")&&this.discountService.deleteDiscount(i).subscribe({next:()=>this.loadDiscounts(),error:r=>this.notificationService.show(r.error?.message||"\u062E\u0637\u0627","error")})}viewUsage(i){this.discountService.getDiscountUsages(i).subscribe(r=>{this.usages=r.items,this.showUsageModal=!0})}};a.\u0275fac=function(r){return new(r||a)(f(Ke),f(I))},a.\u0275cmp=y({type:a,selectors:[["app-admin-discount-list"]],decls:25,vars:2,consts:[[1,"space-y-6"],[1,"flex","justify-between","items-center"],[1,"text-2xl","font-bold"],["routerLink","/admin/discounts/new",1,"btn","btn-primary"],[1,"card","overflow-hidden"],[1,"w-full","text-sm","text-right"],[1,"bg-muted/50","border-b","border-border"],[1,"p-4"],[1,"p-4","text-end"],["class","border-b border-border hover:bg-muted/20",4,"ngFor","ngForOf"],["class","fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",4,"ngIf"],[1,"border-b","border-border","hover:bg-muted/20"],[1,"p-4","font-mono","font-bold"],[4,"ngIf"],[1,"px-2","py-1","rounded-full","text-xs",3,"ngClass"],[1,"p-4","flex","justify-end","gap-2"],[1,"btn","btn-ghost","btn-sm",3,"click"],[1,"btn","btn-ghost","btn-icon","btn-sm","text-primary",3,"routerLink"],[1,"material-icons","text-base"],[1,"btn","btn-ghost","btn-icon","btn-sm","text-destructive",3,"click"],[1,"fixed","inset-0","z-50","flex","items-center","justify-center","bg-black/60","backdrop-blur-sm","p-4"],[1,"bg-card","rounded-lg","shadow-xl","w-full","max-w-2xl","max-h-[80vh]","overflow-hidden","flex","flex-col"],[1,"p-4","border-b","flex","justify-between","items-center"],[1,"font-bold"],[1,"btn","btn-ghost","btn-icon",3,"click"],[1,"material-icons"],[1,"overflow-auto","p-4"],[1,"bg-muted/50"],[1,"p-2"],["class","border-b",4,"ngFor","ngForOf"],[1,"border-b"],["colspan","4",1,"p-4","text-center","text-muted-foreground"]],template:function(r,u){r&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),n(3,"\u06A9\u062F\u0647\u0627\u06CC \u062A\u062E\u0641\u06CC\u0641"),t(),e(4,"a",3),n(5,"\u06A9\u062F \u062C\u062F\u06CC\u062F"),t()(),e(6,"div",4)(7,"table",5)(8,"thead",6)(9,"tr")(10,"th",7),n(11,"\u06A9\u062F"),t(),e(12,"th",7),n(13,"\u062F\u0631\u0635\u062F"),t(),e(14,"th",7),n(15,"\u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u0634\u062F\u0647"),t(),e(16,"th",7),n(17,"\u0627\u0646\u0642\u0636\u0627"),t(),e(18,"th",7),n(19,"\u0648\u0636\u0639\u06CC\u062A"),t(),e(20,"th",8),n(21,"\u0639\u0645\u0644\u06CC\u0627\u062A"),t()()(),e(22,"tbody"),c(23,Ar,23,13,"tr",9),t()()()(),c(24,Er,23,2,"div",10)),r&2&&(d(23),l("ngForOf",u.discounts),d(),l("ngIf",u.showUsageModal))},dependencies:[A,se,k,_,D,N,Z,ce],encapsulation:2});let o=a;return o})();function Ir(o,a){o&1&&(e(0,"div",19),b(1,"input",20),e(2,"label",21),n(3,"\u0641\u0639\u0627\u0644"),t()())}function kr(o,a){o&1&&(e(0,"span",22),n(1,"sync"),t())}var rt=(()=>{let a=class a{constructor(i,r,u,m,g){this.fb=i,this.route=r,this.router=u,this.discountService=m,this.notificationService=g,this.isEditMode=!1,this.id=null,this.isSubmitting=!1,this.form=this.fb.group({code:["",[F.required]],percentage:[0,[F.required,F.min(0),F.max(100)]],maxDiscountAmount:[null],minOrderAmount:[null],usageLimit:[null],expiresAt:[null],isActive:[!0],rowVersion:[null]})}ngOnInit(){let i=this.route.snapshot.paramMap.get("id");i&&(this.id=+i,this.isEditMode=!0,this.loadDiscount())}loadDiscount(){this.id&&this.discountService.getDiscountById(this.id).subscribe(i=>{this.form.patchValue(i)})}onSubmit(){if(this.form.invalid)return;this.isSubmitting=!0,(this.isEditMode&&this.id?this.discountService.updateDiscount(this.id,this.form.value):this.discountService.createDiscount(this.form.value)).pipe(V(()=>this.isSubmitting=!1)).subscribe({next:()=>{this.notificationService.show("\u06A9\u062F \u062A\u062E\u0641\u06CC\u0641 \u0630\u062E\u06CC\u0631\u0647 \u0634\u062F","success"),this.router.navigate(["/admin/discounts"])},error:r=>this.notificationService.show(r.error?.message||"\u062E\u0637\u0627","error")})}};a.\u0275fac=function(r){return new(r||a)(f(ye),f(ee),f(pe),f(Ke),f(I))},a.\u0275cmp=y({type:a,selectors:[["app-admin-discount-form"]],decls:41,vars:6,consts:[[1,"max-w-2xl","mx-auto"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold"],["routerLink","/admin/discounts",1,"btn","btn-outline","btn-sm"],[1,"card","p-6","space-y-6",3,"ngSubmit","formGroup"],[1,"space-y-2"],[1,"font-medium"],[1,"text-destructive"],["type","text","formControlName","code",1,"input","w-full","ltr-input","font-mono","uppercase",3,"readonly"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["type","number","formControlName","percentage","min","0","max","100",1,"input","w-full"],["type","number","formControlName","maxDiscountAmount",1,"input","w-full"],["type","number","formControlName","minOrderAmount",1,"input","w-full"],["type","number","formControlName","usageLimit",1,"input","w-full"],["type","datetime-local","formControlName","expiresAt",1,"input","w-full","ltr-input"],["class","flex items-center pt-2",4,"ngIf"],[1,"flex","justify-end","border-t","pt-4"],["type","submit",1,"btn","btn-primary","min-w-[120px]",3,"disabled"],["class","material-icons animate-spin me-2 text-sm",4,"ngIf"],[1,"flex","items-center","pt-2"],["type","checkbox","formControlName","isActive",1,"checkbox"],[1,"ms-2","font-medium"],[1,"material-icons","animate-spin","me-2","text-sm"]],template:function(r,u){r&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),n(3),t(),e(4,"a",3),n(5,"\u0628\u0627\u0632\u06AF\u0634\u062A"),t()(),e(6,"form",4),x("ngSubmit",function(){return u.onSubmit()}),e(7,"div",5)(8,"label",6),n(9,"\u06A9\u062F \u062A\u062E\u0641\u06CC\u0641 "),e(10,"span",7),n(11,"*"),t()(),b(12,"input",8),t(),e(13,"div",9)(14,"div",5)(15,"label",6),n(16,"\u062F\u0631\u0635\u062F \u062A\u062E\u0641\u06CC\u0641 "),e(17,"span",7),n(18,"*"),t()(),b(19,"input",10),t(),e(20,"div",5)(21,"label",6),n(22,"\u0633\u0642\u0641 \u062A\u062E\u0641\u06CC\u0641 (\u062A\u0648\u0645\u0627\u0646)"),t(),b(23,"input",11),t(),e(24,"div",5)(25,"label",6),n(26,"\u062D\u062F\u0627\u0642\u0644 \u062E\u0631\u06CC\u062F (\u062A\u0648\u0645\u0627\u0646)"),t(),b(27,"input",12),t(),e(28,"div",5)(29,"label",6),n(30,"\u062A\u0639\u062F\u0627\u062F \u0642\u0627\u0628\u0644 \u0627\u0633\u062A\u0641\u0627\u062F\u0647"),t(),b(31,"input",13),t()(),e(32,"div",5)(33,"label",6),n(34,"\u062A\u0627\u0631\u06CC\u062E \u0627\u0646\u0642\u0636\u0627"),t(),b(35,"input",14),t(),c(36,Ir,4,0,"div",15),e(37,"div",16)(38,"button",17),c(39,kr,2,0,"span",18),n(40," \u0630\u062E\u06CC\u0631\u0647 "),t()()()()),r&2&&(d(3),v("",u.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u06CC\u062C\u0627\u062F"," \u06A9\u062F \u062A\u062E\u0641\u06CC\u0641"),d(3),l("formGroup",u.form),d(6),l("readonly",u.isEditMode),d(24),l("ngIf",u.isEditMode),d(2),l("disabled",u.form.invalid||u.isSubmitting),d(),l("ngIf",u.isSubmitting))},dependencies:[A,_,J,z,B,te,xe,T,q,Ie,_t,H,W,D,N],encapsulation:2});let o=a;return o})();var ei=(()=>{let a=class a{constructor(i){this.http=i,this.apiUrl=`${j.API_URL}admin/reviews`}getReviewsByStatus(i="Pending",r=1,u=20){let m=new Q().set("status",i).set("page",r.toString()).set("pageSize",u.toString());return this.http.get(this.apiUrl,{params:m})}updateReviewStatus(i,r){let u={status:r};return this.http.patch(`${this.apiUrl}/${i}/status`,u)}deleteReview(i){return this.http.delete(`${this.apiUrl}/${i}`)}};a.\u0275fac=function(r){return new(r||a)($(G))},a.\u0275prov=U({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();function Mr(o,a){o&1&&(e(0,"div",11)(1,"span",12),n(2,"sync"),t()())}function Lr(o,a){o&1&&(e(0,"div",13),n(1," \u0646\u0638\u0631\u06CC \u0628\u0627 \u0627\u06CC\u0646 \u0648\u0636\u0639\u06CC\u062A \u06CC\u0627\u0641\u062A \u0646\u0634\u062F. "),t())}function Nr(o,a){o&1&&(e(0,"span",32),n(1,"\u062E\u0631\u06CC\u062F\u0627\u0631"),t())}function Pr(o,a){if(o&1){let s=E();e(0,"button",33),x("click",function(){C(s);let r=p().$implicit,u=p(2);return S(u.updateStatus(r.id,"Approved"))}),n(1,"\u062A\u0627\u06CC\u06CC\u062F"),t()}}function Tr(o,a){if(o&1){let s=E();e(0,"button",34),x("click",function(){C(s);let r=p().$implicit,u=p(2);return S(u.updateStatus(r.id,"Rejected"))}),n(1,"\u0631\u062F \u06A9\u0631\u062F\u0646"),t()}}function Or(o,a){if(o&1){let s=E();e(0,"div",16)(1,"div",17)(2,"div")(3,"span",18),n(4),t(),e(5,"div",19)(6,"span",20),n(7,"star"),t(),e(8,"span"),n(9),t()()(),e(10,"span",21),n(11),w(12,"date"),t()(),e(13,"p",22),n(14),t(),e(15,"div",23)(16,"div",24),n(17," \u062A\u0648\u0633\u0637: "),e(18,"span",25),n(19),t(),c(20,Nr,2,0,"span",26),t(),e(21,"div",27),c(22,Pr,2,0,"button",28)(23,Tr,2,0,"button",29),e(24,"button",30),x("click",function(){let r=C(s).$implicit,u=p(2);return S(u.deleteReview(r.id))}),e(25,"span",31),n(26,"delete"),t()()()()()}if(o&2){let s=a.$implicit;d(4),h(s.title),d(5),h(s.rating),d(2),h(ae(12,8,s.createdAt,"short")),d(3),h(s.comment),d(5),h(s.userName),d(),l("ngIf",s.isVerifiedPurchase),d(2),l("ngIf",s.status==="Pending"||s.status==="Rejected"),d(),l("ngIf",s.status==="Pending"||s.status==="Approved")}}function Vr(o,a){if(o&1&&(e(0,"div",14),c(1,Or,27,11,"div",15),t()),o&2){let s=p();d(),l("ngForOf",s.reviews)}}var ti=(()=>{let a=class a{constructor(i,r){this.reviewService=i,this.notificationService=r,this.reviews=[],this.isLoading=!0,this.statusFilter="Pending"}ngOnInit(){this.loadReviews()}loadReviews(){this.isLoading=!0,this.reviewService.getReviewsByStatus(this.statusFilter).subscribe({next:i=>{this.reviews=i.items,this.isLoading=!1},error:()=>this.isLoading=!1})}updateStatus(i,r){this.reviewService.updateReviewStatus(i,r).subscribe({next:()=>{this.notificationService.show(`\u0648\u0636\u0639\u06CC\u062A \u0628\u0647 ${r} \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F`,"success"),this.loadReviews()},error:()=>this.notificationService.show("\u062E\u0637\u0627","error")})}deleteReview(i){confirm("\u062D\u0630\u0641 \u0634\u0648\u062F\u061F")&&this.reviewService.deleteReview(i).subscribe({next:()=>{this.notificationService.show("\u062D\u0630\u0641 \u0634\u062F","success"),this.loadReviews()},error:()=>this.notificationService.show("\u062E\u0637\u0627","error")})}};a.\u0275fac=function(r){return new(r||a)(f(ei),f(I))},a.\u0275cmp=y({type:a,selectors:[["app-admin-review-list"]],decls:15,vars:4,consts:[[1,"space-y-6"],[1,"flex","items-center","justify-between"],[1,"text-2xl","font-bold"],[1,"input","w-40",3,"ngModelChange","change","ngModel"],["value","Pending"],["value","Approved"],["value","Rejected"],[1,"card","overflow-hidden"],["class","flex justify-center p-10",4,"ngIf"],["class","p-10 text-center text-muted-foreground",4,"ngIf"],["class","divide-y divide-border",4,"ngIf"],[1,"flex","justify-center","p-10"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"p-10","text-center","text-muted-foreground"],[1,"divide-y","divide-border"],["class","p-4 hover:bg-muted/20 transition-colors",4,"ngFor","ngForOf"],[1,"p-4","hover:bg-muted/20","transition-colors"],[1,"flex","justify-between","items-start","mb-2"],[1,"font-bold","text-foreground"],[1,"flex","items-center","gap-1","text-warning","text-sm"],[1,"material-icons","text-base"],[1,"text-xs","text-muted-foreground"],[1,"text-sm","text-foreground/80","mb-3"],[1,"flex","justify-between","items-center","text-sm"],[1,"text-muted-foreground"],[1,"font-medium","text-foreground"],["class","text-success ms-2 text-xs bg-success/10 px-1 rounded",4,"ngIf"],[1,"flex","gap-2"],["class","btn btn-success btn-sm",3,"click",4,"ngIf"],["class","btn btn-warning btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-destructive","btn-sm","btn-icon",3,"click"],[1,"material-icons","text-sm"],[1,"text-success","ms-2","text-xs","bg-success/10","px-1","rounded"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"btn","btn-warning","btn-sm",3,"click"]],template:function(r,u){r&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),n(3,"\u0645\u062F\u06CC\u0631\u06CC\u062A \u0646\u0638\u0631\u0627\u062A"),t(),e(4,"select",3),he("ngModelChange",function(g){return ge(u.statusFilter,g)||(u.statusFilter=g),g}),x("change",function(){return u.loadReviews()}),e(5,"option",4),n(6,"\u062F\u0631 \u0627\u0646\u062A\u0638\u0627\u0631 \u062A\u0627\u06CC\u06CC\u062F"),t(),e(7,"option",5),n(8,"\u062A\u0627\u06CC\u06CC\u062F \u0634\u062F\u0647"),t(),e(9,"option",6),n(10,"\u0631\u062F \u0634\u062F\u0647"),t()()(),e(11,"div",7),c(12,Mr,3,0,"div",8)(13,Lr,2,0,"div",9)(14,Vr,2,1,"div",10),t()()),r&2&&(d(4),fe("ngModel",u.statusFilter),d(8),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading&&u.reviews.length===0),d(),l("ngIf",!u.isLoading&&u.reviews.length>0))},dependencies:[A,k,_,be,ne,re,ie,T,ve,ce],encapsulation:2});let o=a;return o})();function jr(o,a){o&1&&(e(0,"div",14)(1,"span",15),n(2,"sync"),t()())}function Ur(o,a){if(o&1&&(e(0,"tr",20)(1,"td",21),n(2),w(3,"date"),t(),e(4,"td",18)(5,"div",22),n(6),t(),e(7,"div",23),n(8),t()(),e(9,"td",18)(10,"span",24),n(11),t()(),e(12,"td",25),n(13),t(),e(14,"td",18),n(15),t(),e(16,"td",26)(17,"div",27),n(18),t(),e(19,"div",28),n(20),t()()()),o&2){let s=a.$implicit,i=p(2);d(2),h(ae(3,14,s.createdAt,"yyyy/MM/dd HH:mm")),d(4),h(s.productName),d(2),v("SKU: ",s.variantSku),d(2),l("ngClass",i.getTypeClass(s.transactionType)),d(),v(" ",s.transactionType," "),d(),ue("text-success",s.quantityChange>0)("text-destructive",s.quantityChange<0),d(),Se(" ",s.quantityChange>0?"+":"","",s.quantityChange," "),d(2),h(s.stockAfter),d(3),h(s.userName||"System"),d(2),h(s.notes)}}function $r(o,a){if(o&1&&(e(0,"table",16)(1,"thead",17)(2,"tr")(3,"th",18),n(4,"\u062A\u0627\u0631\u06CC\u062E"),t(),e(5,"th",18),n(6,"\u0645\u062D\u0635\u0648\u0644"),t(),e(7,"th",18),n(8,"\u0646\u0648\u0639"),t(),e(9,"th",18),n(10,"\u062A\u063A\u06CC\u06CC\u0631"),t(),e(11,"th",18),n(12,"\u0645\u0648\u062C\u0648\u062F\u06CC \u0646\u0647\u0627\u06CC\u06CC"),t(),e(13,"th",18),n(14,"\u06A9\u0627\u0631\u0628\u0631 / \u06CC\u0627\u062F\u062F\u0627\u0634\u062A"),t()()(),e(15,"tbody"),c(16,Ur,21,17,"tr",19),t()()),o&2){let s=p();d(16),l("ngForOf",s.transactions)}}var ii=(()=>{let a=class a{constructor(i){this.inventoryService=i,this.transactions=[],this.isLoading=!0,this.filterType=""}ngOnInit(){this.loadTransactions()}loadTransactions(){this.isLoading=!0,this.inventoryService.getTransactions(void 0,this.filterType||void 0).subscribe({next:i=>{this.transactions=i.items,this.isLoading=!1},error:()=>this.isLoading=!1})}getTypeClass(i){switch(i.toLowerCase()){case"purchase":return"bg-success/10 text-success";case"sale":return"bg-destructive/10 text-destructive";case"adjustment":return"bg-warning/10 text-warning";default:return"bg-muted text-muted-foreground"}}};a.\u0275fac=function(r){return new(r||a)(f(We))},a.\u0275cmp=y({type:a,selectors:[["app-admin-inventory-transactions"]],decls:21,vars:3,consts:[[1,"space-y-6"],[1,"text-2xl","font-bold"],[1,"card","p-4","bg-muted/20","flex","flex-wrap","gap-4","items-end"],[1,"space-y-1"],[1,"text-xs","font-medium"],[1,"input","w-40",3,"ngModelChange","ngModel"],["value",""],["value","Purchase"],["value","Sale"],["value","Adjustment"],[1,"btn","btn-primary",3,"click"],[1,"card","overflow-hidden"],["class","flex justify-center p-10",4,"ngIf"],["class","w-full text-sm text-right",4,"ngIf"],[1,"flex","justify-center","p-10"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"w-full","text-sm","text-right"],[1,"bg-muted/50","border-b","border-border"],[1,"p-4"],["class","border-b border-border hover:bg-muted/20",4,"ngFor","ngForOf"],[1,"border-b","border-border","hover:bg-muted/20"],[1,"p-4","whitespace-nowrap"],[1,"font-medium"],[1,"text-xs","text-muted-foreground"],[1,"px-2","py-1","rounded-full","text-xs","font-bold",3,"ngClass"],[1,"p-4","font-bold"],[1,"p-4","text-xs"],[1,"font-semibold"],[1,"text-muted-foreground"]],template:function(r,u){r&1&&(e(0,"div",0)(1,"h1",1),n(2,"\u062A\u0627\u0631\u06CC\u062E\u0686\u0647 \u062A\u0631\u0627\u06A9\u0646\u0634\u200C\u0647\u0627\u06CC \u0627\u0646\u0628\u0627\u0631"),t(),e(3,"div",2)(4,"div",3)(5,"label",4),n(6,"\u0646\u0648\u0639 \u062A\u0631\u0627\u06A9\u0646\u0634"),t(),e(7,"select",5),he("ngModelChange",function(g){return ge(u.filterType,g)||(u.filterType=g),g}),e(8,"option",6),n(9,"\u0647\u0645\u0647"),t(),e(10,"option",7),n(11,"\u062E\u0631\u06CC\u062F (\u0627\u0641\u0632\u0627\u06CC\u0634)"),t(),e(12,"option",8),n(13,"\u0641\u0631\u0648\u0634 (\u06A9\u0627\u0647\u0634)"),t(),e(14,"option",9),n(15,"\u0627\u0635\u0644\u0627\u062D \u062F\u0633\u062A\u06CC"),t()()(),e(16,"button",10),x("click",function(){return u.loadTransactions()}),n(17,"\u0641\u06CC\u0644\u062A\u0631"),t()(),e(18,"div",11),c(19,jr,3,0,"div",12)(20,$r,17,1,"table",13),t()()),r&2&&(d(7),fe("ngModel",u.filterType),d(12),l("ngIf",u.isLoading),d(),l("ngIf",!u.isLoading))},dependencies:[A,se,k,_,be,ne,re,ie,T,ve,ce],encapsulation:2});let o=a;return o})();var Hu=[{path:"",component:Ft,canActivate:[yt],children:[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:It},{path:"products",component:$t},{path:"products/new",component:et},{path:"products/edit/:id",component:et},{path:"products/bulk-price-update",component:Bt},{path:"products/low-stock",component:zt},{path:"attributes",component:Qt},{path:"attributes/new",component:nt},{path:"attributes/edit/:id",component:nt},{path:"attributes/:id/values",component:Yt},{path:"categories",component:Mt},{path:"categories/new",component:Ye},{path:"categories/edit/:id",component:Ye},{path:"category-groups",component:Nt},{path:"category-groups/new",component:Xe},{path:"category-groups/edit/:id",component:Xe},{path:"orders",component:Vt},{path:"orders/:id",component:Tt},{path:"order-statuses",component:jt},{path:"order-statuses/new",component:Ze},{path:"order-statuses/edit/:id",component:Ze},{path:"discounts",component:Zt},{path:"discounts/new",component:rt},{path:"discounts/edit/:id",component:rt},{path:"reviews",component:ti},{path:"inventory/transactions",component:ii},{path:"users",component:Rt},{path:"audit-logs",component:Wt},{path:"shipping-methods",component:Kt},{path:"shipping-methods/new",component:tt},{path:"shipping-methods/edit/:id",component:tt}]}];export{Hu as ADMIN_ROUTES};
