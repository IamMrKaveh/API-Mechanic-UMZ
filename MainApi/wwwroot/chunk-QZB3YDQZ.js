import{a as E}from"./chunk-A7ZS4YM6.js";import{F as C,d as _,h as P,i as S,z as k}from"./chunk-KEVVMOUP.js";import{Aa as x,Ab as c,Cb as p,Ea as n,Kb as g,Nb as m,Ob as v,Pa as b,Pb as I,Ua as y,Za as u,gb as s,hb as a,ib as d,jb as h,tb as l}from"./chunk-RYHSS54R.js";var U=t=>["/products",t];function D(t,o){if(t&1&&(a(0,"div",22)(1,"div",23),c(2),m(3,"number"),d()()),t&2){let e=l(2);n(2),p(" ",I(3,1,e.discountPercentage,"1.0-0"),"% ")}}function M(t,o){t&1&&(a(0,"div",24)(1,"span",25),c(2,"\u0646\u0627\u0645\u0648\u062C\u0648\u062F"),d()())}function z(t,o){if(t&1&&(a(0,"span",26),c(1),m(2,"number"),d()),t&2){let e=l(2);n(),p(" ",v(2,1,e.originalPrice)," ")}}function F(t,o){if(t&1&&(a(0,"div",1)(1,"a",2)(2,"span",3),c(3),d()(),a(4,"div",4),h(5,"div",5)(6,"img",6),u(7,D,4,4,"div",7)(8,M,3,0,"div",8),a(9,"div",9)(10,"button",10)(11,"span",11),c(12,"visibility"),d()(),a(13,"button",12)(14,"span",11),c(15,"add_shopping_cart"),d()()()(),a(16,"div",13)(17,"h3",14),c(18),d(),a(19,"div",15)(20,"div",16)(21,"div",17),u(22,z,3,3,"span",18),a(23,"div",19)(24,"span",20),c(25),m(26,"number"),d(),a(27,"span",21),c(28,"\u062A\u0648\u0645\u0627\u0646"),d()()()()()()()),t&2){let e=l();n(),s("routerLink",g(14,U,e.product.id))("title",e.product.name),n(2),p("\u0645\u0634\u0627\u0647\u062F\u0647 ",e.product.name),n(3),s("src",e.productIconUrl,x)("alt",e.product.name),n(),s("ngIf",e.hasDiscount),n(),s("ngIf",!e.isInStock()),n(2),s("routerLink",g(16,U,e.product.id)),n(3),s("disabled",!e.isInStock()),n(5),p(" ",e.product.name," "),n(4),s("ngIf",e.hasDiscount),n(3),p(" ",v(26,12,e.displayPrice)," ")}}var B=(()=>{let o=class o{constructor(i){this.mediaService=i}isInStock(){return this.product?this.product.variants.some(r=>r.isUnlimited)?!0:this.product.totalStock>0:!1}get productIconUrl(){let r=this.product?.images?.find(f=>f.isPrimary)?.url||this.product?.images?.[0]?.url;return r?this.mediaService.getMediaUrl(r):"https://via.placeholder.com/300"}get displayVariant(){if(!(!this.product||!this.product.variants||this.product.variants.length===0))return this.product.variants.reduce((i,r)=>r.sellingPrice<i.sellingPrice?r:i)}get hasDiscount(){let i=this.displayVariant;return i?i.originalPrice>i.sellingPrice:!1}get discountPercentage(){let i=this.displayVariant;return!i||!this.hasDiscount?0:i.discountPercentage}get displayPrice(){return this.displayVariant?.sellingPrice||0}get originalPrice(){return this.displayVariant?.originalPrice||0}};o.\u0275fac=function(r){return new(r||o)(b(E))},o.\u0275cmp=y({type:o,selectors:[["app-product-card"]],inputs:{product:"product"},decls:1,vars:1,consts:[["class","product-card group h-full",4,"ngIf"],[1,"product-card","group","h-full"],[1,"absolute","inset-0","z-10",3,"routerLink","title"],[1,"sr-only"],[1,"product-image"],[1,"absolute","inset-0","bg-gradient-to-t","from-black/5","to-transparent","opacity-0","group-hover:opacity-100","transition-opacity","duration-300"],["loading","lazy","decoding","async",3,"src","alt"],["class","product-badge top-3 left-3",4,"ngIf"],["class","absolute inset-0 z-20 flex items-center justify-center bg-background/60 backdrop-blur-[2px]",4,"ngIf"],[1,"product-actions"],[1,"btn","btn-icon","btn-secondary","rounded-full","shadow-lg","mx-1","hover-scale",3,"routerLink"],[1,"material-icons"],[1,"btn","btn-icon","btn-primary","rounded-full","shadow-lg","mx-1","hover-scale",3,"disabled"],[1,"product-info","flex-1","flex","flex-col"],[1,"product-title","group-hover:text-primary","transition-colors"],[1,"mt-auto","pt-3","border-t","border-border/50"],[1,"product-price","justify-end"],[1,"flex","flex-col","items-end"],["class","price-original",4,"ngIf"],[1,"flex","items-baseline","gap-1"],[1,"price","text-lg"],[1,"text-xs","font-medium","text-muted-foreground"],[1,"product-badge","top-3","left-3"],[1,"discount-badge","animate-fade-in"],[1,"absolute","inset-0","z-20","flex","items-center","justify-center","bg-background/60","backdrop-blur-[2px]"],[1,"badge","badge-secondary","shadow-lg"],[1,"price-original"]],template:function(r,f){r&1&&u(0,F,29,18,"div",0),r&2&&s("ngIf",f.product)},dependencies:[S,_,C,k,P],encapsulation:2});let t=o;return t})();export{B as a};
