import { a as Qe } from "./chunk-CCDKSRRZ.js"; import { a as Ft } from "./chunk-ZHMJELME.js"; import { a as Je } from "./chunk-W65G4XI3.js"; import { a as He } from "./chunk-JBDIXU3W.js"; import { b as Ke } from "./chunk-RWUFDKEU.js"; import { a as Ae } from "./chunk-UCZDBRZX.js"; import "./chunk-MX7VZAVK.js"; import { a as pe, b as H, c as w, d as V, e as J, f as Se, g as O, h as fe, i as Q, j as se, k as It, m as Y, n as ze, o as We, p as X, q as Z, r as ee, s as te, t as kt, u as Me, v as Mt, w as Lt, x as we, y as ge, z as ie } from "./chunk-2WEVJ2Q3.js"; import "./chunk-CVBRNWP7.js"; import { a as k } from "./chunk-OR3E3ANE.js"; import { a as R } from "./chunk-WNMS36QR.js"; import { A as Ce, B as T, C as Et, H as L, b as q, c as I, d as _, f as ve, g as qe, h as be, i as A, m as ut, n as K, q as z, y as ne, z as wt } from "./chunk-H5ECWNVP.js"; import { $b as yt, A as ce, Bb as Ue, Cb as $e, Db as E, G as D, Gb as v, Hb as p, Mb as Re, Nb as Ge, Oa as le, Ob as U, Pb as i, Q as ke, Qb as b, Rb as g, Sa as d, Sb as xe, Ub as ue, Vb as oe, W as G, Wb as ae, Xa as nt, Yb as Be, Zb as $, _ as B, _b as St, ac as F, bb as h, bc as P, cc as he, dc as _t, ea as C, f as Oe, fa as S, gb as y, j as _e, jb as Ct, k as ht, lb as f, lc as At, n as je, o as vt, ra as bt, u as Ie, ub as l, vb as t, wb as e, xb as x } from "./chunk-C5CPS5UB.js"; import { a as Ne, b as Ve } from "./chunk-4CLCTAJ7.js"; var Dt = n => ({ exact: n }); function ci(n, s) { if (n & 1 && (t(0, "span", 30), i(1), e()), n & 2) { let o = p().$implicit; d(), g(" ", o.badge, " ") } } function pi(n, s) { if (n & 1 && (t(0, "a", 27, 0)(2, "span", 28), i(3), e(), i(4), f(5, ci, 2, 1, "span", 29), e()), n & 2) { let o = s.$implicit, r = Re(1); l("routerLink", o.link)("routerLinkActiveOptions", $(7, Dt, o.exact)), d(2), U("text-primary", r.isActive), d(), g(" ", o.icon, " "), d(), g(" ", o.title, " "), d(), l("ngIf", o.badge) } } function fi(n, s) { if (n & 1) { let o = E(); t(0, "div", 31), v("click", function () { C(o); let u = p(); return S(u.isMobileMenuOpen = !1) }), e() } } function gi(n, s) { if (n & 1) { let o = E(); t(0, "a", 39), v("click", function () { C(o); let u = p(2); return S(u.isMobileMenuOpen = !1) }), t(1, "span", 40), i(2), e(), i(3), e() } if (n & 2) { let o = s.$implicit; l("routerLink", o.link)("routerLinkActiveOptions", $(4, Dt, o.exact)), d(2), b(o.icon), d(), g(" ", o.title, " ") } } function xi(n, s) { if (n & 1) { let o = E(); t(0, "div", 32)(1, "div", 33)(2, "span", 34)(3, "span", 35), i(4, "admin_panel_settings"), e(), i(5, " \u0645\u0646\u0648\u06CC \u0645\u062F\u06CC\u0631\u06CC\u062A "), e(), t(6, "button", 36), v("click", function () { C(o); let u = p(); return S(u.isMobileMenuOpen = !1) }), t(7, "span", 21), i(8, "close"), e()()(), t(9, "div", 37)(10, "nav", 9), f(11, gi, 4, 6, "a", 38), e()()() } if (n & 2) { let o = p(); d(11), l("ngForOf", o.menuItems) } } var Tt = (() => { let s = class s { constructor() { this.isMobileMenuOpen = !1, this.menuItems = [{ title: "\u062F\u0627\u0634\u0628\u0648\u0631\u062F", link: "/admin/dashboard", icon: "dashboard", exact: !0 }, { title: "\u0645\u062D\u0635\u0648\u0644\u0627\u062A", link: "/admin/products", icon: "inventory_2", exact: !1 }, { title: "\u0648\u06CC\u0698\u06AF\u06CC\u200C\u0647\u0627\u06CC \u0645\u062D\u0635\u0648\u0644", link: "/admin/attributes", icon: "tune", exact: !1 }, { title: "\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627", link: "/admin/categories", icon: "category", exact: !1 }, { title: "\u06AF\u0631\u0648\u0647\u200C\u0647\u0627\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC", link: "/admin/category-groups", icon: "folder", exact: !1 }, { title: "\u0633\u0641\u0627\u0631\u0634\u0627\u062A", link: "/admin/orders", icon: "receipt_long", exact: !1 }, { title: "\u062A\u0631\u0627\u06A9\u0646\u0634\u200C\u0647\u0627\u06CC \u0627\u0646\u0628\u0627\u0631", link: "/admin/inventory/transactions", icon: "history", exact: !1 }, { title: "\u06A9\u062F\u0647\u0627\u06CC \u062A\u062E\u0641\u06CC\u0641", link: "/admin/discounts", icon: "percent", exact: !1 }, { title: "\u0646\u0638\u0631\u0627\u062A \u06A9\u0627\u0631\u0628\u0631\u0627\u0646", link: "/admin/reviews", icon: "reviews", exact: !1 }, { title: "\u06A9\u0627\u0631\u0628\u0631\u0627\u0646", link: "/admin/users", icon: "group", exact: !1 }, { title: "\u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627\u06CC \u0633\u0641\u0627\u0631\u0634", link: "/admin/order-statuses", icon: "fact_check", exact: !1 }, { title: "\u0631\u0648\u0634\u200C\u0647\u0627\u06CC \u0627\u0631\u0633\u0627\u0644", link: "/admin/shipping-methods", icon: "local_shipping", exact: !1 }, { title: "\u06AF\u0632\u0627\u0631\u0634\u0627\u062A \u0633\u06CC\u0633\u062A\u0645\u06CC", link: "/admin/audit-logs", icon: "policy", exact: !1 }, { title: "\u0645\u062F\u06CC\u0631\u06CC\u062A \u062C\u0633\u062A\u062C\u0648", link: "/admin/search-management", icon: "search", exact: !1 }] } }; s.\u0275fac = function (u) { return new (u || s) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-layout"]], decls: 35, vars: 3, consts: [["rla", "routerLinkActive"], [1, "grid", "min-h-screen", "w-full", "lg:grid-cols-[280px_1fr]", "bg-muted/10"], [1, "hidden", "border-l", "border-border", "bg-sidebar", "lg:flex", "lg:flex-col", "sticky", "top-0", "h-screen", "z-20", "shadow-sm", "transition-all", "duration-300"], [1, "flex", "h-header", "items-center", "px-6", "border-b", "border-border", "bg-sidebar/50", "backdrop-blur-sm"], ["routerLink", "/", 1, "flex", "items-center", "gap-3", "transition-transform", "hover:scale-105", "group"], [1, "w-8", "h-8", "rounded-lg", "bg-gradient-to-br", "from-primary", "to-primary-600", "flex", "items-center", "justify-center", "text-primary-foreground", "shadow-lg", "shadow-primary/20", "group-hover:shadow-primary/40", "transition-shadow"], [1, "font-black", "text-lg"], [1, "font-bold", "text-lg", "tracking-tight", "text-sidebar-foreground"], [1, "flex-1", "overflow-y-auto", "py-6", "px-4", "scrollbar-thin"], [1, "space-y-1"], ["routerLinkActive", "bg-sidebar-active text-primary font-semibold shadow-sm", "class", "flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium text-sidebar-foreground/70 transition-all duration-200 hover:bg-sidebar-hover hover:text-sidebar-foreground group", 3, "routerLink", "routerLinkActiveOptions", 4, "ngFor", "ngForOf"], [1, "p-4", "border-t", "border-border", "bg-sidebar/50"], [1, "flex", "items-center", "gap-3", "rounded-xl", "bg-card/50", "border", "border-border", "p-3", "shadow-sm", "hover:shadow-md", "transition-shadow", "cursor-pointer"], [1, "avatar", "avatar-md", "ring-2", "ring-background"], [1, "avatar-fallback", "bg-primary/10", "text-primary", "font-bold"], [1, "avatar-status", "online"], [1, "flex", "flex-col", "min-w-0"], [1, "text-sm", "font-bold", "text-foreground", "truncate"], [1, "text-xs", "text-muted-foreground", "truncate", "font-mono"], [1, "sticky", "top-0", "z-30", "flex", "h-16", "items-center", "gap-4", "border-b", "border-border", "bg-background/80", "px-4", "backdrop-blur-md", "lg:hidden"], ["aria-label", "Open menu", 1, "btn", "btn-ghost", "btn-icon", "-mr-2", 3, "click"], [1, "material-icons"], [1, "flex", "items-center", "gap-2", "font-bold", "text-lg", "text-foreground"], [1, "w-2", "h-2", "rounded-full", "bg-primary", "animate-pulse"], [1, "flex-1", "p-4", "sm:p-6", "md:p-8", "max-w-[1600px]", "w-full", "mx-auto", "animate-fade-in"], ["class", "mobile-menu-overlay", 3, "click", 4, "ngIf"], ["class", "fixed inset-y-0 right-0 z-50 w-3/4 max-w-xs bg-sidebar shadow-2xl flex flex-col mobile-menu-sidebar border-l border-border", 4, "ngIf"], ["routerLinkActive", "bg-sidebar-active text-primary font-semibold shadow-sm", 1, "flex", "items-center", "gap-3", "rounded-lg", "px-3", "py-2.5", "text-sm", "font-medium", "text-sidebar-foreground/70", "transition-all", "duration-200", "hover:bg-sidebar-hover", "hover:text-sidebar-foreground", "group", 3, "routerLink", "routerLinkActiveOptions"], [1, "material-icons-outlined", "text-[20px]", "w-6", "text-center", "transition-transform", "duration-200", "group-hover:scale-110"], ["class", "mr-auto badge badge-primary text-[10px] h-5 px-1.5 animate-pulse", 4, "ngIf"], [1, "mr-auto", "badge", "badge-primary", "text-[10px]", "h-5", "px-1.5", "animate-pulse"], [1, "mobile-menu-overlay", 3, "click"], [1, "fixed", "inset-y-0", "right-0", "z-50", "w-3/4", "max-w-xs", "bg-sidebar", "shadow-2xl", "flex", "flex-col", "mobile-menu-sidebar", "border-l", "border-border"], [1, "flex", "h-16", "items-center", "justify-between", "border-b", "border-border", "px-6", "bg-sidebar/50"], [1, "font-bold", "text-lg", "flex", "items-center", "gap-2", "text-sidebar-foreground"], [1, "material-icons", "text-primary"], [1, "btn", "btn-ghost", "btn-icon", "-ml-2", "text-muted-foreground", "hover:text-destructive", "transition-colors", 3, "click"], [1, "flex-1", "overflow-y-auto", "py-4", "px-4", "scrollbar-thin"], ["routerLinkActive", "bg-sidebar-active text-primary font-bold shadow-sm", "class", "flex items-center gap-3 rounded-lg px-3 py-3 text-sm font-medium text-sidebar-foreground/70 transition-colors hover:bg-sidebar-hover hover:text-sidebar-foreground", 3, "routerLink", "routerLinkActiveOptions", "click", 4, "ngFor", "ngForOf"], ["routerLinkActive", "bg-sidebar-active text-primary font-bold shadow-sm", 1, "flex", "items-center", "gap-3", "rounded-lg", "px-3", "py-3", "text-sm", "font-medium", "text-sidebar-foreground/70", "transition-colors", "hover:bg-sidebar-hover", "hover:text-sidebar-foreground", 3, "click", "routerLink", "routerLinkActiveOptions"], [1, "material-icons-outlined", "text-[22px]", "w-6", "text-center"]], template: function (u, a) { u & 1 && (t(0, "div", 1)(1, "aside", 2)(2, "div", 3)(3, "a", 4)(4, "div", 5)(5, "span", 6), i(6, "L"), e()(), t(7, "span", 7), i(8, "\u067E\u0646\u0644 \u0645\u062F\u06CC\u0631\u06CC\u062A"), e()()(), t(9, "div", 8)(10, "nav", 9), f(11, pi, 6, 9, "a", 10), e()(), t(12, "div", 11)(13, "div", 12)(14, "div", 13)(15, "div", 14), i(16, "A"), e(), x(17, "div", 15), e(), t(18, "div", 16)(19, "span", 17), i(20, "\u0645\u062F\u06CC\u0631 \u0633\u06CC\u0633\u062A\u0645"), e(), t(21, "span", 18), i(22, "admin@ledka.ir"), e()()()()(), t(23, "div", 16)(24, "header", 19)(25, "button", 20), v("click", function () { return a.isMobileMenuOpen = !0 }), t(26, "span", 21), i(27, "menu"), e()(), t(28, "div", 22), x(29, "span", 23), i(30, " \u067E\u0646\u0644 \u0645\u062F\u06CC\u0631\u06CC\u062A "), e()(), t(31, "main", 24), x(32, "router-outlet"), e()()(), f(33, fi, 1, 0, "div", 25)(34, xi, 12, 1, "div", 26)), u & 2 && (d(11), l("ngForOf", a.menuItems), d(22), l("ngIf", a.isMobileMenuOpen), d(), l("ngIf", a.isMobileMenuOpen)) }, dependencies: [A, I, _, L, wt, T, Et], encapsulation: 2 }); let n = s; return n })(); var Pt = (() => { let s = class s { constructor(r) { this.http = r, this.apiUrl = `${R.API_URL}admin/analytics` } getDashboardStatistics(r, u) { let a = new K; return r && (a = a.set("fromDate", r.toISOString())), u && (a = a.set("toDate", u.toISOString())), this.http.get(`${this.apiUrl}/dashboard`, { params: a }) } getSalesChartData(r, u, a = "day") { let m = new K().set("fromDate", r.toISOString()).set("toDate", u.toISOString()).set("groupBy", a); return this.http.get(`${this.apiUrl}/sales-chart`, { params: m }) } getTopSellingProducts(r = 10, u, a) { let m = new K().set("count", r.toString()); return u && (m = m.set("fromDate", u.toISOString())), a && (m = m.set("toDate", a.toISOString())), this.http.get(`${this.apiUrl}/top-products`, { params: m }) } getCategoryPerformance(r, u) { let a = new K; return r && (a = a.set("fromDate", r.toISOString())), u && (a = a.set("toDate", u.toISOString())), this.http.get(`${this.apiUrl}/category-performance`, { params: a }) } }; s.\u0275fac = function (u) { return new (u || s)(B(z)) }, s.\u0275prov = G({ token: s, factory: s.\u0275fac, providedIn: "root" }); let n = s; return n })(); function vi(n, s) { n & 1 && (t(0, "div", 15)(1, "div", 16), x(2, "span", 17), t(3, "p", 18), i(4, "\u062F\u0631 \u062D\u0627\u0644 \u062A\u062D\u0644\u06CC\u0644 \u062F\u0627\u062F\u0647\u200C\u0647\u0627..."), e()()()) } function bi(n, s) { if (n & 1 && (t(0, "div", 39)(1, "span", 40), i(2, "arrow_upward"), e(), i(3), e()), n & 2) { let o = p(2); d(3), g(" ", o.stats.users.newUsers, " \u06A9\u0627\u0631\u0628\u0631 \u062C\u062F\u06CC\u062F ") } } function Ci(n, s) { if (n & 1 && (t(0, "div", 19)(1, "div", 20)(2, "div", 21)(3, "p", 22), i(4, "\u062F\u0631\u0622\u0645\u062F \u06A9\u0644"), e(), t(5, "div", 23)(6, "span", 24), i(7, "payments"), e()()(), t(8, "div", 25)(9, "p", 26), i(10), F(11, "number"), t(12, "span", 27), i(13, "\u062A\u0648\u0645\u0627\u0646"), e()()()(), t(14, "div", 28)(15, "div", 21)(16, "p", 22), i(17, "\u0633\u0648\u062F \u062E\u0627\u0644\u0635"), e(), t(18, "div", 29)(19, "span", 24), i(20, "trending_up"), e()()(), t(21, "div", 25)(22, "p", 30), i(23), F(24, "number"), t(25, "span", 27), i(26, "\u062A\u0648\u0645\u0627\u0646"), e()()()(), t(27, "div", 31)(28, "div", 21)(29, "p", 22), i(30, "\u062A\u0639\u062F\u0627\u062F \u0633\u0641\u0627\u0631\u0634\u0627\u062A"), e(), t(31, "div", 32)(32, "span", 24), i(33, "shopping_bag"), e()()(), t(34, "div", 25)(35, "p", 33), i(36), F(37, "number"), e(), t(38, "p", 34)(39, "span", 35), i(40, "analytics"), e(), i(41), F(42, "number"), e()()(), t(43, "div", 36)(44, "div", 21)(45, "p", 22), i(46, "\u06A9\u0627\u0631\u0628\u0631\u0627\u0646"), e(), t(47, "div", 37)(48, "span", 24), i(49, "group"), e()()(), t(50, "div", 25)(51, "p", 33), i(52), F(53, "number"), e(), f(54, bi, 4, 1, "div", 38), e()()()), n & 2) { let o = p(); d(10), g(" ", P(11, 6, o.stats.orders.totalRevenue), " "), d(13), g(" ", P(24, 8, o.stats.orders.totalProfit), " "), d(13), b(P(37, 10, o.stats.orders.totalOrders)), d(5), g(" \u0645\u06CC\u0627\u0646\u06AF\u06CC\u0646: ", P(42, 12, o.stats.orders.averageOrderValue), " "), d(11), b(P(53, 14, o.stats.users.totalUsers)), d(2), l("ngIf", o.stats.users.newUsers > 0) } } function Si(n, s) { if (n & 1 && (t(0, "div", 60)(1, "div", 61)(2, "div", 62)(3, "div", 63), i(4), e(), t(5, "div"), i(6), F(7, "number"), e()()()()), n & 2) { let o = s.$implicit, r = p(2); Ge("height", r.maxRevenue > 0 ? o.revenue / r.maxRevenue * 100 : 0, "%"), d(4), b(o.period), d(2), b(P(7, 4, o.revenue)) } } function yi(n, s) { if (n & 1 && (t(0, "tr", 64)(1, "td", 65)(2, "div", 66)(3, "span", 67), i(4), e()()(), t(5, "td", 68)(6, "span", 69), i(7), e()(), t(8, "td", 70), i(9), F(10, "number"), e()()), n & 2) { let o = s.$implicit; d(3), l("title", o.productName), d(), g(" ", o.productName, " "), d(3), b(o.totalQuantity), d(2), g(" ", P(10, 4, o.totalRevenue), " ") } } function _i(n, s) { n & 1 && (t(0, "tr")(1, "td", 71), i(2, " \u062F\u0627\u062F\u0647\u200C\u0627\u06CC \u0628\u0631\u0627\u06CC \u0646\u0645\u0627\u06CC\u0634 \u0648\u062C\u0648\u062F \u0646\u062F\u0627\u0631\u062F "), e()()) } function Ai(n, s) { if (n & 1 && (t(0, "div", 41)(1, "div", 42)(2, "div", 43)(3, "h3", 44), i(4, "\u0631\u0648\u0646\u062F \u0641\u0631\u0648\u0634"), e(), t(5, "span", 45), i(6, "\u062F\u0631\u0622\u0645\u062F"), e()(), t(7, "div", 46), f(8, Si, 8, 6, "div", 47), e(), t(9, "div", 48)(10, "span"), i(11), e(), t(12, "span"), i(13), e()()(), t(14, "div", 49)(15, "div", 50)(16, "h3", 44), i(17, "\u0645\u062D\u0635\u0648\u0644\u0627\u062A \u067E\u0631\u0641\u0631\u0648\u0634"), e()(), t(18, "div", 51)(19, "table", 52)(20, "thead", 53)(21, "tr", 54)(22, "th", 55), i(23, "\u0645\u062D\u0635\u0648\u0644"), e(), t(24, "th", 56), i(25, "\u062A\u0639\u062F\u0627\u062F"), e(), t(26, "th", 55), i(27, "\u062F\u0631\u0622\u0645\u062F"), e()()(), t(28, "tbody", 57), f(29, yi, 11, 6, "tr", 58)(30, _i, 3, 0, "tr", 59), e()()()()()), n & 2) { let o = p(); d(8), l("ngForOf", o.salesData), d(3), b(o.salesData[0] == null ? null : o.salesData[0].period), d(2), b(o.salesData[o.salesData.length - 1] == null ? null : o.salesData[o.salesData.length - 1].period), d(16), l("ngForOf", o.topProducts), d(), l("ngIf", o.topProducts.length === 0) } } function wi(n, s) { if (n & 1 && (t(0, "div", 76), x(1, "div", 77), t(2, "div", 78)(3, "span", 79), i(4), e(), t(5, "span", 80), i(6), e()(), t(7, "div", 81)(8, "div", 82), i(9), F(10, "number"), t(11, "span", 83), i(12, "\u062A\u0648\u0645\u0627\u0646"), e()(), t(13, "div", 84)(14, "span", 85), i(15, "inventory_2"), e(), i(16), e()()()), n & 2) { let o = s.$implicit; d(3), l("title", o.categoryName), d(), b(o.categoryName), d(2), g("", o.orderCount, " \u0633\u0641\u0627\u0631\u0634"), d(3), g(" ", P(10, 5, o.totalRevenue), " "), d(7), g(" ", o.totalQuantity, " \u0639\u062F\u062F \u0641\u0631\u0648\u062E\u062A\u0647 \u0634\u062F\u0647 ") } } function Ei(n, s) { if (n & 1 && (t(0, "div", 72)(1, "h3", 73), i(2, "\u0639\u0645\u0644\u06A9\u0631\u062F \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627"), e(), t(3, "div", 74), f(4, wi, 17, 7, "div", 75), e()()), n & 2) { let o = p(); d(4), l("ngForOf", o.categoryPerformance) } } var Nt = (() => { let s = class s { constructor(r) { this.analyticsService = r, this.stats = null, this.salesData = [], this.topProducts = [], this.categoryPerformance = [], this.isLoading = !1, this.dateRange = "month", this.maxRevenue = 0 } ngOnInit() { this.loadData() } loadData() { this.isLoading = !0; let { from: r, to: u } = this.getDateRange(); Ie({ stats: this.analyticsService.getDashboardStatistics(r, u).pipe(ce(() => _e(null))), sales: this.analyticsService.getSalesChartData(r, u, this.dateRange === "year" ? "month" : "day").pipe(ce(() => _e([]))), top: this.analyticsService.getTopSellingProducts(10, r, u).pipe(ce(() => _e([]))), cat: this.analyticsService.getCategoryPerformance(r, u).pipe(ce(() => _e([]))) }).pipe(D(() => this.isLoading = !1)).subscribe({ next: a => { this.stats = a.stats, this.salesData = a.sales || [], this.topProducts = a.top || [], this.categoryPerformance = a.cat || [], this.salesData.length > 0 ? this.maxRevenue = Math.max(...this.salesData.map(m => m.revenue), 1) : this.maxRevenue = 0 } }) } getDateRange() { let r = new Date, u = new Date; return this.dateRange === "week" && u.setDate(r.getDate() - 7), this.dateRange === "month" && u.setDate(r.getDate() - 30), this.dateRange === "year" && u.setFullYear(r.getFullYear() - 1), { from: u, to: r } } }; s.\u0275fac = function (u) { return new (u || s)(h(Pt)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-dashboard"]], decls: 20, vars: 5, consts: [[1, "space-y-8", "animate-fade-in"], [1, "flex", "flex-col", "sm:flex-row", "items-center", "justify-between", "gap-4"], [1, "text-3xl", "font-black", "tracking-tight", "text-heading-foreground"], [1, "flex", "items-center", "gap-2", "bg-card", "p-1", "rounded-lg", "border", "border-border", "shadow-sm"], [1, "h-9", "rounded-md", "border-0", "bg-transparent", "py-0", "pl-8", "pr-3", "text-sm", "focus:ring-0", "focus:outline-none", "cursor-pointer", "hover:bg-muted/50", "transition-colors", "text-foreground", 3, "ngModelChange", "change", "ngModel"], ["value", "week"], ["value", "month"], ["value", "year"], [1, "w-px", "h-5", "bg-border"], ["title", "\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC", 1, "btn", "btn-ghost", "btn-sm", "btn-icon", "rounded-md", "text-muted-foreground", "hover:text-foreground", 3, "click"], [1, "material-icons", "text-[18px]"], ["class", "flex justify-center items-center min-h-[300px]", 4, "ngIf"], ["class", "grid gap-6 md:grid-cols-2 lg:grid-cols-4 animate-fade-in-up", 4, "ngIf"], ["class", "grid gap-6 lg:grid-cols-2 animate-fade-in-up delay-100", 4, "ngIf"], ["class", "card p-6 animate-fade-in-up delay-200", 4, "ngIf"], [1, "flex", "justify-center", "items-center", "min-h-[300px]"], [1, "flex", "flex-col", "items-center", "gap-3"], [1, "spinner", "spinner-xl", "text-primary"], [1, "text-sm", "text-muted-foreground", "animate-pulse"], [1, "grid", "gap-6", "md:grid-cols-2", "lg:grid-cols-4", "animate-fade-in-up"], [1, "stat-card", "border-r-4", "border-r-primary", "hover-lift"], [1, "flex", "items-center", "justify-between"], [1, "stat-label"], [1, "icon-wrapper", "icon-wrapper-sm", "icon-wrapper-primary"], [1, "material-icons", "text-lg"], [1, "mt-4"], [1, "stat-value", "text-gradient"], [1, "text-xs", "font-normal", "text-muted-foreground"], [1, "stat-card", "border-r-4", "border-r-success", "hover-lift"], [1, "icon-wrapper", "icon-wrapper-sm", "icon-wrapper-success"], [1, "stat-value", "text-success"], [1, "stat-card", "border-r-4", "border-r-info", "hover-lift"], [1, "icon-wrapper", "icon-wrapper-sm", "icon-wrapper-info"], [1, "stat-value"], [1, "text-xs", "text-muted-foreground", "mt-1", "flex", "items-center", "gap-1"], [1, "material-icons", "text-[14px]"], [1, "stat-card", "border-r-4", "border-r-warning", "hover-lift"], [1, "icon-wrapper", "icon-wrapper-sm", "icon-wrapper-warning"], ["class", "stat-change positive mt-1", 4, "ngIf"], [1, "stat-change", "positive", "mt-1"], [1, "material-icons", "text-[16px]"], [1, "grid", "gap-6", "lg:grid-cols-2", "animate-fade-in-up", "delay-100"], [1, "card", "p-6", "h-full", "flex", "flex-col"], [1, "flex", "items-center", "justify-between", "mb-6"], [1, "font-bold", "text-lg", "text-heading-foreground"], [1, "badge", "badge-outline"], [1, "flex-1", "min-h-[250px]", "flex", "items-end", "gap-2", "border-b", "border-l", "border-border/50", "p-2", "relative", "bg-muted/5", "rounded-lg"], ["class", "flex-1 bg-gradient-to-t from-primary/60 to-primary hover:from-primary hover:to-primary-400 transition-all duration-300 rounded-t-sm relative group cursor-pointer", 3, "height", 4, "ngFor", "ngForOf"], [1, "flex", "justify-between", "text-xs", "text-muted-foreground", "mt-3", "px-2", "font-mono"], [1, "card", "p-0", "overflow-hidden", "h-full", "flex", "flex-col"], [1, "p-6", "border-b", "border-border"], [1, "overflow-auto", "scrollbar-thin", "flex-1", "max-h-[350px]"], [1, "w-full", "text-sm"], [1, "bg-muted/30", "sticky", "top-0", "z-10", "backdrop-blur-sm"], [1, "text-right", "text-muted-foreground", "text-xs"], [1, "px-6", "py-3", "font-medium"], [1, "px-6", "py-3", "font-medium", "text-center"], [1, "divide-y", "divide-border/50"], ["class", "group hover:bg-muted/20 transition-colors", 4, "ngFor", "ngForOf"], [4, "ngIf"], [1, "flex-1", "bg-gradient-to-t", "from-primary/60", "to-primary", "hover:from-primary", "hover:to-primary-400", "transition-all", "duration-300", "rounded-t-sm", "relative", "group", "cursor-pointer"], [1, "tooltip-content", "bottom-full", "left-1/2", "-translate-x-1/2", "mb-2", "opacity-0", "group-hover:opacity-100", "pointer-events-none", "transition-opacity"], [1, "text-center"], [1, "text-muted-foreground", "text-[10px]", "mb-0.5"], [1, "group", "hover:bg-muted/20", "transition-colors"], [1, "px-6", "py-3"], [1, "flex", "flex-col"], [1, "font-medium", "text-foreground", "truncate", "max-w-[200px]", 3, "title"], [1, "px-6", "py-3", "text-center"], [1, "badge", "badge-secondary", "font-mono"], [1, "px-6", "py-3", "font-medium", "tabular-nums", "text-foreground"], ["colspan", "3", 1, "p-8", "text-center", "text-muted-foreground"], [1, "card", "p-6", "animate-fade-in-up", "delay-200"], [1, "font-bold", "text-lg", "text-heading-foreground", "mb-6"], [1, "grid", "gap-4", "sm:grid-cols-2", "lg:grid-cols-3", "xl:grid-cols-4"], ["class", "group p-4 rounded-xl bg-card border border-border hover:border-primary/30 hover:shadow-card-hover transition-all duration-300 relative overflow-hidden", 4, "ngFor", "ngForOf"], [1, "group", "p-4", "rounded-xl", "bg-card", "border", "border-border", "hover:border-primary/30", "hover:shadow-card-hover", "transition-all", "duration-300", "relative", "overflow-hidden"], [1, "absolute", "top-0", "right-0", "w-16", "h-16", "bg-primary/5", "rounded-bl-full", "-mr-8", "-mt-8", "transition-transform", "group-hover:scale-150"], [1, "flex", "justify-between", "items-start", "mb-3", "relative", "z-10"], [1, "font-bold", "text-foreground", "truncate", 3, "title"], [1, "badge", "badge-outline", "text-[10px]"], [1, "space-y-1", "relative", "z-10"], [1, "text-xl", "font-black", "text-primary", "tabular-nums"], [1, "text-xs", "text-muted-foreground", "font-normal"], [1, "flex", "items-center", "text-xs", "text-muted-foreground"], [1, "material-icons", "text-[14px]", "me-1"]], template: function (u, a) { u & 1 && (t(0, "div", 0)(1, "div", 1)(2, "h1", 2), i(3, " \u062F\u0627\u0634\u0628\u0648\u0631\u062F \u062A\u062D\u0644\u06CC\u0644\u06CC "), e(), t(4, "div", 3)(5, "select", 4), ae("ngModelChange", function (c) { return oe(a.dateRange, c) || (a.dateRange = c), c }), v("change", function () { return a.loadData() }), t(6, "option", 5), i(7, "\u06F7 \u0631\u0648\u0632 \u06AF\u0630\u0634\u062A\u0647"), e(), t(8, "option", 6), i(9, "\u06F3\u06F0 \u0631\u0648\u0632 \u06AF\u0630\u0634\u062A\u0647"), e(), t(10, "option", 7), i(11, "\u06CC\u06A9 \u0633\u0627\u0644 \u06AF\u0630\u0634\u062A\u0647"), e()(), x(12, "div", 8), t(13, "button", 9), v("click", function () { return a.loadData() }), t(14, "span", 10), i(15, "refresh"), e()()()(), f(16, vi, 5, 0, "div", 11)(17, Ci, 55, 16, "div", 12)(18, Ai, 31, 5, "div", 13)(19, Ei, 5, 1, "div", 14), e()), u & 2 && (d(5), ue("ngModel", a.dateRange), d(11), l("ngIf", a.isLoading), d(), l("ngIf", !a.isLoading && a.stats), d(), l("ngIf", !a.isLoading), d(), l("ngIf", !a.isLoading)) }, dependencies: [A, I, _, ge, ee, te, Z, V, fe, be], encapsulation: 2 }); let n = s; return n })(); var Ye = (() => { let s = class s { constructor(r) { this.http = r, this.categoriesUrl = `${R.API_URL}admin/categories` } getCategoryById(r) { return this.http.get(`${this.categoriesUrl}/${r}?page=1&pageSize=10`) } createCategory(r) { return this.http.post(this.categoriesUrl, r) } updateCategory(r, u) { return this.http.put(`${this.categoriesUrl}/${r}`, u) } deleteCategory(r) { return this.http.delete(`${this.categoriesUrl}/${r}`) } }; s.\u0275fac = function (u) { return new (u || s)(B(z)) }, s.\u0275prov = G({ token: s, factory: s.\u0275fac, providedIn: "root" }); let n = s; return n })(); var Fi = n => ({ "is-invalid": n }); function Ii(n, s) { n & 1 && (t(0, "div", 28), i(1, " \u0646\u0627\u0645 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0627\u0644\u0632\u0627\u0645\u06CC \u0627\u0633\u062A "), e()) } function ki(n, s) { if (n & 1 && (t(0, "div", 29), x(1, "img", 30), e()), n & 2) { let o = p(); d(), l("src", o.getIconUrl(), le) } } function Mi(n, s) { n & 1 && x(0, "span", 31) } var ot = (() => { let s = class s { constructor(r, u, a, m, c) { this.route = r, this.router = u, this.notificationService = a, this.adminCategoryService = m, this.mediaService = c, this.isEditMode = !1, this.categoryId = null, this.isSubmitting = !1, this.iconPreview = null, this.rowVersion = null, this.selectedFile = null, this.categoryForm = new Se({ Name: new O("", [w.required, w.maxLength(100)]), IsActive: new O(!0), RowVersion: new O(null) }) } ngOnInit() { let r = this.route.snapshot.paramMap.get("id"); r && (this.categoryId = Number(r), this.isEditMode = !0, this.loadCategoryData()) } loadCategoryData() { this.categoryId && this.adminCategoryService.getCategoryById(this.categoryId).subscribe({ next: r => { this.categoryForm.patchValue({ Name: r.name, IsActive: r.isActive, RowVersion: r.rowVersion }), this.iconPreview = r.iconUrl || null }, error: r => this.notificationService.show(r?.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC", "error") }) } onFileChange(r) { let u = r.target; if (u.files && u.files.length > 0) { this.selectedFile = u.files[0]; let a = new FileReader; a.onload = m => this.iconPreview = m.target.result, a.readAsDataURL(this.selectedFile) } } onSubmit() { if (this.categoryForm.invalid || this.isSubmitting) return; this.isSubmitting = !0; let r = new FormData; if (r.append("Name", this.categoryForm.get("Name")?.value), r.append("IsActive", this.categoryForm.get("IsActive")?.value), this.selectedFile && r.append("IconFile", this.selectedFile), this.isEditMode && this.categoryId) { let a = this.categoryForm.get("RowVersion")?.value; a && r.append("RowVersion", a) } (this.isEditMode && this.categoryId ? this.adminCategoryService.updateCategory(this.categoryId, r) : this.adminCategoryService.createCategory(r)).pipe(D(() => this.isSubmitting = !1)).subscribe({ next: a => { let m = `\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A ${this.isEditMode ? "\u0648\u06CC\u0631\u0627\u06CC\u0634" : "\u0627\u06CC\u062C\u0627\u062F"} \u0634\u062F`; this.notificationService.show(m, "success"), this.router.navigate(["/admin/categories"]) }, error: a => { a.status === 409 ? (this.notificationService.show("\u0627\u06CC\u0646 \u0631\u06A9\u0648\u0631\u062F \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627 \u0635\u0641\u062D\u0647 \u0631\u0627 \u0631\u0641\u0631\u0634 \u06A9\u0646\u06CC\u062F.", "error"), this.loadCategoryData()) : this.notificationService.show(a?.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u062B\u0628\u062A \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A", "error") } }) } getIconUrl() { return this.iconPreview ? this.iconPreview.startsWith("data:") ? this.iconPreview : this.mediaService.getMediaUrl(this.iconPreview) : "" } }; s.\u0275fac = function (u) { return new (u || s)(h(ne), h(Ce), h(k), h(Ye), h(Ae)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-category-form"]], decls: 44, vars: 10, consts: [[1, "max-w-2xl", "mx-auto", "animate-fade-in-up"], [1, "flex", "items-center", "justify-between", "mb-6"], [1, "text-2xl", "font-bold", "text-heading-foreground"], ["routerLink", "/admin/categories", 1, "btn", "btn-outline", "btn-sm", "gap-2"], [1, "material-icons", "text-sm"], [1, "card", "p-6", "space-y-6", "shadow-md", "border-border", 3, "ngSubmit", "formGroup"], [1, "space-y-4"], [1, "form-group"], [1, "form-label"], [1, "text-destructive"], [1, "input-group"], [1, "input-addon"], ["type", "text", "formControlName", "Name", "placeholder", "\u0646\u0627\u0645 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F", 1, "input", 3, "ngClass"], ["class", "form-error", 4, "ngIf"], [1, "flex", "items-center", "gap-4"], ["class", "w-20 h-20 rounded-lg border border-border p-1 bg-muted/20", 4, "ngIf"], [1, "btn", "btn-outline", "btn-sm", "cursor-pointer"], [1, "material-icons", "text-sm", "mr-2"], ["type", "file", "accept", "image/*", 1, "hidden", 3, "change"], [1, "flex", "items-center", "gap-3", "p-4", "bg-muted/20", "rounded-lg", "border", "border-border/50"], [1, "flex", "items-center"], ["type", "checkbox", "id", "isActive", "formControlName", "IsActive", 1, "switch"], ["for", "isActive", 1, "switch-thumb"], ["for", "isActive", 1, "text-sm", "font-medium", "cursor-pointer", "select-none", "text-foreground"], [1, "flex", "justify-end", "gap-3", "border-t", "border-border", "pt-6", "mt-4"], ["routerLink", "/admin/categories", 1, "btn", "btn-ghost", "text-muted-foreground", "hover:text-foreground"], ["type", "submit", 1, "btn", "btn-primary", "min-w-[120px]", "shadow-button", 3, "disabled"], ["class", "spinner spinner-sm mr-2 border-white", 4, "ngIf"], [1, "form-error"], [1, "w-20", "h-20", "rounded-lg", "border", "border-border", "p-1", "bg-muted/20"], ["alt", "Icon Preview", 1, "w-full", "h-full", "object-contain", 3, "src"], [1, "spinner", "spinner-sm", "mr-2", "border-white"]], template: function (u, a) { if (u & 1 && (t(0, "div", 0)(1, "div", 1)(2, "div")(3, "h1", 2), i(4), e()(), t(5, "a", 3)(6, "span", 4), i(7, "arrow_forward"), e(), i(8, " \u0628\u0627\u0632\u06AF\u0634\u062A "), e()(), t(9, "form", 5), v("ngSubmit", function () { return a.onSubmit() }), t(10, "div", 6)(11, "div", 7)(12, "label", 8), i(13, "\u0646\u0627\u0645 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC "), t(14, "span", 9), i(15, "*"), e()(), t(16, "div", 10)(17, "span", 11)(18, "span", 4), i(19, "category"), e()(), x(20, "input", 12), e(), f(21, Ii, 2, 0, "div", 13), e(), t(22, "div", 7)(23, "label", 8), i(24, "\u0622\u06CC\u06A9\u0648\u0646"), e(), t(25, "div", 14), f(26, ki, 2, 1, "div", 15), t(27, "label", 16)(28, "span", 17), i(29, "upload"), e(), i(30, " \u0627\u0646\u062A\u062E\u0627\u0628 \u062A\u0635\u0648\u06CC\u0631 "), t(31, "input", 18), v("change", function (c) { return a.onFileChange(c) }), e()()()(), t(32, "div", 19)(33, "div", 20), x(34, "input", 21)(35, "label", 22), e(), t(36, "label", 23), i(37, " \u0641\u0639\u0627\u0644 "), e()()(), t(38, "div", 24)(39, "a", 25), i(40, "\u0627\u0646\u0635\u0631\u0627\u0641"), e(), t(41, "button", 26), f(42, Mi, 1, 0, "span", 27), i(43), e()()()()), u & 2) { let m, c; d(4), g(" ", a.isEditMode ? "\u0648\u06CC\u0631\u0627\u06CC\u0634" : "\u0627\u06CC\u062C\u0627\u062F", " \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC "), d(5), l("formGroup", a.categoryForm), d(11), l("ngClass", $(8, Fi, ((m = a.categoryForm.get("Name")) == null ? null : m.invalid) && ((m = a.categoryForm.get("Name")) == null ? null : m.touched))), d(), l("ngIf", ((c = a.categoryForm.get("Name")) == null ? null : c.invalid) && ((c = a.categoryForm.get("Name")) == null ? null : c.touched)), d(5), l("ngIf", a.iconPreview), d(15), l("disabled", a.categoryForm.invalid || a.isSubmitting), d(), l("ngIf", a.isSubmitting), d(), g(" ", a.isEditMode ? "\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC" : "\u0630\u062E\u06CC\u0631\u0647", " ") } }, dependencies: [A, q, _, ie, Q, H, pe, V, J, Y, X, L, T], encapsulation: 2 }); let n = s; return n })(); var Di = n => ["/admin/categories/edit", n]; function Ti(n, s) { if (n & 1 && x(0, "img", 32), n & 2) { let o = p().$implicit, r = p(); l("src", r.getCategoryIconUrl(o), le) } } function Pi(n, s) { n & 1 && (t(0, "div", 33)(1, "span", 6), i(2, "image"), e()()) } function Ni(n, s) { if (n & 1) { let o = E(); t(0, "tr", 19)(1, "td", 20)(2, "div", 21), f(3, Ti, 1, 1, "img", 22)(4, Pi, 3, 0, "div", 23), e()(), t(5, "td", 24), i(6), e(), t(7, "td", 25)(8, "span", 26), i(9), e()(), t(10, "td", 25)(11, "span", 27), i(12), e()(), t(13, "td", 20)(14, "div", 28)(15, "a", 29)(16, "span", 30), i(17, "edit"), e()(), t(18, "button", 31), v("click", function () { let u = C(o).$implicit, a = p(); return S(a.deleteCategory(u.id)) }), t(19, "span", 30), i(20, "delete"), e()()()()() } if (n & 2) { let o = s.$implicit; d(3), l("ngIf", o.iconUrl), d(), l("ngIf", !o.iconUrl), d(2), b(o.name), d(3), b((o.categoryGroups == null ? null : o.categoryGroups.length) || 0), d(2), l("ngClass", o.isActive ? "badge-success" : "badge-destructive"), d(), g(" ", o.isActive ? "\u0641\u0639\u0627\u0644" : "\u063A\u06CC\u0631\u0641\u0639\u0627\u0644", " "), d(3), l("routerLink", $(7, Di, o.id)) } } function Vi(n, s) { n & 1 && (t(0, "tr")(1, "td", 34)(2, "p"), i(3, "\u0647\u06CC\u0686 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."), e()()()) } function Oi(n, s) { n & 1 && (t(0, "div", 35), x(1, "span", 36), e()) } var Ot = (() => { let s = class s { constructor(r, u, a, m) { this.categoryService = r, this.adminCategoryService = u, this.notificationService = a, this.mediaService = m, this.categories = [], this.isLoading = !0 } ngOnInit() { this.loadCategories() } loadCategories() { this.isLoading = !0, this.categoryService.getCategories(void 0, 1, 100).subscribe({ next: r => { this.categories = r.items ?? [], this.isLoading = !1 }, error: () => { this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627", "error"), this.isLoading = !1 } }) } getProductCount(r) { return r.categoryGroups ? r.categoryGroups.reduce((u, a) => u + a.productCount, 0) : 0 } getCategoryIconUrl(r) { return r.iconUrl ? this.mediaService.getMediaUrl(r.iconUrl) : "https://via.placeholder.com/40" } deleteCategory(r) { confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F") && this.adminCategoryService.deleteCategory(r).subscribe({ next: () => { this.notificationService.show("\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F", "success"), this.loadCategories() }, error: u => this.notificationService.show(u?.error?.message || u?.error?.ErrorMessage || "\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC", "error") }) } }; s.\u0275fac = function (u) { return new (u || s)(h(He), h(Ye), h(k), h(Ae)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-category-list"]], decls: 32, vars: 3, consts: [[1, "space-y-6", "animate-fade-in"], [1, "flex", "flex-col", "sm:flex-row", "sm:items-center", "justify-between", "gap-4"], [1, "text-2xl", "font-bold", "tracking-tight", "text-heading-foreground", "flex", "items-center", "gap-2"], [1, "material-icons", "text-primary"], [1, "text-sm", "text-muted-foreground", "mt-1"], ["routerLink", "/admin/categories/new", 1, "btn", "btn-primary", "shadow-lg", "shadow-primary/20", "hover:shadow-primary/40", "transition-all"], [1, "material-icons", "text-sm"], [1, "card", "overflow-hidden", "border", "border-border", "shadow-sm"], [1, "overflow-x-auto"], [1, "w-full", "text-sm", "text-right"], [1, "bg-muted/50", "border-b", "border-border", "text-muted-foreground"], [1, "px-6", "py-4", "font-medium", "w-20"], [1, "px-6", "py-4", "font-medium"], [1, "px-6", "py-4", "font-medium", "text-center", "w-32"], [1, "px-6", "py-4", "font-medium", "w-40", "text-left"], [1, "divide-y", "divide-border/50", "bg-card"], ["class", "group hover:bg-muted/30 transition-colors", 4, "ngFor", "ngForOf"], [4, "ngIf"], ["class", "p-12 text-center", 4, "ngIf"], [1, "group", "hover:bg-muted/30", "transition-colors"], [1, "px-6", "py-4"], [1, "w-10", "h-10", "rounded-lg", "bg-muted/50", "border", "border-border", "p-1", "overflow-hidden"], ["class", "w-full h-full object-contain", "alt", "", 3, "src", 4, "ngIf"], ["class", "w-full h-full flex items-center justify-center text-muted-foreground", 4, "ngIf"], [1, "px-6", "py-4", "font-medium", "text-foreground", "text-base"], [1, "px-6", "py-4", "text-center"], [1, "badge", "badge-secondary"], [1, "badge", 3, "ngClass"], [1, "flex", "items-center", "justify-end", "gap-2", "opacity-0", "group-hover:opacity-100", "transition-opacity"], ["title", "\u0648\u06CC\u0631\u0627\u06CC\u0634", 1, "btn", "btn-icon", "btn-ghost", "btn-sm", "text-primary", "hover:text-primary-foreground", "hover:bg-primary", 3, "routerLink"], [1, "material-icons", "text-lg"], ["title", "\u062D\u0630\u0641", 1, "btn", "btn-icon", "btn-ghost", "btn-sm", "text-muted-foreground", "hover:text-destructive-foreground", "hover:bg-destructive", 3, "click"], ["alt", "", 1, "w-full", "h-full", "object-contain", 3, "src"], [1, "w-full", "h-full", "flex", "items-center", "justify-center", "text-muted-foreground"], ["colspan", "5", 1, "px-6", "py-12", "text-center", "text-muted-foreground"], [1, "p-12", "text-center"], [1, "spinner", "spinner-lg", "text-primary"]], template: function (u, a) { u & 1 && (t(0, "div", 0)(1, "div", 1)(2, "div")(3, "h1", 2)(4, "span", 3), i(5, "category"), e(), i(6, " \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627 "), e(), t(7, "p", 4), i(8, "\u0645\u062F\u06CC\u0631\u062A \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627\u06CC \u0627\u0635\u0644\u06CC \u0645\u062D\u0635\u0648\u0644\u0627\u062A"), e()(), t(9, "a", 5)(10, "span", 6), i(11, "add"), e(), i(12, " \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u062C\u062F\u06CC\u062F "), e()(), t(13, "div", 7)(14, "div", 8)(15, "table", 9)(16, "thead", 10)(17, "tr")(18, "th", 11), i(19, "\u0622\u06CC\u06A9\u0648\u0646"), e(), t(20, "th", 12), i(21, "\u0646\u0627\u0645 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"), e(), t(22, "th", 13), i(23, "\u06AF\u0631\u0648\u0647\u200C\u0647\u0627\u06CC \u0632\u06CC\u0631\u0645\u062C\u0645\u0648\u0639\u0647"), e(), t(24, "th", 13), i(25, "\u0648\u0636\u0639\u06CC\u062A"), e(), t(26, "th", 14), i(27, "\u0639\u0645\u0644\u06CC\u0627\u062A"), e()()(), t(28, "tbody", 15), f(29, Ni, 21, 9, "tr", 16)(30, Vi, 4, 0, "tr", 17), e()()(), f(31, Oi, 2, 0, "div", 18), e()()), u & 2 && (d(29), l("ngForOf", a.categories), d(), l("ngIf", !a.isLoading && a.categories.length === 0), d(), l("ngIf", a.isLoading)) }, dependencies: [A, q, I, _, L, T], encapsulation: 2 }); let n = s; return n })(); var Xe = (() => { let s = class s { constructor(r) { this.http = r, this.categoryGroupsUrl = `${R.API_URL}admin/category-groups` } getCategoryGroupById(r) { return this.http.get(`${this.categoryGroupsUrl}/${r}?page=1&pageSize=10`) } createCategoryGroup(r) { return this.http.post(this.categoryGroupsUrl, r) } updateCategoryGroup(r, u) { return this.http.put(`${this.categoryGroupsUrl}/${r}`, u) } deleteCategoryGroup(r) { return this.http.delete(`${this.categoryGroupsUrl}/${r}`) } }; s.\u0275fac = function (u) { return new (u || s)(B(z)) }, s.\u0275prov = G({ token: s, factory: s.\u0275fac, providedIn: "root" }); let n = s; return n })(); var Ut = n => ({ "is-invalid": n }); function ji(n, s) { if (n & 1 && (t(0, "option", 31), i(1), e()), n & 2) { let o = s.$implicit; l("value", o.id), d(), b(o.name) } } function Ui(n, s) { n & 1 && (t(0, "div", 32), i(1, " \u0627\u0646\u062A\u062E\u0627\u0628 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0648\u0627\u0644\u062F \u0627\u0644\u0632\u0627\u0645\u06CC \u0627\u0633\u062A "), e()) } function $i(n, s) { if (n & 1 && (t(0, "div", 33), x(1, "img", 34), e()), n & 2) { let o = p(); d(), l("src", o.iconPreview, le) } } function Ri(n, s) { n & 1 && x(0, "span", 35) } var at = (() => { let s = class s { constructor(r, u, a, m, c, j) { this.route = r, this.router = u, this.notificationService = a, this.adminCategoryGroupService = m, this.categoryService = c, this.mediaService = j, this.isEditMode = !1, this.categoryGroupId = null, this.isSubmitting = !1, this.categories = [], this.selectedFile = null, this.iconPreview = null, this.categoryGroupForm = new Se({ name: new O("", [w.required, w.maxLength(100)]), categoryId: new O(null, [w.required]), isActive: new O(!0), rowVersion: new O(null) }) } ngOnInit() { this.loadCategories(); let r = this.route.snapshot.paramMap.get("id"); r && (this.categoryGroupId = Number(r), this.isEditMode = !0, this.loadCategoryGroupData()) } loadCategories() { this.categoryService.getCategories(void 0, 1, 100).subscribe({ next: r => { this.categories = r.items ?? [] }, error: () => { this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627", "error") } }) } loadCategoryGroupData() { this.categoryGroupId && this.adminCategoryGroupService.getCategoryGroupById(this.categoryGroupId).subscribe({ next: r => { this.categoryGroupForm.patchValue({ name: r.name, categoryId: r.categoryId, isActive: r.isActive, rowVersion: r.rowVersion }), this.iconPreview = r.iconUrl ? this.mediaService.getMediaUrl(r.iconUrl) : null }, error: r => this.notificationService.show(r?.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC", "error") }) } onFileChange(r) { let u = r.target; if (u.files && u.files.length > 0) { this.selectedFile = u.files[0]; let a = new FileReader; a.onload = m => this.iconPreview = m.target.result, a.readAsDataURL(this.selectedFile) } } onSubmit() { if (this.categoryGroupForm.invalid || this.isSubmitting) return; this.isSubmitting = !0; let r = new FormData; r.append("Name", this.categoryGroupForm.get("name")?.value), r.append("CategoryId", this.categoryGroupForm.get("categoryId")?.value), r.append("IsActive", this.categoryGroupForm.get("isActive")?.value), this.selectedFile && r.append("IconFile", this.selectedFile), this.isEditMode && this.categoryGroupForm.get("rowVersion")?.value && r.append("RowVersion", this.categoryGroupForm.get("rowVersion")?.value), (this.isEditMode && this.categoryGroupId ? this.adminCategoryGroupService.updateCategoryGroup(this.categoryGroupId, r) : this.adminCategoryGroupService.createCategoryGroup(r)).pipe(D(() => this.isSubmitting = !1)).subscribe({ next: () => { this.notificationService.show(`\u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A ${this.isEditMode ? "\u0648\u06CC\u0631\u0627\u06CC\u0634" : "\u0627\u06CC\u062C\u0627\u062F"} \u0634\u062F`, "success"), this.router.navigate(["/admin/category-groups"]) }, error: a => { a.status === 409 ? (this.notificationService.show("\u0627\u06CC\u0646 \u0631\u06A9\u0648\u0631\u062F \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627 \u0635\u0641\u062D\u0647 \u0631\u0627 \u0631\u0641\u0631\u0634 \u06A9\u0646\u06CC\u062F.", "error"), this.loadCategoryGroupData()) : this.notificationService.show(a?.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u062B\u0628\u062A \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A", "error") } }) } }; s.\u0275fac = function (u) { return new (u || s)(h(ne), h(Ce), h(k), h(Xe), h(He), h(Ae)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-category-group-form"]], decls: 53, vars: 15, consts: [[1, "max-w-2xl", "mx-auto", "animate-fade-in-up"], [1, "flex", "items-center", "justify-between", "mb-6"], [1, "text-2xl", "font-bold", "text-heading-foreground"], ["routerLink", "/admin/category-groups", 1, "btn", "btn-outline", "btn-sm", "gap-2"], [1, "material-icons", "text-sm"], [1, "card", "p-6", "space-y-6", "shadow-md", "border-border", 3, "ngSubmit", "formGroup"], [1, "space-y-4"], [1, "form-group"], [1, "form-label"], [1, "text-destructive"], ["formControlName", "categoryId", 1, "select", "w-full", 3, "ngClass"], ["disabled", "", 3, "ngValue"], [3, "value", 4, "ngFor", "ngForOf"], ["class", "form-error", 4, "ngIf"], [1, "input-group"], [1, "input-addon"], ["type", "text", "formControlName", "name", "placeholder", "\u0646\u0627\u0645 \u06AF\u0631\u0648\u0647 \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F", 1, "input", 3, "ngClass"], [1, "flex", "items-center", "gap-4"], ["class", "w-20 h-20 rounded-lg border border-border p-1 bg-muted/20", 4, "ngIf"], [1, "btn", "btn-outline", "btn-sm", "cursor-pointer"], [1, "material-icons", "text-sm", "mr-2"], ["type", "file", "accept", "image/*", 1, "hidden", 3, "change"], [1, "flex", "items-center", "gap-3", "p-4", "bg-muted/20", "rounded-lg", "border", "border-border/50"], [1, "flex", "items-center"], ["type", "checkbox", "id", "isActive", "formControlName", "isActive", 1, "switch"], ["for", "isActive", 1, "switch-thumb"], ["for", "isActive", 1, "text-sm", "font-medium", "cursor-pointer", "select-none", "text-foreground"], [1, "flex", "justify-end", "gap-3", "border-t", "border-border", "pt-6", "mt-4"], ["routerLink", "/admin/category-groups", 1, "btn", "btn-ghost", "text-muted-foreground", "hover:text-foreground"], ["type", "submit", 1, "btn", "btn-primary", "min-w-[120px]", "shadow-button", 3, "disabled"], ["class", "spinner spinner-sm mr-2 border-white", 4, "ngIf"], [3, "value"], [1, "form-error"], [1, "w-20", "h-20", "rounded-lg", "border", "border-border", "p-1", "bg-muted/20"], ["alt", "Icon Preview", 1, "w-full", "h-full", "object-contain", 3, "src"], [1, "spinner", "spinner-sm", "mr-2", "border-white"]], template: function (u, a) { if (u & 1 && (t(0, "div", 0)(1, "div", 1)(2, "div")(3, "h1", 2), i(4), e()(), t(5, "a", 3)(6, "span", 4), i(7, "arrow_forward"), e(), i(8, " \u0628\u0627\u0632\u06AF\u0634\u062A "), e()(), t(9, "form", 5), v("ngSubmit", function () { return a.onSubmit() }), t(10, "div", 6)(11, "div", 7)(12, "label", 8), i(13, "\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0648\u0627\u0644\u062F "), t(14, "span", 9), i(15, "*"), e()(), t(16, "select", 10)(17, "option", 11), i(18, "\u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F..."), e(), f(19, ji, 2, 2, "option", 12), e(), f(20, Ui, 2, 0, "div", 13), e(), t(21, "div", 7)(22, "label", 8), i(23, "\u0646\u0627\u0645 \u06AF\u0631\u0648\u0647 "), t(24, "span", 9), i(25, "*"), e()(), t(26, "div", 14)(27, "span", 15)(28, "span", 4), i(29, "folder"), e()(), x(30, "input", 16), e()(), t(31, "div", 7)(32, "label", 8), i(33, "\u0622\u06CC\u06A9\u0648\u0646"), e(), t(34, "div", 17), f(35, $i, 2, 1, "div", 18), t(36, "label", 19)(37, "span", 20), i(38, "upload"), e(), i(39, " \u0627\u0646\u062A\u062E\u0627\u0628 \u062A\u0635\u0648\u06CC\u0631 "), t(40, "input", 21), v("change", function (c) { return a.onFileChange(c) }), e()()()(), t(41, "div", 22)(42, "div", 23), x(43, "input", 24)(44, "label", 25), e(), t(45, "label", 26), i(46, " \u0641\u0639\u0627\u0644 "), e()()(), t(47, "div", 27)(48, "a", 28), i(49, "\u0627\u0646\u0635\u0631\u0627\u0641"), e(), t(50, "button", 29), f(51, Ri, 1, 0, "span", 30), i(52), e()()()()), u & 2) { let m, c, j; d(4), g(" ", a.isEditMode ? "\u0648\u06CC\u0631\u0627\u06CC\u0634" : "\u0627\u06CC\u062C\u0627\u062F", " \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC "), d(5), l("formGroup", a.categoryGroupForm), d(7), l("ngClass", $(11, Ut, ((m = a.categoryGroupForm.get("categoryId")) == null ? null : m.invalid) && ((m = a.categoryGroupForm.get("categoryId")) == null ? null : m.touched))), d(), l("ngValue", null), d(2), l("ngForOf", a.categories), d(), l("ngIf", ((c = a.categoryGroupForm.get("categoryId")) == null ? null : c.invalid) && ((c = a.categoryGroupForm.get("categoryId")) == null ? null : c.touched)), d(10), l("ngClass", $(13, Ut, ((j = a.categoryGroupForm.get("name")) == null ? null : j.invalid) && ((j = a.categoryGroupForm.get("name")) == null ? null : j.touched))), d(5), l("ngIf", a.iconPreview), d(15), l("disabled", a.categoryGroupForm.invalid || a.isSubmitting), d(), l("ngIf", a.isSubmitting), d(), g(" ", a.isEditMode ? "\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC" : "\u0630\u062E\u06CC\u0631\u0647", " ") } }, dependencies: [A, q, I, _, ie, Q, ee, te, H, pe, Z, V, J, Y, X, L, T], encapsulation: 2 }); let n = s; return n })(); var Bi = n => ["/admin/category-groups/edit", n]; function qi(n, s) { if (n & 1 && x(0, "img", 34), n & 2) { let o = p().$implicit, r = p(); l("src", r.getIconUrl(o), le) } } function zi(n, s) { n & 1 && (t(0, "div", 35)(1, "span", 6), i(2, "image"), e()()) } function Wi(n, s) { if (n & 1) { let o = E(); t(0, "tr", 19)(1, "td", 20)(2, "div", 21), f(3, qi, 1, 1, "img", 22)(4, zi, 3, 0, "div", 23), e()(), t(5, "td", 24), i(6), e(), t(7, "td", 25)(8, "span", 26), i(9), e()(), t(10, "td", 27)(11, "span", 28), i(12), e()(), t(13, "td", 27)(14, "span", 29), i(15), e()(), t(16, "td", 20)(17, "div", 30)(18, "a", 31)(19, "span", 32), i(20, "edit"), e()(), t(21, "button", 33), v("click", function () { let u = C(o).$implicit, a = p(); return S(a.deleteCategoryGroup(u.id)) }), t(22, "span", 32), i(23, "delete"), e()()()()() } if (n & 2) { let o = s.$implicit; d(3), l("ngIf", o.iconUrl), d(), l("ngIf", !o.iconUrl), d(2), b(o.name), d(3), b(o.categoryName), d(3), b(o.productCount), d(2), l("ngClass", o.isActive ? "badge-success" : "badge-destructive"), d(), g(" ", o.isActive ? "\u0641\u0639\u0627\u0644" : "\u063A\u06CC\u0631\u0641\u0639\u0627\u0644", " "), d(3), l("routerLink", $(8, Bi, o.id)) } } function Hi(n, s) { n & 1 && (t(0, "tr")(1, "td", 36)(2, "p"), i(3, "\u0647\u06CC\u0686 \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."), e()()()) } function Ki(n, s) { n & 1 && (t(0, "div", 37), x(1, "span", 38), e()) } var $t = (() => { let s = class s { constructor(r, u, a, m, c) { this.route = r, this.categoryGroupService = u, this.adminCategoryGroupService = a, this.notificationService = m, this.mediaService = c, this.categoryGroups = [], this.isLoading = !0, this.categoryId = null } ngOnInit() { this.route.queryParams.subscribe(r => { this.categoryId = r.categoryId ? Number(r.categoryId) : null, this.loadCategoryGroups() }) } loadCategoryGroups() { this.isLoading = !0, this.categoryGroupService.getCategoryGroups(this.categoryId || void 0, void 0, 1, 100).subscribe({ next: r => { this.categoryGroups = r.items ?? [], this.isLoading = !1 }, error: () => { this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u06AF\u0631\u0648\u0647\u200C\u0647\u0627\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC", "error"), this.isLoading = !1 } }) } getIconUrl(r) { return this.mediaService.getMediaUrl(r.iconUrl) } deleteCategoryGroup(r) { confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F") && this.adminCategoryGroupService.deleteCategoryGroup(r).subscribe({ next: () => { this.notificationService.show("\u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F", "success"), this.loadCategoryGroups() }, error: u => this.notificationService.show(u?.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC", "error") }) } }; s.\u0275fac = function (u) { return new (u || s)(h(ne), h(Je), h(Xe), h(k), h(Ae)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-category-group-list"]], decls: 34, vars: 3, consts: [[1, "space-y-6", "animate-fade-in"], [1, "flex", "flex-col", "sm:flex-row", "sm:items-center", "justify-between", "gap-4"], [1, "text-2xl", "font-bold", "tracking-tight", "text-heading-foreground", "flex", "items-center", "gap-2"], [1, "material-icons", "text-primary"], [1, "text-sm", "text-muted-foreground", "mt-1"], ["routerLink", "/admin/category-groups/new", 1, "btn", "btn-primary", "shadow-lg", "shadow-primary/20", "hover:shadow-primary/40", "transition-all"], [1, "material-icons", "text-sm"], [1, "card", "overflow-hidden", "border", "border-border", "shadow-sm"], [1, "overflow-x-auto"], [1, "w-full", "text-sm", "text-right"], [1, "bg-muted/50", "border-b", "border-border", "text-muted-foreground"], [1, "px-6", "py-4", "font-medium", "w-20"], [1, "px-6", "py-4", "font-medium"], [1, "px-6", "py-4", "font-medium", "text-center", "w-32"], [1, "px-6", "py-4", "font-medium", "w-40", "text-left"], [1, "divide-y", "divide-border/50", "bg-card"], ["class", "group hover:bg-muted/30 transition-colors", 4, "ngFor", "ngForOf"], [4, "ngIf"], ["class", "p-12 text-center", 4, "ngIf"], [1, "group", "hover:bg-muted/30", "transition-colors"], [1, "px-6", "py-4"], [1, "w-10", "h-10", "rounded-lg", "bg-muted/50", "border", "border-border", "p-1", "overflow-hidden"], ["class", "w-full h-full object-contain", "alt", "", 3, "src", 4, "ngIf"], ["class", "w-full h-full flex items-center justify-center text-muted-foreground", 4, "ngIf"], [1, "px-6", "py-4", "font-medium", "text-foreground", "text-base"], [1, "px-6", "py-4", "text-muted-foreground"], [1, "badge", "badge-outline"], [1, "px-6", "py-4", "text-center"], [1, "font-mono", "text-muted-foreground"], [1, "badge", 3, "ngClass"], [1, "flex", "items-center", "justify-end", "gap-2", "opacity-0", "group-hover:opacity-100", "transition-opacity"], ["title", "\u0648\u06CC\u0631\u0627\u06CC\u0634", 1, "btn", "btn-icon", "btn-ghost", "btn-sm", "text-primary", "hover:text-primary-foreground", "hover:bg-primary", 3, "routerLink"], [1, "material-icons", "text-lg"], ["title", "\u062D\u0630\u0641", 1, "btn", "btn-icon", "btn-ghost", "btn-sm", "text-muted-foreground", "hover:text-destructive-foreground", "hover:bg-destructive", 3, "click"], ["alt", "", 1, "w-full", "h-full", "object-contain", 3, "src"], [1, "w-full", "h-full", "flex", "items-center", "justify-center", "text-muted-foreground"], ["colspan", "6", 1, "px-6", "py-12", "text-center", "text-muted-foreground"], [1, "p-12", "text-center"], [1, "spinner", "spinner-lg", "text-primary"]], template: function (u, a) { u & 1 && (t(0, "div", 0)(1, "div", 1)(2, "div")(3, "h1", 2)(4, "span", 3), i(5, "folder"), e(), i(6, " \u06AF\u0631\u0648\u0647\u200C\u0647\u0627\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC "), e(), t(7, "p", 4), i(8, "\u0632\u06CC\u0631\u0645\u062C\u0645\u0648\u0639\u0647\u200C\u0647\u0627\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627\u06CC \u0627\u0635\u0644\u06CC"), e()(), t(9, "a", 5)(10, "span", 6), i(11, "add"), e(), i(12, " \u06AF\u0631\u0648\u0647 \u062C\u062F\u06CC\u062F "), e()(), t(13, "div", 7)(14, "div", 8)(15, "table", 9)(16, "thead", 10)(17, "tr")(18, "th", 11), i(19, "\u0622\u06CC\u06A9\u0648\u0646"), e(), t(20, "th", 12), i(21, "\u0646\u0627\u0645 \u06AF\u0631\u0648\u0647"), e(), t(22, "th", 12), i(23, "\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0648\u0627\u0644\u062F"), e(), t(24, "th", 13), i(25, "\u062A\u0639\u062F\u0627\u062F \u0645\u062D\u0635\u0648\u0644"), e(), t(26, "th", 13), i(27, "\u0648\u0636\u0639\u06CC\u062A"), e(), t(28, "th", 14), i(29, "\u0639\u0645\u0644\u06CC\u0627\u062A"), e()()(), t(30, "tbody", 15), f(31, Wi, 24, 10, "tr", 16)(32, Hi, 4, 0, "tr", 17), e()()(), f(33, Ki, 2, 0, "div", 18), e()()), u & 2 && (d(31), l("ngForOf", a.categoryGroups), d(), l("ngIf", !a.isLoading && a.categoryGroups.length === 0), d(), l("ngIf", a.isLoading)) }, dependencies: [A, q, I, _, L, T], encapsulation: 2 }); let n = s; return n })(); var Le = (() => { let s = class s { constructor(r) { this.http = r, this.apiUrl = `${R.API_URL}admin/orders` } getOrders(r, u, a, m, c = 1, j = 10) { let N = new K().set("page", c.toString()).set("pageSize", j.toString()); return r && (N = N.set("userId", r.toString())), u && (N = N.set("statusId", u.toString())), a && (N = N.set("fromDate", a)), m && (N = N.set("toDate", m)), this.http.get(this.apiUrl, { params: N }) } getOrderById(r) { return this.http.get(`${this.apiUrl}/${r}`) } updateOrderStatus(r, u) { return this.http.patch(`${this.apiUrl}/${r}/status`, u) } getStatistics(r, u) { let a = new K; return r && (a = a.set("fromDate", r)), u && (a = a.set("toDate", u)), this.http.get(`${this.apiUrl}/statistics`, { params: a }) } deleteOrder(r) { return this.http.delete(`${this.apiUrl}/${r}`) } }; s.\u0275fac = function (u) { return new (u || s)(B(z)) }, s.\u0275prov = G({ token: s, factory: s.\u0275fac, providedIn: "root" }); let n = s; return n })(); var Ee = (() => { let s = class s { constructor(r) { this.http = r, this.publicUrl = `${R.API_URL}OrderStatus`, this.adminUrl = `${R.API_URL}admin/order-statuses` } getOrderStatuses() { return this.http.get(this.publicUrl) } getOrderStatus(r) { return this.http.get(`${this.adminUrl}/${r}`) } createOrderStatus(r) { return this.http.post(this.adminUrl, r) } updateOrderStatus(r, u) { return this.http.put(`${this.adminUrl}/${r}`, u) } deleteOrderStatus(r) { return this.http.delete(`${this.adminUrl}/${r}`) } }; s.\u0275fac = function (u) { return new (u || s)(B(z)) }, s.\u0275prov = G({ token: s, factory: s.\u0275fac, providedIn: "root" }); let n = s; return n })(); function Ji(n, s) { n & 1 && (t(0, "div", 3)(1, "span", 4), i(2, "sync"), e()()) } function Qi(n, s) { n & 1 && (t(0, "div", 5)(1, "span", 6), i(2, "error_outline"), e(), t(3, "h2", 7), i(4, "\u0633\u0641\u0627\u0631\u0634 \u06CC\u0627\u0641\u062A \u0646\u0634\u062F"), e(), t(5, "p", 8), i(6, " \u0645\u0645\u06A9\u0646 \u0627\u0633\u062A \u0627\u06CC\u0646 \u0633\u0641\u0627\u0631\u0634 \u062D\u0630\u0641 \u0634\u062F\u0647 \u06CC\u0627 \u0634\u0646\u0627\u0633\u0647 \u0622\u0646 \u0627\u0634\u062A\u0628\u0627\u0647 \u0628\u0627\u0634\u062F. "), e(), t(7, "a", 9), i(8, "\u0628\u0627\u0632\u06AF\u0634\u062A \u0628\u0647 \u0644\u06CC\u0633\u062A \u0633\u0641\u0627\u0631\u0634\u0627\u062A"), e()()) } function Yi(n, s) { if (n & 1 && (t(0, "span", 72), i(1), e()), n & 2) { let o = s.$implicit; d(), g(" ", o.value.displayValue, " ") } } function Xi(n, s) { if (n & 1 && (t(0, "div", 61)(1, "div", 62), x(2, "img", 63), e(), t(3, "div", 64)(4, "p", 65), i(5), e(), t(6, "div", 66), f(7, Yi, 2, 1, "span", 67), F(8, "keyvalue"), e(), t(9, "div", 68)(10, "p"), i(11, "\u062A\u0639\u062F\u0627\u062F: "), t(12, "span", 41), i(13), e()(), t(14, "p"), i(15, "\u0642\u06CC\u0645\u062A \u0648\u0627\u062D\u062F: "), t(16, "span", 41), i(17), F(18, "number"), e(), i(19, " \u062A\u0648\u0645\u0627\u0646"), e()()(), t(20, "div", 69)(21, "p", 70), i(22), F(23, "number"), e(), t(24, "p", 71), i(25, "\u062A\u0648\u0645\u0627\u0646"), e()()()), n & 2) { let o = s.$implicit; d(2), l("src", o.product.icon || "assets/images/placeholder.png", le)("alt", o.product.name), d(3), b(o.product.name), d(2), l("ngForOf", P(8, 7, o.product.attributes)), d(6), b(o.quantity), d(4), b(P(18, 9, o.sellingPrice)), d(5), g(" ", P(23, 11, o.amount), " ") } } function Zi(n, s) { if (n & 1 && (t(0, "div", 40)(1, "span", 33), i(2, "\u062A\u062E\u0641\u06CC\u0641:"), e(), t(3, "span", 73), i(4), F(5, "number"), e()()), n & 2) { let o = p(2); d(4), g("", P(5, 1, o.order.discountAmount), " - \u062A\u0648\u0645\u0627\u0646") } } function er(n, s) { if (n & 1 && (t(0, "option", 74), i(1), e()), n & 2) { let o = s.$implicit; l("ngValue", o.id), d(), g(" ", o.name, " ") } } function tr(n, s) { n & 1 && (t(0, "span", 75), i(1, "sync"), e()) } function ir(n, s) { if (n & 1) { let o = E(); t(0, "div", 10)(1, "div", 11)(2, "div")(3, "h1", 12)(4, "span", 13), i(5, "receipt_long"), e(), i(6, " \u062C\u0632\u0626\u06CC\u0627\u062A \u0633\u0641\u0627\u0631\u0634 "), t(7, "span", 14), i(8), e()(), t(9, "p", 15)(10, "span", 16), i(11, "event"), e(), i(12, " \u062A\u0627\u0631\u06CC\u062E \u062B\u0628\u062A: "), t(13, "span", 17), i(14), F(15, "date"), e()()(), t(16, "a", 18)(17, "span", 19), i(18, "arrow_forward"), e(), i(19, " \u0628\u0627\u0632\u06AF\u0634\u062A \u0628\u0647 \u0644\u06CC\u0633\u062A "), e()(), t(20, "div", 20)(21, "div", 21)(22, "div", 22)(23, "div", 23)(24, "h2", 24)(25, "span", 13), i(26, "shopping_cart"), e(), i(27, " \u0645\u062D\u0635\u0648\u0644\u0627\u062A \u0633\u0641\u0627\u0631\u0634 "), t(28, "span", 25), i(29), e()()(), t(30, "div", 26), f(31, Xi, 26, 13, "div", 27), e()()(), t(32, "div", 28)(33, "div", 29)(34, "h2", 30)(35, "span", 13), i(36, "person"), e(), i(37, " \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0645\u0634\u062A\u0631\u06CC "), e(), t(38, "div", 31)(39, "div", 32)(40, "span", 33), i(41, "\u0646\u0627\u0645:"), e(), t(42, "span", 34), i(43), e()(), t(44, "div", 32)(45, "span", 33), i(46, "\u0645\u0648\u0628\u0627\u06CC\u0644:"), e(), t(47, "span", 35), i(48), e()(), t(49, "div", 36)(50, "span", 37), i(51, "\u0622\u062F\u0631\u0633:"), e(), t(52, "p", 38), i(53), e()(), t(54, "div", 32)(55, "span", 33), i(56, "\u06A9\u062F\u067E\u0633\u062A\u06CC:"), e(), t(57, "span", 35), i(58), e()()()(), t(59, "div", 29)(60, "h2", 30)(61, "span", 39), i(62, "payments"), e(), i(63, " \u062E\u0644\u0627\u0635\u0647 \u0645\u0627\u0644\u06CC "), e(), t(64, "div", 31)(65, "div", 40)(66, "span", 33), i(67, "\u062C\u0645\u0639 \u06A9\u0644:"), e(), t(68, "span", 41), i(69), F(70, "number"), e()(), t(71, "div", 40)(72, "span", 33), i(73, "\u0647\u0632\u06CC\u0646\u0647 \u0627\u0631\u0633\u0627\u0644:"), e(), t(74, "span", 34), i(75), F(76, "number"), e()(), f(77, Zi, 6, 3, "div", 42), t(78, "div", 43)(79, "span", 44), i(80, "\u0645\u0628\u0644\u063A \u0646\u0647\u0627\u06CC\u06CC:"), e(), t(81, "span", 45), i(82), F(83, "number"), e()(), t(84, "div", 46)(85, "span", 47), i(86, "\u0633\u0648\u062F \u0633\u0641\u0627\u0631\u0634:"), e(), t(87, "span", 48), i(88), F(89, "number"), e()()()(), t(90, "div", 29)(91, "h2", 30)(92, "span", 49), i(93, "edit_note"), e(), i(94, " \u0645\u062F\u06CC\u0631\u06CC\u062A \u0648\u0636\u0639\u06CC\u062A "), e(), t(95, "div", 50)(96, "div", 51)(97, "span", 52), i(98, "\u0648\u0636\u0639\u06CC\u062A \u0641\u0639\u0644\u06CC:"), e(), t(99, "span", 53), F(100, "statusClass"), t(101, "span", 16), i(102), e(), i(103), e()(), t(104, "div", 54)(105, "label", 55), i(106, "\u062A\u063A\u06CC\u06CC\u0631 \u0648\u0636\u0639\u06CC\u062A \u0628\u0647:"), e(), t(107, "select", 56), ae("ngModelChange", function (u) { C(o); let a = p(); return oe(a.selectedStatusId, u) || (a.selectedStatusId = u), S(u) }), t(108, "option", 57), i(109, "\u0627\u0646\u062A\u062E\u0627\u0628 \u0648\u0636\u0639\u06CC\u062A..."), e(), f(110, er, 2, 2, "option", 58), e()(), t(111, "button", 59), v("click", function () { C(o); let u = p(); return S(u.updateStatus()) }), f(112, tr, 2, 0, "span", 60), i(113), e()()()()()() } if (n & 2) { let o = p(); d(8), g("#", o.order.id), d(6), b(he(15, 23, o.order.createdAt, "yyyy/MM/dd HH:mm")), d(15), g("", o.order.orderItems.length, " \u0645\u0648\u0631\u062F"), d(2), l("ngForOf", o.order.orderItems), d(12), xe("", o.order.user == null ? null : o.order.user.firstName, " ", o.order.user == null ? null : o.order.user.lastName), d(5), b(o.order.user == null ? null : o.order.user.phoneNumber), d(5), b(o.order.addressSnapshot == null ? null : o.order.addressSnapshot.address), d(5), b(o.order.addressSnapshot == null ? null : o.order.addressSnapshot.postalCode), d(11), g("", P(70, 26, o.order.totalAmount), " \u062A\u0648\u0645\u0627\u0646"), d(6), g("", P(76, 28, o.order.shippingCost), " \u062A\u0648\u0645\u0627\u0646"), d(2), l("ngIf", o.order.discountAmount > 0), d(5), g("", P(83, 30, o.order.finalAmount), " \u062A\u0648\u0645\u0627\u0646"), d(6), g("", P(89, 32, o.order.totalProfit), " \u062A\u0648\u0645\u0627\u0646"), d(11), l("ngClass", P(100, 34, o.order.orderStatus == null ? null : o.order.orderStatus.name)), d(3), b(o.order.orderStatus == null ? null : o.order.orderStatus.icon), d(), g(" ", o.order.orderStatus == null ? null : o.order.orderStatus.name, " "), d(4), ue("ngModel", o.selectedStatusId), d(), l("ngValue", null), d(2), l("ngForOf", o.orderStatuses), d(), l("disabled", o.isUpdatingStatus || !o.selectedStatusId || o.selectedStatusId === o.order.orderStatusId), d(), l("ngIf", o.isUpdatingStatus), d(), g(" ", o.isUpdatingStatus ? "\u062F\u0631 \u062D\u0627\u0644 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC..." : "\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0648\u0636\u0639\u06CC\u062A", " ") } } var Rt = (() => { let s = class s { constructor(r, u, a, m) { this.route = r, this.adminOrderService = u, this.adminOrderStatusService = a, this.notificationService = m, this.order = null, this.orderStatuses = [], this.isLoading = !0, this.isUpdatingStatus = !1, this.selectedStatusId = null } ngOnInit() { let r = this.route.snapshot.paramMap.get("id"); r && (this.orderId = Number(r), this.loadOrder(), this.loadOrderStatuses()) } loadOrder() { this.isLoading = !0, this.adminOrderService.getOrderById(this.orderId).subscribe({ next: r => { this.order = r, this.selectedStatusId = r.orderStatusId, this.isLoading = !1 }, error: r => { console.error("Error loading order:", r), this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0633\u0641\u0627\u0631\u0634", "error"), this.isLoading = !1 } }) } loadOrderStatuses() { this.adminOrderStatusService.getOrderStatuses().subscribe({ next: r => { this.orderStatuses = r }, error: r => { console.error("Error loading order statuses:", r), this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627\u06CC \u0633\u0641\u0627\u0631\u0634", "error") } }) } updateStatus() { if (!this.orderId || !this.order || !this.selectedStatusId) { this.notificationService.show("\u0627\u0637\u0644\u0627\u0639\u0627\u062A \u06A9\u0627\u0645\u0644 \u0646\u06CC\u0633\u062A", "error"); return } if (!this.order.rowVersion) { this.notificationService.show("\u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0633\u0641\u0627\u0631\u0634 \u0628\u0631\u0627\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u0648\u0636\u0639\u06CC\u062A \u06A9\u0627\u0645\u0644 \u0646\u06CC\u0633\u062A (\u0646\u0633\u062E\u0647 \u0631\u062F\u06CC\u0641 \u0645\u0648\u062C\u0648\u062F \u0646\u06CC\u0633\u062A).", "error"); return } if (this.selectedStatusId === this.order.orderStatusId) { this.notificationService.show("\u0648\u0636\u0639\u06CC\u062A \u0627\u0646\u062A\u062E\u0627\u0628\u06CC \u0628\u0627 \u0648\u0636\u0639\u06CC\u062A \u0641\u0639\u0644\u06CC \u06CC\u06A9\u0633\u0627\u0646 \u0627\u0633\u062A", "info"); return } this.isUpdatingStatus = !0; let r = this.order.rowVersion; this.adminOrderService.updateOrderStatus(this.orderId, { orderStatusId: this.selectedStatusId, rowVersion: r }).pipe(D(() => this.isUpdatingStatus = !1)).subscribe({ next: () => { this.notificationService.show("\u0648\u0636\u0639\u06CC\u062A \u0633\u0641\u0627\u0631\u0634 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0634\u062F", "success"), this.loadOrder() }, error: u => { console.error("Error updating order status:", u), u?.status === 409 ? this.notificationService.show("\u0633\u0641\u0627\u0631\u0634 \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A. \u062F\u0631 \u062D\u0627\u0644 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062C\u062F\u062F...", "error") : this.notificationService.show(u?.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0648\u0636\u0639\u06CC\u062A", "error"), this.loadOrder() } }) } }; s.\u0275fac = function (u) { return new (u || s)(h(ne), h(Le), h(Ee), h(k)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-order-detail"]], decls: 3, vars: 3, consts: [["class", "flex justify-center items-center py-20", 4, "ngIf"], ["class", "flex flex-col items-center justify-center py-20 text-center animate-fade-in", 4, "ngIf"], ["class", "max-w-5xl mx-auto animate-fade-in-up", 4, "ngIf"], [1, "flex", "justify-center", "items-center", "py-20"], [1, "material-icons", "animate-spin", "text-primary", "text-5xl"], [1, "flex", "flex-col", "items-center", "justify-center", "py-20", "text-center", "animate-fade-in"], [1, "material-icons", "text-6xl", "text-muted-foreground", "mb-4", "opacity-20"], [1, "text-xl", "font-bold", "text-foreground"], [1, "text-muted-foreground", "mt-2"], ["routerLink", "/admin/orders", 1, "btn", "btn-primary", "mt-6"], [1, "max-w-5xl", "mx-auto", "animate-fade-in-up"], [1, "flex", "flex-col", "sm:flex-row", "sm:items-center", "sm:justify-between", "mb-6", "gap-4"], [1, "text-2xl", "font-bold", "text-heading-foreground", "flex", "items-center", "gap-2"], [1, "material-icons", "text-primary"], [1, "font-mono", "text-muted-foreground"], [1, "text-sm", "text-muted-foreground", "mt-1", "flex", "items-center", "gap-1"], [1, "material-icons", "text-[14px]"], [1, "dir-ltr"], ["routerLink", "/admin/orders", 1, "btn", "btn-outline", "btn-sm", "self-start", "sm:self-center", "gap-2"], [1, "material-icons", "text-base"], [1, "grid", "grid-cols-1", "lg:grid-cols-3", "gap-6", "items-start"], [1, "lg:col-span-2", "space-y-6"], [1, "card", "border", "border-border", "shadow-sm"], [1, "p-6", "border-b", "border-border", "bg-muted/5"], [1, "font-semibold", "text-lg", "text-foreground", "flex", "items-center", "gap-2"], [1, "badge", "badge-secondary", "text-xs"], [1, "divide-y", "divide-border"], ["class", "p-4 flex items-center gap-4 hover:bg-muted/30 transition-colors", 4, "ngFor", "ngForOf"], [1, "space-y-6", "lg:sticky", "top-24"], [1, "card", "p-6", "border", "border-border", "shadow-sm"], [1, "font-semibold", "text-lg", "text-foreground", "mb-4", "flex", "items-center", "gap-2"], [1, "space-y-3", "text-sm"], [1, "flex", "justify-between"], [1, "text-muted-foreground"], [1, "font-medium", "text-foreground"], [1, "font-medium", "text-foreground", "dir-ltr", "font-mono"], [1, "border-t", "border-border", "my-2", "pt-2"], [1, "text-muted-foreground", "block", "mb-1"], [1, "text-foreground", "leading-relaxed"], [1, "material-icons", "text-success"], [1, "flex", "justify-between", "items-center"], [1, "font-bold", "text-foreground"], ["class", "flex justify-between items-center", 4, "ngIf"], [1, "flex", "justify-between", "items-center", "pt-3", "border-t", "border-border", "mt-3"], [1, "font-bold", "text-lg", "text-foreground"], [1, "font-black", "text-xl", "text-primary"], [1, "bg-muted/30", "p-3", "rounded-lg", "mt-4", "flex", "justify-between", "items-center"], [1, "text-muted-foreground", "text-xs"], [1, "font-bold", "text-success"], [1, "material-icons", "text-warning"], [1, "space-y-4"], [1, "p-3", "rounded-lg", "bg-muted/20", "border", "border-border", "flex", "items-center", "justify-between"], [1, "text-sm", "text-muted-foreground"], [1, "px-2.5", "py-1", "text-xs", "font-semibold", "rounded-full", "flex", "items-center", "gap-1", 3, "ngClass"], [1, "space-y-2"], [1, "text-sm", "font-medium", "text-foreground"], [1, "input", "w-full", 3, "ngModelChange", "ngModel"], ["disabled", "", 3, "ngValue"], [3, "ngValue", 4, "ngFor", "ngForOf"], [1, "btn", "btn-primary", "w-full", "shadow-button", 3, "click", "disabled"], ["class", "material-icons animate-spin me-2 text-lg", 4, "ngIf"], [1, "p-4", "flex", "items-center", "gap-4", "hover:bg-muted/30", "transition-colors"], [1, "w-20", "h-20", "rounded-lg", "border", "border-border", "bg-background", "p-1", "shrink-0", "overflow-hidden"], [1, "w-full", "h-full", "object-contain", 3, "src", "alt"], [1, "flex-1", "min-w-0"], [1, "font-medium", "text-foreground", "truncate"], [1, "flex", "flex-wrap", "gap-2", "mt-1"], ["class", "badge badge-outline text-[10px]", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "gap-4", "mt-2", "text-sm", "text-muted-foreground"], [1, "text-right", "shrink-0"], [1, "font-bold", "text-foreground", "text-lg", "tabular-nums"], [1, "text-xs", "text-muted-foreground"], [1, "badge", "badge-outline", "text-[10px]"], [1, "font-medium", "text-destructive"], [3, "ngValue"], [1, "material-icons", "animate-spin", "me-2", "text-lg"]], template: function (u, a) { u & 1 && f(0, Ji, 3, 0, "div", 0)(1, Qi, 9, 0, "div", 1)(2, ir, 114, 36, "div", 2), u & 2 && (l("ngIf", a.isLoading), d(), l("ngIf", !a.isLoading && !a.order), d(), l("ngIf", a.order)) }, dependencies: [A, q, I, _, L, T, ge, ee, te, Z, V, fe, be, ve, qe, Qe], encapsulation: 2 }); let n = s; return n })(); var Gt = (() => { let s = class s { transform(r) { return r?.trim() || "" } }; s.\u0275fac = function (u) { return new (u || s) }, s.\u0275pipe = Ct({ name: "trim", type: s, pure: !0 }); let n = s; return n })(); var rr = n => ["/admin/orders", n]; function nr(n, s) { if (n & 1 && (t(0, "option", 26), i(1), e()), n & 2) { let o = s.$implicit; l("value", o.id), d(), g(" ", o.name, " ") } } function ur(n, s) { if (n & 1 && (t(0, "div", 27)(1, "div", 28)(2, "div", 29)(3, "p", 30), i(4, "\u062A\u0639\u062F\u0627\u062F \u0633\u0641\u0627\u0631\u0634\u0627\u062A"), e(), t(5, "span", 31), i(6, "shopping_cart"), e()(), t(7, "p", 32), i(8), F(9, "number"), e()(), t(10, "div", 33)(11, "div", 29)(12, "p", 30), i(13, "\u0645\u062C\u0645\u0648\u0639 \u062F\u0631\u0622\u0645\u062F"), e(), t(14, "span", 34), i(15, "payments"), e()(), t(16, "p", 32), i(17), F(18, "number"), t(19, "span", 35), i(20, "\u062A\u0648\u0645\u0627\u0646"), e()()(), t(21, "div", 36)(22, "div", 29)(23, "p", 30), i(24, "\u0645\u062C\u0645\u0648\u0639 \u0633\u0648\u062F"), e(), t(25, "span", 37), i(26, "trending_up"), e()(), t(27, "p", 32), i(28), F(29, "number"), t(30, "span", 35), i(31, "\u062A\u0648\u0645\u0627\u0646"), e()()(), t(32, "div", 38)(33, "div", 29)(34, "p", 30), i(35, "\u0645\u06CC\u0627\u0646\u06AF\u06CC\u0646 \u0633\u0641\u0627\u0631\u0634"), e(), t(36, "span", 39), i(37, "analytics"), e()(), t(38, "p", 32), i(39), F(40, "number"), t(41, "span", 35), i(42, "\u062A\u0648\u0645\u0627\u0646"), e()()()()), n & 2) { let o = p(); d(8), b(P(9, 4, o.statistics.totalOrders)), d(9), g("", P(18, 6, o.statistics.totalRevenue), " "), d(11), g("", P(29, 8, o.statistics.totalProfit), " "), d(11), g("", he(40, 10, o.statistics.averageOrderValue, "1.0-0"), " ") } } function or(n, s) { n & 1 && (t(0, "div", 40), x(1, "span", 41), e()) } function ar(n, s) { n & 1 && (t(0, "div", 42)(1, "div", 43)(2, "span", 44), i(3, "receipt"), e(), t(4, "p"), i(5, "\u0647\u06CC\u0686 \u0633\u0641\u0627\u0631\u0634\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."), e()()()) } function sr(n, s) { if (n & 1) { let o = E(); t(0, "tr", 54)(1, "td", 55), i(2), e(), t(3, "td", 56)(4, "div", 57)(5, "span", 58), i(6), F(7, "trim"), e(), t(8, "span", 59), i(9), e()()(), t(10, "td", 60), i(11), F(12, "number"), t(13, "span", 35), i(14, "\u062A\u0648\u0645\u0627\u0646"), e()(), t(15, "td", 61)(16, "span", 62), F(17, "statusClass"), t(18, "span", 63), i(19), e(), i(20), e()(), t(21, "td", 64), i(22), F(23, "date"), e(), t(24, "td", 65)(25, "div", 66)(26, "a", 67)(27, "span", 68), i(28, "visibility"), e()(), t(29, "button", 69), v("click", function () { let u = C(o).$implicit, a = p(2); return S(a.deleteOrder(u.id)) }), t(30, "span", 68), i(31, "delete"), e()()()()() } if (n & 2) { let o = s.$implicit; d(2), g("#", o.id), d(4), b(P(7, 9, ((o.user == null ? null : o.user.firstName) || "") + " " + ((o.user == null ? null : o.user.lastName) || ""))), d(3), b(o.user == null ? null : o.user.phoneNumber), d(2), g(" ", P(12, 11, o.totalAmount), " "), d(5), l("ngClass", P(17, 13, o.orderStatus == null ? null : o.orderStatus.name)), d(3), b(o.orderStatus == null ? null : o.orderStatus.icon), d(), g(" ", o.orderStatus == null ? null : o.orderStatus.name, " "), d(2), g(" ", he(23, 15, o.createdAt, "yyyy/MM/dd"), " "), d(4), l("routerLink", $(18, rr, o.id)) } } function dr(n, s) { if (n & 1 && (t(0, "div", 45)(1, "table", 46)(2, "thead", 47)(3, "tr")(4, "th", 48), i(5, "\u06A9\u062F \u0633\u0641\u0627\u0631\u0634"), e(), t(6, "th", 49), i(7, "\u06A9\u0627\u0631\u0628\u0631"), e(), t(8, "th", 49), i(9, "\u0645\u0628\u0644\u063A \u06A9\u0644"), e(), t(10, "th", 50), i(11, "\u0648\u0636\u0639\u06CC\u062A"), e(), t(12, "th", 49), i(13, "\u062A\u0627\u0631\u06CC\u062E"), e(), t(14, "th", 51), i(15, "\u0639\u0645\u0644\u06CC\u0627\u062A"), e()()(), t(16, "tbody", 52), f(17, sr, 32, 20, "tr", 53), e()()()), n & 2) { let o = p(); d(17), l("ngForOf", o.orders) } } var Bt = (() => { let s = class s { constructor(r, u, a) { this.adminOrderService = r, this.adminOrderStatusService = u, this.notificationService = a, this.orders = [], this.orderStatuses = [], this.pagination = null, this.statistics = null, this.isLoading = !0, this.currentPage = 1, this.filterForm = new Se({ userId: new O(null), statusId: new O(null), fromDate: new O(null), toDate: new O(null) }) } ngOnInit() { this.loadOrderStatuses(), this.loadOrders(), this.loadStatistics() } loadOrderStatuses() { this.adminOrderStatusService.getOrderStatuses().subscribe({ next: r => { this.orderStatuses = r }, error: () => { this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627\u06CC \u0633\u0641\u0627\u0631\u0634", "error") } }) } loadOrders(r = 1) { this.isLoading = !0, this.currentPage = r; let u = { page: this.currentPage, pageSize: 10 }, a = this.filterForm.value; a.userId && (u.userId = a.userId), a.statusId && (u.statusId = a.statusId), a.fromDate && (u.fromDate = new Date(a.fromDate).toISOString()), a.toDate && (u.toDate = new Date(a.toDate).toISOString()), this.adminOrderService.getOrders(u).subscribe({ next: m => { this.orders = m.items ?? [], this.pagination = m, this.isLoading = !1 }, error: () => { this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0633\u0641\u0627\u0631\u0634\u0627\u062A", "error"), this.isLoading = !1 } }) } loadStatistics() { let r = this.filterForm.value, u = r.fromDate ? new Date(r.fromDate).toISOString() : void 0, a = r.toDate ? new Date(r.toDate).toISOString() : void 0; this.adminOrderService.getStatistics(u, a).subscribe({ next: m => { this.statistics = m.generalStatistics }, error: () => { this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0622\u0645\u0627\u0631", "error") } }) } applyFilters() { this.loadOrders(1), this.loadStatistics() } clearFilters() { this.filterForm.reset(), this.loadOrders(1), this.loadStatistics() } deleteOrder(r) { confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0633\u0641\u0627\u0631\u0634 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F") && this.adminOrderService.deleteOrder(r).subscribe({ next: () => { this.notificationService.show("\u0633\u0641\u0627\u0631\u0634 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F", "success"), this.loadOrders(this.currentPage), this.loadStatistics() }, error: u => { this.notificationService.show(u?.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u0633\u0641\u0627\u0631\u0634", "error") } }) } }; s.\u0275fac = function (u) { return new (u || s)(h(Le), h(Ee), h(k)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-order-list"]], decls: 43, vars: 7, consts: [[1, "flex", "items-center", "justify-between", "mb-6", "animate-fade-in"], [1, "text-2xl", "font-bold", "text-heading-foreground", "flex", "items-center", "gap-2"], [1, "material-icons", "text-primary"], [1, "text-sm", "text-muted-foreground", "mt-1"], [1, "card", "p-6", "mb-6", "border", "border-border", "shadow-sm", "animate-fade-in"], [1, "grid", "grid-cols-1", "md:grid-cols-2", "lg:grid-cols-4", "gap-4", 3, "formGroup"], [1, "space-y-2", "form-group"], ["for", "userId", 1, "form-label"], ["type", "number", "id", "userId", "formControlName", "userId", "placeholder", "\u0645\u062B\u0644\u0627: 1001", 1, "input"], ["for", "statusId", 1, "form-label"], ["id", "statusId", "formControlName", "statusId", 1, "input"], [3, "ngValue"], [3, "value", 4, "ngFor", "ngForOf"], ["for", "fromDate", 1, "form-label"], ["type", "date", "id", "fromDate", "formControlName", "fromDate", 1, "input", "ltr-input"], ["for", "toDate", 1, "form-label"], ["type", "date", "id", "toDate", "formControlName", "toDate", 1, "input", "ltr-input"], [1, "flex", "items-end", "gap-2", "col-span-full", "pt-2"], ["type", "button", 1, "btn", "btn-primary", "shadow-sm", 3, "click"], [1, "material-icons", "text-sm", "me-1"], ["type", "button", 1, "btn", "btn-outline", 3, "click"], ["class", "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6 animate-fade-in delay-100", 4, "ngIf"], [1, "card", "overflow-hidden", "border", "border-border", "shadow-sm", "animate-fade-in", "delay-200"], ["class", "flex justify-center items-center p-12", 4, "ngIf"], ["class", "text-center p-12", 4, "ngIf"], ["class", "w-full overflow-x-auto", 4, "ngIf"], [3, "value"], [1, "grid", "grid-cols-1", "md:grid-cols-2", "lg:grid-cols-4", "gap-4", "mb-6", "animate-fade-in", "delay-100"], [1, "stat-card", "border-r-4", "border-r-primary", "hover-lift"], [1, "flex", "items-center", "justify-between"], [1, "stat-label"], [1, "material-icons", "text-primary/80"], [1, "mt-2", "stat-value"], [1, "stat-card", "border-r-4", "border-r-success", "hover-lift"], [1, "material-icons", "text-success/80"], [1, "text-xs", "font-normal", "text-muted-foreground"], [1, "stat-card", "border-r-4", "border-r-info", "hover-lift"], [1, "material-icons", "text-info/80"], [1, "stat-card", "border-r-4", "border-r-warning", "hover-lift"], [1, "material-icons", "text-warning/80"], [1, "flex", "justify-center", "items-center", "p-12"], [1, "spinner", "spinner-xl", "text-primary"], [1, "text-center", "p-12"], [1, "flex", "flex-col", "items-center", "gap-3", "text-muted-foreground", "opacity-50"], [1, "material-icons", "text-5xl"], [1, "w-full", "overflow-x-auto"], [1, "w-full", "text-right", "text-sm"], [1, "bg-muted/50", "border-b", "border-border", "text-muted-foreground"], [1, "h-12", "px-6", "align-middle", "font-medium", "whitespace-nowrap", "w-24"], [1, "h-12", "px-6", "align-middle", "font-medium", "whitespace-nowrap"], [1, "h-12", "px-6", "align-middle", "font-medium", "whitespace-nowrap", "text-center"], [1, "h-12", "px-6", "align-middle", "font-medium", "whitespace-nowrap", "w-32"], [1, "divide-y", "divide-border/50", "bg-card"], ["class", "group hover:bg-muted/30 transition-colors", 4, "ngFor", "ngForOf"], [1, "group", "hover:bg-muted/30", "transition-colors"], [1, "p-6", "align-middle", "font-mono", "font-medium", "text-primary", "whitespace-nowrap", "dir-ltr", "text-right"], [1, "p-6", "align-middle", "text-foreground", "whitespace-nowrap"], [1, "flex", "flex-col"], [1, "font-medium"], [1, "text-xs", "text-muted-foreground", "font-mono", "mt-0.5", "dir-ltr", "text-right"], [1, "p-6", "align-middle", "text-foreground", "font-medium", "whitespace-nowrap", "tabular-nums"], [1, "p-6", "align-middle", "text-center"], [1, "px-2.5", "py-1", "text-xs", "font-semibold", "rounded-full", "inline-flex", "items-center", "gap-1", 3, "ngClass"], [1, "material-icons", "text-[14px]"], [1, "p-6", "align-middle", "text-muted-foreground", "whitespace-nowrap", "dir-ltr", "text-right", "font-mono", "text-xs"], [1, "p-6", "align-middle", "whitespace-nowrap"], [1, "flex", "items-center", "justify-end", "gap-2", "opacity-0", "group-hover:opacity-100", "transition-opacity"], ["title", "\u062C\u0632\u0626\u06CC\u0627\u062A", 1, "btn", "btn-ghost", "btn-sm", "btn-icon", "text-primary", "hover:text-primary-foreground", "hover:bg-primary", 3, "routerLink"], [1, "material-icons", "text-lg"], ["title", "\u062D\u0630\u0641", 1, "btn", "btn-ghost", "btn-sm", "btn-icon", "text-muted-foreground", "hover:text-destructive-foreground", "hover:bg-destructive", 3, "click"]], template: function (u, a) { u & 1 && (t(0, "div", 0)(1, "div")(2, "h1", 1)(3, "span", 2), i(4, "receipt_long"), e(), i(5, " \u0645\u062F\u06CC\u0631\u06CC\u062A \u0633\u0641\u0627\u0631\u0634\u0627\u062A "), e(), t(6, "p", 3), i(7, "\u0645\u0634\u0627\u0647\u062F\u0647 \u0648 \u0645\u062F\u06CC\u0631\u06CC\u062A \u062A\u0645\u0627\u0645\u06CC \u0633\u0641\u0627\u0631\u0634\u0627\u062A \u062B\u0628\u062A \u0634\u062F\u0647"), e()()(), t(8, "div", 4)(9, "form", 5)(10, "div", 6)(11, "label", 7), i(12, "\u0634\u0646\u0627\u0633\u0647 \u06A9\u0627\u0631\u0628\u0631"), e(), x(13, "input", 8), e(), t(14, "div", 6)(15, "label", 9), i(16, "\u0648\u0636\u0639\u06CC\u062A"), e(), t(17, "select", 10)(18, "option", 11), i(19, "\u0647\u0645\u0647 \u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627"), e(), f(20, nr, 2, 2, "option", 12), e()(), t(21, "div", 6)(22, "label", 13), i(23, "\u0627\u0632 \u062A\u0627\u0631\u06CC\u062E"), e(), x(24, "input", 14), e(), t(25, "div", 6)(26, "label", 15), i(27, "\u062A\u0627 \u062A\u0627\u0631\u06CC\u062E"), e(), x(28, "input", 16), e(), t(29, "div", 17)(30, "button", 18), v("click", function () { return a.applyFilters() }), t(31, "span", 19), i(32, "filter_list"), e(), i(33, " \u0627\u0639\u0645\u0627\u0644 \u0641\u06CC\u0644\u062A\u0631 "), e(), t(34, "button", 20), v("click", function () { return a.clearFilters() }), t(35, "span", 19), i(36, "clear_all"), e(), i(37, " \u067E\u0627\u06A9 \u06A9\u0631\u062F\u0646 "), e()()()(), f(38, ur, 43, 13, "div", 21), t(39, "div", 22), f(40, or, 2, 0, "div", 23)(41, ar, 6, 0, "div", 24)(42, dr, 18, 1, "div", 25), e()), u & 2 && (d(9), l("formGroup", a.filterForm), d(9), l("ngValue", null), d(2), l("ngForOf", a.orderStatuses), d(18), l("ngIf", a.statistics), d(2), l("ngIf", a.isLoading), d(), l("ngIf", !a.isLoading && a.orders.length === 0), d(), l("ngIf", !a.isLoading && a.orders.length > 0)) }, dependencies: [A, q, I, _, L, T, ie, Q, ee, te, H, se, Z, V, J, Y, X, be, ve, Gt, Qe], encapsulation: 2 }); let n = s; return n })(); function lr(n, s) { n & 1 && x(0, "span", 21) } var dt = (() => { let s = class s { constructor(r, u, a, m) { this.route = r, this.router = u, this.notificationService = a, this.adminOrderStatusService = m, this.isEditMode = !1, this.statusId = null, this.isSubmitting = !1, this.statusForm = new Se({ name: new O("", [w.required, w.maxLength(100)]), icon: new O("", [w.maxLength(50)]) }) } ngOnInit() { let r = this.route.snapshot.paramMap.get("id"); r && (this.statusId = Number(r), this.isEditMode = !0, this.loadStatusData()) } loadStatusData() { this.statusId && this.adminOrderStatusService.getOrderStatus(this.statusId).subscribe({ next: r => { this.statusForm.patchValue(r) }, error: r => this.notificationService.show(r?.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A", "error") }) } onSubmit() { if (this.statusForm.invalid || this.isSubmitting) return; this.isSubmitting = !0; let r = this.statusForm.value; (this.isEditMode && this.statusId ? this.adminOrderStatusService.updateOrderStatus(this.statusId, r) : this.adminOrderStatusService.createOrderStatus(r)).pipe(D(() => this.isSubmitting = !1)).subscribe({ next: () => { this.notificationService.show(`\u0648\u0636\u0639\u06CC\u062A \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A ${this.isEditMode ? "\u0648\u06CC\u0631\u0627\u06CC\u0634" : "\u0627\u06CC\u062C\u0627\u062F"} \u0634\u062F`, "success"), this.router.navigate(["/admin/order-statuses"]) }, error: a => this.notificationService.show(a?.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u062B\u0628\u062A \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A", "error") }) } }; s.\u0275fac = function (u) { return new (u || s)(h(ne), h(Ce), h(k), h(Ee)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-order-status-form"]], decls: 34, vars: 6, consts: [[1, "max-w-md", "mx-auto", "animate-fade-in-up"], [1, "flex", "items-center", "justify-between", "mb-6"], [1, "text-2xl", "font-bold", "text-heading-foreground", "tracking-tight"], ["routerLink", "/admin/order-statuses", 1, "btn", "btn-ghost", "btn-sm", "text-muted-foreground", "hover:text-foreground"], [1, "material-icons", "text-sm", "me-1"], [1, "card", "p-6", "space-y-6", "shadow-md", "border-border", 3, "ngSubmit", "formGroup"], [1, "space-y-4"], [1, "space-y-2", "form-group"], ["for", "name", 1, "form-label"], [1, "text-destructive"], ["type", "text", "id", "name", "formControlName", "name", "placeholder", "\u0645\u062B\u0627\u0644: \u062F\u0631 \u062D\u0627\u0644 \u067E\u0631\u062F\u0627\u0632\u0634", 1, "input", "w-full"], ["for", "icon", 1, "form-label"], [1, "flex", "gap-3"], ["type", "text", "id", "icon", "formControlName", "icon", "placeholder", "shopping_cart", 1, "input", "flex-1", "ltr-input"], [1, "w-10", "h-10", "flex", "items-center", "justify-center", "rounded-md", "border", "border-input", "bg-muted/30", "text-primary"], [1, "material-icons"], [1, "text-xs", "text-muted-foreground", "mt-1"], ["href", "https://fonts.google.com/icons", "target", "_blank", 1, "text-primary", "underline", "hover:text-primary-600"], [1, "pt-6", "border-t", "border-border", "flex", "justify-end"], ["type", "submit", 1, "btn", "btn-primary", "w-full", "sm:w-auto", "min-w-[120px]", "shadow-button", 3, "disabled"], ["class", "spinner spinner-sm me-2 border-white", 4, "ngIf"], [1, "spinner", "spinner-sm", "me-2", "border-white"]], template: function (u, a) { if (u & 1 && (t(0, "div", 0)(1, "div", 1)(2, "h1", 2), i(3), e(), t(4, "a", 3)(5, "span", 4), i(6, "arrow_forward"), e(), i(7, " \u0628\u0627\u0632\u06AF\u0634\u062A "), e()(), t(8, "form", 5), v("ngSubmit", function () { return a.onSubmit() }), t(9, "div", 6)(10, "div", 7)(11, "label", 8), i(12, " \u0646\u0627\u0645 \u0648\u0636\u0639\u06CC\u062A "), t(13, "span", 9), i(14, "*"), e()(), x(15, "input", 10), e(), t(16, "div", 7)(17, "label", 11), i(18, "\u0622\u06CC\u06A9\u0648\u0646 (Material Icons)"), e(), t(19, "div", 12), x(20, "input", 13), t(21, "div", 14)(22, "span", 15), i(23), e()()(), t(24, "p", 16), i(25, " \u0646\u0627\u0645 \u0622\u06CC\u06A9\u0648\u0646 \u0631\u0627 \u0627\u0632 "), t(26, "a", 17), i(27, "Google Fonts"), e(), i(28, " \u06A9\u067E\u06CC \u06A9\u0646\u06CC\u062F. "), e()()(), t(29, "div", 18)(30, "button", 19), f(31, lr, 1, 0, "span", 20), t(32, "span"), i(33), e()()()()()), u & 2) { let m; d(3), g(" ", a.isEditMode ? "\u0648\u06CC\u0631\u0627\u06CC\u0634" : "\u0627\u06CC\u062C\u0627\u062F", " \u0648\u0636\u0639\u06CC\u062A \u0633\u0641\u0627\u0631\u0634 "), d(5), l("formGroup", a.statusForm), d(15), b(((m = a.statusForm.get("icon")) == null ? null : m.value) || "help_outline"), d(7), l("disabled", a.statusForm.invalid || a.isSubmitting), d(), l("ngIf", a.isSubmitting), d(2), b(a.isSubmitting ? "\u062F\u0631 \u062D\u0627\u0644 \u0630\u062E\u06CC\u0631\u0647..." : "\u0630\u062E\u06CC\u0631\u0647 \u0648\u0636\u0639\u06CC\u062A") } }, dependencies: [A, _, ie, Q, H, V, J, Y, X, L, T], encapsulation: 2 }); let n = s; return n })(); var mr = n => ["/admin/order-statuses/edit", n]; function cr(n, s) { n & 1 && (t(0, "div", 11), x(1, "span", 12), e()) } function pr(n, s) { n & 1 && (t(0, "div", 13)(1, "p", 14), i(2, "\u0647\u06CC\u0686 \u0648\u0636\u0639\u06CC\u062A\u06CC \u062A\u0639\u0631\u06CC\u0641 \u0646\u0634\u062F\u0647 \u0627\u0633\u062A."), e()()) } function fr(n, s) { if (n & 1) { let o = E(); t(0, "div", 17)(1, "div", 18)(2, "div", 19)(3, "span", 20), i(4), e()(), t(5, "div")(6, "h3", 21), i(7), e(), t(8, "p", 22), i(9), e()()(), t(10, "div", 23)(11, "a", 24)(12, "span", 25), i(13, "edit"), e()(), t(14, "button", 26), v("click", function () { let u = C(o).$implicit, a = p(2); return S(a.deleteStatus(u.id)) }), t(15, "span", 25), i(16, "delete"), e()()()() } if (n & 2) { let o = s.$implicit; d(4), b(o.icon || "circle"), d(3), b(o.name), d(2), g(" ", o.count || 0, " \u0633\u0641\u0627\u0631\u0634 "), d(2), l("routerLink", $(4, mr, o.id)) } } function gr(n, s) { if (n & 1 && (t(0, "div", 15), f(1, fr, 17, 6, "div", 16), e()), n & 2) { let o = p(); d(), l("ngForOf", o.statuses) } } var qt = (() => { let s = class s { constructor(r, u, a) { this.adminOrderStatusService = r, this.adminOrderService = u, this.notificationService = a, this.statuses = [], this.isLoading = !0 } ngOnInit() { this.loadData() } loadData() { this.isLoading = !0, Ie({ statuses: this.adminOrderStatusService.getOrderStatuses(), stats: this.adminOrderService.getStatistics() }).subscribe({ next: r => { this.statuses = r.statuses; let u = r.stats.statusStatistics || []; this.statuses.forEach(a => { let m = u.find(c => c.orderStatusId === a.id); a.count = m ? m.count : 0 }), this.isLoading = !1 }, error: () => { this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A", "error"), this.isLoading = !1 } }) } deleteStatus(r) { confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0648\u0636\u0639\u06CC\u062A \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F") && this.adminOrderStatusService.deleteOrderStatus(r).subscribe({ next: () => { this.notificationService.show("\u0648\u0636\u0639\u06CC\u062A \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F", "success"), this.loadData() }, error: u => this.notificationService.show(u?.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u0648\u0636\u0639\u06CC\u062A", "error") }) } }; s.\u0275fac = function (u) { return new (u || s)(h(Ee), h(Le), h(k)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-order-status-list"]], decls: 17, vars: 3, consts: [[1, "space-y-6", "animate-fade-in"], [1, "flex", "items-center", "justify-between"], [1, "text-2xl", "font-bold", "text-heading-foreground", "tracking-tight", "flex", "items-center", "gap-2"], [1, "material-icons", "text-primary"], [1, "text-sm", "text-muted-foreground", "mt-1"], ["routerLink", "/admin/order-statuses/new", 1, "btn", "btn-primary", "btn-sm", "sm:btn-md", "shadow-lg", "shadow-primary/20"], [1, "material-icons", "me-1", "text-lg"], [1, "card", "border", "border-border", "shadow-sm", "overflow-hidden", "bg-muted/5"], ["class", "flex justify-center items-center py-12", 4, "ngIf"], ["class", "text-center py-12", 4, "ngIf"], ["class", "grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 p-4", 4, "ngIf"], [1, "flex", "justify-center", "items-center", "py-12"], [1, "spinner", "spinner-xl", "text-primary"], [1, "text-center", "py-12"], [1, "text-muted-foreground"], [1, "grid", "grid-cols-1", "sm:grid-cols-2", "lg:grid-cols-3", "gap-4", "p-4"], ["class", "flex items-center justify-between p-4 rounded-xl border border-border bg-card hover:border-primary/50 hover:shadow-md transition-all duration-300 group", 4, "ngFor", "ngForOf"], [1, "flex", "items-center", "justify-between", "p-4", "rounded-xl", "border", "border-border", "bg-card", "hover:border-primary/50", "hover:shadow-md", "transition-all", "duration-300", "group"], [1, "flex", "items-center", "gap-3"], [1, "w-12", "h-12", "rounded-full", "bg-primary/10", "text-primary", "flex", "items-center", "justify-center", "ring-2", "ring-primary/20"], [1, "material-icons", "text-2xl"], [1, "font-bold", "text-foreground", "text-lg"], [1, "text-xs", "text-muted-foreground", "mt-1", "font-medium", "bg-muted", "px-2", "py-0.5", "rounded-md", "inline-block"], [1, "flex", "gap-1", "opacity-0", "group-hover:opacity-100", "transition-opacity"], [1, "btn", "btn-icon", "btn-ghost", "btn-sm", "text-primary", "hover:text-primary-foreground", "hover:bg-primary", "rounded-full", 3, "routerLink"], [1, "material-icons", "text-lg"], [1, "btn", "btn-icon", "btn-ghost", "btn-sm", "text-muted-foreground", "hover:text-destructive-foreground", "hover:bg-destructive", "rounded-full", 3, "click"]], template: function (u, a) { u & 1 && (t(0, "div", 0)(1, "div", 1)(2, "div")(3, "h1", 2)(4, "span", 3), i(5, "fact_check"), e(), i(6, " \u0648\u0636\u0639\u06CC\u062A\u200C\u0647\u0627\u06CC \u0633\u0641\u0627\u0631\u0634 "), e(), t(7, "p", 4), i(8, "\u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u0631\u0627\u062D\u0644 \u0645\u062E\u062A\u0644\u0641 \u0633\u0641\u0627\u0631\u0634\u0627\u062A"), e()(), t(9, "a", 5)(10, "span", 6), i(11, "add"), e(), i(12, " \u0648\u0636\u0639\u06CC\u062A \u062C\u062F\u06CC\u062F "), e()(), t(13, "div", 7), f(14, cr, 2, 0, "div", 8)(15, pr, 3, 0, "div", 9)(16, gr, 2, 1, "div", 10), e()()), u & 2 && (d(14), l("ngIf", a.isLoading), d(), l("ngIf", !a.isLoading && a.statuses.length === 0), d(), l("ngIf", !a.isLoading && a.statuses.length > 0)) }, dependencies: [A, I, _, L, T], encapsulation: 2 }); let n = s; return n })(); var Fe = (() => { let s = class s { constructor(r) { this.http = r, this.productsUrl = `${R.API_URL}admin/products` } getProductById(r) { return this.http.get(`${this.productsUrl}/${r}`) } createProduct(r) { return this.http.post(this.productsUrl, r) } updateProduct(r, u) { return this.http.put(`${this.productsUrl}/${r}`, u) } getAllAttributes() { return this.http.get(`${R.API_URL}Products/attributes`) } deleteProduct(r) { return this.http.delete(`${this.productsUrl}/${r}`) } addStock(r) { return this.http.post(`${this.productsUrl}/stock/add`, r) } removeStock(r) { return this.http.post(`${this.productsUrl}/stock/remove`, r) } setDiscount(r, u) { return this.http.put(`${this.productsUrl}/variants/${r}/discount`, u) } removeDiscount(r) { return this.http.delete(`${this.productsUrl}/variants/${r}/discount`) } bulkUpdatePrices(r, u = !1) { let a = new K().set("isPurchasePrice", u.toString()); return this.http.post(`${this.productsUrl}/bulk-update-prices`, r, { params: a }) } getProductStatistics() { return this.http.get(`${this.productsUrl}/statistics`) } getLowStockProducts(r = 5) { let u = new K().set("threshold", r.toString()); return this.http.get(`${this.productsUrl}/low-stock`, { params: u }) } }; s.\u0275fac = function (u) { return new (u || s)(B(z)) }, s.\u0275prov = G({ token: s, factory: s.\u0275fac, providedIn: "root" }); let n = s; return n })(); function xr(n, s) { if (n & 1 && (Ue(0), i(1), $e()), n & 2) { let o = s.$implicit, r = s.last; d(), xe(" ", o.value.displayValue, "", r ? "" : " / ", " ") } } function hr(n, s) { if (n & 1 && (t(0, "option", 24), f(1, xr, 2, 2, "ng-container", 25), F(2, "keyvalue"), i(3), e()), n & 2) { let o = s.$implicit; l("value", o.id), d(), l("ngForOf", P(2, 3, o.attributes)), d(2), g(" (\u0645\u0648\u062C\u0648\u062F\u06CC \u0641\u0639\u0644\u06CC: ", o.stock, ") ") } } function vr(n, s) { n & 1 && (t(0, "div", 26), i(1, " \u062A\u0639\u062F\u0627\u062F \u0628\u0627\u06CC\u062F \u0639\u062F\u062F\u06CC \u0628\u0632\u0631\u06AF\u062A\u0631 \u0627\u0632 \u0635\u0641\u0631 \u0628\u0627\u0634\u062F "), e()) } function br(n, s) { n & 1 && x(0, "span", 27) } var zt = (() => { let s = class s { constructor(r, u) { this.adminProductService = r, this.notificationService = u, this.stockUpdated = new nt, this.cancelled = new nt, this.isSubmitting = !1, this.stockForm = new Se({ variantId: new O(null, w.required), quantity: new O(1, [w.required, w.min(1), w.max(1e5)]), operation: new O("add", [w.required]), notes: new O("") }) } ngOnInit() { this.setInitialVariant() } ngOnChanges(r) { r.variants && this.setInitialVariant() } setInitialVariant() { this.variants && this.variants.length > 0 && !this.stockForm.get("variantId")?.value && this.stockForm.get("variantId")?.setValue(this.variants[0].id) } updateStock() { if (this.stockForm.invalid || !this.productId) return; this.isSubmitting = !0; let { variantId: r, quantity: u, operation: a, notes: m } = this.stockForm.value, c = { variantId: r, quantity: u, notes: m }; (a === "add" ? this.adminProductService.addStock(c) : this.adminProductService.removeStock(c)).pipe(D(() => this.isSubmitting = !1)).subscribe({ next: () => { let N = a === "add" ? "\u0645\u0648\u062C\u0648\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u0641\u0632\u0648\u062F\u0647 \u0634\u062F" : "\u0645\u0648\u062C\u0648\u062F\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u06A9\u0633\u0631 \u0634\u062F"; this.notificationService.show(N, "success"), this.stockUpdated.emit(), this.stockForm.reset({ variantId: this.variants?.[0].id, operation: "add", quantity: 1, notes: "" }) }, error: N => { this.notificationService.show(N?.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0645\u0648\u062C\u0648\u062F\u06CC", "error") } }) } cancel() { this.cancelled.emit() } }; s.\u0275fac = function (u) { return new (u || s)(h(Fe), h(k)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-stock-management"]], inputs: { productId: "productId", variants: "variants" }, outputs: { stockUpdated: "stockUpdated", cancelled: "cancelled" }, features: [bt], decls: 38, vars: 18, consts: [[1, "p-1"], [1, "space-y-5", 3, "ngSubmit", "formGroup"], [1, "space-y-2", "form-group"], ["for", "variantStock", 1, "form-label"], ["id", "variantStock", "formControlName", "variantId", 1, "select", "w-full", "bg-background"], [3, "value", 4, "ngFor", "ngForOf"], ["for", "quantity", 1, "form-label"], ["type", "number", "id", "quantity", "formControlName", "quantity", "min", "1", "placeholder", "\u062A\u0639\u062F\u0627\u062F \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F", 1, "input", "w-full"], ["class", "form-error", 4, "ngIf"], ["for", "operation", 1, "form-label"], [1, "grid", "grid-cols-2", "gap-3"], [1, "cursor-pointer", "border", "border-border", "rounded-lg", "p-3", "flex", "items-center", "justify-center", "gap-2", "hover:bg-success/5", "hover:border-success/50", "transition-colors"], ["type", "radio", "formControlName", "operation", "value", "add", 1, "hidden"], [1, "material-icons", "text-success"], [1, "text-sm", "font-medium"], [1, "cursor-pointer", "border", "border-border", "rounded-lg", "p-3", "flex", "items-center", "justify-center", "gap-2", "hover:bg-destructive/5", "hover:border-destructive/50", "transition-colors"], ["type", "radio", "formControlName", "operation", "value", "remove", 1, "hidden"], [1, "material-icons", "text-destructive"], ["for", "notes", 1, "form-label"], ["id", "notes", "formControlName", "notes", "placeholder", "\u0639\u0644\u062A \u062A\u063A\u06CC\u06CC\u0631 \u0645\u0648\u062C\u0648\u062F\u06CC...", 1, "input", "w-full", "min-h-[80px]", "resize-y"], [1, "flex", "gap-3", "pt-4", "border-t", "border-border", "mt-2"], ["type", "button", 1, "btn", "btn-outline", "flex-1", 3, "click"], ["type", "submit", 1, "btn", "btn-primary", "flex-[2]", "shadow-button", 3, "disabled"], ["class", "spinner spinner-sm mr-2 border-white", 4, "ngIf"], [3, "value"], [4, "ngFor", "ngForOf"], [1, "form-error"], [1, "spinner", "spinner-sm", "mr-2", "border-white"]], template: function (u, a) { if (u & 1 && (t(0, "div", 0)(1, "form", 1), v("ngSubmit", function () { return a.updateStock() }), t(2, "div", 2)(3, "label", 3), i(4, "\u0627\u0646\u062A\u062E\u0627\u0628 \u062A\u0646\u0648\u0639"), e(), t(5, "select", 4), f(6, hr, 4, 5, "option", 5), e()(), t(7, "div", 2)(8, "label", 6), i(9, "\u062A\u0639\u062F\u0627\u062F"), e(), x(10, "input", 7), f(11, vr, 2, 0, "div", 8), e(), t(12, "div", 2)(13, "label", 9), i(14, "\u0639\u0645\u0644\u06CC\u0627\u062A"), e(), t(15, "div", 10)(16, "label", 11), x(17, "input", 12), t(18, "span", 13), i(19, "add_circle"), e(), t(20, "span", 14), i(21, "\u0627\u0641\u0632\u0627\u06CC\u0634 \u0645\u0648\u062C\u0648\u062F\u06CC"), e()(), t(22, "label", 15), x(23, "input", 16), t(24, "span", 17), i(25, "remove_circle"), e(), t(26, "span", 14), i(27, "\u06A9\u0633\u0631 \u0627\u0632 \u0645\u0648\u062C\u0648\u062F\u06CC"), e()()()(), t(28, "div", 2)(29, "label", 18), i(30, "\u06CC\u0627\u062F\u062F\u0627\u0634\u062A (\u0627\u062E\u062A\u06CC\u0627\u0631\u06CC)"), e(), x(31, "textarea", 19), e(), t(32, "div", 20)(33, "button", 21), v("click", function () { return a.cancel() }), i(34, " \u0627\u0646\u0635\u0631\u0627\u0641 "), e(), t(35, "button", 22), f(36, br, 1, 0, "span", 23), i(37), e()()()()), u & 2) { let m, c, j, N, Pe, gt, xt; d(), l("formGroup", a.stockForm), d(5), l("ngForOf", a.variants), d(5), l("ngIf", ((m = a.stockForm.get("quantity")) == null ? null : m.invalid) && ((m = a.stockForm.get("quantity")) == null ? null : m.touched)), d(5), U("bg-success/10", ((c = a.stockForm.get("operation")) == null ? null : c.value) === "add")("border-success", ((j = a.stockForm.get("operation")) == null ? null : j.value) === "add"), d(4), U("text-success", ((N = a.stockForm.get("operation")) == null ? null : N.value) === "add"), d(2), U("bg-destructive/10", ((Pe = a.stockForm.get("operation")) == null ? null : Pe.value) === "remove")("border-destructive", ((gt = a.stockForm.get("operation")) == null ? null : gt.value) === "remove"), d(4), U("text-destructive", ((xt = a.stockForm.get("operation")) == null ? null : xt.value) === "remove"), d(9), l("disabled", a.stockForm.invalid || a.isSubmitting), d(), l("ngIf", a.isSubmitting), d(), g(" ", a.isSubmitting ? "\u062F\u0631 \u062D\u0627\u0644 \u0627\u0639\u0645\u0627\u0644..." : "\u0627\u0639\u0645\u0627\u0644 \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A", " ") } }, dependencies: [A, I, _, ie, Q, ee, te, H, se, Z, It, V, J, Me, Y, X, qe], encapsulation: 2 }); let n = s; return n })(); var Cr = () => []; function Sr(n, s) { if (n & 1 && (t(0, "option", 52), i(1), e()), n & 2) { let o = s.$implicit; l("value", o.id), d(), xe(" ", o.name, " (", o.categoryName, ") ") } } function yr(n, s) { n & 1 && (t(0, "div", 58), i(1, " \u0627\u0635\u0644\u06CC "), e()) } function _r(n, s) { if (n & 1) { let o = E(); t(0, "div", 53), x(1, "img", 54), t(2, "div", 55)(3, "button", 56), v("click", function () { let u = C(o).$implicit, a = p(); return S(a.removeCurrentImage(u.id)) }), t(4, "span", 5), i(5, "close"), e()()(), f(6, yr, 2, 0, "div", 57), e() } if (n & 2) { let o = s.$implicit, r = p(); d(), l("src", r.getMediaUrl(o.url), le), d(5), l("ngIf", o.isPrimary) } } function Ar(n, s) { n & 1 && (t(0, "div", 66), i(1, " \u0627\u0635\u0644\u06CC "), e()) } function wr(n, s) { if (n & 1) { let o = E(); t(0, "div", 59), x(1, "img", 60), t(2, "div", 61)(3, "div", 62)(4, "button", 56), v("click", function () { let u = C(o).$implicit, a = p(); return S(a.removeNewImage(u.id)) }), t(5, "span", 5), i(6, "close"), e()()(), t(7, "button", 63), v("click", function () { let u = C(o).$implicit, a = p(); return S(a.setPrimaryNewImage(u.id)) }), t(8, "span", 5), i(9), e(), t(10, "span", 64), i(11), e()()(), f(12, Ar, 2, 0, "div", 65), e() } if (n & 2) { let o = s.$implicit, r = p(); d(), l("src", o.url, le), d(6), U("bg-primary", r.primaryNewFileId === o.id), d(2), b(r.primaryNewFileId === o.id ? "star" : "star_border"), d(2), b(r.primaryNewFileId === o.id ? "\u0627\u0635\u0644\u06CC" : "\u0627\u0646\u062A\u062E\u0627\u0628 \u0627\u0635\u0644\u06CC"), d(), l("ngIf", r.primaryNewFileId === o.id) } } function Er(n, s) { if (n & 1) { let o = E(); t(0, "button", 67), v("click", function () { C(o); let u = p(); return S(u.openStockModal()) }), t(1, "span", 44), i(2, "inventory_2"), e(), i(3, " \u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u0648\u062C\u0648\u062F\u06CC "), e() } } function Fr(n, s) { if (n & 1) { let o = E(); t(0, "button", 86), v("click", function () { C(o); let u = p().index, a = p(); return S(a.removeVariant(u)) }), t(1, "span", 87), i(2, "delete"), e()() } } function Ir(n, s) { if (n & 1 && (t(0, "option", 52), i(1), e()), n & 2) { let o = s.$implicit; l("value", o.id), d(), g(" ", o.displayValue, " ") } } function kr(n, s) { if (n & 1 && (t(0, "div", 72)(1, "label", 88), i(2), t(3, "span", 13), i(4, "*"), e()(), t(5, "select", 89)(6, "option", 90), i(7, "\u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F"), e(), f(8, Ir, 2, 2, "option", 23), e()()), n & 2) { let o = s.$implicit; d(2), g("", o.displayName, " "), d(3), l("formControlName", "attr_" + o.id), d(), l("ngValue", null), d(2), l("ngForOf", o.values) } } function Mr(n, s) { if (n & 1 && (t(0, "div", 68)(1, "div", 69), i(2), e(), f(3, Fr, 3, 0, "button", 70), t(4, "div", 71)(5, "div", 72)(6, "label", 73), i(7, "\u06A9\u062F \u062A\u0646\u0648\u0639 (SKU)"), e(), x(8, "input", 74), e(), t(9, "div", 72)(10, "label", 73), i(11, "\u0642\u06CC\u0645\u062A \u062E\u0631\u06CC\u062F (\u062A\u0648\u0645\u0627\u0646)"), e(), x(12, "input", 75), e(), t(13, "div", 72)(14, "label", 73), i(15, "\u0642\u06CC\u0645\u062A \u0627\u0635\u0644\u06CC (\u062A\u0648\u0645\u0627\u0646)"), e(), x(16, "input", 76), e(), t(17, "div", 72)(18, "label", 73), i(19, "\u0642\u06CC\u0645\u062A \u0641\u0631\u0648\u0634 (\u062A\u0648\u0645\u0627\u0646)"), e(), x(20, "input", 77), e()(), t(21, "div", 78)(22, "div", 72)(23, "label", 73), i(24, "\u0645\u0648\u062C\u0648\u062F\u06CC"), e(), x(25, "input", 79), e(), f(26, kr, 9, 4, "div", 80), t(27, "div", 81)(28, "div", 82), x(29, "input", 83), t(30, "label", 84), i(31, "\u0645\u0648\u062C\u0648\u062F\u06CC \u0646\u0627\u0645\u062D\u062F\u0648\u062F"), e()(), t(32, "div", 82), x(33, "input", 85), t(34, "label", 84), i(35, "\u062A\u0646\u0648\u0639 \u0641\u0639\u0627\u0644 \u0628\u0627\u0634\u062F"), e()()()()()), n & 2) { let o, r, u = s.$implicit, a = s.index, m = p(); l("formGroupName", a), d(2), g(" \u062A\u0646\u0648\u0639 #", a + 1, " "), d(), l("ngIf", m.variants.length > 1), d(3), l("for", "sku" + a), d(2), l("id", "sku" + a), d(2), l("for", "purchasePrice" + a), d(2), l("id", "purchasePrice" + a), d(2), l("for", "originalPrice" + a), d(2), l("id", "originalPrice" + a), d(2), l("for", "sellingPrice" + a), d(2), l("id", "sellingPrice" + a), d(3), l("for", "stock" + a), d(2), U("opacity-50", m.isEditMode || ((o = u.get("isUnlimited")) == null ? null : o.value)), l("id", "stock" + a)("readonly", m.isEditMode || ((r = u.get("isUnlimited")) == null ? null : r.value)), d(), l("ngForOf", m.attributes), d(3), l("id", "unlimited" + a), d(), l("for", "unlimited" + a), d(3), l("id", "active" + a), d(), l("for", "active" + a) } } function Lr(n, s) { n & 1 && x(0, "span", 91) } function Dr(n, s) { if (n & 1) { let o = E(); t(0, "div", 92)(1, "div", 93)(2, "div", 94)(3, "h3", 95), i(4, "\u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u0648\u062C\u0648\u062F\u06CC"), e(), t(5, "button", 96), v("click", function () { C(o); let u = p(); return S(u.closeStockModal()) }), t(6, "span", 97), i(7, "close"), e()()(), t(8, "div", 98)(9, "app-admin-stock-management", 99), v("stockUpdated", function () { C(o); let u = p(); return S(u.onStockUpdated()) })("cancelled", function () { C(o); let u = p(); return S(u.closeStockModal()) }), e()()()() } if (n & 2) { let o = p(); d(9), l("productId", o.productId)("variants", (o.product == null ? null : o.product.variants) || Be(2, Cr)) } } var lt = (() => { let s = class s { constructor(r, u, a, m, c, j, N, Pe) { this.fb = r, this.route = u, this.router = a, this.adminProductService = m, this.categoryGroupService = c, this.notificationService = j, this.mediaService = N, this.cdr = Pe, this.isEditMode = !1, this.productId = null, this.isSubmitting = !1, this.categoryGroups = [], this.attributes = [], this.destroy$ = new Oe, this.product = null, this.currentImages = [], this.imagePreviews = [], this.newlyAddedFiles = [], this.deletedMediaIds = [], this.showStockModal = !1, this.primaryNewFileId = null, this.productForm = this.fb.group({ name: ["", [w.required, w.maxLength(200)]], sku: ["", [w.maxLength(100)]], description: [""], categoryGroupId: [null, w.required], isActive: [!0], rowVersion: [null], variants: this.fb.array([]) }) } get variants() { return this.productForm.get("variants") } ngOnInit() { Ie({ categoryGroups: this.categoryGroupService.getCategoryGroups(void 0, void 0, 1, 500).pipe(vt(r => r.items ?? []), ce(() => _e([]))), attributes: this.adminProductService.getAllAttributes().pipe(ce(() => _e([]))) }).subscribe({ next: ({ categoryGroups: r, attributes: u }) => { this.categoryGroups = r, this.attributes = u, this.cdr.markForCheck(); let a = this.route.snapshot.paramMap.get("id"); a ? (this.isEditMode = !0, this.productId = Number(a), this.loadProductData()) : this.addVariant() }, error: () => this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0627\u0648\u0644\u06CC\u0647", "error") }) } loadProductData() { this.productId && this.adminProductService.getProductById(this.productId).subscribe({ next: r => { this.product = r, this.productForm.patchValue(Ve(Ne({}, r), { sku: r.sku, rowVersion: r.rowVersion ? r.rowVersion : null })), this.currentImages = [...r.images], this.deletedMediaIds = [], this.newlyAddedFiles = [], this.imagePreviews = [], this.primaryNewFileId = null, this.variants.clear(), r.variants.forEach(u => { let a = this.createVariantGroup(u); this.variants.push(a) }), this.cdr.markForCheck() }, error: () => this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062D\u0635\u0648\u0644", "error") }) } createVariantGroup(r) { let u = { id: [r?.id], sku: [r?.sku || ""], purchasePrice: [r?.purchasePrice || 0, [w.required, w.min(0)]], originalPrice: [r?.originalPrice || 0, [w.required, w.min(0)]], sellingPrice: [r?.sellingPrice || 0, [w.required, w.min(0)]], stock: [{ value: r?.stock || 0, disabled: this.isEditMode }, [w.required, w.min(0)]], isUnlimited: [r?.isUnlimited || !1], isActive: [r?.isActive ?? !0] }; this.attributes.forEach(j => { let N = r?.attributes ? r.attributes[j.name.toLowerCase()] : null; u[`attr_${j.id}`] = new O(N?.id || null, [w.required]) }); let a = this.fb.group(u), m = a.get("isUnlimited"), c = a.get("stock"); return m && c && (m.valueChanges.pipe(ke(this.destroy$)).subscribe(j => { j ? (c.setValue(0), c.disable()) : this.isEditMode || c.enable() }), m.value && c.disable()), a } addVariant() { this.variants.push(this.createVariantGroup()), this.cdr.markForCheck() } removeVariant(r) { this.variants.length > 1 ? this.variants.removeAt(r) : this.notificationService.show("\u0645\u062D\u0635\u0648\u0644 \u0628\u0627\u06CC\u062F \u062D\u062F\u0627\u0642\u0644 \u06CC\u06A9 \u062A\u0646\u0648\u0639 \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F", "info") } onFileChange(r) { let u = r.target; u.files && (Array.from(u.files).forEach(m => { let c = this.generateUniqueId(); this.newlyAddedFiles.push({ file: m, id: c }); let j = new FileReader; j.onload = N => { this.imagePreviews.push({ id: c, url: N.target.result }), this.currentImages.length === 0 && !this.primaryNewFileId && (this.primaryNewFileId = c), this.cdr.markForCheck() }, j.readAsDataURL(m) }), u.value = "") } setPrimaryNewImage(r) { this.primaryNewFileId = r } generateUniqueId() { return `${Date.now()}-${Math.random().toString(36).substring(2, 9)}` } removeNewImage(r) { this.newlyAddedFiles = this.newlyAddedFiles.filter(u => u.id !== r), this.imagePreviews = this.imagePreviews.filter(u => u.id !== r), this.primaryNewFileId === r && (this.primaryNewFileId = this.newlyAddedFiles.length > 0 ? this.newlyAddedFiles[0].id : null) } removeCurrentImage(r) { this.currentImages = this.currentImages.filter(u => u.id !== r), this.deletedMediaIds.push(r) } getMediaUrl(r) { return this.mediaService.getMediaUrl(r) } onSubmit() { if (this.productForm.invalid) { this.productForm.markAllAsTouched(), this.notificationService.show("\u0644\u0637\u0641\u0627 \u062A\u0645\u0627\u0645 \u0641\u06CC\u0644\u062F\u0647\u0627\u06CC \u0627\u0644\u0632\u0627\u0645\u06CC \u0631\u0627 \u067E\u0631 \u06A9\u0646\u06CC\u062F", "error"); return } this.isSubmitting = !0; let r = this.productForm.getRawValue(), u = r.variants.map(c => { let j = this.attributes.map(N => c[`attr_${N.id}`]).filter(N => N !== null); return { id: c.id, sku: c.sku, purchasePrice: c.purchasePrice, originalPrice: c.originalPrice, sellingPrice: c.sellingPrice, stock: c.isUnlimited ? 0 : c.stock, isUnlimited: c.isUnlimited, isActive: c.isActive, attributeValueIds: j } }), a = new FormData; if (a.append("name", r.name), r.sku && a.append("sku", r.sku), r.description && a.append("description", r.description), a.append("categoryGroupId", r.categoryGroupId), a.append("isActive", r.isActive.toString()), a.append("variantsJson", JSON.stringify(u)), this.isEditMode && r.rowVersion && a.append("rowVersion", r.rowVersion), this.newlyAddedFiles.forEach(c => { a.append("images", c.file, c.file.name) }), this.primaryNewFileId) { let c = this.newlyAddedFiles.findIndex(j => j.id === this.primaryNewFileId); c > -1 && a.append("primaryImageIndex", c.toString()) } this.deletedMediaIds.length > 0 && this.deletedMediaIds.forEach(c => { a.append("deletedMediaIds", c.toString()) }), (this.isEditMode && this.productId ? this.adminProductService.updateProduct(this.productId, a) : this.adminProductService.createProduct(a)).pipe(D(() => this.isSubmitting = !1)).subscribe({ next: () => { this.notificationService.show(`\u0645\u062D\u0635\u0648\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A ${this.isEditMode ? "\u0648\u06CC\u0631\u0627\u06CC\u0634" : "\u0627\u06CC\u062C\u0627\u062F"} \u0634\u062F`, "success"), this.router.navigate(["/admin/products"]) }, error: c => { c?.status === 409 ? this.notificationService.show("\u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0645\u062D\u0635\u0648\u0644 \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627 \u0635\u0641\u062D\u0647 \u0631\u0627 \u0631\u0641\u0631\u0634 \u06A9\u0646\u06CC\u062F.", "error") : this.notificationService.show(c?.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u0630\u062E\u06CC\u0631\u0647 \u0645\u062D\u0635\u0648\u0644", "error") } }) } openStockModal() { this.showStockModal = !0 } closeStockModal() { this.showStockModal = !1 } onStockUpdated() { this.closeStockModal(), this.loadProductData() } ngOnDestroy() { this.destroy$.next(), this.destroy$.complete() } }; s.\u0275fac = function (u) { return new (u || s)(h(we), h(ne), h(Ce), h(Fe), h(Je), h(k), h(Ae), h(At)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-product-form"]], decls: 90, vars: 15, consts: [[1, "max-w-6xl", "mx-auto", "space-y-6", "animate-fade-in-up"], [1, "flex", "items-center", "justify-between"], [1, "text-2xl", "font-bold", "text-heading-foreground", "tracking-tight", "flex", "items-center", "gap-2"], [1, "material-icons", "text-primary"], ["routerLink", "/admin/products", 1, "btn", "btn-outline", "btn-sm", "gap-2"], [1, "material-icons", "text-sm"], [1, "space-y-8", 3, "ngSubmit", "formGroup"], [1, "card", "p-6", "space-y-6", "border", "border-border", "shadow-sm"], [1, "border-b", "border-border", "pb-4", "mb-4"], [1, "text-lg", "font-bold", "text-foreground", "flex", "items-center", "gap-2"], [1, "grid", "grid-cols-1", "md:grid-cols-3", "gap-6"], [1, "space-y-2", "md:col-span-2", "form-group"], ["for", "name", 1, "form-label"], [1, "text-destructive"], [1, "input-group"], [1, "input-addon"], ["type", "text", "id", "name", "formControlName", "name", 1, "input", "w-full"], [1, "space-y-2", "form-group"], ["for", "sku", 1, "form-label"], ["type", "text", "id", "sku", "formControlName", "sku", 1, "input", "w-full", "ltr-input", "font-mono"], ["for", "categoryGroupId", 1, "form-label"], ["id", "categoryGroupId", "formControlName", "categoryGroupId", 1, "select", "w-full"], ["disabled", "", 3, "ngValue"], [3, "value", 4, "ngFor", "ngForOf"], [1, "space-y-2", "md:col-span-2", "flex", "items-end", "pb-2"], [1, "flex", "items-center", "gap-3", "p-3", "bg-muted/20", "rounded-lg", "border", "border-border/50", "w-full"], [1, "flex", "items-center"], ["type", "checkbox", "id", "isActive", "formControlName", "isActive", 1, "switch"], ["for", "isActive", 1, "switch-thumb"], ["for", "isActive", 1, "text-sm", "font-medium", "cursor-pointer", "select-none", "text-foreground"], ["for", "description", 1, "form-label"], ["id", "description", "formControlName", "description", "rows", "4", 1, "input", "w-full", "min-h-[120px]", "resize-y"], [1, "grid", "grid-cols-2", "sm:grid-cols-3", "md:grid-cols-4", "lg:grid-cols-5", "gap-4"], [1, "aspect-square", "rounded-xl", "border-2", "border-dashed", "border-border", "bg-muted/10", "hover:bg-muted/30", "hover:border-primary/50", "transition-all", "cursor-pointer", "flex", "flex-col", "items-center", "justify-center", "text-muted-foreground", "hover:text-primary", "group"], [1, "w-12", "h-12", "rounded-full", "bg-background", "flex", "items-center", "justify-center", "mb-2", "shadow-sm", "group-hover:scale-110", "transition-transform"], [1, "material-icons", "text-2xl"], [1, "text-xs", "font-bold"], ["type", "file", "multiple", "", "accept", "image/*", 1, "hidden", 3, "change"], ["class", "group relative aspect-square rounded-xl border border-border overflow-hidden bg-background shadow-sm hover:shadow-md transition-all", 4, "ngFor", "ngForOf"], ["class", "group relative aspect-square rounded-xl border border-primary/50 overflow-hidden bg-background shadow-sm ring-2 ring-primary/20", 4, "ngFor", "ngForOf"], [1, "flex", "flex-col", "sm:flex-row", "sm:items-center", "justify-between", "gap-4", "border-b", "border-border", "pb-4", "mb-4"], [1, "flex", "gap-2"], ["type", "button", "class", "btn btn-secondary btn-sm shadow-sm", 3, "click", 4, "ngIf"], ["type", "button", 1, "btn", "btn-outline", "btn-sm", "shadow-sm", 3, "click"], [1, "material-icons", "text-sm", "me-2"], ["formArrayName", "variants", 1, "space-y-4"], ["class", "relative rounded-xl border border-border bg-muted/20 p-4 sm:p-6 transition-all hover:border-primary/30 hover:bg-muted/30 hover:shadow-sm group", 3, "formGroupName", 4, "ngFor", "ngForOf"], [1, "sticky", "bottom-6", "z-10", "bg-background/80", "backdrop-blur-md", "border", "border-border", "p-4", "rounded-xl", "flex", "justify-end", "gap-4", "shadow-2xl"], ["routerLink", "/admin/products", 1, "btn", "btn-outline", "min-w-[100px]"], ["type", "submit", 1, "btn", "btn-primary", "min-w-[160px]", "shadow-button", 3, "disabled"], ["class", "spinner spinner-sm me-2 border-white", 4, "ngIf"], ["class", "modal-overlay", 4, "ngIf"], [3, "value"], [1, "group", "relative", "aspect-square", "rounded-xl", "border", "border-border", "overflow-hidden", "bg-background", "shadow-sm", "hover:shadow-md", "transition-all"], ["alt", "Product", 1, "w-full", "h-full", "object-cover", 3, "src"], [1, "absolute", "inset-0", "bg-black/40", "opacity-0", "group-hover:opacity-100", "transition-opacity", "flex", "items-start", "justify-end", "p-2", "backdrop-blur-[2px]"], ["type", "button", 1, "btn", "btn-icon", "btn-xs", "btn-destructive", "rounded-full", "shadow-lg", 3, "click"], ["class", "absolute bottom-2 right-2 bg-primary text-primary-foreground text-[10px] px-2 py-0.5 rounded-full font-bold shadow-sm", 4, "ngIf"], [1, "absolute", "bottom-2", "right-2", "bg-primary", "text-primary-foreground", "text-[10px]", "px-2", "py-0.5", "rounded-full", "font-bold", "shadow-sm"], [1, "group", "relative", "aspect-square", "rounded-xl", "border", "border-primary/50", "overflow-hidden", "bg-background", "shadow-sm", "ring-2", "ring-primary/20"], ["alt", "New Upload", 1, "w-full", "h-full", "object-cover", 3, "src"], [1, "absolute", "inset-0", "bg-black/40", "opacity-0", "group-hover:opacity-100", "transition-opacity", "flex", "flex-col", "justify-between", "p-2", "backdrop-blur-[2px]"], [1, "flex", "justify-end"], ["type", "button", 1, "self-start", "btn", "btn-xs", "gap-1", "bg-white/20", "hover:bg-white/40", "text-white", "backdrop-blur-md", "border", "border-white/30", "rounded-full", "transition-colors", 3, "click"], [1, "text-[10px]"], ["class", "absolute bottom-2 right-2 bg-primary text-primary-foreground text-[10px] px-2 py-0.5 rounded-full font-bold shadow-sm pointer-events-none", 4, "ngIf"], [1, "absolute", "bottom-2", "right-2", "bg-primary", "text-primary-foreground", "text-[10px]", "px-2", "py-0.5", "rounded-full", "font-bold", "shadow-sm", "pointer-events-none"], ["type", "button", 1, "btn", "btn-secondary", "btn-sm", "shadow-sm", 3, "click"], [1, "relative", "rounded-xl", "border", "border-border", "bg-muted/20", "p-4", "sm:p-6", "transition-all", "hover:border-primary/30", "hover:bg-muted/30", "hover:shadow-sm", "group", 3, "formGroupName"], [1, "absolute", "-top-3", "right-4", "bg-background", "px-2", "text-xs", "font-bold", "text-muted-foreground", "border", "border-border", "rounded-full"], ["type", "button", "class", "absolute top-4 left-4 btn btn-icon btn-xs btn-ghost text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors", 3, "click", 4, "ngIf"], [1, "grid", "grid-cols-1", "sm:grid-cols-2", "lg:grid-cols-4", "gap-4", "mb-6", "mt-2"], [1, "space-y-1.5", "form-group"], [1, "form-label", 3, "for"], ["type", "text", "formControlName", "sku", 1, "input", "w-full", "bg-background", "ltr-input", "font-mono", "text-sm", 3, "id"], ["type", "number", "formControlName", "purchasePrice", 1, "input", "w-full", "bg-background", 3, "id"], ["type", "number", "formControlName", "originalPrice", 1, "input", "w-full", "bg-background", 3, "id"], ["type", "number", "formControlName", "sellingPrice", 1, "input", "w-full", "bg-background", "font-bold", "text-foreground", 3, "id"], [1, "grid", "grid-cols-1", "sm:grid-cols-2", "lg:grid-cols-4", "gap-4", "border-t", "border-border/50", "pt-4"], ["type", "number", "formControlName", "stock", 1, "input", "w-full", "bg-background", 3, "id", "readonly"], ["class", "space-y-1.5 form-group", 4, "ngFor", "ngForOf"], [1, "flex", "flex-col", "justify-end", "gap-3", "lg:col-span-1"], [1, "flex", "items-center", "gap-2"], ["type", "checkbox", "formControlName", "isUnlimited", 1, "checkbox", 3, "id"], [1, "text-xs", "font-medium", "text-foreground", "cursor-pointer", 3, "for"], ["type", "checkbox", "formControlName", "isActive", 1, "checkbox", 3, "id"], ["type", "button", 1, "absolute", "top-4", "left-4", "btn", "btn-icon", "btn-xs", "btn-ghost", "text-muted-foreground", "hover:text-destructive", "hover:bg-destructive/10", "transition-colors", 3, "click"], [1, "material-icons", "text-lg"], [1, "form-label"], [1, "select", "w-full", "bg-background", 3, "formControlName"], [3, "ngValue"], [1, "spinner", "spinner-sm", "me-2", "border-white"], [1, "modal-overlay"], [1, "modal", "animate-scale-in"], [1, "modal-header"], [1, "font-bold", "text-lg", "text-heading-foreground"], [1, "btn", "btn-ghost", "btn-icon", "btn-sm", "rounded-full", 3, "click"], [1, "material-icons"], [1, "modal-body"], [3, "stockUpdated", "cancelled", "productId", "variants"]], template: function (u, a) { if (u & 1 && (t(0, "div", 0)(1, "div", 1)(2, "h1", 2)(3, "span", 3), i(4), e(), i(5), e(), t(6, "a", 4)(7, "span", 5), i(8, "arrow_forward"), e(), i(9, " \u0628\u0627\u0632\u06AF\u0634\u062A "), e()(), t(10, "form", 6), v("ngSubmit", function () { return a.onSubmit() }), t(11, "div", 7)(12, "div", 8)(13, "h2", 9)(14, "span", 3), i(15, "info"), e(), i(16, " \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u067E\u0627\u06CC\u0647 "), e()(), t(17, "div", 10)(18, "div", 11)(19, "label", 12), i(20, "\u0646\u0627\u0645 \u0645\u062D\u0635\u0648\u0644 "), t(21, "span", 13), i(22, "*"), e()(), t(23, "div", 14)(24, "span", 15)(25, "span", 5), i(26, "inventory_2"), e()(), x(27, "input", 16), e()(), t(28, "div", 17)(29, "label", 18), i(30, "\u06A9\u062F \u0645\u062D\u0635\u0648\u0644 (SKU)"), e(), x(31, "input", 19), e(), t(32, "div", 17)(33, "label", 20), i(34, "\u06AF\u0631\u0648\u0647 \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC "), t(35, "span", 13), i(36, "*"), e()(), t(37, "select", 21)(38, "option", 22), i(39, "\u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F"), e(), f(40, Sr, 2, 3, "option", 23), e()(), t(41, "div", 24)(42, "div", 25)(43, "div", 26), x(44, "input", 27)(45, "label", 28), e(), t(46, "label", 29), i(47, " \u0645\u062D\u0635\u0648\u0644 \u0641\u0639\u0627\u0644 \u0648 \u0642\u0627\u0628\u0644 \u0646\u0645\u0627\u06CC\u0634 \u0628\u0627\u0634\u062F "), e()()()(), t(48, "div", 17)(49, "label", 30), i(50, "\u062A\u0648\u0636\u06CC\u062D\u0627\u062A \u0645\u062D\u0635\u0648\u0644"), e(), x(51, "textarea", 31), e()(), t(52, "div", 7)(53, "div", 8)(54, "h2", 9)(55, "span", 3), i(56, "image"), e(), i(57, " \u062A\u0635\u0627\u0648\u06CC\u0631 \u0645\u062D\u0635\u0648\u0644 "), e()(), t(58, "div", 32)(59, "label", 33)(60, "div", 34)(61, "span", 35), i(62, "add_a_photo"), e()(), t(63, "span", 36), i(64, "\u0627\u0641\u0632\u0648\u062F\u0646 \u062A\u0635\u0648\u06CC\u0631"), e(), t(65, "input", 37), v("change", function (c) { return a.onFileChange(c) }), e()(), f(66, _r, 7, 2, "div", 38)(67, wr, 13, 6, "div", 39), e()(), t(68, "div", 7)(69, "div", 40)(70, "h2", 9)(71, "span", 3), i(72, "style"), e(), i(73, " \u062A\u0646\u0648\u0639 \u0648 \u0642\u06CC\u0645\u062A\u200C\u06AF\u0630\u0627\u0631\u06CC "), e(), t(74, "div", 41), f(75, Er, 4, 0, "button", 42), t(76, "button", 43), v("click", function () { return a.addVariant() }), t(77, "span", 44), i(78, "add"), e(), i(79, " \u0627\u0641\u0632\u0648\u062F\u0646 \u062A\u0646\u0648\u0639 "), e()()(), t(80, "div", 45), f(81, Mr, 36, 21, "div", 46), e()(), t(82, "div", 47)(83, "a", 48), i(84, "\u0627\u0646\u0635\u0631\u0627\u0641"), e(), t(85, "button", 49), f(86, Lr, 1, 0, "span", 50), t(87, "span"), i(88), e()()()()(), f(89, Dr, 10, 3, "div", 51)), u & 2) { let m; d(4), b(a.isEditMode ? "edit_note" : "add_circle"), d(), g(" ", a.isEditMode ? "\u0648\u06CC\u0631\u0627\u06CC\u0634 \u0645\u062D\u0635\u0648\u0644" : "\u0627\u0641\u0632\u0648\u062F\u0646 \u0645\u062D\u0635\u0648\u0644 \u062C\u062F\u06CC\u062F", " "), d(5), l("formGroup", a.productForm), d(17), U("is-invalid", ((m = a.productForm.get("name")) == null ? null : m.invalid) && ((m = a.productForm.get("name")) == null ? null : m.touched)), d(11), l("ngValue", null), d(2), l("ngForOf", a.categoryGroups), d(26), l("ngForOf", a.currentImages), d(), l("ngForOf", a.imagePreviews), d(8), l("ngIf", a.isEditMode), d(6), l("ngForOf", a.variants.controls), d(4), l("disabled", a.productForm.invalid || a.isSubmitting), d(), l("ngIf", a.isSubmitting), d(2), b(a.isSubmitting ? "\u062F\u0631 \u062D\u0627\u0644 \u062B\u0628\u062A..." : "\u0630\u062E\u06CC\u0631\u0647 \u0646\u0647\u0627\u06CC\u06CC"), d(), l("ngIf", a.showStockModal) } }, dependencies: [A, I, _, ie, Q, ee, te, H, se, pe, Z, V, J, Y, X, ze, We, L, T, zt], encapsulation: 2 }); let n = s; return n })(); var Pr = n => ["/admin/products/edit", n], Nr = (n, s) => ({ "badge-destructive": n, "badge-success": s }); function Vr(n, s) { n & 1 && (t(0, "div", 13), x(1, "span", 14), e()) } function Or(n, s) { n & 1 && (t(0, "div", 15)(1, "span", 16), i(2, "inventory_2"), e(), t(3, "p", 17), i(4, "\u0647\u06CC\u0686 \u0645\u062D\u0635\u0648\u0644\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F"), e(), t(5, "a", 18), i(6, "\u062B\u0628\u062A \u0627\u0648\u0644\u06CC\u0646 \u0645\u062D\u0635\u0648\u0644"), e()()) } function jr(n, s) { if (n & 1 && (t(0, "div", 46), i(1), e()), n & 2) { let o = p().$implicit; d(), g("SKU: ", o.sku, " ") } } function Ur(n, s) { if (n & 1 && (Ue(0), t(1, "span", 47), i(2), F(3, "number"), e(), $e()), n & 2) { let o = p().$implicit, r = p(2); d(), l("ngClass", St(4, Nr, r.getTotalStock(o) === 0, r.getTotalStock(o) > 0)), d(), g(" ", P(3, 2, r.getTotalStock(o)), " ") } } function $r(n, s) { n & 1 && (t(0, "span", 48)(1, "span", 49), i(2, "all_inclusive"), e(), i(3, " \u0646\u0627\u0645\u062D\u062F\u0648\u062F "), e()) } function Rr(n, s) { if (n & 1) { let o = E(); t(0, "tr", 29)(1, "td", 30)(2, "div", 31), x(3, "img", 32), e()(), t(4, "td", 30)(5, "div", 33), i(6), e(), t(7, "div", 34), i(8), e(), f(9, jr, 2, 1, "div", 35), e(), t(10, "td", 36)(11, "span", 37), i(12), e()(), t(13, "td", 38), i(14), F(15, "number"), t(16, "span", 39), i(17, "\u062A\u0648\u0645\u0627\u0646"), e()(), t(18, "td", 40), f(19, Ur, 4, 7, "ng-container", 41)(20, $r, 4, 0, "ng-template", null, 0, _t), e(), t(22, "td", 30)(23, "div", 42)(24, "a", 43)(25, "span", 44), i(26, "edit"), e()(), t(27, "button", 45), v("click", function () { let u = C(o).$implicit, a = p(2); return S(a.deleteProduct(u.id)) }), t(28, "span", 44), i(29, "delete"), e()()()()() } if (n & 2) { let o = s.$implicit, r = Re(21), u = p(2); d(3), l("src", o.images[0].url ? u.getMediaUrl(o.images[0].url) : "assets/images/placeholder.png", le)("alt", o.name), d(3), b(o.name), d(2), g("", o.categoryGroup.categoryName, " "), d(), l("ngIf", o.sku), d(3), b(o.categoryGroup.categoryName || "-"), d(2), g(" ", P(15, 10, o.minPrice), " "), d(5), l("ngIf", u.getTotalStock(o) !== u.Infinity)("ngIfElse", r), d(5), l("routerLink", $(12, Pr, o.id)) } } function Gr(n, s) { if (n & 1 && (t(0, "div", 19)(1, "table", 20)(2, "thead", 21)(3, "tr")(4, "th", 22), i(5, "\u062A\u0635\u0648\u06CC\u0631"), e(), t(6, "th", 23), i(7, "\u0646\u0627\u0645 \u0645\u062D\u0635\u0648\u0644"), e(), t(8, "th", 24), i(9, "\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"), e(), t(10, "th", 23), i(11, "\u0642\u06CC\u0645\u062A \u067E\u0627\u06CC\u0647"), e(), t(12, "th", 25), i(13, "\u0645\u0648\u062C\u0648\u062F\u06CC \u06A9\u0644"), e(), t(14, "th", 26), i(15, "\u0639\u0645\u0644\u06CC\u0627\u062A"), e()()(), t(16, "tbody", 27), f(17, Rr, 30, 14, "tr", 28), e()()()), n & 2) { let o = p(); d(17), l("ngForOf", o.products) } } function Br(n, s) { if (n & 1) { let o = E(); t(0, "div", 50)(1, "nav", 51)(2, "button", 52), v("click", function () { C(o); let u = p(); return S(u.loadProducts(u.currentPage - 1)) }), i(3, " \u0642\u0628\u0644\u06CC "), e(), t(4, "span", 53), i(5), e(), t(6, "button", 54), v("click", function () { C(o); let u = p(); return S(u.loadProducts(u.currentPage + 1)) }), i(7, " \u0628\u0639\u062F\u06CC "), e()()() } if (n & 2) { let o = p(); d(2), l("disabled", o.currentPage === 1), d(3), xe(" ", o.currentPage, " / ", o.pagination.totalPages, " "), d(), l("disabled", o.currentPage === o.pagination.totalPages) } } var Wt = (() => { let s = class s { constructor(r, u, a, m) { this.productService = r, this.adminProductService = u, this.notificationService = a, this.mediaService = m, this.products = [], this.pagination = null, this.isLoading = !0, this.currentPage = 1, this.Infinity = 1 / 0 } ngOnInit() { this.loadProducts() } getTotalStock(r) { return r.variants.some(a => a.isUnlimited) ? 1 / 0 : r.variants.reduce((a, m) => a + m.stock, 0) } loadProducts(r = 1) { this.isLoading = !0, this.currentPage = r, this.productService.getProducts({ page: this.currentPage, pageSize: 10, sortBy: "Newest" }).subscribe({ next: u => { this.products = u.items ?? [], this.pagination = u, this.isLoading = !1 }, error: () => { this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062D\u0635\u0648\u0644\u0627\u062A", "error"), this.isLoading = !1 } }) } deleteProduct(r) { confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0645\u062D\u0635\u0648\u0644 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F \u0627\u06CC\u0646 \u0639\u0645\u0644 \u062A\u0645\u0627\u0645 \u062A\u0646\u0648\u0639\u200C\u0647\u0627\u06CC \u0622\u0646 \u0631\u0627 \u0646\u06CC\u0632 \u062D\u0630\u0641 \u0645\u06CC\u200C\u06A9\u0646\u062F.") && this.adminProductService.deleteProduct(r).subscribe({ next: u => { this.notificationService.show(u.message || "\u0645\u062D\u0635\u0648\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F", "success"), this.loadProducts(this.currentPage) }, error: u => this.notificationService.show(u?.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u0645\u062D\u0635\u0648\u0644", "error") }) } getMediaUrl(r) { return this.mediaService.getMediaUrl(r) } }; s.\u0275fac = function (u) { return new (u || s)(h(Ke), h(Fe), h(k), h(Ae)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-product-list"]], decls: 18, vars: 4, consts: [["unlimited", ""], [1, "space-y-6", "animate-fade-in"], [1, "flex", "flex-col", "sm:flex-row", "sm:items-center", "justify-between", "gap-4"], [1, "text-2xl", "font-bold", "text-heading-foreground", "tracking-tight", "flex", "items-center", "gap-2"], [1, "material-icons", "text-primary"], [1, "text-sm", "text-muted-foreground", "mt-1"], ["routerLink", "/admin/products/new", 1, "btn", "btn-primary", "shadow-lg", "shadow-primary/20", "hover:shadow-primary/40", "transition-all"], [1, "material-icons", "me-2"], [1, "card", "border", "border-border", "shadow-sm", "overflow-hidden"], ["class", "flex justify-center items-center py-20", 4, "ngIf"], ["class", "flex flex-col items-center justify-center py-16 text-center text-muted-foreground", 4, "ngIf"], ["class", "w-full overflow-x-auto", 4, "ngIf"], ["class", "flex justify-center p-4 border-t border-border bg-muted/5", 4, "ngIf"], [1, "flex", "justify-center", "items-center", "py-20"], [1, "spinner", "spinner-xl", "text-primary"], [1, "flex", "flex-col", "items-center", "justify-center", "py-16", "text-center", "text-muted-foreground"], [1, "material-icons", "text-6xl", "mb-4", "opacity-20"], [1, "text-lg", "font-medium", "text-foreground"], ["routerLink", "/admin/products/new", 1, "btn", "btn-link", "mt-2", "text-primary"], [1, "w-full", "overflow-x-auto"], [1, "w-full", "caption-bottom", "text-sm", "text-right"], [1, "bg-muted/50", "[&_tr]:border-b", "[&_tr]:border-border", "text-muted-foreground"], [1, "h-12", "px-4", "align-middle", "font-medium", "w-[80px]"], [1, "h-12", "px-4", "align-middle", "font-medium"], [1, "h-12", "px-4", "align-middle", "font-medium", "hidden", "md:table-cell"], [1, "h-12", "px-4", "align-middle", "font-medium", "text-center"], [1, "h-12", "px-4", "align-middle", "font-medium", "text-end", "w-[100px]"], [1, "[&_tr:last-child]:border-0", "bg-card"], ["class", "border-b border-border transition-colors hover:bg-muted/30 group", 4, "ngFor", "ngForOf"], [1, "border-b", "border-border", "transition-colors", "hover:bg-muted/30", "group"], [1, "p-4", "align-middle"], [1, "w-12", "h-12", "rounded-lg", "border", "border-border", "bg-background", "overflow-hidden", "flex", "items-center", "justify-center", "relative"], ["loading", "lazy", 1, "w-full", "h-full", "object-cover", "transition-transform", "group-hover:scale-110", 3, "src", "alt"], [1, "font-bold", "text-foreground", "line-clamp-1", "text-base"], [1, "text-xs", "text-muted-foreground", "mt-0.5", "md:hidden"], ["class", "text-xs text-muted-foreground font-mono mt-0.5", 4, "ngIf"], [1, "p-4", "align-middle", "hidden", "md:table-cell"], [1, "badge", "badge-outline", "bg-background"], [1, "p-4", "align-middle", "font-medium", "text-foreground", "whitespace-nowrap", "tabular-nums"], [1, "text-[10px]", "text-muted-foreground", "font-normal"], [1, "p-4", "align-middle", "text-center"], [4, "ngIf", "ngIfElse"], [1, "flex", "items-center", "justify-end", "gap-2", "opacity-0", "group-hover:opacity-100", "transition-opacity"], ["title", "\u0648\u06CC\u0631\u0627\u06CC\u0634", 1, "btn", "btn-ghost", "btn-icon", "btn-sm", "text-primary", "hover:text-primary-foreground", "hover:bg-primary", 3, "routerLink"], [1, "material-icons", "text-lg"], ["title", "\u062D\u0630\u0641", 1, "btn", "btn-ghost", "btn-icon", "btn-sm", "text-muted-foreground", "hover:text-destructive-foreground", "hover:bg-destructive", 3, "click"], [1, "text-xs", "text-muted-foreground", "font-mono", "mt-0.5"], [1, "badge", "font-bold", "font-mono", 3, "ngClass"], [1, "badge", "badge-primary", "font-bold"], [1, "material-icons", "text-[14px]", "me-1"], [1, "flex", "justify-center", "p-4", "border-t", "border-border", "bg-muted/5"], [1, "flex", "items-center", "gap-2"], ["aria-label", "Previous", 1, "btn", "btn-outline", "btn-sm", 3, "click", "disabled"], [1, "text-sm", "text-muted-foreground", "font-mono", "bg-background", "px-3", "py-1", "rounded-md", "border", "border-border"], ["aria-label", "Next", 1, "btn", "btn-outline", "btn-sm", 3, "click", "disabled"]], template: function (u, a) { u & 1 && (t(0, "div", 1)(1, "div", 2)(2, "div")(3, "h1", 3)(4, "span", 4), i(5, "inventory_2"), e(), i(6, " \u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u062D\u0635\u0648\u0644\u0627\u062A "), e(), t(7, "p", 5), i(8, " \u0645\u0634\u0627\u0647\u062F\u0647\u060C \u0648\u06CC\u0631\u0627\u06CC\u0634 \u0648 \u0645\u062F\u06CC\u0631\u06CC\u062A \u0645\u0648\u062C\u0648\u062F\u06CC \u0645\u062D\u0635\u0648\u0644\u0627\u062A "), e()(), t(9, "a", 6)(10, "span", 7), i(11, "add"), e(), i(12, " \u0627\u0641\u0632\u0648\u062F\u0646 \u0645\u062D\u0635\u0648\u0644 "), e()(), t(13, "div", 8), f(14, Vr, 2, 0, "div", 9)(15, Or, 7, 0, "div", 10)(16, Gr, 18, 1, "div", 11)(17, Br, 8, 4, "div", 12), e()()), u & 2 && (d(14), l("ngIf", a.isLoading), d(), l("ngIf", !a.isLoading && a.products.length === 0), d(), l("ngIf", !a.isLoading && a.products.length > 0), d(), l("ngIf", a.pagination && a.pagination.totalPages > 1)) }, dependencies: [A, q, I, _, L, T, be], encapsulation: 2 }); let n = s; return n })(); var Ht = (() => { let s = class s { constructor(r) { this.http = r, this.usersUrl = `${R.API_URL}admin/users` } getUsers(r = !1, u = 1, a = 20) { let m = new K().set("includeDeleted", r.toString()).set("page", u.toString()).set("pageSize", a.toString()); return this.http.get(this.usersUrl, { params: m }) } changeUserStatus(r, u) { return this.http.patch(`${this.usersUrl}/${r}/status`, { isActive: u }) } deleteUser(r) { return this.http.delete(`${this.usersUrl}/${r}`) } restoreUser(r) { return this.http.post(`${this.usersUrl}/${r}/restore`, {}) } }; s.\u0275fac = function (u) { return new (u || s)(B(z)) }, s.\u0275prov = G({ token: s, factory: s.\u0275fac, providedIn: "root" }); let n = s; return n })(); function zr(n, s) { n & 1 && (t(0, "div", 12), x(1, "span", 13), e()) } function Wr(n, s) { n & 1 && (t(0, "div", 14)(1, "span", 15), i(2, "people_outline"), e(), t(3, "p"), i(4, "\u0647\u06CC\u0686 \u06A9\u0627\u0631\u0628\u0631\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."), e()()) } function Hr(n, s) { if (n & 1) { let o = E(); t(0, "button", 38), v("click", function () { C(o); let u = p().$implicit, a = p(2); return S(a.changeUserStatus(u, !u.isActive)) }), t(1, "span", 39), i(2), e()() } if (n & 2) { let o = p().$implicit; U("text-success", !o.isActive)("text-warning", o.isActive), l("title", o.isActive ? "\u063A\u06CC\u0631\u0641\u0639\u0627\u0644 \u06A9\u0631\u062F\u0646" : "\u0641\u0639\u0627\u0644 \u06A9\u0631\u062F\u0646"), d(2), b(o.isActive ? "block" : "check_circle") } } function Kr(n, s) { if (n & 1) { let o = E(); t(0, "button", 40), v("click", function () { C(o); let u = p().$implicit, a = p(2); return S(a.deleteUser(u.id)) }), t(1, "span", 39), i(2, "delete"), e()() } } function Jr(n, s) { if (n & 1) { let o = E(); t(0, "button", 41), v("click", function () { C(o); let u = p().$implicit, a = p(2); return S(a.restoreUser(u.id)) }), t(1, "span", 39), i(2, "restore_from_trash"), e()() } } function Qr(n, s) { if (n & 1 && (t(0, "tr", 24)(1, "td", 25)(2, "div", 26)(3, "div", 27), i(4), e(), t(5, "span"), i(6), e()()(), t(7, "td", 28), i(8), e(), t(9, "td", 29)(10, "span", 30), x(11, "span", 31), i(12), e()(), t(13, "td", 32), i(14), F(15, "date"), e(), t(16, "td", 33)(17, "div", 34), f(18, Hr, 3, 6, "button", 35)(19, Kr, 3, 0, "button", 36)(20, Jr, 3, 0, "button", 37), e()()()), n & 2) { let o = s.$implicit; U("opacity-50", o.isDeleted), d(4), g(" ", (o.firstName || o.phoneNumber).charAt(0), " "), d(2), xe("", o.firstName || "", " ", o.lastName || ""), d(2), g(" ", o.phoneNumber, " "), d(2), l("ngClass", o.isActive && !o.isDeleted ? "bg-success/10 text-success" : "bg-destructive/10 text-destructive"), d(), l("ngClass", o.isActive && !o.isDeleted ? "bg-success" : "bg-destructive"), d(), g(" ", o.isDeleted ? "\u062D\u0630\u0641 \u0634\u062F\u0647" : o.isActive ? "\u0641\u0639\u0627\u0644" : "\u063A\u06CC\u0631\u0641\u0639\u0627\u0644", " "), d(2), g(" ", he(15, 13, o.createdAt, "yyyy/MM/dd"), " "), d(4), l("ngIf", !o.isDeleted), d(), l("ngIf", !o.isDeleted), d(), l("ngIf", o.isDeleted) } } function Yr(n, s) { if (n & 1 && (t(0, "div", 16)(1, "table", 17)(2, "thead", 18)(3, "tr")(4, "th", 19), i(5, "\u0646\u0627\u0645 \u0648 \u0646\u0627\u0645 \u062E\u0627\u0646\u0648\u0627\u062F\u06AF\u06CC"), e(), t(6, "th", 19), i(7, "\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06CC\u0644"), e(), t(8, "th", 20), i(9, "\u0648\u0636\u0639\u06CC\u062A"), e(), t(10, "th", 19), i(11, "\u062A\u0627\u0631\u06CC\u062E \u0639\u0636\u0648\u06CC\u062A"), e(), t(12, "th", 21), i(13, "\u0639\u0645\u0644\u06CC\u0627\u062A"), e()()(), t(14, "tbody", 22), f(15, Qr, 21, 16, "tr", 23), e()()()), n & 2) { let o = p(); d(15), l("ngForOf", o.users) } } function Xr(n, s) { if (n & 1) { let o = E(); t(0, "div", 42)(1, "nav", 43)(2, "button", 44), v("click", function () { C(o); let u = p(); return S(u.loadUsers(u.currentPage - 1)) }), i(3, " \u0642\u0628\u0644\u06CC "), e(), t(4, "span", 45), i(5), e(), t(6, "button", 44), v("click", function () { C(o); let u = p(); return S(u.loadUsers(u.currentPage + 1)) }), i(7, " \u0628\u0639\u062F\u06CC "), e()()() } if (n & 2) { let o = p(); d(2), l("disabled", o.currentPage === 1), d(3), xe(" ", o.currentPage, " / ", o.pagination.totalPages, " "), d(), l("disabled", o.currentPage === o.pagination.totalPages) } } var Kt = (() => { let s = class s { constructor(r, u) { this.adminUserService = r, this.notificationService = u, this.users = [], this.isLoading = !0, this.showDeleted = !1, this.pagination = null, this.currentPage = 1 } ngOnInit() { this.loadUsers() } loadUsers(r = 1) { this.isLoading = !0, this.currentPage = r, this.adminUserService.getUsers(this.showDeleted, r, 20).pipe(D(() => this.isLoading = !1)).subscribe({ next: u => { this.users = u.items ?? [], this.pagination = u }, error: u => { this.notificationService.show(u?.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u06A9\u0627\u0631\u0628\u0631\u0627\u0646", "error") } }) } toggleShowDeleted() { this.showDeleted = !this.showDeleted, this.loadUsers(1) } changeUserStatus(r, u) { this.adminUserService.changeUserStatus(r.id, u).subscribe({ next: () => { r.isActive = u, this.notificationService.show("\u0648\u0636\u0639\u06CC\u062A \u06A9\u0627\u0631\u0628\u0631 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F", "success") }, error: () => this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u062A\u063A\u06CC\u06CC\u0631 \u0648\u0636\u0639\u06CC\u062A \u06A9\u0627\u0631\u0628\u0631", "error") }) } deleteUser(r) { confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u06A9\u0627\u0631\u0628\u0631 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F \u0627\u06CC\u0646 \u0639\u0645\u0644 \u063A\u06CC\u0631\u0642\u0627\u0628\u0644 \u0628\u0627\u0632\u06AF\u0634\u062A \u0627\u0633\u062A.") && this.adminUserService.deleteUser(r).subscribe({ next: () => { this.notificationService.show("\u06A9\u0627\u0631\u0628\u0631 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F", "success"), this.loadUsers(this.currentPage) }, error: u => this.notificationService.show(u?.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u06A9\u0627\u0631\u0628\u0631", "error") }) } restoreUser(r) { this.adminUserService.restoreUser(r).subscribe({ next: () => { this.notificationService.show("\u06A9\u0627\u0631\u0628\u0631 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0628\u0627\u0632\u06CC\u0627\u0628\u06CC \u0634\u062F", "success"), this.loadUsers(this.currentPage) }, error: u => this.notificationService.show(u?.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0632\u06CC\u0627\u0628\u06CC \u06A9\u0627\u0631\u0628\u0631", "error") }) } }; s.\u0275fac = function (u) { return new (u || s)(h(Ht), h(k)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-user-list"]], decls: 15, vars: 5, consts: [[1, "space-y-6", "animate-fade-in"], [1, "flex", "items-center", "justify-between"], [1, "text-2xl", "font-bold", "text-heading-foreground", "flex", "items-center", "gap-2"], [1, "material-icons", "text-primary"], [1, "flex", "items-center", "gap-2", "bg-card", "p-2", "rounded-lg", "border", "border-border", "shadow-sm"], ["for", "showDeleted", 1, "text-sm", "font-medium", "text-foreground", "cursor-pointer"], ["type", "checkbox", "id", "showDeleted", 1, "checkbox", 3, "change", "checked"], [1, "card", "overflow-hidden", "border", "border-border", "shadow-sm"], ["class", "flex justify-center items-center p-12", 4, "ngIf"], ["class", "text-center p-12 text-muted-foreground", 4, "ngIf"], ["class", "w-full overflow-x-auto", 4, "ngIf"], ["class", "flex justify-center p-4 border-t border-border bg-muted/5", 4, "ngIf"], [1, "flex", "justify-center", "items-center", "p-12"], [1, "spinner", "spinner-xl", "text-primary"], [1, "text-center", "p-12", "text-muted-foreground"], [1, "material-icons", "text-5xl", "opacity-20", "mb-2"], [1, "w-full", "overflow-x-auto"], [1, "w-full", "text-right", "text-sm"], [1, "bg-muted/50", "border-b", "border-border", "text-muted-foreground"], [1, "h-12", "px-6", "align-middle", "font-medium"], [1, "h-12", "px-6", "align-middle", "font-medium", "text-center"], [1, "h-12", "px-6", "align-middle", "font-medium", "w-40", "text-left"], [1, "divide-y", "divide-border/50", "bg-card"], ["class", "hover:bg-muted/30 transition-colors group", 3, "opacity-50", 4, "ngFor", "ngForOf"], [1, "hover:bg-muted/30", "transition-colors", "group"], [1, "p-6", "align-middle", "font-medium", "text-foreground"], [1, "flex", "items-center", "gap-3"], [1, "w-8", "h-8", "rounded-full", "bg-primary/10", "flex", "items-center", "justify-center", "text-primary", "text-xs", "font-bold"], [1, "p-6", "align-middle", "text-muted-foreground", "font-mono", "dir-ltr", "text-right"], [1, "p-6", "align-middle", "text-center"], [1, "px-2.5", "py-1", "text-xs", "font-semibold", "rounded-full", "inline-flex", "items-center", "gap-1", 3, "ngClass"], [1, "w-1.5", "h-1.5", "rounded-full", 3, "ngClass"], [1, "p-6", "align-middle", "text-muted-foreground", "font-mono", "dir-ltr", "text-right", "text-xs"], [1, "p-6", "align-middle"], [1, "flex", "items-center", "justify-end", "gap-2", "opacity-0", "group-hover:opacity-100", "transition-opacity"], ["class", "btn btn-ghost btn-sm btn-icon rounded-full", 3, "text-success", "text-warning", "title", "click", 4, "ngIf"], ["class", "btn btn-ghost btn-sm btn-icon text-muted-foreground hover:text-destructive-foreground hover:bg-destructive rounded-full", "title", "\u062D\u0630\u0641", 3, "click", 4, "ngIf"], ["class", "btn btn-ghost btn-sm btn-icon text-success hover:text-success-foreground hover:bg-success rounded-full", "title", "\u0628\u0627\u0632\u06CC\u0627\u0628\u06CC", 3, "click", 4, "ngIf"], [1, "btn", "btn-ghost", "btn-sm", "btn-icon", "rounded-full", 3, "click", "title"], [1, "material-icons", "text-lg"], ["title", "\u062D\u0630\u0641", 1, "btn", "btn-ghost", "btn-sm", "btn-icon", "text-muted-foreground", "hover:text-destructive-foreground", "hover:bg-destructive", "rounded-full", 3, "click"], ["title", "\u0628\u0627\u0632\u06CC\u0627\u0628\u06CC", 1, "btn", "btn-ghost", "btn-sm", "btn-icon", "text-success", "hover:text-success-foreground", "hover:bg-success", "rounded-full", 3, "click"], [1, "flex", "justify-center", "p-4", "border-t", "border-border", "bg-muted/5"], [1, "flex", "items-center", "gap-2"], [1, "btn", "btn-outline", "btn-sm", 3, "click", "disabled"], [1, "text-sm", "text-muted-foreground", "font-mono", "bg-background", "px-3", "py-1", "rounded-md", "border", "border-border"]], template: function (u, a) { u & 1 && (t(0, "div", 0)(1, "div", 1)(2, "h1", 2)(3, "span", 3), i(4, "group"), e(), i(5, " \u0645\u062F\u06CC\u0631\u06CC\u062A \u06A9\u0627\u0631\u0628\u0631\u0627\u0646 "), e(), t(6, "div", 4)(7, "label", 5), i(8, "\u0646\u0645\u0627\u06CC\u0634 \u062D\u0630\u0641 \u0634\u062F\u0647\u200C\u0647\u0627"), e(), t(9, "input", 6), v("change", function () { return a.toggleShowDeleted() }), e()()(), t(10, "div", 7), f(11, zr, 2, 0, "div", 8)(12, Wr, 5, 0, "div", 9)(13, Yr, 16, 1, "div", 10)(14, Xr, 8, 4, "div", 11), e()()), u & 2 && (d(9), l("checked", a.showDeleted), d(2), l("ngIf", a.isLoading), d(), l("ngIf", !a.isLoading && a.users.length === 0), d(), l("ngIf", !a.isLoading && a.users.length > 0), d(), l("ngIf", a.pagination && a.pagination.totalPages > 1)) }, dependencies: [A, q, I, _, L, ve], encapsulation: 2 }); let n = s; return n })(); function Zr(n, s) { n & 1 && (t(0, "div", 18), x(1, "span", 19), e()) } function en(n, s) { n & 1 && (t(0, "div", 20)(1, "p"), i(2, "\u0645\u062D\u0635\u0648\u0644\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F"), e()()) } function tn(n, s) { if (n & 1 && (t(0, "tr", 32)(1, "td", 33), x(2, "input", 34), e(), t(3, "td", 33)(4, "div", 35)(5, "div", 36), x(6, "img", 37), e(), t(7, "div", 38)(8, "span", 39), i(9), e(), t(10, "span", 40), i(11), e()()()(), t(12, "td", 41), i(13), F(14, "number"), t(15, "span", 42), i(16, "\u062A\u0648\u0645\u0627\u0646"), e()(), t(17, "td", 33)(18, "div", 43), x(19, "input", 44), t(20, "span", 45), i(21, "\u062A\u0648\u0645\u0627\u0646"), e()()()()), n & 2) { let o, r = s.$implicit, u = s.index, a = p(2); U("bg-primary-50", (o = r.get("selected")) == null ? null : o.value), l("formGroupName", u), d(6), l("src", r.value.productIcon || "assets/images/placeholder.png", le)("alt", r.value.productName), d(3), b(r.value.productName), d(2), b(a.getVariantDisplayName(r.value.attributes)), d(2), g(" ", P(14, 9, a.getCurrentPrice(r.value)), " "), d(6), l("placeholder", a.getCurrentPrice(r.value).toString()) } } function rn(n, s) { n & 1 && x(0, "span", 52) } function nn(n, s) { if (n & 1) { let o = E(); t(0, "div", 46)(1, "button", 47), f(2, rn, 1, 0, "span", 48), i(3), e(), t(4, "button", 49), v("click", function () { C(o); let u = p(2); return S(u.resetForm()) }), i(5, " \u0628\u0627\u0632\u0646\u0634\u0627\u0646\u06CC "), e(), t(6, "div", 50)(7, "span", 51), i(8), e(), i(9, " \u0645\u0648\u0631\u062F \u0627\u0646\u062A\u062E\u0627\u0628 \u0634\u062F\u0647 "), e()() } if (n & 2) { let o = p(2); d(), l("disabled", o.isSubmitting), d(), l("ngIf", o.isSubmitting), d(), g(" ", o.isSubmitting ? "\u062F\u0631 \u062D\u0627\u0644 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC..." : "\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0642\u06CC\u0645\u062A\u200C\u0647\u0627", " "), d(5), b(o.getSelectedCount()) } } function un(n, s) { if (n & 1) { let o = E(); t(0, "form", 21), v("ngSubmit", function () { C(o); let u = p(); return S(u.updatePrices()) }), t(1, "div", 22)(2, "div", 23)(3, "table", 24)(4, "thead", 25)(5, "tr")(6, "th", 26)(7, "input", 27), v("change", function (u) { C(o); let a = p(); return S(a.toggleAll(u)) }), e()(), t(8, "th", 28), i(9, "\u0646\u0627\u0645 \u0645\u062D\u0635\u0648\u0644 \u0648 \u062A\u0646\u0648\u0639"), e(), t(10, "th", 28), i(11, "\u0642\u06CC\u0645\u062A \u0641\u0639\u0644\u06CC"), e(), t(12, "th", 28), i(13, "\u0642\u06CC\u0645\u062A \u062C\u062F\u06CC\u062F"), e()()(), t(14, "tbody", 29), f(15, tn, 22, 11, "tr", 30), e()()()(), f(16, nn, 10, 4, "div", 31), e() } if (n & 2) { let o = p(); l("formGroup", o.priceForm), d(15), l("ngForOf", o.getVariantControls()), d(), l("ngIf", o.hasSelectedProducts()) } } var Jt = (() => { let s = class s { constructor(r, u, a) { this.productService = r, this.adminProductService = u, this.notificationService = a, this.products = [], this.isLoading = !1, this.isSubmitting = !1, this.searchTerm = "", this.isPurchasePrice = !1, this.priceForm = new Se({ priceUpdates: new Lt([]) }) } ngOnInit() { this.loadProducts() } get priceUpdates() { return this.priceForm.get("priceUpdates") } getVariantControls() { return this.priceForm.get("priceUpdates").controls } loadProducts() { this.isLoading = !0, this.productService.getProducts({ name: this.searchTerm, page: 1, pageSize: 500 }).pipe(D(() => this.isLoading = !1)).subscribe({ next: r => { this.products = r.items ?? [], this.buildForm() }, error: () => { this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0645\u062D\u0635\u0648\u0644\u0627\u062A", "error") } }) } searchProducts() { this.loadProducts() } buildForm() { this.priceUpdates.clear(), this.products.forEach(r => { r.variants.forEach(u => { this.priceUpdates.push(new Se({ selected: new O(!1), variantId: new O(u.id), productName: new O(r.name), productIcon: new O(r.iconUrl), purchasePrice: new O(u.purchasePrice), sellingPrice: new O(u.sellingPrice), attributes: new O(u.attributes), newPrice: new O(null, [w.min(1)]) })) }) }) } getCurrentPrice(r) { return this.isPurchasePrice ? r.purchasePrice : r.sellingPrice } getVariantDisplayName(r) { return Object.values(r).map(u => u.value).join(" / ") } toggleAll(r) { let u = r.target.checked; this.priceUpdates.controls.forEach(a => { a.get("selected")?.setValue(u) }) } hasSelectedProducts() { return this.priceUpdates.controls.some(r => r.get("selected")?.value && r.get("newPrice")?.value) } getSelectedCount() { return this.priceUpdates.controls.filter(r => r.get("selected")?.value).length } updatePrices() { let r = {}; if (this.priceUpdates.controls.forEach(u => { if (u.get("selected")?.value && u.get("newPrice")?.value) { let a = u.get("variantId")?.value, m = u.get("newPrice")?.value; r[a] = m } }), Object.keys(r).length === 0) { this.notificationService.show("\u0644\u0637\u0641\u0627\u064B \u0645\u062D\u0635\u0648\u0644\u06CC \u0631\u0627 \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0631\u062F\u0647 \u0648 \u0642\u06CC\u0645\u062A \u062C\u062F\u06CC\u062F\u06CC \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F", "error"); return } this.isSubmitting = !0, this.adminProductService.bulkUpdatePrices(r, this.isPurchasePrice).pipe(D(() => this.isSubmitting = !1)).subscribe({ next: () => { this.notificationService.show("\u0642\u06CC\u0645\u062A\u200C\u0647\u0627 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0634\u062F\u0646\u062F", "success"), this.loadProducts() }, error: u => { this.notificationService.show(u?.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0642\u06CC\u0645\u062A\u200C\u0647\u0627", "error") } }) } resetForm() { this.priceForm.reset(), this.buildForm() } }; s.\u0275fac = function (u) { return new (u || s)(h(Ke), h(Fe), h(k)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-bulk-price-update"]], decls: 27, vars: 7, consts: [[1, "space-y-6", "animate-fade-in"], [1, "flex", "items-center", "justify-between"], [1, "text-2xl", "font-bold", "text-heading-foreground", "flex", "items-center", "gap-2"], [1, "material-icons", "text-primary"], [1, "card", "p-6", "space-y-4", "border", "border-border", "shadow-sm"], [1, "grid", "grid-cols-1", "md:grid-cols-3", "gap-4"], [1, "space-y-2", "form-group"], ["for", "search", 1, "form-label"], [1, "input-group"], [1, "input-addon"], [1, "material-icons", "text-sm"], ["type", "text", "id", "search", "placeholder", "\u0646\u0627\u0645 \u0645\u062D\u0635\u0648\u0644 \u06CC\u0627 SKU...", 1, "input", 3, "ngModelChange", "ngModel"], ["for", "priceType", 1, "form-label"], ["id", "priceType", 1, "input", 3, "ngModelChange", "ngModel"], [3, "ngValue"], ["class", "flex justify-center items-center py-12", 4, "ngIf"], ["class", "card p-12 text-center text-muted-foreground", 4, "ngIf"], [3, "formGroup", "ngSubmit", 4, "ngIf"], [1, "flex", "justify-center", "items-center", "py-12"], [1, "spinner", "spinner-xl", "text-primary"], [1, "card", "p-12", "text-center", "text-muted-foreground"], [3, "ngSubmit", "formGroup"], [1, "card", "overflow-hidden", "border", "border-border", "shadow-sm"], [1, "overflow-x-auto"], [1, "w-full", "text-sm", "text-right"], [1, "bg-muted/50", "border-b", "border-border", "text-muted-foreground"], [1, "p-4", "text-right", "w-12"], ["type", "checkbox", 1, "checkbox", 3, "change"], [1, "p-4", "text-right", "font-medium"], ["formArrayName", "priceUpdates", 1, "divide-y", "divide-border/50", "bg-card"], ["class", "hover:bg-muted/20 transition-colors", 3, "formGroupName", "bg-primary-50", 4, "ngFor", "ngForOf"], ["class", "flex gap-3 mt-6 sticky bottom-6 z-10 bg-background/80 backdrop-blur-sm p-4 rounded-xl border border-border shadow-lg", 4, "ngIf"], [1, "hover:bg-muted/20", "transition-colors", 3, "formGroupName"], [1, "p-4", "align-middle"], ["type", "checkbox", "formControlName", "selected", 1, "checkbox"], [1, "flex", "items-center", "gap-3"], [1, "w-10", "h-10", "rounded-md", "border", "border-border", "overflow-hidden", "shrink-0"], [1, "w-full", "h-full", "object-cover", 3, "src", "alt"], [1, "flex", "flex-col"], [1, "font-medium", "text-foreground"], [1, "text-xs", "text-muted-foreground", "font-mono", "mt-0.5"], [1, "p-4", "align-middle", "text-foreground", "font-medium", "tabular-nums"], [1, "text-xs", "font-normal", "text-muted-foreground"], [1, "input-group", "w-48"], ["type", "number", "formControlName", "newPrice", "min", "1", 1, "input", 3, "placeholder"], [1, "input-addon", "text-xs"], [1, "flex", "gap-3", "mt-6", "sticky", "bottom-6", "z-10", "bg-background/80", "backdrop-blur-sm", "p-4", "rounded-xl", "border", "border-border", "shadow-lg"], ["type", "submit", 1, "btn", "btn-primary", "shadow-lg", "shadow-primary/20", 3, "disabled"], ["class", "spinner spinner-sm mr-2 border-white", 4, "ngIf"], ["type", "button", 1, "btn", "btn-outline", 3, "click"], [1, "mr-auto", "text-sm", "text-muted-foreground", "flex", "items-center"], [1, "font-bold", "text-primary", "ml-1"], [1, "spinner", "spinner-sm", "mr-2", "border-white"]], template: function (u, a) { u & 1 && (t(0, "div", 0)(1, "div", 1)(2, "h1", 2)(3, "span", 3), i(4, "price_change"), e(), i(5, " \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0627\u0646\u0628\u0648\u0647 \u0642\u06CC\u0645\u062A "), e()(), t(6, "div", 4)(7, "div", 5)(8, "div", 6)(9, "label", 7), i(10, "\u062C\u0633\u062A\u062C\u0648"), e(), t(11, "div", 8)(12, "span", 9)(13, "span", 10), i(14, "search"), e()(), t(15, "input", 11), ae("ngModelChange", function (c) { return oe(a.searchTerm, c) || (a.searchTerm = c), c }), v("ngModelChange", function () { return a.searchProducts() }), e()()(), t(16, "div", 6)(17, "label", 12), i(18, "\u0646\u0648\u0639 \u0642\u06CC\u0645\u062A"), e(), t(19, "select", 13), ae("ngModelChange", function (c) { return oe(a.isPurchasePrice, c) || (a.isPurchasePrice = c), c }), t(20, "option", 14), i(21, "\u0642\u06CC\u0645\u062A \u0641\u0631\u0648\u0634"), e(), t(22, "option", 14), i(23, "\u0642\u06CC\u0645\u062A \u062E\u0631\u06CC\u062F"), e()()()()(), f(24, Zr, 2, 0, "div", 15)(25, en, 3, 0, "div", 16)(26, un, 17, 3, "form", 17), e()), u & 2 && (d(15), ue("ngModel", a.searchTerm), d(4), ue("ngModel", a.isPurchasePrice), d(), l("ngValue", !1), d(2), l("ngValue", !0), d(2), l("ngIf", a.isLoading), d(), l("ngIf", !a.isLoading && a.products.length === 0), d(), l("ngIf", !a.isLoading && a.products.length > 0)) }, dependencies: [A, I, _, ie, Q, ee, te, H, se, pe, Z, V, J, Me, Y, X, ze, We, ge, fe, be], encapsulation: 2 }); let n = s; return n })(); var tt = (() => { let s = class s { constructor(r) { this.http = r, this.apiUrl = `${R.API_URL}admin/inventory` } getTransactions(r, u, a, m, c = 1, j = 20) { let N = new K().set("page", c.toString()).set("pageSize", j.toString()); return r && (N = N.set("variantId", r.toString())), u && (N = N.set("transactionType", u)), a && (N = N.set("fromDate", a.toISOString())), m && (N = N.set("toDate", m.toISOString())), this.http.get(`${this.apiUrl}/transactions`, { params: N }) } getLowStockItems(r = 5) { let u = new K().set("threshold", r.toString()); return this.http.get(`${this.apiUrl}/low-stock`, { params: u }) } getOutOfStockItems() { return this.http.get(`${this.apiUrl}/out-of-stock`) } adjustStock(r, u) { return this.http.post(`${this.apiUrl}/adjust`, r) } getStatistics() { return this.http.get(`${this.apiUrl}/statistics`) } }; s.\u0275fac = function (u) { return new (u || s)(B(z)) }, s.\u0275prov = G({ token: s, factory: s.\u0275fac, providedIn: "root" }); let n = s; return n })(); var on = (n, s, o) => ({ "bg-destructive/10 text-destructive": n, "bg-warning/10 text-warning": s, "bg-secondary/10 text-secondary": o }), an = n => ["/admin/products/edit", n]; function sn(n, s) { n & 1 && (t(0, "div", 12), x(1, "span", 13), e()) } function dn(n, s) { n & 1 && (t(0, "div", 14)(1, "div", 15)(2, "span", 16), i(3, "check_circle"), e(), t(4, "p", 17), i(5, "\u0647\u0645\u0647 \u0645\u062D\u0635\u0648\u0644\u0627\u062A \u0645\u0648\u062C\u0648\u062F\u06CC \u06A9\u0627\u0641\u06CC \u062F\u0627\u0631\u0646\u062F"), e(), t(6, "p", 18), i(7, "\u0647\u06CC\u0686 \u0645\u062D\u0635\u0648\u0644\u06CC \u0632\u06CC\u0631 \u0622\u0633\u062A\u0627\u0646\u0647 \u062A\u0639\u06CC\u06CC\u0646 \u0634\u062F\u0647 \u0646\u06CC\u0633\u062A."), e()()()) } function ln(n, s) { n & 1 && (t(0, "span", 43), i(1, "error"), e()) } function mn(n, s) { if (n & 1 && (t(0, "tr", 30)(1, "td", 31)(2, "div", 32)(3, "span"), i(4), e(), t(5, "span", 33), i(6), e()()(), t(7, "td", 34)(8, "span", 35), i(9), e()(), t(10, "td", 34), i(11), e(), t(12, "td", 36)(13, "span", 37), f(14, ln, 2, 0, "span", 38), i(15), e()(), t(16, "td", 39), i(17), F(18, "number"), t(19, "span", 40), i(20, "\u062A\u0648\u0645\u0627\u0646"), e()(), t(21, "td", 41)(22, "a", 42), i(23, " \u0645\u062F\u06CC\u0631\u06CC\u062A "), e()()()), n & 2) { let o = s.$implicit; d(4), b(o.productName), d(2), g("SKU: ", o.sku), d(3), b(o.variantDisplayName), d(2), g(" ", o.categoryName || "-", " "), d(2), l("ngClass", yt(11, on, o.stock === 0, o.stock > 0 && o.stock <= 5, o.stock > 5)), d(), l("ngIf", o.stock === 0), d(), g(" ", o.stock, " \u0639\u062F\u062F "), d(2), g(" ", P(18, 9, o.sellingPrice), " "), d(5), l("routerLink", $(15, an, o.productId)) } } function cn(n, s) { if (n & 1 && (t(0, "div")(1, "div", 19)(2, "div", 20)(3, "span", 3), i(4, "notifications_active"), e(), t(5, "p", 21), i(6), e()(), t(7, "div", 22)(8, "table", 23)(9, "thead", 24)(10, "tr")(11, "th", 25), i(12, "\u0646\u0627\u0645 \u0645\u062D\u0635\u0648\u0644"), e(), t(13, "th", 25), i(14, "\u062A\u0646\u0648\u0639"), e(), t(15, "th", 25), i(16, "\u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC"), e(), t(17, "th", 26), i(18, "\u0645\u0648\u062C\u0648\u062F\u06CC"), e(), t(19, "th", 25), i(20, "\u0642\u06CC\u0645\u062A"), e(), t(21, "th", 27), i(22, "\u0639\u0645\u0644\u06CC\u0627\u062A"), e()()(), t(23, "tbody", 28), f(24, mn, 24, 17, "tr", 29), e()()()()()), n & 2) { let o = p(); d(6), g("", o.products.length, " \u062A\u0646\u0648\u0639 \u0645\u062D\u0635\u0648\u0644 \u0646\u06CC\u0627\u0632 \u0628\u0647 \u062A\u0627\u0645\u06CC\u0646 \u0645\u0648\u062C\u0648\u062F\u06CC \u062F\u0627\u0631\u0646\u062F"), d(18), l("ngForOf", o.products) } } var Yt = (() => { let s = class s { constructor(r) { this.inventoryService = r, this.products = [], this.isLoading = !1, this.threshold = 5 } ngOnInit() { this.loadLowStockProducts() } loadLowStockProducts() { this.isLoading = !0, this.inventoryService.getLowStockItems(this.threshold).pipe(D(() => this.isLoading = !1)).subscribe({ next: r => { this.products = r }, error: () => { this.products = [] } }) } }; s.\u0275fac = function (u) { return new (u || s)(h(tt)) }, s.\u0275cmp = y({ type: s, selectors: [["app-low-stock-alerts"]], decls: 22, vars: 8, consts: [[1, "space-y-6", "animate-fade-in"], [1, "flex", "items-center", "justify-between"], [1, "text-2xl", "font-bold", "text-heading-foreground", "flex", "items-center", "gap-2"], [1, "material-icons", "text-warning"], [1, "card", "p-6", "space-y-4", "border", "border-border", "shadow-sm"], [1, "flex", "items-center", "gap-4"], ["for", "threshold", 1, "text-sm", "font-medium", "text-foreground"], ["id", "threshold", 1, "input", "w-40", 3, "ngModelChange", "ngModel"], [3, "value"], ["class", "flex justify-center items-center py-12", 4, "ngIf"], ["class", "card p-12 text-center border border-success/20 bg-success/5", 4, "ngIf"], [4, "ngIf"], [1, "flex", "justify-center", "items-center", "py-12"], [1, "spinner", "spinner-xl", "text-primary"], [1, "card", "p-12", "text-center", "border", "border-success/20", "bg-success/5"], [1, "flex", "flex-col", "items-center", "gap-4"], [1, "material-icons", "text-5xl", "text-success"], [1, "text-foreground", "font-bold", "text-lg"], [1, "text-muted-foreground"], [1, "card", "overflow-hidden", "border", "border-border", "shadow-sm"], [1, "p-4", "bg-warning/10", "border-b", "border-warning/20", "flex", "items-center", "gap-3", "text-warning-foreground"], [1, "font-bold"], [1, "overflow-x-auto"], [1, "w-full", "text-sm", "text-right"], [1, "bg-muted/50", "border-b", "border-border", "text-muted-foreground"], [1, "p-4", "font-medium"], [1, "p-4", "font-medium", "text-center"], [1, "p-4", "font-medium", "w-32"], [1, "divide-y", "divide-border/50", "bg-card"], ["class", "hover:bg-muted/20 transition-colors group", 4, "ngFor", "ngForOf"], [1, "hover:bg-muted/20", "transition-colors", "group"], [1, "p-4", "font-medium", "text-foreground"], [1, "flex", "flex-col"], [1, "text-xs", "text-muted-foreground", "font-mono", "mt-0.5"], [1, "p-4", "text-muted-foreground"], [1, "badge", "badge-outline", "bg-background"], [1, "p-4", "text-center"], [1, "px-2.5", "py-1", "rounded-full", "text-xs", "font-bold", "inline-flex", "items-center", "gap-1", 3, "ngClass"], ["class", "material-icons text-[14px]", 4, "ngIf"], [1, "p-4", "text-foreground", "font-medium", "tabular-nums"], [1, "text-xs", "font-normal", "text-muted-foreground"], [1, "p-4"], [1, "btn", "btn-sm", "btn-outline", "btn-primary", "opacity-0", "group-hover:opacity-100", "transition-opacity", 3, "routerLink"], [1, "material-icons", "text-[14px]"]], template: function (u, a) { u & 1 && (t(0, "div", 0)(1, "div", 1)(2, "h1", 2)(3, "span", 3), i(4, "warning"), e(), i(5, " \u0645\u062D\u0635\u0648\u0644\u0627\u062A \u0631\u0648 \u0628\u0647 \u0627\u062A\u0645\u0627\u0645 "), e()(), t(6, "div", 4)(7, "div", 5)(8, "label", 6), i(9, "\u0622\u0633\u062A\u0627\u0646\u0647 \u0647\u0634\u062F\u0627\u0631:"), e(), t(10, "select", 7), ae("ngModelChange", function (c) { return oe(a.threshold, c) || (a.threshold = c), c }), v("ngModelChange", function () { return a.loadLowStockProducts() }), t(11, "option", 8), i(12, "5 \u0639\u062F\u062F"), e(), t(13, "option", 8), i(14, "10 \u0639\u062F\u062F"), e(), t(15, "option", 8), i(16, "20 \u0639\u062F\u062F"), e(), t(17, "option", 8), i(18, "50 \u0639\u062F\u062F"), e()()()(), f(19, sn, 2, 0, "div", 9)(20, dn, 8, 0, "div", 10)(21, cn, 25, 2, "div", 11), e()), u & 2 && (d(10), ue("ngModel", a.threshold), d(), l("value", 5), d(2), l("value", 10), d(2), l("value", 20), d(2), l("value", 50), d(2), l("ngIf", a.isLoading), d(), l("ngIf", !a.isLoading && a.products.length === 0), d(), l("ngIf", !a.isLoading && a.products.length > 0)) }, dependencies: [A, q, I, _, L, T, ge, ee, te, Z, V, fe, be], encapsulation: 2 }); let n = s; return n })(); var Xt = (() => { let s = class s { constructor(r) { this.http = r, this.auditUrl = `${R.API_URL}admin/AuditLogs` } getAuditLogs(r) { let u = new K; return Object.keys(r).forEach(a => { let m = r[a]; m != null && m !== "" && (u = u.set(a, m.toString())) }), this.http.get(this.auditUrl, { params: u }) } }; s.\u0275fac = function (u) { return new (u || s)(B(z)) }, s.\u0275prov = G({ token: s, factory: s.\u0275fac, providedIn: "root" }); let n = s; return n })(); function fn(n, s) { n & 1 && (t(0, "tr")(1, "td", 35)(2, "div", 36), x(3, "span", 37), e()()()) } function gn(n, s) { if (n & 1 && (t(0, "tr", 38)(1, "td", 39), i(2), F(3, "date"), e(), t(4, "td", 40)(5, "div", 41)(6, "span", 42), i(7), e(), t(8, "span", 43), i(9), e()()(), t(10, "td", 40)(11, "span", 44), i(12), e()(), t(13, "td", 45), i(14), e(), t(15, "td", 46), i(16), e(), t(17, "td", 47), i(18), e()()), n & 2) { let o = s.$implicit; d(2), g(" ", he(3, 9, o.timestamp, "yyyy/MM/dd HH:mm:ss"), " "), d(5), g(" ", (o.userName || "?").charAt(0), " "), d(), l("title", o.userName), d(), b(o.userName || "System"), d(3), b(o.eventType), d(2), b(o.action), d(), l("title", o.details), d(), g(" ", o.details, " "), d(2), g(" ", o.ipAddress, " ") } } function xn(n, s) { n & 1 && (t(0, "tr")(1, "td", 48)(2, "div", 49)(3, "span", 50), i(4, "history_toggle_off"), e(), t(5, "p"), i(6, "\u0647\u06CC\u0686 \u06AF\u0632\u0627\u0631\u0634\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F"), e()()()()) } function hn(n, s) { if (n & 1) { let o = E(); t(0, "div", 51)(1, "button", 52), v("click", function () { C(o); let u = p(); return S(u.changePage(u.logs.page - 1)) }), i(2, " \u0642\u0628\u0644\u06CC "), e(), t(3, "span", 53), i(4), e(), t(5, "button", 52), v("click", function () { C(o); let u = p(); return S(u.changePage(u.logs.page + 1)) }), i(6, " \u0628\u0639\u062F\u06CC "), e()() } if (n & 2) { let o = p(); d(), l("disabled", o.logs.page === 1), d(3), xe("\u0635\u0641\u062D\u0647 ", o.logs.page, " \u0627\u0632 ", o.logs.totalPages), d(), l("disabled", o.logs.page === o.logs.totalPages) } } var Zt = (() => { let s = class s { constructor(r) { this.auditService = r, this.logs = null, this.isLoading = !1, this.filters = { page: 1, pageSize: 20 } } ngOnInit() { this.loadLogs() } loadLogs() { this.isLoading = !0, this.auditService.getAuditLogs(this.filters).pipe(D(() => this.isLoading = !1)).subscribe({ next: r => this.logs = r, error: r => console.error(r) }) } applyFilters() { this.filters.page = 1, this.loadLogs() } changePage(r) { this.filters.page = r, this.loadLogs() } }; s.\u0275fac = function (u) { return new (u || s)(h(Xt)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-audit-logs"]], decls: 65, vars: 8, consts: [[1, "space-y-6", "animate-fade-in"], [1, "flex", "items-center", "justify-between"], [1, "text-2xl", "font-bold", "tracking-tight", "text-heading-foreground", "flex", "items-center", "gap-2"], [1, "material-icons", "text-primary"], [1, "text-sm", "text-muted-foreground", "mt-1"], [1, "flex", "gap-2"], [1, "btn", "btn-outline", "btn-sm", "gap-2", 3, "click"], [1, "material-icons", "text-sm"], [1, "card", "p-4", "border", "border-border", "shadow-sm", "bg-muted/10"], [1, "grid", "grid-cols-1", "md:grid-cols-4", "gap-4"], [1, "space-y-1.5"], [1, "text-xs", "font-medium", "text-muted-foreground"], ["type", "number", "placeholder", "User ID", 1, "input", "input-sm", "w-full", "bg-background", 3, "ngModelChange", "ngModel"], [1, "input", "input-sm", "w-full", "bg-background", 3, "ngModelChange", "ngModel"], [3, "ngValue"], ["value", "Authentication"], ["value", "Order"], ["value", "Product"], ["value", "Security"], ["type", "date", 1, "input", "input-sm", "w-full", "bg-background", "ltr-input", 3, "ngModelChange", "ngModel"], [1, "flex", "items-end"], [1, "btn", "btn-primary", "btn-sm", "w-full", "shadow-sm", 3, "click"], [1, "material-icons", "text-sm", "mr-1"], [1, "card", "overflow-hidden", "border", "border-border", "shadow-sm"], [1, "overflow-x-auto"], [1, "w-full", "text-sm", "text-right"], [1, "bg-muted/50", "border-b", "border-border", "text-muted-foreground"], [1, "px-6", "py-4", "font-medium", "w-48"], [1, "px-6", "py-4", "font-medium", "w-32"], [1, "px-6", "py-4", "font-medium"], [1, "px-6", "py-4", "font-medium", "w-32", "text-center"], [1, "divide-y", "divide-border/50", "bg-card"], [4, "ngIf"], ["class", "group hover:bg-muted/30 transition-colors text-xs sm:text-sm", 4, "ngFor", "ngForOf"], ["class", "p-4 border-t border-border flex items-center justify-between bg-muted/10", 4, "ngIf"], ["colspan", "6", 1, "p-8", "text-center"], [1, "flex", "justify-center"], [1, "spinner", "spinner-md", "text-primary"], [1, "group", "hover:bg-muted/30", "transition-colors", "text-xs", "sm:text-sm"], [1, "px-6", "py-4", "whitespace-nowrap", "text-muted-foreground", "dir-ltr", "text-right"], [1, "px-6", "py-4"], [1, "flex", "items-center", "gap-2"], [1, "w-6", "h-6", "rounded-full", "bg-muted", "flex", "items-center", "justify-center", "text-xs", "font-bold", "text-muted-foreground"], [1, "truncate", "max-w-[100px]", "text-foreground", 3, "title"], [1, "badge", "badge-outline", "text-[10px]", "font-mono"], [1, "px-6", "py-4", "font-medium", "text-foreground"], [1, "px-6", "py-4", "text-muted-foreground", "truncate", "max-w-[200px]", 3, "title"], [1, "px-6", "py-4", "text-center", "font-mono", "text-muted-foreground", "text-xs"], ["colspan", "6", 1, "p-12", "text-center", "text-muted-foreground"], [1, "flex", "flex-col", "items-center", "gap-3", "opacity-50"], [1, "material-icons", "text-4xl"], [1, "p-4", "border-t", "border-border", "flex", "items-center", "justify-between", "bg-muted/10"], [1, "btn", "btn-outline", "btn-sm", 3, "click", "disabled"], [1, "text-xs", "text-muted-foreground"]], template: function (u, a) { u & 1 && (t(0, "div", 0)(1, "div", 1)(2, "div")(3, "h1", 2)(4, "span", 3), i(5, "policy"), e(), i(6, " \u06AF\u0632\u0627\u0631\u0634\u0627\u062A \u0633\u06CC\u0633\u062A\u0645\u06CC "), e(), t(7, "p", 4), i(8, "\u0631\u0647\u06AF\u06CC\u0631\u06CC \u0641\u0639\u0627\u0644\u06CC\u062A \u06A9\u0627\u0631\u0628\u0631\u0627\u0646 \u0648 \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A \u0633\u06CC\u0633\u062A\u0645"), e()(), t(9, "div", 5)(10, "button", 6), v("click", function () { return a.loadLogs() }), t(11, "span", 7), i(12, "refresh"), e(), i(13, " \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC "), e()()(), t(14, "div", 8)(15, "div", 9)(16, "div", 10)(17, "label", 11), i(18, "\u0634\u0646\u0627\u0633\u0647 \u06A9\u0627\u0631\u0628\u0631"), e(), t(19, "input", 12), ae("ngModelChange", function (c) { return oe(a.filters.userId, c) || (a.filters.userId = c), c }), e()(), t(20, "div", 10)(21, "label", 11), i(22, "\u0646\u0648\u0639 \u0631\u0648\u06CC\u062F\u0627\u062F"), e(), t(23, "select", 13), ae("ngModelChange", function (c) { return oe(a.filters.eventType, c) || (a.filters.eventType = c), c }), t(24, "option", 14), i(25, "\u0647\u0645\u0647"), e(), t(26, "option", 15), i(27, "\u0627\u062D\u0631\u0627\u0632 \u0647\u0648\u06CC\u062A"), e(), t(28, "option", 16), i(29, "\u0633\u0641\u0627\u0631\u0634\u0627\u062A"), e(), t(30, "option", 17), i(31, "\u0645\u062D\u0635\u0648\u0644\u0627\u062A"), e(), t(32, "option", 18), i(33, "\u0627\u0645\u0646\u06CC\u062A"), e()()(), t(34, "div", 10)(35, "label", 11), i(36, "\u0627\u0632 \u062A\u0627\u0631\u06CC\u062E"), e(), t(37, "input", 19), ae("ngModelChange", function (c) { return oe(a.filters.fromDate, c) || (a.filters.fromDate = c), c }), e()(), t(38, "div", 20)(39, "button", 21), v("click", function () { return a.applyFilters() }), t(40, "span", 22), i(41, "filter_list"), e(), i(42, " \u0627\u0639\u0645\u0627\u0644 \u0641\u06CC\u0644\u062A\u0631 "), e()()()(), t(43, "div", 23)(44, "div", 24)(45, "table", 25)(46, "thead", 26)(47, "tr")(48, "th", 27), i(49, "\u0632\u0645\u0627\u0646"), e(), t(50, "th", 28), i(51, "\u06A9\u0627\u0631\u0628\u0631"), e(), t(52, "th", 28), i(53, "\u0631\u0648\u06CC\u062F\u0627\u062F"), e(), t(54, "th", 27), i(55, "\u0639\u0645\u0644\u06CC\u0627\u062A"), e(), t(56, "th", 29), i(57, "\u062C\u0632\u0626\u06CC\u0627\u062A"), e(), t(58, "th", 30), i(59, "IP"), e()()(), t(60, "tbody", 31), f(61, fn, 4, 0, "tr", 32)(62, gn, 19, 12, "tr", 33)(63, xn, 7, 0, "tr", 32), e()()(), f(64, hn, 7, 4, "div", 34), e()()), u & 2 && (d(19), ue("ngModel", a.filters.userId), d(4), ue("ngModel", a.filters.eventType), d(), l("ngValue", null), d(13), ue("ngModel", a.filters.fromDate), d(24), l("ngIf", a.isLoading), d(), l("ngForOf", a.logs == null ? null : a.logs.items), d(), l("ngIf", !a.isLoading && (!(a.logs != null && a.logs.items) || (a.logs == null || a.logs.items == null ? null : a.logs.items.length) === 0)), d(), l("ngIf", a.logs && a.logs.totalPages > 1)) }, dependencies: [A, I, _, ge, ee, te, H, se, Z, V, fe, ve], encapsulation: 2 }); let n = s; return n })(); var it = (() => { let s = class s { constructor(r) { this.http = r, this.baseUrl = `${R.API_URL}admin/shipping-methods` } getShippingMethods(r = !1) { return this.http.get(`${this.baseUrl}?includeDeleted=${r}`) } getShippingMethodById(r) { return this.http.get(`${this.baseUrl}/${r}`) } createShippingMethod(r) { return this.http.post(this.baseUrl, r) } updateShippingMethod(r, u) { return this.http.put(`${this.baseUrl}/${r}`, u) } deleteShippingMethod(r) { return this.http.delete(`${this.baseUrl}/${r}`) } restoreShippingMethod(r) { return this.http.post(`${this.baseUrl}/${r}/restore`, {}) } }; s.\u0275fac = function (u) { return new (u || s)(B(z)) }, s.\u0275prov = G({ token: s, factory: s.\u0275fac, providedIn: "root" }); let n = s; return n })(); var vn = n => ["/admin/shipping-methods/edit", n]; function bn(n, s) { n & 1 && (t(0, "div", 14), x(1, "span", 15), e()) } function Cn(n, s) { n & 1 && (t(0, "div", 16)(1, "span", 17), i(2, "local_shipping"), e(), t(3, "p"), i(4, "\u0647\u06CC\u0686 \u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."), e()()) } function Sn(n, s) { if (n & 1) { let o = E(); t(0, "button", 41), v("click", function () { C(o); let u = p().$implicit, a = p(2); return S(a.deleteMethod(u.id)) }), t(1, "span", 38), i(2, "delete"), e()() } } function yn(n, s) { if (n & 1) { let o = E(); t(0, "button", 42), v("click", function () { C(o); let u = p().$implicit, a = p(2); return S(a.restoreMethod(u.id)) }), t(1, "span", 38), i(2, "restore_from_trash"), e()() } } function _n(n, s) { if (n & 1 && (t(0, "tr", 26)(1, "td", 27)(2, "div", 28)(3, "span"), i(4), e(), t(5, "span", 29), i(6), e()()(), t(7, "td", 30), i(8), F(9, "number"), t(10, "span", 31), i(11, "\u062A\u0648\u0645\u0627\u0646"), e()(), t(12, "td", 32)(13, "span", 33), x(14, "span", 34), i(15), e()(), t(16, "td", 35)(17, "div", 36)(18, "a", 37)(19, "span", 38), i(20, "edit"), e()(), f(21, Sn, 3, 0, "button", 39)(22, yn, 3, 0, "button", 40), e()()()), n & 2) { let o = s.$implicit; U("opacity-50", o.isDeleted), d(4), b(o.name), d(2), b(o.estimatedDeliveryTime), d(2), g(" ", P(9, 11, o.cost), " "), d(5), l("ngClass", o.isDeleted ? "bg-destructive/10 text-destructive" : o.isActive ? "bg-success/10 text-success" : "bg-muted text-muted-foreground"), d(), l("ngClass", o.isDeleted ? "bg-destructive" : o.isActive ? "bg-success" : "bg-muted-foreground"), d(), g(" ", o.isDeleted ? "\u062D\u0630\u0641 \u0634\u062F\u0647" : o.isActive ? "\u0641\u0639\u0627\u0644" : "\u063A\u06CC\u0631\u0641\u0639\u0627\u0644", " "), d(3), l("routerLink", $(13, vn, o.id)), d(3), l("ngIf", !o.isDeleted), d(), l("ngIf", o.isDeleted) } } function An(n, s) { if (n & 1 && (t(0, "div", 18)(1, "table", 19)(2, "thead", 20)(3, "tr")(4, "th", 21), i(5, "\u0646\u0627\u0645"), e(), t(6, "th", 21), i(7, "\u0647\u0632\u06CC\u0646\u0647"), e(), t(8, "th", 22), i(9, "\u0648\u0636\u0639\u06CC\u062A"), e(), t(10, "th", 23), i(11, "\u0639\u0645\u0644\u06CC\u0627\u062A"), e()()(), t(12, "tbody", 24), f(13, _n, 23, 15, "tr", 25), e()()()), n & 2) { let o = p(); d(13), l("ngForOf", o.methods) } } var ti = (() => { let s = class s { constructor(r, u) { this.adminShippingMethodService = r, this.notificationService = u, this.methods = [], this.isLoading = !0, this.includeDeleted = !1 } ngOnInit() { this.loadMethods() } loadMethods() { this.isLoading = !0, this.adminShippingMethodService.getShippingMethods(this.includeDeleted).pipe(D(() => this.isLoading = !1)).subscribe({ next: r => { this.methods = r }, error: r => { this.notificationService.show(r?.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0631\u0648\u0634\u200C\u0647\u0627\u06CC \u0627\u0631\u0633\u0627\u0644", "error") } }) } deleteMethod(r) { confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F") && this.adminShippingMethodService.deleteShippingMethod(r).subscribe({ next: () => { this.notificationService.show("\u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F", "success"), this.loadMethods() }, error: u => this.notificationService.show(u?.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641", "error") }) } restoreMethod(r) { this.adminShippingMethodService.restoreShippingMethod(r).subscribe({ next: () => { this.notificationService.show("\u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0628\u0627\u0632\u06CC\u0627\u0628\u06CC \u0634\u062F", "success"), this.loadMethods() }, error: u => this.notificationService.show(u?.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0632\u06CC\u0627\u0628\u06CC", "error") }) } }; s.\u0275fac = function (u) { return new (u || s)(h(it), h(k)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-shipping-method-list"]], decls: 19, vars: 4, consts: [[1, "space-y-6", "animate-fade-in"], [1, "flex", "items-center", "justify-between"], [1, "text-2xl", "font-bold", "text-heading-foreground", "flex", "items-center", "gap-2"], [1, "material-icons", "text-primary"], ["routerLink", "/admin/shipping-methods/new", 1, "btn", "btn-primary", "shadow-lg", "shadow-primary/20", "hover:shadow-primary/40", "transition-all"], [1, "material-icons", "text-sm", "me-1"], [1, "card", "overflow-hidden", "border", "border-border", "shadow-sm"], [1, "flex", "items-center", "p-4", "border-b", "border-border", "bg-muted/5"], [1, "inline-flex", "items-center", "cursor-pointer"], ["type", "checkbox", "id", "includeDeleted", 1, "checkbox", 3, "ngModelChange", "ngModel"], [1, "ms-2", "text-sm", "font-medium", "text-foreground"], ["class", "flex justify-center items-center p-12", 4, "ngIf"], ["class", "text-center p-12 text-muted-foreground", 4, "ngIf"], ["class", "w-full overflow-x-auto", 4, "ngIf"], [1, "flex", "justify-center", "items-center", "p-12"], [1, "spinner", "spinner-xl", "text-primary"], [1, "text-center", "p-12", "text-muted-foreground"], [1, "material-icons", "text-4xl", "opacity-20", "mb-2"], [1, "w-full", "overflow-x-auto"], [1, "w-full", "caption-bottom", "text-base", "min-w-[600px]", "text-right"], [1, "bg-muted/50", "border-b", "border-border", "text-muted-foreground"], [1, "h-12", "px-6", "align-middle", "font-medium"], [1, "h-12", "px-6", "align-middle", "font-medium", "text-center"], [1, "h-12", "px-6", "align-middle", "font-medium", "w-40", "text-left"], [1, "divide-y", "divide-border/50", "bg-card"], ["class", "hover:bg-muted/30 transition-colors group", 3, "opacity-50", 4, "ngFor", "ngForOf"], [1, "hover:bg-muted/30", "transition-colors", "group"], [1, "p-6", "align-middle", "font-medium", "text-foreground"], [1, "flex", "flex-col"], [1, "text-xs", "text-muted-foreground", "mt-0.5"], [1, "p-6", "align-middle", "tabular-nums", "font-medium"], [1, "text-xs", "font-normal", "text-muted-foreground"], [1, "p-6", "align-middle", "text-center"], [1, "px-2.5", "py-1", "text-xs", "font-semibold", "rounded-full", "inline-flex", "items-center", "gap-1", 3, "ngClass"], [1, "w-1.5", "h-1.5", "rounded-full", 3, "ngClass"], [1, "p-6", "align-middle"], [1, "flex", "items-center", "justify-end", "gap-2", "opacity-0", "group-hover:opacity-100", "transition-opacity"], [1, "btn", "btn-ghost", "btn-sm", "btn-icon", "text-primary", "hover:text-primary-foreground", "hover:bg-primary", "rounded-full", 3, "routerLink"], [1, "material-icons", "text-lg"], ["class", "btn btn-ghost btn-sm btn-icon text-muted-foreground hover:text-destructive-foreground hover:bg-destructive rounded-full", 3, "click", 4, "ngIf"], ["class", "btn btn-ghost btn-sm btn-icon text-success hover:text-success-foreground hover:bg-success rounded-full", "title", "\u0628\u0627\u0632\u06CC\u0627\u0628\u06CC", 3, "click", 4, "ngIf"], [1, "btn", "btn-ghost", "btn-sm", "btn-icon", "text-muted-foreground", "hover:text-destructive-foreground", "hover:bg-destructive", "rounded-full", 3, "click"], ["title", "\u0628\u0627\u0632\u06CC\u0627\u0628\u06CC", 1, "btn", "btn-ghost", "btn-sm", "btn-icon", "text-success", "hover:text-success-foreground", "hover:bg-success", "rounded-full", 3, "click"]], template: function (u, a) { u & 1 && (t(0, "div", 0)(1, "div", 1)(2, "h1", 2)(3, "span", 3), i(4, "local_shipping"), e(), i(5, " \u0645\u062F\u06CC\u0631\u06CC\u062A \u0631\u0648\u0634\u200C\u0647\u0627\u06CC \u0627\u0631\u0633\u0627\u0644 "), e(), t(6, "a", 4)(7, "span", 5), i(8, "add"), e(), i(9, " \u0627\u0641\u0632\u0648\u062F\u0646 \u0631\u0648\u0634 \u062C\u062F\u06CC\u062F "), e()(), t(10, "div", 6)(11, "div", 7)(12, "label", 8)(13, "input", 9), ae("ngModelChange", function (c) { return oe(a.includeDeleted, c) || (a.includeDeleted = c), c }), v("ngModelChange", function () { return a.loadMethods() }), e(), t(14, "span", 10), i(15, "\u0646\u0645\u0627\u06CC\u0634 \u062D\u0630\u0641 \u0634\u062F\u0647\u200C\u0647\u0627"), e()()(), f(16, bn, 2, 0, "div", 11)(17, Cn, 5, 0, "div", 12)(18, An, 14, 1, "div", 13), e()()), u & 2 && (d(13), ue("ngModel", a.includeDeleted), d(3), l("ngIf", a.isLoading), d(), l("ngIf", !a.isLoading && a.methods.length === 0), d(), l("ngIf", !a.isLoading && a.methods.length > 0)) }, dependencies: [A, q, I, _, L, T, ge, pe, V, fe, be], encapsulation: 2 }); let n = s; return n })(); function wn(n, s) { n & 1 && (t(0, "div", 28), i(1, " \u0646\u0627\u0645 \u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 \u0627\u0644\u0632\u0627\u0645\u06CC \u0627\u0633\u062A. "), e()) } function En(n, s) { n & 1 && (t(0, "div", 28), i(1, " \u0647\u0632\u06CC\u0646\u0647 \u0627\u0644\u0632\u0627\u0645\u06CC \u0648 \u0628\u0627\u06CC\u062F \u06CC\u06A9 \u0639\u062F\u062F \u0645\u062B\u0628\u062A \u0628\u0627\u0634\u062F. "), e()) } function Fn(n, s) { n & 1 && x(0, "span", 29) } var mt = (() => { let s = class s { constructor(r, u, a, m, c) { this.fb = r, this.route = u, this.router = a, this.adminShippingMethodService = m, this.notificationService = c, this.isEditMode = !1, this.methodId = null, this.isSubmitting = !1, this.shippingForm = this.fb.group({ name: ["", [w.required, w.maxLength(100)]], cost: [0, [w.required, w.min(0)]], description: ["", w.maxLength(500)], estimatedDeliveryTime: ["", w.maxLength(100)], isActive: [!0], rowVersion: [null] }) } ngOnInit() { let r = this.route.snapshot.paramMap.get("id"); r && (this.methodId = +r, this.isEditMode = !0, this.loadMethodData()) } loadMethodData() { this.methodId && this.adminShippingMethodService.getShippingMethodById(this.methodId).subscribe({ next: r => { this.shippingForm.patchValue(r) }, error: r => { this.notificationService.show(r?.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A", "error"), this.router.navigate(["/admin/shipping-methods"]) } }) } onSubmit() { if (this.shippingForm.invalid) { this.shippingForm.markAllAsTouched(); return } this.isSubmitting = !0; let r = this.shippingForm.getRawValue(); (this.isEditMode && this.methodId ? this.adminShippingMethodService.updateShippingMethod(this.methodId, r) : this.adminShippingMethodService.createShippingMethod(r)).pipe(D(() => this.isSubmitting = !1)).subscribe({ next: () => { this.notificationService.show(`\u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A ${this.isEditMode ? "\u0648\u06CC\u0631\u0627\u06CC\u0634" : "\u0627\u06CC\u062C\u0627\u062F"} \u0634\u062F`, "success"), this.router.navigate(["/admin/shipping-methods"]) }, error: a => { a.status === 409 ? (this.notificationService.show("\u0627\u06CC\u0646 \u0631\u06A9\u0648\u0631\u062F \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627 \u0635\u0641\u062D\u0647 \u0631\u0627 \u0631\u0641\u0631\u0634 \u06A9\u0646\u06CC\u062F.", "error"), this.loadMethodData()) : this.notificationService.show(a?.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u062B\u0628\u062A \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A", "error") } }) } }; s.\u0275fac = function (u) { return new (u || s)(h(we), h(ne), h(Ce), h(it), h(k)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-shipping-method-form"]], decls: 47, vars: 7, consts: [[1, "max-w-2xl", "mx-auto", "animate-fade-in-up"], [1, "flex", "items-center", "justify-between", "mb-6"], [1, "text-2xl", "font-bold", "text-heading-foreground", "flex", "items-center", "gap-2"], [1, "material-icons", "text-primary"], ["routerLink", "/admin/shipping-methods", 1, "btn", "btn-outline", "btn-sm", "gap-2"], [1, "material-icons", "text-sm"], [1, "card", "p-6", "space-y-6", "shadow-md", "border-border", 3, "ngSubmit", "formGroup"], [1, "grid", "md:grid-cols-2", "gap-6"], [1, "space-y-2", "form-group"], ["for", "name", 1, "form-label"], [1, "text-destructive"], ["type", "text", "id", "name", "formControlName", "name", "placeholder", "\u0645\u062B\u0627\u0644: \u067E\u0633\u062A \u067E\u06CC\u0634\u062A\u0627\u0632", "maxlength", "100", 1, "input", "w-full"], ["class", "form-error", 4, "ngIf"], ["for", "cost", 1, "form-label"], ["type", "number", "id", "cost", "formControlName", "cost", "placeholder", "0", 1, "input", "w-full"], ["for", "estimatedDeliveryTime", 1, "form-label"], ["type", "text", "id", "estimatedDeliveryTime", "formControlName", "estimatedDeliveryTime", "placeholder", "\u0645\u062B\u0627\u0644: \u06F2 \u062A\u0627 \u06F4 \u0631\u0648\u0632 \u06A9\u0627\u0631\u06CC", "maxlength", "100", 1, "input", "w-full"], ["for", "description", 1, "form-label"], ["id", "description", "formControlName", "description", "placeholder", "\u062A\u0648\u0636\u06CC\u062D\u0627\u062A \u062A\u06A9\u0645\u06CC\u0644\u06CC \u062F\u0631 \u0645\u0648\u0631\u062F \u0627\u06CC\u0646 \u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644...", "maxlength", "500", 1, "input", "w-full", "min-h-[100px]"], [1, "flex", "items-center", "gap-3", "p-4", "bg-muted/20", "rounded-lg", "border", "border-border/50"], [1, "flex", "items-center"], ["type", "checkbox", "id", "isActive", "formControlName", "isActive", 1, "switch"], ["for", "isActive", 1, "switch-thumb"], ["for", "isActive", 1, "text-sm", "font-medium", "cursor-pointer", "select-none", "text-foreground"], [1, "flex", "justify-end", "gap-3", "border-t", "border-border", "pt-6", "mt-2"], ["routerLink", "/admin/shipping-methods", 1, "btn", "btn-ghost", "text-muted-foreground", "hover:text-foreground"], ["type", "submit", 1, "btn", "btn-primary", "min-w-[120px]", "shadow-button", 3, "disabled"], ["class", "spinner spinner-sm mr-2 border-white", 4, "ngIf"], [1, "form-error"], [1, "spinner", "spinner-sm", "mr-2", "border-white"]], template: function (u, a) { if (u & 1 && (t(0, "div", 0)(1, "div", 1)(2, "h1", 2)(3, "span", 3), i(4, "local_shipping"), e(), i(5), e(), t(6, "a", 4)(7, "span", 5), i(8, "arrow_forward"), e(), i(9, " \u0628\u0627\u0632\u06AF\u0634\u062A "), e()(), t(10, "form", 6), v("ngSubmit", function () { return a.onSubmit() }), t(11, "div", 7)(12, "div", 8)(13, "label", 9), i(14, "\u0646\u0627\u0645 \u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 "), t(15, "span", 10), i(16, "*"), e()(), x(17, "input", 11), f(18, wn, 2, 0, "div", 12), e(), t(19, "div", 8)(20, "label", 13), i(21, "\u0647\u0632\u06CC\u0646\u0647 (\u062A\u0648\u0645\u0627\u0646) "), t(22, "span", 10), i(23, "*"), e()(), x(24, "input", 14), f(25, En, 2, 0, "div", 12), e()(), t(26, "div", 8)(27, "label", 15), i(28, "\u0632\u0645\u0627\u0646 \u062A\u062E\u0645\u06CC\u0646\u06CC \u062A\u062D\u0648\u06CC\u0644"), e(), x(29, "input", 16), e(), t(30, "div", 8)(31, "label", 17), i(32, "\u062A\u0648\u0636\u06CC\u062D\u0627\u062A (\u0627\u062E\u062A\u06CC\u0627\u0631\u06CC)"), e(), x(33, "textarea", 18), e(), t(34, "div", 19)(35, "div", 20), x(36, "input", 21)(37, "label", 22), e(), t(38, "label", 23), i(39, " \u0641\u0639\u0627\u0644 \u0633\u0627\u0632\u06CC \u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 "), e()(), t(40, "div", 24)(41, "a", 25), i(42, "\u0627\u0646\u0635\u0631\u0627\u0641"), e(), t(43, "button", 26), f(44, Fn, 1, 0, "span", 27), t(45, "span"), i(46), e()()()()()), u & 2) { let m, c; d(5), g(" ", a.isEditMode ? "\u0648\u06CC\u0631\u0627\u06CC\u0634" : "\u0627\u06CC\u062C\u0627\u062F", " \u0631\u0648\u0634 \u0627\u0631\u0633\u0627\u0644 "), d(5), l("formGroup", a.shippingForm), d(8), l("ngIf", ((m = a.shippingForm.get("name")) == null ? null : m.invalid) && ((m = a.shippingForm.get("name")) == null ? null : m.touched)), d(7), l("ngIf", ((c = a.shippingForm.get("cost")) == null ? null : c.invalid) && ((c = a.shippingForm.get("cost")) == null ? null : c.touched)), d(18), l("disabled", a.shippingForm.invalid || a.isSubmitting), d(), l("ngIf", a.isSubmitting), d(2), b(a.isSubmitting ? "\u062F\u0631 \u062D\u0627\u0644 \u0630\u062E\u06CC\u0631\u0647..." : "\u0630\u062E\u06CC\u0631\u0647") } }, dependencies: [A, _, ie, Q, H, se, pe, V, J, Mt, Y, X, L, T], encapsulation: 2 }); let n = s; return n })(); var De = (() => { let s = class s { constructor(r) { this.http = r, this.apiUrl = `${R.API_URL}admin/attributes` } getAllAttributeTypes() { return this.http.get(this.apiUrl) } getAttributeTypeById(r) { return this.http.get(`${this.apiUrl}/${r}`) } createAttributeType(r) { return this.http.post(this.apiUrl, r) } updateAttributeType(r, u) { return this.http.put(`${this.apiUrl}/${r}`, u) } deleteAttributeType(r) { return this.http.delete(`${this.apiUrl}/${r}`) } createAttributeValue(r, u) { return this.http.post(`${this.apiUrl}/${r}/values`, u) } updateAttributeValue(r, u) { return this.http.put(`${this.apiUrl}/values/${r}`, u) } deleteAttributeValue(r) { return this.http.delete(`${this.apiUrl}/values/${r}`) } }; s.\u0275fac = function (u) { return new (u || s)(B(z)) }, s.\u0275prov = G({ token: s, factory: s.\u0275fac, providedIn: "root" }); let n = s; return n })(); var In = n => ["/admin/attributes", n, "values"], kn = n => ["/admin/attributes/edit", n]; function Mn(n, s) { if (n & 1) { let o = E(); t(0, "tr", 18)(1, "td", 19), i(2), e(), t(3, "td", 20), i(4), e(), t(5, "td", 21), i(6), e(), t(7, "td", 22)(8, "span", 23), i(9), e()(), t(10, "td", 22)(11, "span", 24), i(12), e()(), t(13, "td", 25)(14, "div", 26)(15, "a", 27)(16, "span", 28), i(17, "list"), e()(), t(18, "a", 29)(19, "span", 28), i(20, "edit"), e()(), t(21, "button", 30), v("click", function () { let u = C(o).$implicit, a = p(); return S(a.deleteType(u.id)) }), t(22, "span", 28), i(23, "delete"), e()()()()() } if (n & 2) { let o = s.$implicit; d(2), b(o.id), d(2), b(o.displayName), d(2), b(o.name), d(3), b(o.sortOrder || 0), d(2), l("ngClass", o.isActive ? "badge-success" : "badge-destructive"), d(), g(" ", o.isActive ? "\u0641\u0639\u0627\u0644" : "\u063A\u06CC\u0631\u0641\u0639\u0627\u0644", " "), d(3), l("routerLink", $(8, In, o.id)), d(3), l("routerLink", $(10, kn, o.id)) } } function Ln(n, s) { n & 1 && (t(0, "tr")(1, "td", 31)(2, "div", 32)(3, "div", 33)(4, "span", 34), i(5, "tune"), e()(), t(6, "p"), i(7, "\u0647\u06CC\u0686 \u0648\u06CC\u0698\u06AF\u06CC \u062A\u0639\u0631\u06CC\u0641 \u0646\u0634\u062F\u0647 \u0627\u0633\u062A"), e()()()()) } function Dn(n, s) { n & 1 && (t(0, "tr")(1, "td", 35), x(2, "span", 36), e()()) } var ii = (() => { let s = class s { constructor(r, u) { this.attributeService = r, this.notificationService = u, this.types = [], this.isLoading = !0 } ngOnInit() { this.loadTypes() } loadTypes() { this.isLoading = !0, this.attributeService.getAllAttributeTypes().subscribe({ next: r => { this.types = r, this.isLoading = !1 }, error: () => { this.isLoading = !1, this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC", "error") } }) } deleteType(r) { confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0648\u06CC\u0698\u06AF\u06CC \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F") && this.attributeService.deleteAttributeType(r).subscribe({ next: () => { this.notificationService.show("\u062D\u0630\u0641 \u0634\u062F", "success"), this.loadTypes() }, error: u => this.notificationService.show(u.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641", "error") }) } }; s.\u0275fac = function (u) { return new (u || s)(h(De), h(k)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-attribute-type-list"]], decls: 34, vars: 3, consts: [[1, "space-y-6", "animate-fade-in"], [1, "flex", "flex-col", "sm:flex-row", "sm:items-center", "justify-between", "gap-4"], [1, "text-2xl", "font-bold", "tracking-tight", "text-heading-foreground", "flex", "items-center", "gap-2"], [1, "material-icons", "text-primary"], [1, "text-sm", "text-muted-foreground", "mt-1"], ["routerLink", "/admin/attributes/new", 1, "btn", "btn-primary", "shadow-lg", "shadow-primary/20", "hover:shadow-primary/40", "transition-all"], [1, "material-icons", "text-sm"], [1, "card", "overflow-hidden", "border", "border-border", "shadow-sm"], [1, "overflow-x-auto"], [1, "w-full", "text-sm", "text-right"], [1, "bg-muted/50", "border-b", "border-border", "text-muted-foreground"], [1, "px-6", "py-4", "font-medium", "w-16"], [1, "px-6", "py-4", "font-medium"], [1, "px-6", "py-4", "font-medium", "text-center", "w-24"], [1, "px-6", "py-4", "font-medium", "w-48", "text-left"], [1, "divide-y", "divide-border/50", "bg-card"], ["class", "group hover:bg-muted/30 transition-colors", 4, "ngFor", "ngForOf"], [4, "ngIf"], [1, "group", "hover:bg-muted/30", "transition-colors"], [1, "px-6", "py-4", "font-mono", "text-muted-foreground"], [1, "px-6", "py-4", "font-medium", "text-foreground"], [1, "px-6", "py-4", "font-mono", "text-muted-foreground", "dir-ltr", "text-right"], [1, "px-6", "py-4", "text-center"], [1, "badge", "badge-outline", "bg-background"], [1, "badge", 3, "ngClass"], [1, "px-6", "py-4"], [1, "flex", "items-center", "justify-end", "gap-2", "opacity-0", "group-hover:opacity-100", "transition-opacity"], ["title", "\u0645\u0642\u0627\u062F\u06CC\u0631", 1, "btn", "btn-icon", "btn-ghost", "btn-sm", "text-info", "hover:text-info-foreground", "hover:bg-info", 3, "routerLink"], [1, "material-icons", "text-lg"], ["title", "\u0648\u06CC\u0631\u0627\u06CC\u0634", 1, "btn", "btn-icon", "btn-ghost", "btn-sm", "text-primary", "hover:text-primary-foreground", "hover:bg-primary", 3, "routerLink"], ["title", "\u062D\u0630\u0641", 1, "btn", "btn-icon", "btn-ghost", "btn-sm", "text-muted-foreground", "hover:text-destructive-foreground", "hover:bg-destructive", 3, "click"], ["colspan", "6", 1, "px-6", "py-12", "text-center", "text-muted-foreground"], [1, "flex", "flex-col", "items-center", "gap-3"], [1, "w-12", "h-12", "rounded-full", "bg-muted", "flex", "items-center", "justify-center"], [1, "material-icons", "text-2xl", "text-muted-foreground/50"], ["colspan", "6", 1, "p-12", "text-center"], [1, "spinner", "spinner-lg", "text-primary"]], template: function (u, a) { u & 1 && (t(0, "div", 0)(1, "div", 1)(2, "div")(3, "h1", 2)(4, "span", 3), i(5, "tune"), e(), i(6, " \u0645\u062F\u06CC\u0631\u06CC\u062A \u0648\u06CC\u0698\u06AF\u06CC\u200C\u0647\u0627 "), e(), t(7, "p", 4), i(8, "\u062A\u0639\u0631\u06CC\u0641 \u0648\u06CC\u0698\u06AF\u06CC\u200C\u0647\u0627\u06CC \u0645\u062E\u062A\u0644\u0641 \u0628\u0631\u0627\u06CC \u0645\u062D\u0635\u0648\u0644\u0627\u062A (\u0631\u0646\u06AF\u060C \u0633\u0627\u06CC\u0632 \u0648...)"), e()(), t(9, "a", 5)(10, "span", 6), i(11, "add"), e(), i(12, " \u0648\u06CC\u0698\u06AF\u06CC \u062C\u062F\u06CC\u062F "), e()(), t(13, "div", 7)(14, "div", 8)(15, "table", 9)(16, "thead", 10)(17, "tr")(18, "th", 11), i(19, "#"), e(), t(20, "th", 12), i(21, "\u0646\u0627\u0645 \u0646\u0645\u0627\u06CC\u0634\u06CC"), e(), t(22, "th", 12), i(23, "\u0646\u0627\u0645 \u0633\u06CC\u0633\u062A\u0645\u06CC"), e(), t(24, "th", 13), i(25, "\u062A\u0631\u062A\u06CC\u0628"), e(), t(26, "th", 13), i(27, "\u0648\u0636\u0639\u06CC\u062A"), e(), t(28, "th", 14), i(29, "\u0639\u0645\u0644\u06CC\u0627\u062A"), e()()(), t(30, "tbody", 15), f(31, Mn, 24, 12, "tr", 16)(32, Ln, 8, 0, "tr", 17)(33, Dn, 3, 0, "tr", 17), e()()()()()), u & 2 && (d(31), l("ngForOf", a.types), d(), l("ngIf", !a.isLoading && a.types.length === 0), d(), l("ngIf", a.isLoading)) }, dependencies: [A, q, I, _, L, T], encapsulation: 2 }); let n = s; return n })(); var ri = n => ({ "is-invalid": n }); function Tn(n, s) { n & 1 && x(0, "span", 27) } var pt = (() => { let s = class s { constructor(r, u, a, m, c) { this.fb = r, this.route = u, this.router = a, this.attributeService = m, this.notificationService = c, this.isEditMode = !1, this.id = null, this.isSubmitting = !1, this.form = this.fb.group({ name: ["", [w.required]], displayName: ["", [w.required]], sortOrder: [0], isActive: [!0] }) } ngOnInit() { let r = this.route.snapshot.paramMap.get("id"); r && (this.id = +r, this.isEditMode = !0, this.loadData()) } loadData() { this.id && this.attributeService.getAttributeTypeById(this.id).subscribe({ next: r => this.form.patchValue(r), error: () => this.router.navigate(["/admin/attributes"]) }) } onSubmit() { if (this.form.invalid) return; this.isSubmitting = !0, (this.isEditMode && this.id ? this.attributeService.updateAttributeType(this.id, this.form.value) : this.attributeService.createAttributeType(this.form.value)).pipe(D(() => this.isSubmitting = !1)).subscribe({ next: () => { this.notificationService.show("\u0639\u0645\u0644\u06CC\u0627\u062A \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u0646\u062C\u0627\u0645 \u0634\u062F", "success"), this.router.navigate(["/admin/attributes"]) }, error: u => this.notificationService.show(u.error?.message || "\u062E\u0637\u0627", "error") }) } }; s.\u0275fac = function (u) { return new (u || s)(h(we), h(ne), h(Ce), h(De), h(k)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-attribute-type-form"]], decls: 54, vars: 11, consts: [[1, "max-w-2xl", "mx-auto", "animate-fade-in-up"], [1, "flex", "items-center", "justify-between", "mb-6"], [1, "text-2xl", "font-bold", "text-heading-foreground"], [1, "text-sm", "text-muted-foreground", "mt-1"], ["routerLink", "/admin/attributes", 1, "btn", "btn-outline", "btn-sm", "gap-2"], [1, "material-icons", "text-sm"], [1, "card", "p-6", "space-y-6", "shadow-md", "border-border", 3, "ngSubmit", "formGroup"], [1, "grid", "gap-6", "md:grid-cols-2"], [1, "space-y-2", "form-group"], [1, "form-label"], [1, "text-destructive"], [1, "input-group"], [1, "input-addon"], ["type", "text", "formControlName", "name", "placeholder", "e.g. Color", 1, "input", "ltr-input", 3, "ngClass"], [1, "form-hint"], ["type", "text", "formControlName", "displayName", "placeholder", "\u0645\u062B\u0644\u0627: \u0631\u0646\u06AF", 1, "input", 3, "ngClass"], ["type", "number", "formControlName", "sortOrder", "placeholder", "0", 1, "input"], [1, "flex", "items-center", "gap-3", "p-4", "bg-muted/20", "rounded-lg", "border", "border-border/50"], [1, "flex", "items-center"], ["type", "checkbox", "id", "isActive", "formControlName", "isActive", 1, "switch"], ["for", "isActive", 1, "switch-thumb"], ["for", "isActive", 1, "text-sm", "font-medium", "cursor-pointer", "select-none", "text-foreground"], [1, "block", "text-xs", "text-muted-foreground", "font-normal", "mt-0.5"], [1, "flex", "justify-end", "gap-3", "border-t", "border-border", "pt-6", "mt-2"], ["routerLink", "/admin/attributes", 1, "btn", "btn-ghost", "text-muted-foreground", "hover:text-foreground"], ["type", "submit", 1, "btn", "btn-primary", "min-w-[120px]", "shadow-button", 3, "disabled"], ["class", "spinner spinner-sm mr-2 border-white", 4, "ngIf"], [1, "spinner", "spinner-sm", "mr-2", "border-white"]], template: function (u, a) { if (u & 1 && (t(0, "div", 0)(1, "div", 1)(2, "div")(3, "h1", 2), i(4), e(), t(5, "p", 3), i(6, " \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0648\u06CC\u0698\u06AF\u06CC \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F "), e()(), t(7, "a", 4)(8, "span", 5), i(9, "arrow_forward"), e(), i(10, " \u0628\u0627\u0632\u06AF\u0634\u062A "), e()(), t(11, "form", 6), v("ngSubmit", function () { return a.onSubmit() }), t(12, "div", 7)(13, "div", 8)(14, "label", 9), i(15, " \u0646\u0627\u0645 \u0633\u06CC\u0633\u062A\u0645\u06CC (\u0627\u0646\u06AF\u0644\u06CC\u0633\u06CC) "), t(16, "span", 10), i(17, "*"), e()(), t(18, "div", 11)(19, "span", 12)(20, "span", 5), i(21, "code"), e()(), x(22, "input", 13), e(), t(23, "div", 14), i(24, "\u0628\u0631\u0627\u06CC \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u062F\u0631 \u06A9\u062F\u0646\u0648\u06CC\u0633\u06CC \u0648 API"), e()(), t(25, "div", 8)(26, "label", 9), i(27, " \u0646\u0627\u0645 \u0646\u0645\u0627\u06CC\u0634\u06CC (\u0641\u0627\u0631\u0633\u06CC) "), t(28, "span", 10), i(29, "*"), e()(), t(30, "div", 11)(31, "span", 12)(32, "span", 5), i(33, "label"), e()(), x(34, "input", 15), e()()(), t(35, "div", 7)(36, "div", 8)(37, "label", 9), i(38, "\u062A\u0631\u062A\u06CC\u0628 \u0646\u0645\u0627\u06CC\u0634"), e(), x(39, "input", 16), e()(), t(40, "div", 17)(41, "div", 18), x(42, "input", 19)(43, "label", 20), e(), t(44, "label", 21), i(45, " \u0641\u0639\u0627\u0644 \u0633\u0627\u0632\u06CC \u0648\u06CC\u0698\u06AF\u06CC "), t(46, "span", 22), i(47, " \u062F\u0631 \u0635\u0648\u0631\u062A \u063A\u06CC\u0631\u0641\u0639\u0627\u0644 \u0628\u0648\u062F\u0646\u060C \u062F\u0631 \u0645\u062D\u0635\u0648\u0644\u0627\u062A \u0646\u0645\u0627\u06CC\u0634 \u062F\u0627\u062F\u0647 \u0646\u0645\u06CC\u200C\u0634\u0648\u062F "), e()()(), t(48, "div", 23)(49, "a", 24), i(50, "\u0627\u0646\u0635\u0631\u0627\u0641"), e(), t(51, "button", 25), f(52, Tn, 1, 0, "span", 26), i(53), e()()()()), u & 2) { let m, c; d(4), g(" ", a.isEditMode ? "\u0648\u06CC\u0631\u0627\u06CC\u0634" : "\u0627\u06CC\u062C\u0627\u062F", " \u0648\u06CC\u0698\u06AF\u06CC "), d(7), l("formGroup", a.form), d(11), l("ngClass", $(7, ri, ((m = a.form.get("name")) == null ? null : m.invalid) && ((m = a.form.get("name")) == null ? null : m.touched))), d(12), l("ngClass", $(9, ri, ((c = a.form.get("displayName")) == null ? null : c.invalid) && ((c = a.form.get("displayName")) == null ? null : c.touched))), d(17), l("disabled", a.form.invalid || a.isSubmitting), d(), l("ngIf", a.isSubmitting), d(), g(" ", a.isEditMode ? "\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC" : "\u0630\u062E\u06CC\u0631\u0647", " ") } }, dependencies: [A, q, _, ie, Q, H, se, pe, V, J, Y, X, L, T], encapsulation: 2 }); let n = s; return n })(); function Pn(n, s) { if (n & 1 && x(0, "div", 37), n & 2) { let o = p().$implicit; Ge("background-color", o.hexCode), l("title", o.hexCode) } } function Nn(n, s) { n & 1 && (t(0, "span", 38), i(1, "-"), e()) } function Vn(n, s) { if (n & 1) { let o = E(); t(0, "tr", 24)(1, "td", 25), i(2), e(), t(3, "td", 26), i(4), e(), t(5, "td", 27), i(6), e(), t(7, "td", 28), f(8, Pn, 1, 3, "div", 29)(9, Nn, 2, 0, "span", 30), e(), t(10, "td", 28)(11, "span", 31), i(12), e()(), t(13, "td", 32)(14, "div", 33)(15, "button", 34), v("click", function () { let u = C(o).$implicit, a = p(2); return S(a.openEditModal(u)) }), t(16, "span", 35), i(17, "edit"), e()(), t(18, "button", 36), v("click", function () { let u = C(o).$implicit, a = p(2); return S(a.deleteValue(u.id)) }), t(19, "span", 35), i(20, "delete"), e()()()()() } if (n & 2) { let o = s.$implicit; d(2), b(o.id), d(2), b(o.displayValue), d(2), b(o.value), d(2), l("ngIf", o.hexCode), d(), l("ngIf", !o.hexCode), d(3), b(o.sortOrder || 0) } } function On(n, s) { n & 1 && (t(0, "tr")(1, "td", 39)(2, "p"), i(3, "\u0647\u06CC\u0686 \u0645\u0642\u062F\u0627\u0631\u06CC \u0628\u0631\u0627\u06CC \u0627\u06CC\u0646 \u0648\u06CC\u0698\u06AF\u06CC \u062B\u0628\u062A \u0646\u0634\u062F\u0647 \u0627\u0633\u062A"), e()()()) } function jn(n, s) { if (n & 1) { let o = E(); t(0, "div", 2)(1, "div", 3)(2, "div")(3, "div", 4)(4, "a", 5), i(5, "\u0648\u06CC\u0698\u06AF\u06CC\u200C\u0647\u0627"), e(), t(6, "span", 6), i(7, "chevron_left"), e(), t(8, "span"), i(9), e()(), t(10, "h1", 7), i(11, " \u0645\u0642\u0627\u062F\u06CC\u0631 \u0648\u06CC\u0698\u06AF\u06CC: "), t(12, "span", 8), i(13), e()()(), t(14, "div", 9)(15, "a", 10), i(16, "\u0628\u0627\u0632\u06AF\u0634\u062A"), e(), t(17, "button", 11), v("click", function () { C(o); let u = p(); return S(u.openAddModal()) }), t(18, "span", 12), i(19, "add"), e(), i(20, " \u0645\u0642\u062F\u0627\u0631 \u062C\u062F\u06CC\u062F "), e()()(), t(21, "div", 13)(22, "div", 14)(23, "table", 15)(24, "thead", 16)(25, "tr")(26, "th", 17), i(27, "#"), e(), t(28, "th", 18), i(29, "\u0645\u0642\u062F\u0627\u0631 \u0646\u0645\u0627\u06CC\u0634\u06CC"), e(), t(30, "th", 18), i(31, "\u06A9\u062F/\u0645\u0642\u062F\u0627\u0631"), e(), t(32, "th", 19), i(33, "\u0631\u0646\u06AF (\u0627\u062E\u062A\u06CC\u0627\u0631\u06CC)"), e(), t(34, "th", 19), i(35, "\u062A\u0631\u062A\u06CC\u0628"), e(), t(36, "th", 20), i(37, "\u0639\u0645\u0644\u06CC\u0627\u062A"), e()()(), t(38, "tbody", 21), f(39, Vn, 21, 6, "tr", 22)(40, On, 4, 0, "tr", 23), e()()()()() } if (n & 2) { let o = p(); d(9), b(o.attributeType.displayName), d(4), b(o.attributeType.displayName), d(26), l("ngForOf", o.attributeValues), d(), l("ngIf", o.attributeValues.length === 0) } } function Un(n, s) { n & 1 && x(0, "span", 60) } function $n(n, s) { if (n & 1) { let o = E(); t(0, "div", 40)(1, "div", 41)(2, "div", 42)(3, "h3", 43), i(4), e(), t(5, "button", 44), v("click", function () { C(o); let u = p(); return S(u.closeModal()) }), t(6, "span", 45), i(7, "close"), e()()(), t(8, "div", 46)(9, "form", 47), v("ngSubmit", function () { C(o); let u = p(); return S(u.onSubmit()) }), t(10, "div", 48)(11, "label", 49), i(12, "\u0645\u0642\u062F\u0627\u0631 \u0646\u0645\u0627\u06CC\u0634\u06CC "), t(13, "span", 50), i(14, "*"), e()(), x(15, "input", 51), e(), t(16, "div", 48)(17, "label", 49), i(18, "\u0645\u0642\u062F\u0627\u0631 \u0633\u06CC\u0633\u062A\u0645\u06CC/\u06A9\u062F "), t(19, "span", 50), i(20, "*"), e()(), x(21, "input", 52), e(), t(22, "div", 48)(23, "label", 49), i(24, "\u06A9\u062F \u0631\u0646\u06AF (\u0627\u062E\u062A\u06CC\u0627\u0631\u06CC)"), e(), t(25, "div", 9), x(26, "input", 53)(27, "input", 54), e()(), t(28, "div", 48)(29, "label", 49), i(30, "\u062A\u0631\u062A\u06CC\u0628 \u0646\u0645\u0627\u06CC\u0634"), e(), x(31, "input", 55), e()()(), t(32, "div", 56)(33, "button", 57), v("click", function () { C(o); let u = p(); return S(u.closeModal()) }), i(34, "\u0627\u0646\u0635\u0631\u0627\u0641"), e(), t(35, "button", 58), v("click", function () { C(o); let u = p(); return S(u.onSubmit()) }), f(36, Un, 1, 0, "span", 59), i(37, " \u0630\u062E\u06CC\u0631\u0647 "), e()()()() } if (n & 2) { let o = p(); d(4), g("", o.isEditMode ? "\u0648\u06CC\u0631\u0627\u06CC\u0634" : "\u0627\u0641\u0632\u0648\u062F\u0646", " \u0645\u0642\u062F\u0627\u0631"), d(5), l("formGroup", o.form), d(26), l("disabled", o.form.invalid || o.isSubmitting), d(), l("ngIf", o.isSubmitting) } } var ni = (() => { let s = class s { constructor(r, u, a, m) { this.route = r, this.attributeService = u, this.notificationService = a, this.fb = m, this.attributeType = null, this.attributeValues = [], this.isModalOpen = !1, this.isEditMode = !1, this.isSubmitting = !1, this.editingId = null, this.typeId = 0, this.form = this.fb.group({ value: ["", w.required], displayValue: ["", w.required], hexCode: [""], sortOrder: [0] }) } ngOnInit() { let r = this.route.snapshot.paramMap.get("id"); r && (this.typeId = +r, this.loadData()) } loadData() { this.attributeService.getAttributeTypeById(this.typeId).subscribe({ next: r => { this.attributeType = r, this.attributeValues = r.values || [] }, error: () => this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u062F\u0631\u06CC\u0627\u0641\u062A \u0627\u0637\u0644\u0627\u0639\u0627\u062A", "error") }) } openAddModal() { this.isEditMode = !1, this.editingId = null, this.form.reset({ sortOrder: 0 }), this.isModalOpen = !0 } openEditModal(r) { this.isEditMode = !0, this.editingId = r.id, this.form.patchValue(r), this.isModalOpen = !0 } closeModal() { this.isModalOpen = !1 } onSubmit() { if (this.form.invalid) return; this.isSubmitting = !0; let r = Ve(Ne({}, this.form.value), { attributeTypeId: this.typeId }); (this.isEditMode && this.editingId ? this.attributeService.updateAttributeValue(this.editingId, r) : this.attributeService.createAttributeValue(this.typeId, r)).pipe(D(() => this.isSubmitting = !1)).subscribe({ next: () => { this.notificationService.show("\u0639\u0645\u0644\u06CC\u0627\u062A \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u0646\u062C\u0627\u0645 \u0634\u062F", "success"), this.closeModal(), this.loadData() }, error: a => this.notificationService.show(a.error?.message || "\u062E\u0637\u0627 \u062F\u0631 \u0630\u062E\u06CC\u0631\u0647 \u0633\u0627\u0632\u06CC", "error") }) } deleteValue(r) { confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0645\u0642\u062F\u0627\u0631 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F") && this.attributeService.deleteAttributeValue(r).subscribe({ next: () => { this.notificationService.show("\u062D\u0630\u0641 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u0646\u062C\u0627\u0645 \u0634\u062F", "success"), this.loadData() }, error: () => this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641", "error") }) } }; s.\u0275fac = function (u) { return new (u || s)(h(ne), h(De), h(k), h(we)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-attribute-values"]], decls: 2, vars: 2, consts: [["class", "space-y-6 animate-fade-in", 4, "ngIf"], ["class", "modal-overlay", 4, "ngIf"], [1, "space-y-6", "animate-fade-in"], [1, "flex", "flex-col", "sm:flex-row", "sm:items-center", "justify-between", "gap-4"], [1, "flex", "items-center", "gap-2", "text-muted-foreground", "text-sm", "mb-1"], ["routerLink", "/admin/attributes", 1, "hover:text-primary", "transition-colors"], [1, "material-icons", "text-[10px]", "rtl:rotate-180"], [1, "text-2xl", "font-bold", "tracking-tight", "text-heading-foreground", "flex", "items-center", "gap-2"], [1, "text-primary"], [1, "flex", "gap-2"], ["routerLink", "/admin/attributes", 1, "btn", "btn-outline", "btn-sm"], [1, "btn", "btn-primary", "btn-sm", "shadow-lg", "shadow-primary/20", 3, "click"], [1, "material-icons", "text-sm", "mr-1"], [1, "card", "overflow-hidden", "border", "border-border", "shadow-sm"], [1, "overflow-x-auto"], [1, "w-full", "text-sm", "text-right"], [1, "bg-muted/50", "border-b", "border-border", "text-muted-foreground"], [1, "px-6", "py-4", "font-medium", "w-16"], [1, "px-6", "py-4", "font-medium"], [1, "px-6", "py-4", "font-medium", "w-32", "text-center"], [1, "px-6", "py-4", "font-medium", "w-32", "text-left"], [1, "divide-y", "divide-border/50", "bg-card"], ["class", "group hover:bg-muted/30 transition-colors", 4, "ngFor", "ngForOf"], [4, "ngIf"], [1, "group", "hover:bg-muted/30", "transition-colors"], [1, "px-6", "py-4", "font-mono", "text-muted-foreground"], [1, "px-6", "py-4", "font-medium", "text-foreground"], [1, "px-6", "py-4", "text-muted-foreground", "dir-ltr", "text-right", "font-mono"], [1, "px-6", "py-4", "text-center"], ["class", "w-6 h-6 rounded-full border border-border shadow-sm mx-auto", 3, "background-color", "title", 4, "ngIf"], ["class", "text-muted-foreground text-xs", 4, "ngIf"], [1, "text-muted-foreground"], [1, "px-6", "py-4"], [1, "flex", "items-center", "justify-end", "gap-2", "opacity-0", "group-hover:opacity-100", "transition-opacity"], [1, "btn", "btn-icon", "btn-ghost", "btn-sm", "text-primary", "hover:text-primary-foreground", "hover:bg-primary", 3, "click"], [1, "material-icons", "text-lg"], [1, "btn", "btn-icon", "btn-ghost", "btn-sm", "text-muted-foreground", "hover:text-destructive-foreground", "hover:bg-destructive", 3, "click"], [1, "w-6", "h-6", "rounded-full", "border", "border-border", "shadow-sm", "mx-auto", 3, "title"], [1, "text-muted-foreground", "text-xs"], ["colspan", "6", 1, "px-6", "py-12", "text-center", "text-muted-foreground"], [1, "modal-overlay"], [1, "modal", "animate-scale-in"], [1, "modal-header"], [1, "font-bold", "text-lg", "text-heading-foreground"], [1, "btn", "btn-ghost", "btn-icon", "btn-sm", "rounded-full", 3, "click"], [1, "material-icons"], [1, "modal-body"], [1, "space-y-4", 3, "ngSubmit", "formGroup"], [1, "space-y-2"], [1, "text-sm", "font-medium", "text-foreground"], [1, "text-destructive"], ["type", "text", "formControlName", "displayValue", "placeholder", "\u0645\u062B\u0644\u0627: \u0642\u0631\u0645\u0632", "autofocus", "", 1, "input", "w-full"], ["type", "text", "formControlName", "value", "placeholder", "e.g. #FF0000 or red", 1, "input", "w-full", "ltr-input"], ["type", "color", "formControlName", "hexCode", 1, "h-10", "w-12", "p-1", "rounded", "border", "border-input", "cursor-pointer", "bg-background"], ["type", "text", "formControlName", "hexCode", "placeholder", "#000000", 1, "input", "flex-1", "ltr-input", "uppercase"], ["type", "number", "formControlName", "sortOrder", "placeholder", "0", 1, "input", "w-full"], [1, "modal-footer", "bg-muted/10"], [1, "btn", "btn-ghost", "btn-sm", 3, "click"], [1, "btn", "btn-primary", "btn-sm", "min-w-[80px]", 3, "click", "disabled"], ["class", "spinner spinner-sm mr-2 border-white", 4, "ngIf"], [1, "spinner", "spinner-sm", "mr-2", "border-white"]], template: function (u, a) { u & 1 && f(0, jn, 41, 4, "div", 0)(1, $n, 38, 4, "div", 1), u & 2 && (l("ngIf", a.attributeType), d(), l("ngIf", a.isModalOpen)) }, dependencies: [A, I, _, ie, Q, H, se, V, J, Y, X, L, T], encapsulation: 2 }); let n = s; return n })(); var rt = (() => { let s = class s { constructor(r) { this.http = r, this.apiUrl = `${R.API_URL}admin/discounts` } getDiscounts(r = !1, u = 1, a = 20) { let m = new K().set("includeExpired", r.toString()).set("page", u.toString()).set("pageSize", a.toString()); return this.http.get(this.apiUrl, { params: m }) } getDiscountById(r) { return this.http.get(`${this.apiUrl}/${r}`) } createDiscount(r) { return this.http.post(this.apiUrl, r) } updateDiscount(r, u) { return this.http.put(`${this.apiUrl}/${r}`, u) } deleteDiscount(r) { return this.http.delete(`${this.apiUrl}/${r}`) } getDiscountUsages(r, u = 1, a = 20) { let m = new K().set("page", u.toString()).set("pageSize", a.toString()); return this.http.get(`${this.apiUrl}/${r}/usages`, { params: m }) } }; s.\u0275fac = function (u) { return new (u || s)(B(z)) }, s.\u0275prov = G({ token: s, factory: s.\u0275fac, providedIn: "root" }); let n = s; return n })(); var Rn = n => ["/admin/discounts/edit", n]; function Gn(n, s) { if (n & 1) { let o = E(); t(0, "tr", 18)(1, "td", 19), i(2), e(), t(3, "td", 20)(4, "span", 21), i(5), e()(), t(6, "td", 22), i(7), e(), t(8, "td", 23), i(9), e(), t(10, "td", 24), i(11), F(12, "date"), e(), t(13, "td", 25)(14, "span", 26), i(15), e()(), t(16, "td", 20)(17, "div", 27)(18, "a", 28)(19, "span", 29), i(20, "edit"), e()(), t(21, "button", 30), v("click", function () { let u = C(o).$implicit, a = p(); return S(a.deleteDiscount(u.id)) }), t(22, "span", 29), i(23, "delete"), e()()()()() } if (n & 2) { let o = s.$implicit; d(2), b(o.code), d(3), g("%", o.percentage), d(2), b(o.usedCount), d(2), g(" ", o.usageLimit ? o.usageLimit : "\u221E", " "), d(2), g(" ", o.expiresAt ? he(12, 8, o.expiresAt, "shortDate") : "\u0646\u0627\u0645\u062D\u062F\u0648\u062F", " "), d(3), l("ngClass", o.isActive ? "badge-success" : "badge-destructive"), d(), g(" ", o.isActive ? "\u0641\u0639\u0627\u0644" : "\u063A\u06CC\u0631\u0641\u0639\u0627\u0644", " "), d(3), l("routerLink", $(11, Rn, o.id)) } } function Bn(n, s) { n & 1 && (t(0, "tr")(1, "td", 31)(2, "p"), i(3, "\u0647\u06CC\u0686 \u06A9\u062F \u062A\u062E\u0641\u06CC\u0641\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."), e()()()) } function qn(n, s) { n & 1 && (t(0, "div", 32), x(1, "span", 33), e()) } var oi = (() => { let s = class s { constructor(r, u) { this.discountService = r, this.notificationService = u, this.discounts = [], this.usages = [], this.showUsageModal = !1, this.isLoading = !1 } ngOnInit() { this.loadDiscounts() } loadDiscounts() { this.isLoading = !0, this.discountService.getDiscounts(!0).pipe(D(() => this.isLoading = !1)).subscribe(r => { this.discounts = r.items }) } deleteDiscount(r) { confirm("\u062D\u0630\u0641 \u0634\u0648\u062F\u061F") && this.discountService.deleteDiscount(r).subscribe({ next: () => this.loadDiscounts(), error: u => this.notificationService.show(u.error?.message || "\u062E\u0637\u0627", "error") }) } viewUsage(r) { this.discountService.getDiscountUsages(r).subscribe(u => { this.usages = u.items, this.showUsageModal = !0 }) } }; s.\u0275fac = function (u) { return new (u || s)(h(rt), h(k)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-discount-list"]], decls: 36, vars: 3, consts: [[1, "space-y-6", "animate-fade-in"], [1, "flex", "flex-col", "sm:flex-row", "sm:items-center", "justify-between", "gap-4"], [1, "text-2xl", "font-bold", "tracking-tight", "text-heading-foreground", "flex", "items-center", "gap-2"], [1, "material-icons", "text-primary"], [1, "text-sm", "text-muted-foreground", "mt-1"], ["routerLink", "/admin/discounts/new", 1, "btn", "btn-primary", "shadow-lg", "shadow-primary/20", "hover:shadow-primary/40", "transition-all"], [1, "material-icons", "text-sm"], [1, "card", "overflow-hidden", "border", "border-border", "shadow-sm"], [1, "overflow-x-auto"], [1, "w-full", "text-sm", "text-right"], [1, "bg-muted/50", "border-b", "border-border", "text-muted-foreground"], [1, "px-6", "py-4", "font-medium"], [1, "px-6", "py-4", "font-medium", "text-center"], [1, "px-6", "py-4", "font-medium", "w-40", "text-left"], [1, "divide-y", "divide-border/50", "bg-card"], ["class", "group hover:bg-muted/30 transition-colors", 4, "ngFor", "ngForOf"], [4, "ngIf"], ["class", "p-12 text-center", 4, "ngIf"], [1, "group", "hover:bg-muted/30", "transition-colors"], [1, "px-6", "py-4", "font-mono", "font-bold", "text-lg", "text-primary", "tracking-wider", "dir-ltr", "text-right"], [1, "px-6", "py-4"], [1, "badge", "badge-secondary", "text-sm"], [1, "px-6", "py-4", "text-center", "font-mono", "text-foreground"], [1, "px-6", "py-4", "text-center", "font-mono", "text-muted-foreground"], [1, "px-6", "py-4", "text-muted-foreground", "text-xs", "font-mono"], [1, "px-6", "py-4", "text-center"], [1, "badge", 3, "ngClass"], [1, "flex", "items-center", "justify-end", "gap-2", "opacity-0", "group-hover:opacity-100", "transition-opacity"], [1, "btn", "btn-icon", "btn-ghost", "btn-sm", "text-primary", "hover:text-primary-foreground", "hover:bg-primary", 3, "routerLink"], [1, "material-icons", "text-lg"], [1, "btn", "btn-icon", "btn-ghost", "btn-sm", "text-muted-foreground", "hover:text-destructive-foreground", "hover:bg-destructive", 3, "click"], ["colspan", "7", 1, "px-6", "py-12", "text-center", "text-muted-foreground"], [1, "p-12", "text-center"], [1, "spinner", "spinner-lg", "text-primary"]], template: function (u, a) { u & 1 && (t(0, "div", 0)(1, "div", 1)(2, "div")(3, "h1", 2)(4, "span", 3), i(5, "percent"), e(), i(6, " \u06A9\u062F\u0647\u0627\u06CC \u062A\u062E\u0641\u06CC\u0641 "), e(), t(7, "p", 4), i(8, "\u0645\u062F\u06CC\u0631\u06CC\u062A \u06A9\u0645\u067E\u06CC\u0646\u200C\u0647\u0627 \u0648 \u06A9\u062F\u0647\u0627\u06CC \u062A\u062E\u0641\u06CC\u0641"), e()(), t(9, "a", 5)(10, "span", 6), i(11, "add"), e(), i(12, " \u06A9\u062F \u062A\u062E\u0641\u06CC\u0641 \u062C\u062F\u06CC\u062F "), e()(), t(13, "div", 7)(14, "div", 8)(15, "table", 9)(16, "thead", 10)(17, "tr")(18, "th", 11), i(19, "\u06A9\u062F \u062A\u062E\u0641\u06CC\u0641"), e(), t(20, "th", 11), i(21, "\u062F\u0631\u0635\u062F"), e(), t(22, "th", 12), i(23, "\u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u0634\u062F\u0647"), e(), t(24, "th", 12), i(25, "\u0645\u062D\u062F\u0648\u062F\u06CC\u062A"), e(), t(26, "th", 11), i(27, "\u0627\u0646\u0642\u0636\u0627"), e(), t(28, "th", 12), i(29, "\u0648\u0636\u0639\u06CC\u062A"), e(), t(30, "th", 13), i(31, "\u0639\u0645\u0644\u06CC\u0627\u062A"), e()()(), t(32, "tbody", 14), f(33, Gn, 24, 13, "tr", 15)(34, Bn, 4, 0, "tr", 16), e()()(), f(35, qn, 2, 0, "div", 17), e()()), u & 2 && (d(33), l("ngForOf", a.discounts), d(), l("ngIf", !a.isLoading && a.discounts.length === 0), d(), l("ngIf", a.isLoading)) }, dependencies: [A, q, I, _, L, T, ve], encapsulation: 2 }); let n = s; return n })(); function zn(n, s) { n & 1 && x(0, "span", 31) } var ft = (() => { let s = class s { constructor(r, u, a, m, c) { this.fb = r, this.route = u, this.router = a, this.discountService = m, this.notificationService = c, this.isEditMode = !1, this.id = null, this.isSubmitting = !1, this.form = this.fb.group({ code: ["", [w.required]], percentage: [0, [w.required, w.min(0), w.max(100)]], maxDiscountAmount: [null], minOrderAmount: [null], usageLimit: [null], expiresAt: [null], isActive: [!0], rowVersion: [null] }) } ngOnInit() { let r = this.route.snapshot.paramMap.get("id"); r && (this.id = +r, this.isEditMode = !0, this.loadDiscount()) } loadDiscount() { this.id && this.discountService.getDiscountById(this.id).subscribe(r => { this.form.patchValue(r) }) } onSubmit() { if (this.form.invalid) return; this.isSubmitting = !0, (this.isEditMode && this.id ? this.discountService.updateDiscount(this.id, this.form.value) : this.discountService.createDiscount(this.form.value)).pipe(D(() => this.isSubmitting = !1)).subscribe({ next: () => { this.notificationService.show("\u06A9\u062F \u062A\u062E\u0641\u06CC\u0641 \u0630\u062E\u06CC\u0631\u0647 \u0634\u062F", "success"), this.router.navigate(["/admin/discounts"]) }, error: u => this.notificationService.show(u.error?.message || "\u062E\u0637\u0627", "error") }) } }; s.\u0275fac = function (u) { return new (u || s)(h(we), h(ne), h(Ce), h(rt), h(k)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-discount-form"]], decls: 68, vars: 5, consts: [[1, "max-w-3xl", "mx-auto", "animate-fade-in-up"], [1, "flex", "items-center", "justify-between", "mb-6"], [1, "text-2xl", "font-bold", "text-heading-foreground"], ["routerLink", "/admin/discounts", 1, "btn", "btn-outline", "btn-sm", "gap-2"], [1, "material-icons", "text-sm"], [1, "card", "p-6", "space-y-8", "shadow-md", "border-border", 3, "ngSubmit", "formGroup"], [1, "space-y-4"], [1, "text-lg", "font-semibold", "border-b", "border-border", "pb-2", "text-foreground"], [1, "grid", "gap-6", "md:grid-cols-2"], [1, "form-group"], [1, "form-label"], [1, "text-destructive"], [1, "input-group"], [1, "input-addon", "font-mono", "text-muted-foreground"], ["type", "text", "formControlName", "code", "placeholder", "OFF2024", 1, "input", "ltr-input", "uppercase", "tracking-wider", "font-bold"], ["type", "number", "formControlName", "percentage", "placeholder", "0-100", "min", "0", "max", "100", 1, "input"], [1, "input-addon"], ["type", "number", "formControlName", "maxDiscountAmount", "placeholder", "\u062A\u0648\u0645\u0627\u0646", 1, "input"], [1, "form-hint"], ["type", "number", "formControlName", "minOrderAmount", "placeholder", "\u062A\u0648\u0645\u0627\u0646", 1, "input"], ["type", "number", "formControlName", "usageLimit", "placeholder", "\u0646\u0627\u0645\u062D\u062F\u0648\u062F", 1, "input"], ["type", "date", "formControlName", "expiresAt", 1, "input", "ltr-input"], [1, "flex", "items-center", "gap-3", "p-4", "bg-muted/20", "rounded-lg", "border", "border-border/50"], [1, "flex", "items-center"], ["type", "checkbox", "id", "isActive", "formControlName", "isActive", 1, "switch"], ["for", "isActive", 1, "switch-thumb"], ["for", "isActive", 1, "text-sm", "font-medium", "cursor-pointer", "select-none", "text-foreground"], [1, "flex", "justify-end", "gap-3", "border-t", "border-border", "pt-6"], ["routerLink", "/admin/discounts", 1, "btn", "btn-ghost", "text-muted-foreground", "hover:text-foreground"], ["type", "submit", 1, "btn", "btn-primary", "min-w-[120px]", "shadow-button", 3, "disabled"], ["class", "spinner spinner-sm mr-2 border-white", 4, "ngIf"], [1, "spinner", "spinner-sm", "mr-2", "border-white"]], template: function (u, a) { u & 1 && (t(0, "div", 0)(1, "div", 1)(2, "div")(3, "h1", 2), i(4), e()(), t(5, "a", 3)(6, "span", 4), i(7, "arrow_forward"), e(), i(8, " \u0628\u0627\u0632\u06AF\u0634\u062A "), e()(), t(9, "form", 5), v("ngSubmit", function () { return a.onSubmit() }), t(10, "div", 6)(11, "h3", 7), i(12, "\u0627\u0637\u0644\u0627\u0639\u0627\u062A \u067E\u0627\u06CC\u0647"), e(), t(13, "div", 8)(14, "div", 9)(15, "label", 10), i(16, "\u06A9\u062F \u062A\u062E\u0641\u06CC\u0641 "), t(17, "span", 11), i(18, "*"), e()(), t(19, "div", 12)(20, "span", 13), i(21, "#"), e(), x(22, "input", 14), e()(), t(23, "div", 9)(24, "label", 10), i(25, "\u062F\u0631\u0635\u062F \u062A\u062E\u0641\u06CC\u0641 "), t(26, "span", 11), i(27, "*"), e()(), t(28, "div", 12), x(29, "input", 15), t(30, "span", 16), i(31, "%"), e()()()()(), t(32, "div", 6)(33, "h3", 7), i(34, "\u0645\u062D\u062F\u0648\u062F\u06CC\u062A\u200C\u0647\u0627"), e(), t(35, "div", 8)(36, "div", 9)(37, "label", 10), i(38, "\u062D\u062F\u0627\u06A9\u062B\u0631 \u0645\u0628\u0644\u063A \u062A\u062E\u0641\u06CC\u0641"), e(), x(39, "input", 17), t(40, "p", 18), i(41, "\u062D\u062F\u0627\u06A9\u062B\u0631 \u0645\u0628\u0644\u063A\u06CC \u06A9\u0647 \u0627\u0632 \u0641\u0627\u06A9\u062A\u0648\u0631 \u06A9\u0633\u0631 \u0645\u06CC\u200C\u0634\u0648\u062F"), e()(), t(42, "div", 9)(43, "label", 10), i(44, "\u062D\u062F\u0627\u0642\u0644 \u0645\u0628\u0644\u063A \u0633\u0641\u0627\u0631\u0634"), e(), x(45, "input", 19), t(46, "p", 18), i(47, "\u06A9\u062F \u062A\u062E\u0641\u06CC\u0641 \u0628\u0631\u0627\u06CC \u0633\u0641\u0627\u0631\u0634\u200C\u0647\u0627\u06CC \u06A9\u0645\u062A\u0631 \u0627\u0632 \u0627\u06CC\u0646 \u0645\u0628\u0644\u063A \u0627\u0639\u0645\u0627\u0644 \u0646\u0645\u06CC\u200C\u0634\u0648\u062F"), e()(), t(48, "div", 9)(49, "label", 10), i(50, "\u062A\u0639\u062F\u0627\u062F \u0645\u062C\u0627\u0632 \u0627\u0633\u062A\u0641\u0627\u062F\u0647"), e(), x(51, "input", 20), e(), t(52, "div", 9)(53, "label", 10), i(54, "\u062A\u0627\u0631\u06CC\u062E \u0627\u0646\u0642\u0636\u0627"), e(), x(55, "input", 21), e()()(), t(56, "div", 22)(57, "div", 23), x(58, "input", 24)(59, "label", 25), e(), t(60, "label", 26), i(61, " \u0641\u0639\u0627\u0644 \u0633\u0627\u0632\u06CC \u06A9\u062F \u062A\u062E\u0641\u06CC\u0641 "), e()(), t(62, "div", 27)(63, "a", 28), i(64, "\u0627\u0646\u0635\u0631\u0627\u0641"), e(), t(65, "button", 29), f(66, zn, 1, 0, "span", 30), i(67), e()()()()), u & 2 && (d(4), g(" ", a.isEditMode ? "\u0648\u06CC\u0631\u0627\u06CC\u0634" : "\u0627\u06CC\u062C\u0627\u062F", " \u06A9\u062F \u062A\u062E\u0641\u06CC\u0641 "), d(5), l("formGroup", a.form), d(56), l("disabled", a.form.invalid || a.isSubmitting), d(), l("ngIf", a.isSubmitting), d(), g(" ", a.isEditMode ? "\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC" : "\u0627\u06CC\u062C\u0627\u062F \u06A9\u062F", " ")) }, dependencies: [A, _, ie, Q, H, se, pe, V, J, Me, kt, Y, X, L, T], encapsulation: 2 }); let n = s; return n })(); var ai = (() => { let s = class s { constructor(r) { this.http = r, this.apiUrl = `${R.API_URL}admin/reviews` } getReviewsByStatus(r = "Pending", u = 1, a = 20) { let m = new K().set("status", r).set("page", u.toString()).set("pageSize", a.toString()); return this.http.get(this.apiUrl, { params: m }) } updateReviewStatus(r, u) { let a = { status: u }; return this.http.patch(`${this.apiUrl}/${r}/status`, a) } deleteReview(r) { return this.http.delete(`${this.apiUrl}/${r}`) } }; s.\u0275fac = function (u) { return new (u || s)(B(z)) }, s.\u0275prov = G({ token: s, factory: s.\u0275fac, providedIn: "root" }); let n = s; return n })(); var Hn = () => [1, 2, 3, 4, 5]; function Kn(n, s) { n & 1 && (t(0, "div", 14), x(1, "span", 15), e()) } function Jn(n, s) { n & 1 && (t(0, "div", 16)(1, "span", 17), i(2, "chat_bubble_outline"), e(), t(3, "p"), i(4, "\u0646\u0638\u0631\u06CC \u0628\u0627 \u0627\u06CC\u0646 \u0648\u0636\u0639\u06CC\u062A \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."), e()()) } function Qn(n, s) { n & 1 && (t(0, "span", 39)(1, "span", 40), i(2, "verified"), e(), i(3, " \u062E\u0631\u06CC\u062F\u0627\u0631 "), e()) } function Yn(n, s) { if (n & 1 && (t(0, "span", 38), i(1, "star"), e()), n & 2) { let o = s.$implicit, r = p().$implicit; U("text-muted", o > r.rating) } } function Xn(n, s) { if (n & 1) { let o = E(); t(0, "button", 41), v("click", function () { C(o); let u = p().$implicit, a = p(2); return S(a.updateStatus(u.id, "Approved")) }), t(1, "span", 42), i(2, "check"), e(), i(3, " \u062A\u0627\u06CC\u06CC\u062F "), e() } } function Zn(n, s) { if (n & 1) { let o = E(); t(0, "button", 43), v("click", function () { C(o); let u = p().$implicit, a = p(2); return S(a.updateStatus(u.id, "Rejected")) }), t(1, "span", 42), i(2, "block"), e(), i(3, " \u0631\u062F \u06A9\u0631\u062F\u0646 "), e() } } function e0(n, s) { if (n & 1) { let o = E(); t(0, "div", 20)(1, "div", 21)(2, "div", 22)(3, "div", 23), i(4), e(), t(5, "div")(6, "div", 24)(7, "span", 25), i(8), e(), f(9, Qn, 4, 0, "span", 26), e(), t(10, "div", 27)(11, "div", 28), f(12, Yn, 2, 2, "span", 29), e(), t(13, "span", 30), i(14, "\u2022"), e(), t(15, "span", 31), i(16), e()()()(), t(17, "span", 32), i(18), F(19, "date"), e()(), t(20, "p", 33), i(21), e(), t(22, "div", 34), f(23, Xn, 4, 0, "button", 35)(24, Zn, 4, 0, "button", 36), t(25, "button", 37), v("click", function () { let u = C(o).$implicit, a = p(2); return S(a.deleteReview(u.id)) }), t(26, "span", 38), i(27, "delete"), e()()()() } if (n & 2) { let o = s.$implicit; d(4), g(" ", (o.userName || "?").charAt(0), " "), d(4), b(o.title), d(), l("ngIf", o.isVerifiedPurchase), d(3), l("ngForOf", Be(12, Hn)), d(4), b(o.userName), d(2), b(he(19, 9, o.createdAt, "yyyy/MM/dd HH:mm")), d(3), b(o.comment), d(2), l("ngIf", o.status === "Pending" || o.status === "Rejected"), d(), l("ngIf", o.status === "Pending" || o.status === "Approved") } } function t0(n, s) { if (n & 1 && (t(0, "div", 18), f(1, e0, 28, 13, "div", 19), e()), n & 2) { let o = p(); d(), l("ngForOf", o.reviews) } } var si = (() => { let s = class s { constructor(r, u) { this.reviewService = r, this.notificationService = u, this.reviews = [], this.isLoading = !0, this.statusFilter = "Pending" } ngOnInit() { this.loadReviews() } loadReviews() { this.isLoading = !0, this.reviewService.getReviewsByStatus(this.statusFilter).subscribe({ next: r => { this.reviews = r.items, this.isLoading = !1 }, error: () => this.isLoading = !1 }) } updateStatus(r, u) { this.reviewService.updateReviewStatus(r, u).subscribe({ next: () => { this.notificationService.show(`\u0648\u0636\u0639\u06CC\u062A \u0628\u0647 ${u} \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F`, "success"), this.loadReviews() }, error: () => this.notificationService.show("\u062E\u0637\u0627", "error") }) } deleteReview(r) { confirm("\u062D\u0630\u0641 \u0634\u0648\u062F\u061F") && this.reviewService.deleteReview(r).subscribe({ next: () => { this.notificationService.show("\u062D\u0630\u0641 \u0634\u062F", "success"), this.loadReviews() }, error: () => this.notificationService.show("\u062E\u0637\u0627", "error") }) } }; s.\u0275fac = function (u) { return new (u || s)(h(ai), h(k)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-review-list"]], decls: 20, vars: 4, consts: [[1, "space-y-6", "animate-fade-in"], [1, "flex", "items-center", "justify-between"], [1, "text-2xl", "font-bold", "text-heading-foreground", "flex", "items-center", "gap-2"], [1, "material-icons", "text-primary"], [1, "flex", "items-center", "gap-2", "bg-card", "p-1", "rounded-lg", "border", "border-border", "shadow-sm"], [1, "text-xs", "text-muted-foreground", "px-2"], [1, "h-9", "rounded-md", "border-0", "bg-transparent", "py-0", "pl-2", "pr-8", "text-sm", "focus:ring-0", "cursor-pointer", "hover:bg-muted/50", "transition-colors", 3, "ngModelChange", "change", "ngModel"], ["value", "Pending"], ["value", "Approved"], ["value", "Rejected"], [1, "card", "overflow-hidden", "border", "border-border", "shadow-sm"], ["class", "flex justify-center p-12", 4, "ngIf"], ["class", "p-16 text-center text-muted-foreground flex flex-col items-center gap-3", 4, "ngIf"], ["class", "divide-y divide-border/50 bg-card", 4, "ngIf"], [1, "flex", "justify-center", "p-12"], [1, "spinner", "spinner-xl", "text-primary"], [1, "p-16", "text-center", "text-muted-foreground", "flex", "flex-col", "items-center", "gap-3"], [1, "material-icons", "text-5xl", "opacity-20"], [1, "divide-y", "divide-border/50", "bg-card"], ["class", "p-6 hover:bg-muted/10 transition-colors group", 4, "ngFor", "ngForOf"], [1, "p-6", "hover:bg-muted/10", "transition-colors", "group"], [1, "flex", "flex-col", "sm:flex-row", "sm:justify-between", "sm:items-start", "gap-4", "mb-3"], [1, "flex", "items-start", "gap-3"], [1, "w-10", "h-10", "rounded-full", "bg-primary/10", "flex", "items-center", "justify-center", "text-primary", "font-bold"], [1, "flex", "items-center", "gap-2"], [1, "font-bold", "text-foreground"], ["class", "badge badge-success text-[10px] h-5 px-1.5 gap-0.5", 4, "ngIf"], [1, "flex", "items-center", "gap-1", "mt-1"], [1, "flex", "text-warning"], ["class", "material-icons text-sm", 3, "text-muted", 4, "ngFor", "ngForOf"], [1, "text-xs", "text-muted-foreground", "mx-1"], [1, "text-xs", "text-muted-foreground"], [1, "text-xs", "text-muted-foreground", "font-mono", "bg-muted/50", "px-2", "py-1", "rounded-md"], [1, "text-sm", "text-foreground/80", "leading-relaxed", "pr-[3.25rem]", "pl-4", "mb-4"], [1, "flex", "justify-end", "items-center", "gap-2", "border-t", "border-border/30", "pt-3", "mt-2"], ["class", "btn btn-success btn-sm shadow-sm", 3, "click", 4, "ngIf"], ["class", "btn btn-warning btn-sm shadow-sm", 3, "click", 4, "ngIf"], [1, "btn", "btn-destructive", "btn-sm", "btn-icon", "shadow-sm", "ml-2", 3, "click"], [1, "material-icons", "text-sm"], [1, "badge", "badge-success", "text-[10px]", "h-5", "px-1.5", "gap-0.5"], [1, "material-icons", "text-[12px]"], [1, "btn", "btn-success", "btn-sm", "shadow-sm", 3, "click"], [1, "material-icons", "text-sm", "me-1"], [1, "btn", "btn-warning", "btn-sm", "shadow-sm", 3, "click"]], template: function (u, a) { u & 1 && (t(0, "div", 0)(1, "div", 1)(2, "h1", 2)(3, "span", 3), i(4, "reviews"), e(), i(5, " \u0645\u062F\u06CC\u0631\u06CC\u062A \u0646\u0638\u0631\u0627\u062A "), e(), t(6, "div", 4)(7, "span", 5), i(8, "\u0641\u06CC\u0644\u062A\u0631:"), e(), t(9, "select", 6), ae("ngModelChange", function (c) { return oe(a.statusFilter, c) || (a.statusFilter = c), c }), v("change", function () { return a.loadReviews() }), t(10, "option", 7), i(11, "\u062F\u0631 \u0627\u0646\u062A\u0638\u0627\u0631 \u062A\u0627\u06CC\u06CC\u062F"), e(), t(12, "option", 8), i(13, "\u062A\u0627\u06CC\u06CC\u062F \u0634\u062F\u0647"), e(), t(14, "option", 9), i(15, "\u0631\u062F \u0634\u062F\u0647"), e()()()(), t(16, "div", 10), f(17, Kn, 2, 0, "div", 11)(18, Jn, 5, 0, "div", 12)(19, t0, 2, 1, "div", 13), e()()), u & 2 && (d(9), ue("ngModel", a.statusFilter), d(8), l("ngIf", a.isLoading), d(), l("ngIf", !a.isLoading && a.reviews.length === 0), d(), l("ngIf", !a.isLoading && a.reviews.length > 0)) }, dependencies: [A, I, _, ge, ee, te, Z, V, fe, ve], encapsulation: 2 }); let n = s; return n })(); function i0(n, s) { n & 1 && (t(0, "div", 14)(1, "span", 15), i(2, "sync"), e()()) } function r0(n, s) { if (n & 1 && (t(0, "tr", 24)(1, "td", 25), i(2), F(3, "date"), e(), t(4, "td", 26)(5, "div", 27), i(6), e(), t(7, "div", 28), i(8), e()(), t(9, "td", 26)(10, "span", 29), i(11), e()(), t(12, "td", 30), i(13), e(), t(14, "td", 31), i(15), e(), t(16, "td", 32)(17, "div", 33), i(18), e(), t(19, "div", 34), i(20), e()()()), n & 2) { let o = s.$implicit, r = p(2); d(2), g(" ", he(3, 15, o.createdAt, "yyyy/MM/dd HH:mm"), " "), d(4), b(o.productName), d(2), g(" SKU: ", o.variantSku, " "), d(2), l("ngClass", r.getTypeClass(o.transactionType)), d(), g(" ", o.transactionType, " "), d(), U("text-success", o.quantityChange > 0)("text-destructive", o.quantityChange < 0), d(), xe(" ", o.quantityChange > 0 ? "+" : "", "", o.quantityChange, " "), d(2), b(o.stockAfter), d(3), b(o.userName || "System"), d(), l("title", o.notes), d(), b(o.notes) } } function n0(n, s) { n & 1 && (t(0, "tr")(1, "td", 35)(2, "p"), i(3, "\u0647\u06CC\u0686 \u062A\u0631\u0627\u06A9\u0646\u0634\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F."), e()()()) } function u0(n, s) { if (n & 1 && (t(0, "div", 16)(1, "table", 17)(2, "thead", 18)(3, "tr")(4, "th", 19), i(5, "\u062A\u0627\u0631\u06CC\u062E"), e(), t(6, "th", 19), i(7, "\u0645\u062D\u0635\u0648\u0644"), e(), t(8, "th", 19), i(9, "\u0646\u0648\u0639"), e(), t(10, "th", 20), i(11, "\u062A\u063A\u06CC\u06CC\u0631"), e(), t(12, "th", 20), i(13, "\u0645\u0648\u062C\u0648\u062F\u06CC \u0646\u0647\u0627\u06CC\u06CC"), e(), t(14, "th", 19), i(15, "\u06A9\u0627\u0631\u0628\u0631 / \u06CC\u0627\u062F\u062F\u0627\u0634\u062A"), e()()(), t(16, "tbody", 21), f(17, r0, 21, 18, "tr", 22)(18, n0, 4, 0, "tr", 23), e()()()), n & 2) { let o = p(); d(17), l("ngForOf", o.transactions), d(), l("ngIf", o.transactions.length === 0) } } var di = (() => { let s = class s { constructor(r) { this.inventoryService = r, this.transactions = [], this.isLoading = !0, this.filterType = "" } ngOnInit() { this.loadTransactions() } loadTransactions() { this.isLoading = !0, this.inventoryService.getTransactions(void 0, this.filterType || void 0).subscribe({ next: r => { this.transactions = r.items, this.isLoading = !1 }, error: () => this.isLoading = !1 }) } getTypeClass(r) { switch (r.toLowerCase()) { case "purchase": return "bg-success/10 text-success"; case "sale": return "bg-destructive/10 text-destructive"; case "adjustment": return "bg-warning/10 text-warning"; default: return "bg-muted text-muted-foreground" } } }; s.\u0275fac = function (u) { return new (u || s)(h(tt)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-inventory-transactions"]], decls: 21, vars: 3, consts: [[1, "space-y-6", "animate-fade-in"], [1, "text-2xl", "font-bold", "text-heading-foreground"], [1, "card", "p-4", "bg-muted/20", "flex", "flex-wrap", "gap-4", "items-end", "border", "border-border"], [1, "space-y-1"], [1, "text-xs", "font-medium", "text-foreground"], [1, "input", "w-40", "bg-background", 3, "ngModelChange", "ngModel"], ["value", ""], ["value", "Purchase"], ["value", "Sale"], ["value", "Adjustment"], [1, "btn", "btn-primary", "shadow-sm", 3, "click"], [1, "card", "overflow-hidden", "border", "border-border", "shadow-sm"], ["class", "flex justify-center p-10", 4, "ngIf"], ["class", "overflow-x-auto", 4, "ngIf"], [1, "flex", "justify-center", "p-10"], [1, "material-icons", "animate-spin", "text-primary", "text-4xl"], [1, "overflow-x-auto"], [1, "w-full", "text-sm", "text-right"], [1, "bg-muted/50", "border-b", "border-border", "text-muted-foreground"], [1, "p-4", "font-medium"], [1, "p-4", "font-medium", "text-center"], [1, "divide-y", "divide-border/50", "bg-card"], ["class", "border-b border-border hover:bg-muted/20 transition-colors", 4, "ngFor", "ngForOf"], [4, "ngIf"], [1, "border-b", "border-border", "hover:bg-muted/20", "transition-colors"], [1, "p-4", "whitespace-nowrap", "text-muted-foreground", "dir-ltr", "text-right"], [1, "p-4"], [1, "font-medium", "text-foreground"], [1, "text-xs", "text-muted-foreground", "font-mono", "mt-0.5"], [1, "px-2", "py-1", "rounded-full", "text-xs", "font-bold", "badge", 3, "ngClass"], [1, "p-4", "font-bold", "text-center", "dir-ltr"], [1, "p-4", "text-center", "font-mono", "text-foreground"], [1, "p-4", "text-xs"], [1, "font-semibold", "text-foreground"], [1, "text-muted-foreground", "truncate", "max-w-[200px]", 3, "title"], ["colspan", "6", 1, "p-12", "text-center", "text-muted-foreground"]], template: function (u, a) { u & 1 && (t(0, "div", 0)(1, "h1", 1), i(2, "\u062A\u0627\u0631\u06CC\u062E\u0686\u0647 \u062A\u0631\u0627\u06A9\u0646\u0634\u200C\u0647\u0627\u06CC \u0627\u0646\u0628\u0627\u0631"), e(), t(3, "div", 2)(4, "div", 3)(5, "label", 4), i(6, "\u0646\u0648\u0639 \u062A\u0631\u0627\u06A9\u0646\u0634"), e(), t(7, "select", 5), ae("ngModelChange", function (c) { return oe(a.filterType, c) || (a.filterType = c), c }), t(8, "option", 6), i(9, "\u0647\u0645\u0647"), e(), t(10, "option", 7), i(11, "\u062E\u0631\u06CC\u062F (\u0627\u0641\u0632\u0627\u06CC\u0634)"), e(), t(12, "option", 8), i(13, "\u0641\u0631\u0648\u0634 (\u06A9\u0627\u0647\u0634)"), e(), t(14, "option", 9), i(15, "\u0627\u0635\u0644\u0627\u062D \u062F\u0633\u062A\u06CC"), e()()(), t(16, "button", 10), v("click", function () { return a.loadTransactions() }), i(17, "\u0641\u06CC\u0644\u062A\u0631"), e()(), t(18, "div", 11), f(19, i0, 3, 0, "div", 12)(20, u0, 19, 2, "div", 13), e()()), u & 2 && (d(7), ue("ngModel", a.filterType), d(12), l("ngIf", a.isLoading), d(), l("ngIf", !a.isLoading)) }, dependencies: [A, q, I, _, ge, ee, te, Z, V, fe, ve], encapsulation: 2 }); let n = s; return n })(); var li = (() => { let s = class s { constructor(r) { this.http = r, this.apiUrl = `${R.API_URL}admin/adminsearch`, this.requestTimeout = 3e5 } syncAllData() { let r = new ut({ "Content-Type": "application/json" }); return this.http.post(`${this.apiUrl}/sync`, {}, { headers: r }).pipe(je(this.requestTimeout), ce(this.handleError)) } recreateIndices() { let r = new ut({ "Content-Type": "application/json" }); return this.http.post(`${this.apiUrl}/recreate-indices`, {}, { headers: r }).pipe(je(this.requestTimeout), ce(this.handleError)) } getIndexStats() { return this.http.get(`${this.apiUrl}/stats`).pipe(je(3e4), ce(this.handleError)) } handleError(r) { let u = "\u062E\u0637\u0627\u06CC \u0646\u0627\u0645\u0634\u062E\u0635 \u0631\u062E \u062F\u0627\u062F\u0647 \u0627\u0633\u062A"; return r.error instanceof ErrorEvent ? u = `\u062E\u0637\u0627\u06CC \u0634\u0628\u06A9\u0647: ${r.error.message}` : r.status === 0 ? u = "\u062E\u0637\u0627 \u062F\u0631 \u0627\u062A\u0635\u0627\u0644 \u0628\u0647 \u0633\u0631\u0648\u0631. \u0644\u0637\u0641\u0627\u064B \u0627\u062A\u0635\u0627\u0644 \u0627\u06CC\u0646\u062A\u0631\u0646\u062A \u062E\u0648\u062F \u0631\u0627 \u0628\u0631\u0631\u0633\u06CC \u06A9\u0646\u06CC\u062F." : r.status === 404 ? u = "\u0633\u0631\u0648\u06CC\u0633 \u0645\u0648\u0631\u062F \u0646\u0638\u0631 \u06CC\u0627\u0641\u062A \u0646\u0634\u062F" : r.status === 500 ? u = "\u062E\u0637\u0627\u06CC \u062F\u0627\u062E\u0644\u06CC \u0633\u0631\u0648\u0631" : r.status === 503 ? u = "\u0633\u0631\u0648\u06CC\u0633 \u0645\u0648\u0642\u062A\u0627\u064B \u062F\u0631 \u062F\u0633\u062A\u0631\u0633 \u0646\u06CC\u0633\u062A" : r.error && (typeof r.error == "string" ? u = r.error : r.error.error ? u = r.error.error : r.error.message && (u = r.error.message)), console.error("Admin Search Service Error:", { status: r.status, message: u, error: r }), ht(() => ({ error: u, statusCode: r.status, timestamp: new Date().toISOString() })) } }; s.\u0275fac = function (u) { return new (u || s)(B(z)) }, s.\u0275prov = G({ token: s, factory: s.\u0275fac, providedIn: "root" }); let n = s; return n })(); function a0(n, s) { n & 1 && (t(0, "div", 9)(1, "div", 10), x(2, "span", 11), t(3, "p", 12), i(4, "\u062F\u0631 \u062D\u0627\u0644 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0627\u0637\u0644\u0627\u0639\u0627\u062A..."), e()()()) } function s0(n, s) { if (n & 1 && (t(0, "div", 43)(1, "div", 15)(2, "span", 44), i(3), e(), t(4, "div")(5, "p", 45), i(6), e(), t(7, "p", 46), i(8, "Elasticsearch Index"), e()()(), t(9, "span", 47), i(10), e()()), n & 2) { let o = s.$implicit, r = p(2); d(2), U("text-success", o.exists)("text-error", !o.exists), d(), g(" ", r.getStatusIcon(o.exists), " "), d(3), b(o.index), d(3), U("badge-success", o.exists)("badge-error", !o.exists), d(), g(" ", r.getStatusText(o.exists), " ") } } function d0(n, s) { n & 1 && (t(0, "div", 48)(1, "span", 49), i(2, "inbox"), e(), t(3, "p", 50), i(4, "\u0647\u06CC\u0686 \u0627\u06CC\u0646\u062F\u06A9\u0633\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F"), e(), t(5, "p", 51), i(6, "\u0644\u0637\u0641\u0627\u064B \u0627\u0628\u062A\u062F\u0627 \u0627\u06CC\u0646\u062F\u06A9\u0633\u200C\u0647\u0627 \u0631\u0627 \u0627\u06CC\u062C\u0627\u062F \u06A9\u0646\u06CC\u062F"), e()()) } function l0(n, s) { if (n & 1 && (t(0, "p", 52), i(1), e()), n & 2) { let o = p(2); d(), g(" \u0622\u062E\u0631\u06CC\u0646 \u0647\u0645\u06AF\u0627\u0645\u200C\u0633\u0627\u0632\u06CC: ", o.formatLastActionTime(o.lastSyncTime), " ") } } function m0(n, s) { if (n & 1 && (t(0, "p", 52), i(1), e()), n & 2) { let o = p(2); d(), g(" \u0622\u062E\u0631\u06CC\u0646 \u0628\u0627\u0632\u0633\u0627\u0632\u06CC: ", o.formatLastActionTime(o.lastRecreateTime), " ") } } function c0(n, s) { if (n & 1) { let o = E(); t(0, "div", 13)(1, "div", 14)(2, "div", 15)(3, "div", 16)(4, "span", 17), i(5, "storage"), e()(), t(6, "div")(7, "h2", 18), i(8, "\u0648\u0636\u0639\u06CC\u062A \u0627\u06CC\u0646\u062F\u06A9\u0633\u200C\u0647\u0627"), e(), t(9, "p", 19), i(10, "\u0627\u0637\u0644\u0627\u0639\u0627\u062A \u0627\u06CC\u0646\u062F\u06A9\u0633\u200C\u0647\u0627\u06CC Elasticsearch"), e()()(), t(11, "div", 20), f(12, s0, 11, 11, "div", 21)(13, d0, 7, 0, "div", 22), e()(), t(14, "div", 14)(15, "div", 15)(16, "div", 23)(17, "span", 17), i(18, "settings"), e()(), t(19, "div")(20, "h2", 18), i(21, "\u0639\u0645\u0644\u06CC\u0627\u062A \u0645\u062F\u06CC\u0631\u06CC\u062A\u06CC"), e(), t(22, "p", 19), i(23, "\u0627\u0642\u062F\u0627\u0645\u0627\u062A \u0646\u06AF\u0647\u062F\u0627\u0631\u06CC \u0648 \u0628\u0647\u06CC\u0646\u0647\u200C\u0633\u0627\u0632\u06CC"), e()()(), t(24, "div", 24)(25, "div", 25)(26, "div", 26)(27, "span", 27), i(28, "sync"), e(), t(29, "div", 28)(30, "h3", 29), i(31, "\u0647\u0645\u06AF\u0627\u0645\u200C\u0633\u0627\u0632\u06CC \u062F\u0627\u062F\u0647\u200C\u0647\u0627"), e(), t(32, "p", 30), i(33, " \u062A\u0645\u0627\u0645 \u0645\u062D\u0635\u0648\u0644\u0627\u062A\u060C \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC\u200C\u0647\u0627 \u0648 \u06AF\u0631\u0648\u0647\u200C\u0647\u0627\u06CC \u062F\u0633\u062A\u0647\u200C\u0628\u0646\u062F\u06CC \u0631\u0627 \u0627\u0632 \u067E\u0627\u06CC\u06AF\u0627\u0647 \u062F\u0627\u062F\u0647 \u0627\u0635\u0644\u06CC \u0628\u0627 Elasticsearch \u0647\u0645\u06AF\u0627\u0645 \u0645\u06CC\u200C\u06A9\u0646\u062F. \u0627\u06CC\u0646 \u0639\u0645\u0644\u06CC\u0627\u062A \u0628\u0631\u0627\u06CC \u0628\u0647\u200C\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u062F\u0627\u062F\u0647\u200C\u0647\u0627\u06CC \u0645\u0648\u062C\u0648\u062F \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u0645\u06CC\u200C\u0634\u0648\u062F. "), e(), f(34, l0, 2, 1, "p", 31), e()(), t(35, "button", 32), v("click", function () { C(o); let u = p(); return S(u.syncAllData()) }), t(36, "span", 5), i(37, " sync "), e(), i(38), e()(), t(39, "div", 33)(40, "div", 26)(41, "span", 34), i(42, "refresh"), e(), t(43, "div", 28)(44, "h3", 29), i(45, "\u0628\u0627\u0632\u0633\u0627\u0632\u06CC \u0627\u06CC\u0646\u062F\u06A9\u0633\u200C\u0647\u0627"), e(), t(46, "p", 30), i(47, " \u062A\u0645\u0627\u0645 \u0627\u06CC\u0646\u062F\u06A9\u0633\u200C\u0647\u0627\u06CC Elasticsearch \u0631\u0627 \u062D\u0630\u0641 \u0648 \u0645\u062C\u062F\u062F\u0627\u064B \u0627\u06CC\u062C\u0627\u062F \u0645\u06CC\u200C\u06A9\u0646\u062F. \u0627\u06CC\u0646 \u0639\u0645\u0644\u06CC\u0627\u062A \u0628\u0631\u0627\u06CC \u0631\u0641\u0639 \u0645\u0634\u06A9\u0644\u0627\u062A \u0633\u0627\u062E\u062A\u0627\u0631\u06CC \u06CC\u0627 \u062A\u063A\u06CC\u06CC\u0631 \u062F\u0631 mapping \u0627\u0633\u062A\u0641\u0627\u062F\u0647 \u0645\u06CC\u200C\u0634\u0648\u062F. \u067E\u0633 \u0627\u0632 \u0628\u0627\u0632\u0633\u0627\u0632\u06CC\u060C \u0646\u06CC\u0627\u0632 \u0628\u0647 \u0647\u0645\u06AF\u0627\u0645\u200C\u0633\u0627\u0632\u06CC \u062F\u0627\u0631\u06CC\u062F. "), e(), f(48, m0, 2, 1, "p", 31), e()(), t(49, "div", 35)(50, "span", 5), i(51, "warning"), e(), t(52, "span"), i(53, "\u0647\u0634\u062F\u0627\u0631: \u0627\u06CC\u0646 \u0639\u0645\u0644\u06CC\u0627\u062A \u062A\u0645\u0627\u0645 \u062F\u0627\u062F\u0647\u200C\u0647\u0627\u06CC Elasticsearch \u0631\u0627 \u062D\u0630\u0641 \u0645\u06CC\u200C\u06A9\u0646\u062F!"), e()(), t(54, "button", 36), v("click", function () { C(o); let u = p(); return S(u.recreateIndices()) }), t(55, "span", 5), i(56, " refresh "), e(), i(57), e()()(), t(58, "div", 37)(59, "div", 38)(60, "span", 39), i(61, "info"), e(), t(62, "div", 40)(63, "p", 41), i(64, "\u0646\u06A9\u0627\u062A \u0645\u0647\u0645:"), e(), t(65, "ul", 42)(66, "li"), i(67, "\u0639\u0645\u0644\u06CC\u0627\u062A \u0647\u0645\u06AF\u0627\u0645\u200C\u0633\u0627\u0632\u06CC \u0645\u0645\u06A9\u0646 \u0627\u0633\u062A \u0628\u0633\u062A\u0647 \u0628\u0647 \u062D\u062C\u0645 \u062F\u0627\u062F\u0647\u200C\u0647\u0627 \u0686\u0646\u062F \u062F\u0642\u06CC\u0642\u0647 \u0637\u0648\u0644 \u0628\u06A9\u0634\u062F"), e(), t(68, "li"), i(69, "\u0628\u0639\u062F \u0627\u0632 \u0628\u0627\u0632\u0633\u0627\u0632\u06CC \u0627\u06CC\u0646\u062F\u06A9\u0633\u200C\u0647\u0627\u060C \u062D\u062A\u0645\u0627\u064B \u0647\u0645\u06AF\u0627\u0645\u200C\u0633\u0627\u0632\u06CC \u0631\u0627 \u0627\u062C\u0631\u0627 \u06A9\u0646\u06CC\u062F"), e(), t(70, "li"), i(71, "\u062A\u0648\u0635\u06CC\u0647 \u0645\u06CC\u200C\u0634\u0648\u062F \u0627\u06CC\u0646 \u0639\u0645\u0644\u06CC\u0627\u062A \u0631\u0627 \u062F\u0631 \u0633\u0627\u0639\u0627\u062A \u06A9\u0645\u200C\u062A\u0631\u0627\u0641\u06CC\u06A9 \u0627\u0646\u062C\u0627\u0645 \u062F\u0647\u06CC\u062F"), e(), t(72, "li"), i(73, "\u0642\u0628\u0644 \u0627\u0632 \u0647\u0631 \u0639\u0645\u0644\u06CC\u0627\u062A\u060C \u0627\u0632 \u067E\u0634\u062A\u06CC\u0628\u0627\u0646\u200C\u06AF\u06CC\u0631\u06CC \u062F\u0627\u062F\u0647\u200C\u0647\u0627 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062D\u0627\u0635\u0644 \u06A9\u0646\u06CC\u062F"), e()()()()()()() } if (n & 2) { let o = p(); d(12), l("ngForOf", o.indexStats), d(), l("ngIf", o.indexStats.length === 0), d(21), l("ngIf", o.lastSyncTime), d(), U("opacity-50", !o.canPerformActions() || o.isSyncing)("cursor-not-allowed", !o.canPerformActions() || o.isSyncing), l("disabled", !o.canPerformActions() || o.isSyncing), d(), U("animate-spin", o.isSyncing), d(2), g(" ", o.isSyncing ? "\u062F\u0631 \u062D\u0627\u0644 \u0647\u0645\u06AF\u0627\u0645\u200C\u0633\u0627\u0632\u06CC..." : "\u0634\u0631\u0648\u0639 \u0647\u0645\u06AF\u0627\u0645\u200C\u0633\u0627\u0632\u06CC", " "), d(10), l("ngIf", o.lastRecreateTime), d(6), U("opacity-50", !o.canPerformActions() || o.isRecreating)("cursor-not-allowed", !o.canPerformActions() || o.isRecreating), l("disabled", !o.canPerformActions() || o.isRecreating), d(), U("animate-spin", o.isRecreating), d(2), g(" ", o.isRecreating ? "\u062F\u0631 \u062D\u0627\u0644 \u0628\u0627\u0632\u0633\u0627\u0632\u06CC..." : "\u0628\u0627\u0632\u0633\u0627\u0632\u06CC \u0627\u06CC\u0646\u062F\u06A9\u0633\u200C\u0647\u0627", " ") } } function p0(n, s) { if (n & 1 && (t(0, "div", 69)(1, "div", 70)(2, "span", 5), i(3, "warning"), e(), t(4, "div", 71)(5, "span", 72), i(6, "\u062A\u0648\u062C\u0647:"), e(), i(7), e()()()), n & 2) { let o = p(2); d(7), g(" ", o.getInactiveCount(), " \u0627\u06CC\u0646\u062F\u06A9\u0633 \u063A\u06CC\u0631\u0641\u0639\u0627\u0644 \u0627\u0633\u062A. \u0628\u0631\u0627\u06CC \u0641\u0639\u0627\u0644\u200C\u0633\u0627\u0632\u06CC\u060C \u0627\u0628\u062A\u062F\u0627 \u0627\u06CC\u0646\u062F\u06A9\u0633\u200C\u0647\u0627 \u0631\u0627 \u0628\u0627\u0632\u0633\u0627\u0632\u06CC \u0648 \u0633\u067E\u0633 \u0647\u0645\u06AF\u0627\u0645\u200C\u0633\u0627\u0632\u06CC \u06A9\u0646\u06CC\u062F. ") } } function f0(n, s) { if (n & 1 && (t(0, "div", 53)(1, "h3", 54)(2, "span", 55), i(3, "analytics"), e(), i(4, " \u062E\u0644\u0627\u0635\u0647 \u0648\u0636\u0639\u06CC\u062A "), e(), t(5, "div", 56)(6, "div", 57)(7, "div", 58)(8, "div")(9, "p", 59), i(10, "\u06A9\u0644 \u0627\u06CC\u0646\u062F\u06A9\u0633\u200C\u0647\u0627"), e(), t(11, "p", 60), i(12), e()(), t(13, "span", 61), i(14, "storage"), e()()(), t(15, "div", 62)(16, "div", 58)(17, "div")(18, "p", 59), i(19, "\u0627\u06CC\u0646\u062F\u06A9\u0633\u200C\u0647\u0627\u06CC \u0641\u0639\u0627\u0644"), e(), t(20, "p", 63), i(21), e()(), t(22, "span", 64), i(23, "check_circle"), e()()(), t(24, "div", 65)(25, "div", 58)(26, "div")(27, "p", 59), i(28, "\u0627\u06CC\u0646\u062F\u06A9\u0633\u200C\u0647\u0627\u06CC \u063A\u06CC\u0631\u0641\u0639\u0627\u0644"), e(), t(29, "p", 66), i(30), e()(), t(31, "span", 67), i(32, "cancel"), e()()()(), f(33, p0, 8, 1, "div", 68), e()), n & 2) { let o = p(); d(12), b(o.getTotalCount()), d(9), b(o.getActiveCount()), d(9), b(o.getInactiveCount()), d(3), l("ngIf", o.getInactiveCount() > 0) } } var mi = (() => {
    let s = class s {
        constructor(r, u) { this.searchService = r, this.notification = u, this.isLoading = !1, this.indexStats = [], this.isSyncing = !1, this.isRecreating = !1, this.lastSyncTime = null, this.lastRecreateTime = null, this.destroy$ = new Oe } ngOnInit() { this.loadIndexStats() } ngOnDestroy() { this.destroy$.next(), this.destroy$.complete() } loadIndexStats() { this.isLoading = !0, this.searchService.getIndexStats().pipe(ke(this.destroy$), D(() => this.isLoading = !1), ce(r => { let u = this.extractErrorMessage(r); return console.error("Error loading index stats:", r), this.notification.show(`\u062E\u0637\u0627 \u062F\u0631 \u062F\u0631\u06CC\u0627\u0641\u062A \u0627\u0637\u0644\u0627\u0639\u0627\u062A: ${u}`, "error"), _e([]) })).subscribe({ next: r => { this.indexStats = r, r.length === 0 && this.notification.show("\u0647\u06CC\u0686 \u0627\u06CC\u0646\u062F\u06A9\u0633\u06CC \u06CC\u0627\u0641\u062A \u0646\u0634\u062F", "info") } }) } syncAllData() { if (this.isSyncing) { this.notification.show("\u0647\u0645\u06AF\u0627\u0645\u200C\u0633\u0627\u0632\u06CC \u062F\u0631 \u062D\u0627\u0644 \u0627\u062C\u0631\u0627 \u0627\u0633\u062A", "info"); return } let u = this.indexStats.some(a => !a.exists) ? "\u0628\u0631\u062E\u06CC \u0627\u06CC\u0646\u062F\u06A9\u0633\u200C\u0647\u0627 \u063A\u06CC\u0631\u0641\u0639\u0627\u0644 \u0647\u0633\u062A\u0646\u062F. \u0622\u06CC\u0627 \u0627\u0632 \u0647\u0645\u06AF\u0627\u0645\u200C\u0633\u0627\u0632\u06CC \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F" : "\u0622\u06CC\u0627 \u0627\u0632 \u0647\u0645\u06AF\u0627\u0645\u200C\u0633\u0627\u0632\u06CC \u062A\u0645\u0627\u0645 \u062F\u0627\u062F\u0647\u200C\u0647\u0627 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F \u0627\u06CC\u0646 \u0639\u0645\u0644\u06CC\u0627\u062A \u0645\u0645\u06A9\u0646 \u0627\u0633\u062A \u0686\u0646\u062F \u062F\u0642\u06CC\u0642\u0647 \u0637\u0648\u0644 \u0628\u06A9\u0634\u062F."; confirm(u) && (this.isSyncing = !0, this.notification.show("\u0647\u0645\u06AF\u0627\u0645\u200C\u0633\u0627\u0632\u06CC \u0634\u0631\u0648\u0639 \u0634\u062F...", "info"), this.searchService.syncAllData().pipe(ke(this.destroy$), D(() => this.isSyncing = !1), ce(a => { let m = this.extractErrorMessage(a); return console.error("Error syncing data:", a), this.notification.show(`\u062E\u0637\u0627 \u062F\u0631 \u0647\u0645\u06AF\u0627\u0645\u200C\u0633\u0627\u0632\u06CC: ${m}`, "error"), _e(null) })).subscribe({ next: a => { a && (this.lastSyncTime = new Date, this.notification.show(a.message || "\u0647\u0645\u06AF\u0627\u0645\u200C\u0633\u0627\u0632\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u0646\u062C\u0627\u0645 \u0634\u062F", "success"), this.loadIndexStats()) } })) } recreateIndices() {
            if (this.isRecreating) { this.notification.show("\u0628\u0627\u0632\u0633\u0627\u0632\u06CC \u062F\u0631 \u062D\u0627\u0644 \u0627\u062C\u0631\u0627 \u0627\u0633\u062A", "info"); return } confirm(`\u0622\u06CC\u0627 \u0627\u0632 \u0628\u0627\u0632\u0633\u0627\u0632\u06CC \u0627\u06CC\u0646\u062F\u06A9\u0633\u200C\u0647\u0627 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F

\u26A0\uFE0F \u0647\u0634\u062F\u0627\u0631: \u0627\u06CC\u0646 \u0639\u0645\u0644\u06CC\u0627\u062A \u062A\u0645\u0627\u0645 \u062F\u0627\u062F\u0647\u200C\u0647\u0627\u06CC \u0645\u0648\u062C\u0648\u062F \u062F\u0631 Elasticsearch \u0631\u0627 \u062D\u0630\u0641 \u06A9\u0631\u062F\u0647 \u0648 \u062F\u0648\u0628\u0627\u0631\u0647 \u0627\u06CC\u062C\u0627\u062F \u0645\u06CC\u200C\u06A9\u0646\u062F.
\u067E\u0633 \u0627\u0632 \u0628\u0627\u0632\u0633\u0627\u0632\u06CC\u060C \u0628\u0627\u06CC\u062F \u0647\u0645\u06AF\u0627\u0645\u200C\u0633\u0627\u0632\u06CC \u0631\u0627 \u0627\u062C\u0631\u0627 \u06A9\u0646\u06CC\u062F.

\u0622\u06CC\u0627 \u0627\u062F\u0627\u0645\u0647 \u0645\u06CC\u200C\u062F\u0647\u06CC\u062F\u061F`) && (this.isRecreating = !0, this.notification.show("\u0628\u0627\u0632\u0633\u0627\u0632\u06CC \u0627\u06CC\u0646\u062F\u06A9\u0633\u200C\u0647\u0627 \u0634\u0631\u0648\u0639 \u0634\u062F...", "info"), this.searchService.recreateIndices().pipe(ke(this.destroy$), D(() => this.isRecreating = !1), ce(u => { let a = this.extractErrorMessage(u); return console.error("Error recreating indices:", u), this.notification.show(`\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0632\u0633\u0627\u0632\u06CC: ${a}`, "error"), _e(null) })).subscribe({ next: u => { u && (this.lastRecreateTime = new Date, this.notification.show(u.message || "\u0628\u0627\u0632\u0633\u0627\u0632\u06CC \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0627\u0646\u062C\u0627\u0645 \u0634\u062F", "success"), this.loadIndexStats(), (this.indexStats.every(m => !m.exists) || this.indexStats.length === 0) && setTimeout(() => { confirm("\u0627\u06CC\u0646\u062F\u06A9\u0633\u200C\u0647\u0627 \u0628\u0627\u0632\u0633\u0627\u0632\u06CC \u0634\u062F\u0646\u062F. \u0622\u06CC\u0627 \u0645\u06CC\u200C\u062E\u0648\u0627\u0647\u06CC\u062F \u0627\u06A9\u0646\u0648\u0646 \u0647\u0645\u06AF\u0627\u0645\u200C\u0633\u0627\u0632\u06CC \u0631\u0627 \u0634\u0631\u0648\u0639 \u06A9\u0646\u06CC\u062F\u061F") && this.syncAllData() }, 1e3)) } }))
        } getStatusColor(r) { return r ? "success" : "error" } getStatusText(r) { return r ? "\u0641\u0639\u0627\u0644" : "\u063A\u06CC\u0631\u0641\u0639\u0627\u0644" } getStatusIcon(r) { return r ? "check_circle" : "cancel" } getActiveCount() { return this.indexStats.filter(r => r.exists).length } getInactiveCount() { return this.indexStats.filter(r => !r.exists).length } getTotalCount() { return this.indexStats.length } canPerformActions() { return !this.isLoading && !this.isSyncing && !this.isRecreating } formatLastActionTime(r) { if (!r) return "\u0647\u0631\u06AF\u0632"; let a = new Date().getTime() - r.getTime(), m = Math.floor(a / 1e3), c = Math.floor(m / 60), j = Math.floor(c / 60); return m < 60 ? "\u0644\u062D\u0638\u0627\u062A\u06CC \u067E\u06CC\u0634" : c < 60 ? `${c} \u062F\u0642\u06CC\u0642\u0647 \u067E\u06CC\u0634` : j < 24 ? `${j} \u0633\u0627\u0639\u062A \u067E\u06CC\u0634` : r.toLocaleDateString("fa-IR") } extractErrorMessage(r) { if (!r) return "\u062E\u0637\u0627\u06CC \u0646\u0627\u0645\u0634\u062E\u0635"; if (r.error) { if (typeof r.error == "string") return r.error; if (r.error.error) return r.error.error; if (r.error.message) return r.error.message } return r.message ? r.message : r.statusText ? r.statusText : "\u062E\u0637\u0627 \u062F\u0631 \u0627\u0631\u062A\u0628\u0627\u0637 \u0628\u0627 \u0633\u0631\u0648\u0631" }
    }; s.\u0275fac = function (u) { return new (u || s)(h(li), h(k)) }, s.\u0275cmp = y({ type: s, selectors: [["app-admin-search-form"]], decls: 14, vars: 10, consts: [[1, "space-y-6", "animate-fade-in"], [1, "flex", "flex-col", "sm:flex-row", "items-start", "sm:items-center", "justify-between", "gap-4"], [1, "text-3xl", "font-black", "tracking-tight", "text-heading-foreground"], [1, "text-sm", "text-muted-foreground", "mt-1"], [1, "btn", "btn-outline", "btn-sm", "gap-2", 3, "click", "disabled"], [1, "material-icons", "text-sm"], ["class", "flex justify-center items-center min-h-[300px]", 4, "ngIf"], ["class", "grid gap-6 lg:grid-cols-2", 4, "ngIf"], ["class", "card p-6", 4, "ngIf"], [1, "flex", "justify-center", "items-center", "min-h-[300px]"], [1, "flex", "flex-col", "items-center", "gap-3"], [1, "spinner", "spinner-xl", "text-primary"], [1, "text-sm", "text-muted-foreground", "animate-pulse"], [1, "grid", "gap-6", "lg:grid-cols-2"], [1, "card", "p-6", "space-y-6"], [1, "flex", "items-center", "gap-3"], [1, "icon-wrapper", "icon-wrapper-primary"], [1, "material-icons"], [1, "text-xl", "font-bold", "text-heading-foreground"], [1, "text-sm", "text-muted-foreground"], [1, "space-y-3"], ["class", "flex items-center justify-between p-4 rounded-lg border border-border bg-muted/30 hover:bg-muted/50 transition-colors", 4, "ngFor", "ngForOf"], ["class", "text-center py-8 text-muted-foreground", 4, "ngIf"], [1, "icon-wrapper", "icon-wrapper-info"], [1, "space-y-4"], [1, "p-4", "rounded-lg", "border-2", "border-primary/20", "bg-primary/5", "space-y-3"], [1, "flex", "items-start", "gap-3"], [1, "material-icons", "text-primary", "mt-0.5"], [1, "flex-1", "min-w-0"], [1, "font-bold", "text-foreground", "mb-1"], [1, "text-sm", "text-muted-foreground", "leading-relaxed"], ["class", "text-xs text-muted-foreground mt-2", 4, "ngIf"], [1, "btn", "btn-primary", "w-full", "gap-2", 3, "click", "disabled"], [1, "p-4", "rounded-lg", "border-2", "border-warning/20", "bg-warning/5", "space-y-3"], [1, "material-icons", "text-warning", "mt-0.5"], [1, "alert", "alert-warning", "gap-2", "text-xs"], [1, "btn", "btn-warning", "w-full", "gap-2", 3, "click", "disabled"], [1, "p-4", "rounded-lg", "border", "border-info/30", "bg-info/5", "space-y-2"], [1, "flex", "items-start", "gap-2", "text-info"], [1, "material-icons", "text-sm", "mt-0.5"], [1, "text-xs", "leading-relaxed"], [1, "font-semibold", "mb-1"], [1, "space-y-1", "mr-4", "list-disc"], [1, "flex", "items-center", "justify-between", "p-4", "rounded-lg", "border", "border-border", "bg-muted/30", "hover:bg-muted/50", "transition-colors"], [1, "material-icons", "text-[20px]"], [1, "font-semibold", "text-foreground"], [1, "text-xs", "text-muted-foreground"], [1, "badge", "text-xs", "px-3", "py-1"], [1, "text-center", "py-8", "text-muted-foreground"], [1, "material-icons", "text-4xl", "opacity-30"], [1, "mt-2", "text-sm"], [1, "mt-1", "text-xs"], [1, "text-xs", "text-muted-foreground", "mt-2"], [1, "card", "p-6"], [1, "text-lg", "font-bold", "text-heading-foreground", "mb-4", "flex", "items-center", "gap-2"], [1, "material-icons", "text-primary"], [1, "grid", "gap-4", "md:grid-cols-3"], [1, "stat-card", "border-r-4", "border-r-primary", "hover:shadow-md", "transition-shadow"], [1, "flex", "items-center", "justify-between"], [1, "stat-label"], [1, "stat-value", "text-primary"], [1, "material-icons", "text-primary", "text-3xl", "opacity-20"], [1, "stat-card", "border-r-4", "border-r-success", "hover:shadow-md", "transition-shadow"], [1, "stat-value", "text-success"], [1, "material-icons", "text-success", "text-3xl", "opacity-20"], [1, "stat-card", "border-r-4", "border-r-error", "hover:shadow-md", "transition-shadow"], [1, "stat-value", "text-error"], [1, "material-icons", "text-error", "text-3xl", "opacity-20"], ["class", "mt-4", 4, "ngIf"], [1, "mt-4"], [1, "alert", "alert-warning", "gap-2"], [1, "text-sm"], [1, "font-semibold"]], template: function (u, a) { u & 1 && (t(0, "div", 0)(1, "div", 1)(2, "div")(3, "h1", 2), i(4, " \u0645\u062F\u06CC\u0631\u06CC\u062A \u062C\u0633\u062A\u062C\u0648 "), e(), t(5, "p", 3), i(6, " \u0645\u062F\u06CC\u0631\u06CC\u062A \u0648 \u0646\u06AF\u0647\u062F\u0627\u0631\u06CC Elasticsearch \u0628\u0631\u0627\u06CC \u062C\u0633\u062A\u062C\u0648\u06CC \u0645\u062D\u0635\u0648\u0644\u0627\u062A "), e()(), t(7, "button", 4), v("click", function () { return a.loadIndexStats() }), t(8, "span", 5), i(9, "refresh"), e(), i(10, " \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC "), e()(), f(11, a0, 5, 0, "div", 6)(12, c0, 74, 20, "div", 7)(13, f0, 34, 4, "div", 8), e()), u & 2 && (d(7), U("opacity-50", !a.canPerformActions())("cursor-not-allowed", !a.canPerformActions()), l("disabled", !a.canPerformActions()), d(), U("animate-spin", a.isLoading), d(3), l("ngIf", a.isLoading), d(), l("ngIf", !a.isLoading), d(), l("ngIf", !a.isLoading && a.indexStats.length > 0)) }, dependencies: [A, I, _], encapsulation: 2 }); let n = s; return n
})(); var Ma = [{ path: "", component: Tt, canActivate: [Ft], children: [{ path: "", redirectTo: "dashboard", pathMatch: "full" }, { path: "dashboard", component: Nt }, { path: "products", component: Wt }, { path: "products/new", component: lt }, { path: "products/edit/:id", component: lt }, { path: "products/bulk-price-update", component: Jt }, { path: "products/low-stock", component: Yt }, { path: "attributes", component: ii }, { path: "attributes/new", component: pt }, { path: "attributes/edit/:id", component: pt }, { path: "attributes/:id/values", component: ni }, { path: "categories", component: Ot }, { path: "categories/new", component: ot }, { path: "categories/edit/:id", component: ot }, { path: "category-groups", component: $t }, { path: "category-groups/new", component: at }, { path: "category-groups/edit/:id", component: at }, { path: "orders", component: Bt }, { path: "orders/:id", component: Rt }, { path: "order-statuses", component: qt }, { path: "order-statuses/new", component: dt }, { path: "order-statuses/edit/:id", component: dt }, { path: "discounts", component: oi }, { path: "discounts/new", component: ft }, { path: "discounts/edit/:id", component: ft }, { path: "reviews", component: si }, { path: "inventory/transactions", component: di }, { path: "users", component: Kt }, { path: "audit-logs", component: Zt }, { path: "shipping-methods", component: ti }, { path: "shipping-methods/new", component: mt }, { path: "shipping-methods/edit/:id", component: mt }, { path: "search-management", component: mi }] }]; export { Ma as ADMIN_ROUTES };