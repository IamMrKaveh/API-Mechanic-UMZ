import{a as P}from"./chunk-GUVQHNME.js";import{F as w,d as _,h as S,i as k,z as C}from"./chunk-Z34MJED6.js";import{Ab as u,Ca as i,Cb as l,Kb as x,Na as h,Nb as m,Ob as g,Pb as I,Sa as b,Xa as s,gb as c,hb as n,ib as d,jb as y,tb as p,za as v}from"./chunk-MQVQRUTD.js";var D=t=>["/products",t];function z(t,o){if(t&1&&(n(0,"div",17),u(1),m(2,"number"),d()),t&2){let e=p(2);i(),l(" ",I(2,1,e.discountPercentage,"1.0-0"),"% ")}}function E(t,o){t&1&&(n(0,"div",18)(1,"span",19),u(2," \u0646\u0627\u0645\u0648\u062C\u0648\u062F "),d()())}function U(t,o){if(t&1&&(n(0,"span",20),u(1),m(2,"number"),d()),t&2){let e=p(2);i(),l(" ",g(2,1,e.product.maxPrice)," ")}}function F(t,o){if(t&1&&(n(0,"div",1)(1,"a",2)(2,"span",3),u(3),d()(),n(4,"div",4),y(5,"img",5),s(6,z,3,4,"div",6)(7,E,3,0,"div",7),d(),n(8,"div",8)(9,"h3",9),u(10),d(),n(11,"div",10)(12,"div",11),s(13,U,3,3,"span",12),n(14,"span",13),u(15),m(16,"number"),n(17,"span",14),u(18,"\u062A\u0648\u0645\u0627\u0646"),d()()(),n(19,"button",15)(20,"span",16),u(21,"add"),d()()()()()),t&2){let e=p();i(),c("routerLink",x(14,D,e.product.id))("title",e.product.name),i(2),l("\u0645\u0634\u0627\u0647\u062F\u0647 \u062C\u0632\u0626\u06CC\u0627\u062A ",e.product.name),i(2),c("src",e.productIconUrl,v)("alt",e.product.name),i(),c("ngIf",e.hasDiscount),i(),c("ngIf",!e.isInStock()),i(3),l(" ",e.product.name," "),i(3),c("ngIf",e.hasDiscount),i(2),l(" ",g(16,12,e.product.minPrice)," "),i(4),c("routerLink",x(16,D,e.product.id))("disabled",!e.isInStock())}}var R=(()=>{let o=class o{constructor(a){this.mediaService=a}isInStock(){return this.product?this.product.variants.some(r=>r.isUnlimited)?!0:this.product.totalStock>0:!1}get productIconUrl(){let r=this.product?.images?.find(f=>f.isPrimary)?.url||this.product?.images?.[0]?.url;return r?this.mediaService.getMediaUrl(r):"https://via.placeholder.com/300"}get hasDiscount(){return!this.product||!this.product.variants?!1:this.product.variants.some(a=>a.originalPrice>a.sellingPrice)}get discountPercentage(){return this.hasDiscount?Math.max(...this.product.variants.map(r=>r.discountPercentage)):0}};o.\u0275fac=function(r){return new(r||o)(h(P))},o.\u0275cmp=b({type:o,selectors:[["app-product-card"]],inputs:{product:"product"},decls:1,vars:1,consts:[["class","group relative flex flex-col overflow-hidden rounded-xl border border-border bg-card text-card-foreground transition-all duration-300 hover:shadow-lg hover:-translate-y-1 h-full",4,"ngIf"],[1,"group","relative","flex","flex-col","overflow-hidden","rounded-xl","border","border-border","bg-card","text-card-foreground","transition-all","duration-300","hover:shadow-lg","hover:-translate-y-1","h-full"],[1,"absolute","inset-0","z-10",3,"routerLink","title"],[1,"sr-only"],[1,"relative","aspect-square","overflow-hidden","bg-secondary/20","p-4"],["loading","lazy",1,"h-full","w-full","object-contain","transition-transform","duration-500","group-hover:scale-110","mix-blend-multiply",3,"src","alt"],["class","absolute top-2 left-2 z-20 rounded-md bg-destructive px-2.5 py-1 text-xs font-bold text-destructive-foreground shadow-sm",4,"ngIf"],["class","absolute inset-0 z-20 flex items-center justify-center bg-background/60 backdrop-blur-[2px]",4,"ngIf"],[1,"flex","flex-1","flex-col","p-4"],[1,"mb-2","line-clamp-2","text-sm","font-medium","leading-tight","text-foreground","group-hover:text-primary","transition-colors","min-h-[2.5rem]"],[1,"mt-auto","flex","items-end","justify-between","gap-2"],[1,"flex","flex-col"],["class","text-xs text-muted-foreground line-through decoration-destructive/50",4,"ngIf"],[1,"text-lg","font-bold","text-foreground"],[1,"text-xs","font-normal","text-muted-foreground"],["aria-label","\u0627\u0641\u0632\u0648\u062F\u0646 \u0628\u0647 \u0633\u0628\u062F",1,"btn","btn-secondary","btn-icon","h-8","w-8","rounded-full","opacity-0","shadow-sm","transition-all","group-hover:opacity-100","hover:bg-primary","hover:text-primary-foreground","relative","z-20",3,"routerLink","disabled"],[1,"material-icons","text-lg"],[1,"absolute","top-2","left-2","z-20","rounded-md","bg-destructive","px-2.5","py-1","text-xs","font-bold","text-destructive-foreground","shadow-sm"],[1,"absolute","inset-0","z-20","flex","items-center","justify-center","bg-background/60","backdrop-blur-[2px]"],[1,"rounded-full","border","border-border","bg-background/80","px-3","py-1","text-xs","font-semibold","text-muted-foreground","shadow-sm"],[1,"text-xs","text-muted-foreground","line-through","decoration-destructive/50"]],template:function(r,f){r&1&&s(0,F,22,18,"div",0),r&2&&c("ngIf",f.product)},dependencies:[k,_,w,C,S],encapsulation:2});let t=o;return t})();export{R as a};
