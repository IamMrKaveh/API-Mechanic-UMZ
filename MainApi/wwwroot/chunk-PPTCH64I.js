import{a as De}from"./chunk-APFCOE5L.js";import{a as R,b as Le}from"./chunk-6X3MUH5Q.js";import{a as we}from"./chunk-7JUVNKCS.js";import{a as Ce}from"./chunk-2O7IGTEV.js";import{a as z}from"./chunk-6NHH2MS5.js";import{B as Z,a as Se,b as J,c as m,d as K,e as Q,f as re,g as x,i as W,m as X,p as Y,q as ye,r as Fe,s as Ae,v as Ee,w as Ie,z as Ne}from"./chunk-6R33SLKE.js";import"./chunk-H442PVK2.js";import{a as L}from"./chunk-U4BXHFS4.js";import"./chunk-ISFWZGBK.js";import{A as M,B as _e,G as V,b as ve,c as N,d as F,e as H,f as ge,h as he,i as A,x as xe,y as be,z as w}from"./chunk-QOTKPPKC.js";import{Ab as n,Bb as g,Ca as a,Cb as P,Db as U,Eb as me,F as S,Jb as ce,Kb as pe,N as le,Na as p,Nb as I,Ob as k,Pb as fe,Sa as y,Xa as c,aa as D,ba as T,g as se,gb as l,hb as i,ib as t,j as ae,jb as h,nb as B,ob as G,pb as j,sb as _,tb as v,z as de}from"./chunk-6VZDFBBI.js";import{a as C,b as E}from"./chunk-4CLCTAJ7.js";var Ve=()=>({exact:!0});function Re(e,o){if(e&1&&(B(0),i(1,"h2",15),n(2),t(),i(3,"p",16),n(4),t(),G()),e&2){let d=o.ngIf;a(2),U("",d.firstName," ",d.lastName),a(2),g(d.phoneNumber)}}function qe(e,o){if(e&1&&(i(0,"a",17)(1,"span",12),n(2),t(),i(3,"span"),n(4),t()()),e&2){let d=o.$implicit;l("routerLink",d.link)("routerLinkActiveOptions",ce(4,Ve)),a(2),g(d.icon),a(2),g(d.title)}}var Te=(()=>{let o=class o{constructor(r,u){this.authService=r,this.router=u,this.menuItems=[{title:"\u067E\u0631\u0648\u0641\u0627\u06CC\u0644",link:"/dashboard/profile",icon:"account_circle"},{title:"\u062A\u0627\u0631\u06CC\u062E\u0686\u0647 \u0633\u0641\u0627\u0631\u0634\u0627\u062A",link:"/dashboard/order-history",icon:"history"},{title:"\u0622\u062F\u0631\u0633\u200C\u0647\u0627\u06CC \u0645\u0646",icon:"home",link:"/dashboard/addresses"}],this.user$=this.authService.userProfile$}ngOnInit(){}logout(){this.authService.logout(),this.router.navigate(["/"])}};o.\u0275fac=function(u){return new(u||o)(p(z),p(w))},o.\u0275cmp=y({type:o,selectors:[["app-dashboard-page"]],decls:21,vars:4,consts:[[1,"bg-muted/40"],[1,"container","py-10"],[1,"grid","grid-cols-1","items-start","gap-8","md:grid-cols-4"],[1,"md:col-span-1"],[1,"card","p-4","sticky","top-24"],[1,"flex","flex-col","items-center","border-b","border-border","pb-4","mb-4"],[1,"w-24","h-24","rounded-full","bg-primary/10","flex","items-center","justify-center","mb-3"],[1,"material-icons","text-5xl","text-primary"],[4,"ngIf"],[1,"flex","flex-col","gap-1"],["routerLinkActive","bg-accent text-accent-foreground font-semibold","class","btn btn-ghost justify-start gap-3",3,"routerLink","routerLinkActiveOptions",4,"ngFor","ngForOf"],[1,"btn","btn-ghost","justify-start","gap-3","text-destructive","hover:bg-destructive/10","hover:text-destructive",3,"click"],[1,"material-icons-outlined","text-base","w-5","text-center"],[1,"md:col-span-3"],[1,"card","min-h-[60vh]"],[1,"font-semibold","text-lg","text-foreground"],[1,"text-sm","text-muted-foreground"],["routerLinkActive","bg-accent text-accent-foreground font-semibold",1,"btn","btn-ghost","justify-start","gap-3",3,"routerLink","routerLinkActiveOptions"]],template:function(u,s){u&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"aside",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"span",7),n(8,"person_outline"),t()(),c(9,Re,5,3,"ng-container",8),I(10,"async"),t(),i(11,"nav",9),c(12,qe,5,5,"a",10),i(13,"button",11),_("click",function(){return s.logout()}),i(14,"span",12),n(15,"logout"),t(),i(16,"span"),n(17,"\u062E\u0631\u0648\u062C \u0627\u0632 \u062D\u0633\u0627\u0628"),t()()()()(),i(18,"main",13)(19,"div",14),h(20,"router-outlet"),t()()()()()),u&2&&(a(9),l("ngIf",k(10,2,s.user$)),a(3),l("ngForOf",s.menuItems))},dependencies:[A,N,F,V,be,M,_e,H],encapsulation:2});let e=o;return e})();function Be(e,o){e&1&&(i(0,"div",6)(1,"span",7),n(2,"sync"),t()())}function Ge(e,o){if(e&1&&(i(0,"div",8)(1,"p"),n(2),t()()),e&2){let d=v().ngIf;a(2),P("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u067E\u0631\u0648\u0641\u0627\u06CC\u0644: ",d.error)}}function Ue(e,o){e&1&&(i(0,"span",26),n(1,"sync"),t())}function He(e,o){if(e&1){let d=j();i(0,"form",9),_("ngSubmit",function(){D(d);let u=v(2);return T(u.updateProfile())}),i(1,"div",10)(2,"div",11)(3,"label",12),n(4,"\u0646\u0627\u0645"),t(),h(5,"input",13),t(),i(6,"div",11)(7,"label",14),n(8,"\u0646\u0627\u0645 \u062E\u0627\u0646\u0648\u0627\u062F\u06AF\u06CC"),t(),h(9,"input",15),t(),i(10,"div",11)(11,"label",16),n(12,"\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06CC\u0644"),t(),h(13,"input",17),t(),i(14,"div",11)(15,"label",18),n(16,"\u062A\u0627\u0631\u06CC\u062E \u0639\u0636\u0648\u06CC\u062A"),t(),h(17,"input",19),t(),i(18,"div",11)(19,"label",20),n(20,"\u0648\u0636\u0639\u06CC\u062A \u06A9\u0627\u0631\u0628\u0631\u06CC"),t(),h(21,"input",21),t()(),i(22,"div",22)(23,"button",23),_("click",function(){D(d);let u=v(2);return T(u.deleteAccount())}),n(24," \u062D\u0630\u0641 \u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC "),t(),i(25,"button",24),c(26,Ue,2,0,"span",25),i(27,"span"),n(28),t()()()()}if(e&2){let d,r=v().ngIf,u=v();l("formGroup",u.profileForm),a(21),l("value",(d=u.profileForm.get("isAdmin"))!=null&&d.value?"\u0627\u062F\u0645\u06CC\u0646":"\u06A9\u0627\u0631\u0628\u0631 \u0639\u0627\u062F\u06CC"),a(2),l("disabled",r.isSubmitting),a(2),l("disabled",u.profileForm.pristine||u.profileForm.invalid||r.isSubmitting),a(),l("ngIf",r.isSubmitting),a(2),g(r.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u0630\u062E\u06CC\u0631\u0647...":"\u0630\u062E\u06CC\u0631\u0647 \u062A\u063A\u06CC\u06CC\u0631\u0627\u062A")}}function ze(e,o){if(e&1&&(B(0),c(1,Be,3,0,"div",3)(2,Ge,3,1,"div",4)(3,He,29,6,"form",5),G()),e&2){let d=o.ngIf,r=v();a(),l("ngIf",d.isLoading),a(),l("ngIf",d.error),a(),l("ngIf",!d.isLoading&&!d.error&&r.profileForm)}}var Oe=(()=>{let o=class o{constructor(r,u,s,f){this.profileService=r,this.authService=u,this.notificationService=s,this.router=f,this.showAddressModal=!1,this.editingAddress=null,this.store=new se({profile:null,isLoading:!0,isSubmitting:!1,error:null}),this.vm$=this.store.asObservable()}ngOnInit(){this.profileForm=new re({phoneNumber:new x({value:"",disabled:!0}),createdAt:new x({value:"",disabled:!0}),firstName:new x("",[m.maxLength(100)]),lastName:new x("",[m.maxLength(100)]),isAdmin:new x({value:!1,disabled:!0})}),this.addressForm=new re({title:new x("",m.required),receiverName:new x("",m.required),phoneNumber:new x("",m.required),province:new x("",m.required),city:new x("",m.required),address:new x("",m.required),postalCode:new x("",m.required)}),this.loadProfile()}loadProfile(){this.store.next(E(C({},this.store.value),{isLoading:!0})),this.profileService.getProfile().pipe(le(r=>{this.profileForm.patchValue({phoneNumber:r.phoneNumber,createdAt:r.createdAt?new Date(r.createdAt).toLocaleDateString("fa-IR"):"",firstName:r.firstName,lastName:r.lastName,isAdmin:r.isAdmin}),this.authService.updateUserProfile(r),this.store.next(E(C({},this.store.value),{profile:r,isLoading:!1,error:null})),this.profileForm.markAsPristine()}),de(r=>{let u=r?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062F\u0631\u06CC\u0627\u0641\u062A \u0627\u0637\u0644\u0627\u0639\u0627\u062A \u067E\u0631\u0648\u0641\u0627\u06CC\u0644";return this.store.next(E(C({},this.store.value),{isLoading:!1,error:u})),ae(null)})).subscribe()}updateProfile(){if(this.profileForm.invalid||this.profileForm.pristine)return;this.store.next(E(C({},this.store.value),{isSubmitting:!0}));let r={firstName:this.profileForm.value.firstName?.trim()||void 0,lastName:this.profileForm.value.lastName?.trim()||void 0};this.profileService.updateProfile(r).pipe(S(()=>this.store.next(E(C({},this.store.value),{isSubmitting:!1})))).subscribe({next:()=>{this.notificationService.show("\u067E\u0631\u0648\u0641\u0627\u06CC\u0644 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u0628\u0647\u200C\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u0634\u062F","success"),this.loadProfile()},error:u=>{let s=u?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u0628\u0647\u200C\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06CC \u067E\u0631\u0648\u0641\u0627\u06CC\u0644";this.notificationService.show(s,"error")}})}deleteAccount(){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC \u062E\u0648\u062F \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F \u0627\u06CC\u0646 \u0639\u0645\u0644 \u063A\u06CC\u0631\u0642\u0627\u0628\u0644 \u0628\u0627\u0632\u06AF\u0634\u062A \u0627\u0633\u062A.")&&(this.store.next(E(C({},this.store.value),{isSubmitting:!0})),this.profileService.deleteAccount().pipe(S(()=>this.store.next(E(C({},this.store.value),{isSubmitting:!1})))).subscribe({next:()=>{this.notificationService.show("\u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC \u0634\u0645\u0627 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F.","success"),this.authService.logout(),this.router.navigate(["/"])},error:r=>{let u=r?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC.";this.notificationService.show(u,"error")}}))}};o.\u0275fac=function(u){return new(u||o)(p(R),p(z),p(L),p(w))},o.\u0275cmp=y({type:o,selectors:[["app-profile"]],decls:6,vars:3,consts:[[1,"p-6","space-y-8"],[1,"text-xl","font-semibold","text-foreground","border-b","border-border","pb-4","mb-6"],[4,"ngIf"],["class","flex items-center justify-center py-12",4,"ngIf"],["class","text-center py-12 text-destructive",4,"ngIf"],["class","space-y-6",3,"formGroup","ngSubmit",4,"ngIf"],[1,"flex","items-center","justify-center","py-12"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"text-center","py-12","text-destructive"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"space-y-2"],["for","firstName",1,"text-sm","font-medium","text-foreground"],["id","firstName","type","text","formControlName","firstName",1,"input"],["for","lastName",1,"text-sm","font-medium","text-foreground"],["id","lastName","type","text","formControlName","lastName",1,"input"],["for","phoneNumber",1,"text-sm","font-medium","text-foreground"],["id","phoneNumber","type","text","formControlName","phoneNumber","readonly","",1,"input","bg-muted","cursor-not-allowed"],["for","createdAt",1,"text-sm","font-medium","text-foreground"],["id","createdAt","type","text","formControlName","createdAt","readonly","",1,"input","bg-muted","cursor-not-allowed"],["for","isAdmin",1,"text-sm","font-medium","text-foreground"],["id","isAdmin","type","text","readonly","",1,"input","bg-muted","cursor-not-allowed",3,"value"],[1,"flex","flex-col","sm:flex-row","justify-between","items-center","pt-4","border-t","border-border","mt-4","gap-4"],["type","button",1,"btn","btn-outline","btn-destructive","w-full","sm:w-auto",3,"click","disabled"],["type","submit",1,"btn","btn-primary","btn-md","w-full","sm:w-auto",3,"disabled"],["class","material-icons animate-spin ml-2",4,"ngIf"],[1,"material-icons","animate-spin","ml-2"]],template:function(u,s){u&1&&(i(0,"div",0)(1,"div")(2,"h1",1),n(3,"\u0627\u0637\u0644\u0627\u0639\u0627\u062A \u062D\u0633\u0627\u0628 \u06A9\u0627\u0631\u0628\u0631\u06CC"),t(),c(4,ze,4,3,"ng-container",2),I(5,"async"),t()()),u&2&&(a(4),l("ngIf",k(5,1,s.vm$)))},dependencies:[A,F,Z,W,J,K,Q,X,Y,H],encapsulation:2});let e=o;return e})();function Je(e,o){e&1&&(i(0,"div",5)(1,"span",6),n(2,"sync"),t()())}function Ke(e,o){e&1&&(i(0,"div",7)(1,"div",8)(2,"span",9),n(3,"receipt_long"),t()(),i(4,"h3",10),n(5,"\u0647\u06CC\u0686 \u0633\u0641\u0627\u0631\u0634\u06CC \u062B\u0628\u062A \u0646\u06A9\u0631\u062F\u0647\u200C\u0627\u06CC\u062F"),t(),i(6,"p",11),n(7,"\u062A\u0627\u0631\u06CC\u062E\u0686\u0647 \u0633\u0641\u0627\u0631\u0634\u0627\u062A \u0634\u0645\u0627 \u062F\u0631 \u0627\u06CC\u0646\u062C\u0627 \u0646\u0645\u0627\u06CC\u0634 \u062F\u0627\u062F\u0647 \u0645\u06CC\u200C\u0634\u0648\u062F."),t()())}function Qe(e,o){if(e&1){let d=j();i(0,"div",15),_("click",function(){let u=D(d).$implicit,s=v(2);return T(s.viewOrderDetails(u.id))}),i(1,"div",16)(2,"p",17),n(3,"\u06A9\u062F \u0633\u0641\u0627\u0631\u0634"),t(),i(4,"p",18),n(5),t()(),i(6,"div",19)(7,"p",17),n(8,"\u062A\u0627\u0631\u06CC\u062E"),t(),i(9,"p",20),n(10),I(11,"date"),t()(),i(12,"div")(13,"p",17),n(14,"\u0645\u0628\u0644\u063A \u06A9\u0644"),t(),i(15,"p",18),n(16),I(17,"number"),t()(),i(18,"div",21)(19,"span",22),I(20,"statusClass"),n(21),t(),i(22,"span",23),n(23,"chevron_left"),t()()()}if(e&2){let d=o.$implicit;a(5),P("#",d.id),a(5),g(fe(11,5,d.createdAt,"yyyy/MM/dd")),a(6),P("",k(17,8,d.totalAmount)," \u062A\u0648\u0645\u0627\u0646"),a(3),l("ngClass",k(20,10,d.orderStatus==null?null:d.orderStatus.name)),a(2),P(" ",(d.orderStatus==null?null:d.orderStatus.name)||"\u0646\u0627\u0645\u0634\u062E\u0635"," ")}}function We(e,o){if(e&1&&(i(0,"div",12)(1,"div",13),c(2,Qe,24,12,"div",14),t()()),e&2){let d=v();a(2),l("ngForOf",d.orders)}}var je=(()=>{let o=class o{constructor(r,u,s){this.orderService=r,this.notificationService=u,this.router=s,this.orders=[],this.isLoading=!0,this.paginationInfo=null}ngOnInit(){this.loadOrders()}loadOrders(r=1,u=10){this.isLoading=!0,this.orderService.getOrders(r,u).pipe(S(()=>this.isLoading=!1)).subscribe({next:s=>{this.orders=s.items??[],this.paginationInfo=s},error:()=>{this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u062F\u0631\u06CC\u0627\u0641\u062A \u062A\u0627\u0631\u06CC\u062E\u0686\u0647 \u0633\u0641\u0627\u0631\u0634\u0627\u062A","error")}})}viewOrderDetails(r){this.router.navigate(["/dashboard/order",r])}};o.\u0275fac=function(u){return new(u||o)(p(we),p(L),p(w))},o.\u0275cmp=y({type:o,selectors:[["app-order-history"]],decls:6,vars:3,consts:[[1,"p-6"],[1,"text-xl","font-semibold","text-foreground","border-b","border-border","pb-4","mb-6"],["class","flex items-center justify-center py-12",4,"ngIf"],["class","flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-border p-12 text-center min-h-[300px]",4,"ngIf"],["class","overflow-x-auto",4,"ngIf"],[1,"flex","items-center","justify-center","py-12"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"flex","flex-col","items-center","justify-center","rounded-lg","border-2","border-dashed","border-border","p-12","text-center","min-h-[300px]"],[1,"flex","h-20","w-20","items-center","justify-center","rounded-full","bg-muted"],[1,"material-icons","text-4xl","text-muted-foreground"],[1,"mt-6","text-lg","font-semibold","text-foreground"],[1,"mb-6","mt-2","text-sm","text-muted-foreground"],[1,"overflow-x-auto"],[1,"border","border-border","rounded-lg","divide-y","divide-border","min-w-[600px]"],["class","p-4 grid grid-cols-3 md:grid-cols-4 items-center gap-4 hover:bg-accent cursor-pointer transition-colors",3,"click",4,"ngFor","ngForOf"],[1,"p-4","grid","grid-cols-3","md:grid-cols-4","items-center","gap-4","hover:bg-accent","cursor-pointer","transition-colors",3,"click"],[1,"col-span-2","md:col-span-1"],[1,"font-semibold","text-foreground"],[1,"text-sm","text-muted-foreground"],[1,"hidden","md:block"],[1,"text-sm","text-muted-foreground","whitespace-nowrap"],[1,"flex","justify-end","items-center","gap-2"],[1,"px-2.5","py-0.5","text-xs","font-semibold","rounded-full","whitespace-nowrap",3,"ngClass"],[1,"material-icons","text-base","text-muted-foreground"]],template:function(u,s){u&1&&(i(0,"div",0)(1,"h1",1),n(2,"\u062A\u0627\u0631\u06CC\u062E\u0686\u0647 \u0633\u0641\u0627\u0631\u0634\u0627\u062A"),t(),c(3,Je,3,0,"div",2)(4,Ke,8,0,"div",3)(5,We,3,1,"div",4),t()),u&2&&(a(3),l("ngIf",s.isLoading),a(),l("ngIf",!s.isLoading&&(!s.orders||s.orders.length===0)),a(),l("ngIf",!s.isLoading&&s.orders&&s.orders.length>0))},dependencies:[A,ve,N,F,he,ge,De],encapsulation:2});let e=o;return e})();function Xe(e,o){e&1&&(i(0,"div",31),n(1," \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0632\u0627\u0645\u06CC \u0627\u0633\u062A. "),t())}function Ye(e,o){e&1&&(i(0,"div",31),n(1," \u0646\u0627\u0645 \u06AF\u06CC\u0631\u0646\u062F\u0647 \u0627\u0644\u0632\u0627\u0645\u06CC \u0627\u0633\u062A. "),t())}function Ze(e,o){e&1&&(i(0,"span"),n(1,"\u0634\u0645\u0627\u0631\u0647 \u062A\u0645\u0627\u0633 \u0627\u0644\u0632\u0627\u0645\u06CC \u0627\u0633\u062A."),t())}function et(e,o){e&1&&(i(0,"span"),n(1,"\u0641\u0631\u0645\u062A \u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06CC\u0644 \u0635\u062D\u06CC\u062D \u0646\u06CC\u0633\u062A."),t())}function tt(e,o){if(e&1&&(i(0,"div",31),c(1,Ze,2,0,"span",22)(2,et,2,0,"span",22),t()),e&2){let d,r,u=v();a(),l("ngIf",(d=u.addressForm.get("phoneNumber"))==null||d.errors==null?null:d.errors.required),a(),l("ngIf",(r=u.addressForm.get("phoneNumber"))==null||r.errors==null?null:r.errors.pattern)}}function it(e,o){e&1&&(i(0,"span"),n(1,"\u06A9\u062F \u067E\u0633\u062A\u06CC \u0627\u0644\u0632\u0627\u0645\u06CC \u0627\u0633\u062A."),t())}function rt(e,o){e&1&&(i(0,"span"),n(1,"\u06A9\u062F \u067E\u0633\u062A\u06CC \u0628\u0627\u06CC\u062F \u06F1\u06F0 \u0631\u0642\u0645\u06CC \u0628\u0627\u0634\u062F."),t())}function nt(e,o){if(e&1&&(i(0,"div",31),c(1,it,2,0,"span",22)(2,rt,2,0,"span",22),t()),e&2){let d,r,u=v();a(),l("ngIf",(d=u.addressForm.get("postalCode"))==null||d.errors==null?null:d.errors.required),a(),l("ngIf",(r=u.addressForm.get("postalCode"))==null||r.errors==null?null:r.errors.pattern)}}function ot(e,o){if(e&1&&(i(0,"option",32),n(1),t()),e&2){let d=o.$implicit;l("value",d.name),a(),g(d.name)}}function ut(e,o){e&1&&(i(0,"option"),n(1,"\u062F\u0631 \u062D\u0627\u0644 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC..."),t())}function st(e,o){if(e&1&&(i(0,"option",32),n(1),t()),e&2){let d=o.$implicit;l("value",d.name),a(),g(d.name)}}function at(e,o){e&1&&(i(0,"div",31),n(1," \u0622\u062F\u0631\u0633 \u06A9\u0627\u0645\u0644 \u0627\u0644\u0632\u0627\u0645\u06CC \u0627\u0633\u062A. "),t())}function dt(e,o){e&1&&(i(0,"span",33),n(1,"sync"),t())}var oe=(()=>{let o=class o{constructor(r,u,s,f,b,O){this.fb=r,this.route=u,this.router=s,this.profileService=f,this.locationService=b,this.notificationService=O,this.isEditMode=!1,this.addressId=null,this.isSubmitting=!1,this.states=[],this.cities=[],this.citiesLoading=!1,this.addressForm=this.fb.group({title:["",[m.required,m.maxLength(100)]],receiverName:["",[m.required,m.maxLength(100)]],phoneNumber:["",[m.required,m.pattern(/^09\d{9}$/),m.minLength(11),m.maxLength(11)]],postalCode:["",[m.required,m.pattern(/^\d{10}$/),m.minLength(10),m.maxLength(10)]],province:[null,m.required],city:[{value:null,disabled:!0},m.required],address:["",[m.required,m.maxLength(500)]],isDefault:[!1]})}ngOnInit(){this.loadStates();let r=this.route.snapshot.paramMap.get("id");r&&(this.addressId=+r,this.isEditMode=!0,this.loadAddressData())}loadStates(){this.locationService.getStates().subscribe(r=>this.states=r)}onProvinceChange(r){let s=r.target.value,f=this.states.find(b=>b.name===s);this.cities=[],this.addressForm.get("city")?.reset(),this.addressForm.get("city")?.disable(),f&&(this.citiesLoading=!0,this.addressForm.get("city")?.enable(),this.locationService.getCitiesByState(f.id).pipe(S(()=>this.citiesLoading=!1)).subscribe(b=>this.cities=b))}loadAddressData(){this.addressId&&this.profileService.getProfile().subscribe(r=>{let u=r.userAddresses?.find(s=>s.id===this.addressId);if(u){this.addressForm.patchValue(u);let s=this.states.find(f=>f.name===u.province);s&&(this.addressForm.get("city")?.enable(),this.locationService.getCitiesByState(s.id).subscribe(f=>{this.cities=f,this.addressForm.get("city")?.patchValue(u.city)}))}else this.notificationService.show("\u0622\u062F\u0631\u0633 \u0645\u0648\u0631\u062F \u0646\u0638\u0631 \u06CC\u0627\u0641\u062A \u0646\u0634\u062F","error"),this.router.navigate(["/dashboard/addresses"])})}onSubmit(){if(this.addressForm.invalid){this.addressForm.markAllAsTouched();return}this.isSubmitting=!0;let r=this.addressForm.getRawValue();(this.isEditMode&&this.addressId?this.profileService.updateAddress(this.addressId,C({id:this.addressId},r)):this.profileService.addAddress(r)).pipe(S(()=>this.isSubmitting=!1)).subscribe({next:()=>{this.notificationService.show(`\u0622\u062F\u0631\u0633 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A ${this.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634":"\u0627\u0641\u0632\u0648\u062F\u0647"} \u0634\u062F`,"success"),this.router.navigate(["/dashboard/addresses"])},error:s=>this.notificationService.show(s?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062B\u0628\u062A \u0622\u062F\u0631\u0633","error")})}};o.\u0275fac=function(u){return new(u||o)(p(Ne),p(xe),p(w),p(R),p(Le),p(L))},o.\u0275cmp=y({type:o,selectors:[["app-address-form"]],decls:57,vars:16,consts:[[1,"max-w-2xl","mx-auto"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold"],["routerLink","/dashboard/addresses",1,"btn","btn-outline","btn-sm"],[1,"card","p-6","space-y-6",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"space-y-2"],["for","title",1,"font-medium"],["type","text","id","title","formControlName","title","placeholder","\u0645\u062B\u0627\u0644: \u062E\u0627\u0646\u0647","maxlength","100",1,"input"],["class","text-xs text-destructive pt-1",4,"ngIf"],["for","receiverName",1,"font-medium"],["type","text","id","receiverName","formControlName","receiverName","placeholder","\u0646\u0627\u0645 \u0648 \u0646\u0627\u0645 \u062E\u0627\u0646\u0648\u0627\u062F\u06AF\u06CC","maxlength","100",1,"input"],["for","phoneNumber",1,"font-medium"],["type","tel","id","phoneNumber","formControlName","phoneNumber","placeholder","09123456789","maxlength","11","minlength","11",1,"input","ltr-input"],["for","postalCode",1,"font-medium"],["type","text","id","postalCode","formControlName","postalCode","placeholder","\u06A9\u062F \u067E\u0633\u062A\u06CC \u06F1\u06F0 \u0631\u0642\u0645\u06CC","maxlength","10","minlength","10",1,"input","ltr-input"],["for","province",1,"font-medium"],["id","province","formControlName","province",1,"input",3,"change"],["disabled","",3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["for","city",1,"font-medium"],["id","city","formControlName","city",1,"input",3,"disabled"],[4,"ngIf"],["for","address",1,"font-medium"],["id","address","formControlName","address","rows","3","placeholder","\u0622\u062F\u0631\u0633 \u062F\u0642\u06CC\u0642 \u067E\u0633\u062A\u06CC","maxlength","500",1,"input"],[1,"flex","items-center","pt-2"],["type","checkbox","id","isDefault","formControlName","isDefault",1,"checkbox"],["for","isDefault",1,"ms-2","font-medium","cursor-pointer"],[1,"flex","rtl:justify-start","pt-4","border-t"],["type","submit",1,"btn","btn-primary","btn-md",3,"disabled"],["class","material-icons animate-spin me-2",4,"ngIf"],[1,"text-xs","text-destructive","pt-1"],[3,"value"],[1,"material-icons","animate-spin","me-2"]],template:function(u,s){if(u&1&&(i(0,"div",0)(1,"div",1)(2,"h1",2),n(3),t(),i(4,"a",3),n(5,"\u0628\u0627\u0632\u06AF\u0634\u062A"),t()(),i(6,"form",4),_("ngSubmit",function(){return s.onSubmit()}),i(7,"div",5)(8,"div",6)(9,"label",7),n(10,"\u0639\u0646\u0648\u0627\u0646 \u0622\u062F\u0631\u0633"),t(),h(11,"input",8),c(12,Xe,2,0,"div",9),t(),i(13,"div",6)(14,"label",10),n(15,"\u0646\u0627\u0645 \u06AF\u06CC\u0631\u0646\u062F\u0647"),t(),h(16,"input",11),c(17,Ye,2,0,"div",9),t(),i(18,"div",6)(19,"label",12),n(20,"\u0634\u0645\u0627\u0631\u0647 \u062A\u0645\u0627\u0633"),t(),h(21,"input",13),c(22,tt,3,2,"div",9),t(),i(23,"div",6)(24,"label",14),n(25,"\u06A9\u062F \u067E\u0633\u062A\u06CC"),t(),h(26,"input",15),c(27,nt,3,2,"div",9),t(),i(28,"div",6)(29,"label",16),n(30,"\u0627\u0633\u062A\u0627\u0646"),t(),i(31,"select",17),_("change",function(b){return s.onProvinceChange(b)}),i(32,"option",18),n(33,"\u0627\u0633\u062A\u0627\u0646 \u0631\u0627 \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F"),t(),c(34,ot,2,2,"option",19),t()(),i(35,"div",6)(36,"label",20),n(37,"\u0634\u0647\u0631"),t(),i(38,"select",21)(39,"option",18),n(40,"\u0634\u0647\u0631 \u0631\u0627 \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F"),t(),c(41,ut,2,0,"option",22)(42,st,2,2,"option",19),t()()(),i(43,"div",6)(44,"label",23),n(45,"\u0622\u062F\u0631\u0633 \u06A9\u0627\u0645\u0644"),t(),h(46,"textarea",24),c(47,at,2,0,"div",9),t(),i(48,"div",25),h(49,"input",26),i(50,"label",27),n(51,"\u0622\u062F\u0631\u0633 \u067E\u06CC\u0634\u200C\u0641\u0631\u0636"),t()(),i(52,"div",28)(53,"button",29),c(54,dt,2,0,"span",30),i(55,"span"),n(56),t()()()()()),u&2){let f,b,O,q,ue,$;a(3),g(s.isEditMode?"\u0648\u06CC\u0631\u0627\u06CC\u0634 \u0622\u062F\u0631\u0633":"\u0627\u0641\u0632\u0648\u062F\u0646 \u0622\u062F\u0631\u0633 \u062C\u062F\u06CC\u062F"),a(3),l("formGroup",s.addressForm),a(6),l("ngIf",((f=s.addressForm.get("title"))==null?null:f.invalid)&&((f=s.addressForm.get("title"))==null?null:f.touched)),a(5),l("ngIf",((b=s.addressForm.get("receiverName"))==null?null:b.invalid)&&((b=s.addressForm.get("receiverName"))==null?null:b.touched)),a(5),l("ngIf",((O=s.addressForm.get("phoneNumber"))==null?null:O.invalid)&&((O=s.addressForm.get("phoneNumber"))==null?null:O.touched)),a(5),l("ngIf",((q=s.addressForm.get("postalCode"))==null?null:q.invalid)&&((q=s.addressForm.get("postalCode"))==null?null:q.touched)),a(5),l("ngValue",null),a(2),l("ngForOf",s.states),a(4),l("disabled",!((ue=s.addressForm.get("province"))!=null&&ue.value)||s.citiesLoading),a(),l("ngValue",null),a(2),l("ngIf",s.citiesLoading),a(),l("ngForOf",s.cities),a(5),l("ngIf",(($=s.addressForm.get("address"))==null?null:$.invalid)&&(($=s.addressForm.get("address"))==null?null:$.touched)),a(6),l("disabled",s.addressForm.invalid||s.isSubmitting),a(),l("ngIf",s.isSubmitting),a(2),g(s.isSubmitting?"\u062F\u0631 \u062D\u0627\u0644 \u0630\u062E\u06CC\u0631\u0647...":"\u0630\u062E\u06CC\u0631\u0647 \u0622\u062F\u0631\u0633")}},dependencies:[A,N,F,Z,W,Fe,Ae,J,Se,ye,K,Q,Ee,Ie,X,Y,V,M],encapsulation:2});let e=o;return e})();var lt=e=>["/dashboard/addresses/edit",e];function mt(e,o){e&1&&(i(0,"div",5)(1,"span",6),n(2,"sync"),t()())}function ct(e,o){e&1&&(i(0,"div",5)(1,"p"),n(2,"\u0647\u0646\u0648\u0632 \u0622\u062F\u0631\u0633\u06CC \u062B\u0628\u062A \u0646\u06A9\u0631\u062F\u0647\u200C\u0627\u06CC\u062F."),t()())}function pt(e,o){e&1&&(i(0,"span",19),n(1,"\u067E\u06CC\u0634\u200C\u0641\u0631\u0636"),t())}function ft(e,o){if(e&1){let d=j();i(0,"div",9)(1,"div")(2,"div",10)(3,"h3",11),n(4),t(),c(5,pt,2,0,"span",12),t(),i(6,"p",13),n(7),t(),i(8,"p",14),n(9),t(),i(10,"p",15),n(11),t()(),i(12,"div",16)(13,"a",17),n(14,"\u0648\u06CC\u0631\u0627\u06CC\u0634"),t(),i(15,"button",18),_("click",function(){let u=D(d).$implicit,s=v(2);return T(s.deleteAddress(u.id))}),n(16,"\u062D\u0630\u0641"),t()()()}if(e&2){let d=o.$implicit;a(4),g(d.title),a(),l("ngIf",d.isDefault),a(2),g(d.receiverName),a(2),me("",d.province,"\u060C ",d.city,"\u060C ",d.address),a(2),U("\u06A9\u062F\u067E\u0633\u062A\u06CC: ",d.postalCode," | \u0645\u0648\u0628\u0627\u06CC\u0644: ",d.phoneNumber),a(2),l("routerLink",pe(9,lt,d.id))}}function vt(e,o){if(e&1&&(i(0,"div",7),c(1,ft,17,11,"div",8),t()),e&2){let d=v();a(),l("ngForOf",d.addresses)}}var Pe=(()=>{let o=class o{constructor(r,u){this.profileService=r,this.notificationService=u,this.addresses=[],this.isLoading=!0}ngOnInit(){this.loadAddresses()}loadAddresses(){this.isLoading=!0,this.profileService.getProfile().pipe(S(()=>this.isLoading=!1)).subscribe({next:r=>{this.addresses=r.userAddresses||[]},error:()=>this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0622\u062F\u0631\u0633\u200C\u0647\u0627","error")})}deleteAddress(r){confirm("\u0622\u06CC\u0627 \u0627\u0632 \u062D\u0630\u0641 \u0627\u06CC\u0646 \u0622\u062F\u0631\u0633 \u0627\u0637\u0645\u06CC\u0646\u0627\u0646 \u062F\u0627\u0631\u06CC\u062F\u061F")&&this.profileService.deleteAddress(r).subscribe({next:()=>{this.notificationService.show("\u0622\u062F\u0631\u0633 \u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062D\u0630\u0641 \u0634\u062F","success"),this.loadAddresses()},error:u=>this.notificationService.show(u?.error?.message||"\u062E\u0637\u0627 \u062F\u0631 \u062D\u0630\u0641 \u0622\u062F\u0631\u0633","error")})}};o.\u0275fac=function(u){return new(u||o)(p(R),p(L))},o.\u0275cmp=y({type:o,selectors:[["app-user-addresses"]],decls:8,vars:3,consts:[[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-foreground"],["routerLink","/dashboard/addresses/new",1,"btn","btn-primary","btn-sm"],["class","text-center text-muted-foreground p-8",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 gap-6",4,"ngIf"],[1,"text-center","text-muted-foreground","p-8"],[1,"material-icons","animate-spin","text-primary","text-4xl"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["class","card p-6 flex flex-col justify-between",4,"ngFor","ngForOf"],[1,"card","p-6","flex","flex-col","justify-between"],[1,"flex","justify-between","items-start"],[1,"font-semibold","text-lg","text-foreground"],["class","px-2 py-1 text-xs font-semibold rounded-full bg-primary/10 text-primary",4,"ngIf"],[1,"text-muted-foreground","mt-2"],[1,"text-muted-foreground","mt-1"],["dir","ltr",1,"text-muted-foreground","mt-1"],[1,"flex","items-center","gap-2","mt-6","pt-4","border-t"],[1,"btn","btn-outline","btn-sm",3,"routerLink"],[1,"btn","btn-destructive-outline","btn-sm",3,"click"],[1,"px-2","py-1","text-xs","font-semibold","rounded-full","bg-primary/10","text-primary"]],template:function(u,s){u&1&&(i(0,"div",0)(1,"h1",1),n(2,"\u0622\u062F\u0631\u0633\u200C\u0647\u0627\u06CC \u0645\u0646"),t(),i(3,"a",2),n(4,"\u0627\u0641\u0632\u0648\u062F\u0646 \u0622\u062F\u0631\u0633 \u062C\u062F\u06CC\u062F"),t()(),c(5,mt,3,0,"div",3)(6,ct,3,0,"div",3)(7,vt,2,1,"div",4)),u&2&&(a(5),l("ngIf",s.isLoading),a(),l("ngIf",!s.isLoading&&(!s.addresses||s.addresses.length===0)),a(),l("ngIf",!s.isLoading&&s.addresses&&s.addresses.length>0))},dependencies:[A,N,F,V,M],encapsulation:2});let e=o;return e})();var Kt=[{path:"",component:Te,canActivate:[Ce],children:[{path:"",redirectTo:"profile",pathMatch:"full"},{path:"profile",component:Oe},{path:"order-history",component:je},{path:"order/:id",loadComponent:()=>import("./chunk-CNEMS6JU.js").then(e=>e.OrderDetailPage)},{path:"addresses",component:Pe},{path:"addresses/new",component:oe},{path:"addresses/edit/:id",component:oe}]}];export{Kt as DASHBOARD_ROUTES};
