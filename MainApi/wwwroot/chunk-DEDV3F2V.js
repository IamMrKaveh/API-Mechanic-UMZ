import{a as A}from"./chunk-A3OD476O.js";import{A as k,G as C,d as _,h as D,i as w}from"./chunk-2CT2PKNK.js";import{Ab as u,Ca as r,Cb as s,Kb as f,Na as h,Nb as m,Ob as g,Pb as I,Sa as b,Xa as p,gb as c,hb as o,ib as d,jb as y,tb as l,za as v}from"./chunk-6VZDFBBI.js";var S=e=>["/products",e];function z(e,n){if(e&1&&(o(0,"div",17),u(1),m(2,"number"),d()),e&2){let t=l(2);r(),s(" ",I(2,1,t.discountPercentage,"1.0-0"),"% ")}}function E(e,n){e&1&&(o(0,"div",18)(1,"span",19),u(2," \u0646\u0627\u0645\u0648\u062C\u0648\u062F "),d()())}function P(e,n){if(e&1&&(o(0,"span",20),u(1),m(2,"number"),d()),e&2){let t=l(2);r(),s(" ",g(2,1,t.product.maxPrice)," ")}}function U(e,n){if(e&1&&(o(0,"div",1)(1,"a",2)(2,"span",3),u(3),d()(),o(4,"div",4),y(5,"img",5),p(6,z,3,4,"div",6)(7,E,3,0,"div",7),d(),o(8,"div",8)(9,"h3",9),u(10),d(),o(11,"div",10)(12,"div",11),p(13,P,3,3,"span",12),o(14,"span",13),u(15),m(16,"number"),o(17,"span",14),u(18,"\u062A\u0648\u0645\u0627\u0646"),d()()(),o(19,"button",15)(20,"span",16),u(21,"add"),d()()()()()),e&2){let t=l();r(),c("routerLink",f(14,S,t.product.id))("title",t.product.name),r(2),s("\u0645\u0634\u0627\u0647\u062F\u0647 \u062C\u0632\u0626\u06CC\u0627\u062A ",t.product.name),r(2),c("src",t.productIconUrl,v)("alt",t.product.name),r(),c("ngIf",t.hasDiscount),r(),c("ngIf",!t.isInStock()),r(3),s(" ",t.product.name," "),r(3),c("ngIf",t.hasDiscount),r(2),s(" ",g(16,12,t.product.minPrice)," "),r(4),c("routerLink",f(16,S,t.product.id))("disabled",!t.isInStock())}}var R=(()=>{let n=class n{constructor(a){this.mediaService=a}isInStock(){return this.product?this.product.variants.some(i=>i.isUnlimited)?!0:this.product.totalStock>0:!1}get productIconUrl(){let i=this.product?.images?.find(x=>x.isPrimary)?.url||this.product?.images?.[0]?.url;return i?this.mediaService.getMediaUrl(i):"https://via.placeholder.com/300"}get hasDiscount(){return!this.product||!this.product.variants?!1:this.product.variants.some(a=>a.originalPrice>a.sellingPrice)}get discountPercentage(){return this.hasDiscount?Math.max(...this.product.variants.map(i=>i.discountPercentage)):0}};n.\u0275fac=function(i){return new(i||n)(h(A))},n.\u0275cmp=b({type:n,selectors:[["app-product-card"]],inputs:{product:"product"},decls:1,vars:1,consts:[["class","group relative flex flex-col overflow-hidden rounded-xl border border-border bg-card text-card-foreground transition-all duration-300 hover:shadow-lg hover:-translate-y-1 h-full",4,"ngIf"],[1,"group","relative","flex","flex-col","overflow-hidden","rounded-xl","border","border-border","bg-card","text-card-foreground","transition-all","duration-300","hover:shadow-lg","hover:-translate-y-1","h-full"],[1,"absolute","inset-0","z-10",3,"routerLink","title"],[1,"sr-only"],[1,"relative","aspect-square","overflow-hidden","bg-secondary/20","p-4"],["loading","lazy",1,"h-full","w-full","object-contain","transition-transform","duration-500","group-hover:scale-110","mix-blend-multiply",3,"src","alt"],["class","absolute top-2 left-2 z-20 rounded-md bg-destructive px-2.5 py-1 text-xs font-bold text-destructive-foreground shadow-sm",4,"ngIf"],["class","absolute inset-0 z-20 flex items-center justify-center bg-background/60 backdrop-blur-[2px]",4,"ngIf"],[1,"flex","flex-1","flex-col","p-4"],[1,"mb-2","line-clamp-2","text-sm","font-medium","leading-tight","text-foreground","group-hover:text-primary","transition-colors","min-h-[2.5rem]"],[1,"mt-auto","flex","items-end","justify-between","gap-2"],[1,"flex","flex-col"],["class","text-xs text-muted-foreground line-through decoration-destructive/50",4,"ngIf"],[1,"text-lg","font-bold","text-foreground"],[1,"text-xs","font-normal","text-muted-foreground"],["aria-label","\u0627\u0641\u0632\u0648\u062F\u0646 \u0628\u0647 \u0633\u0628\u062F",1,"btn","btn-secondary","btn-icon","h-8","w-8","rounded-full","opacity-0","shadow-sm","transition-all","group-hover:opacity-100","hover:bg-primary","hover:text-primary-foreground","relative","z-20",3,"routerLink","disabled"],[1,"material-icons","text-lg"],[1,"absolute","top-2","left-2","z-20","rounded-md","bg-destructive","px-2.5","py-1","text-xs","font-bold","text-destructive-foreground","shadow-sm"],[1,"absolute","inset-0","z-20","flex","items-center","justify-center","bg-background/60","backdrop-blur-[2px]"],[1,"rounded-full","border","border-border","bg-background/80","px-3","py-1","text-xs","font-semibold","text-muted-foreground","shadow-sm"],[1,"text-xs","text-muted-foreground","line-through","decoration-destructive/50"]],template:function(i,x){i&1&&p(0,U,22,18,"div",0),i&2&&c("ngIf",x.product)},dependencies:[w,_,C,k,D],encapsulation:2});let e=n;return e})();var F=(function(e){return e.newest="Newest",e.oldest="Oldest",e.priceAsc="PriceAsc",e.priceDesc="PriceDesc",e.nameAsc="NameAsc",e.nameDesc="NameDesc",e.discountAsc="DiscountAsc",e.discountDesc="DiscountDesc",e})(F||{});export{R as a,F as b};
