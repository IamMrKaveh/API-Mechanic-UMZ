import{a as v}from"./chunk-VYLAOETP.js";import{a as h}from"./chunk-HPJP2VN4.js";import"./chunk-WNMS36QR.js";import{i as g,w as _,y as f}from"./chunk-KEVVMOUP.js";import{Ab as u,U as d,Ua as o,Va as l,Y as n,kb as c,lb as m,mb as p}from"./chunk-RYHSS54R.js";import"./chunk-4CLCTAJ7.js";var y=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=l({type:e});static \u0275inj=d({imports:[v]})}return e})();var K=(()=>{let t=class t{constructor(){this.route=n(_),this.router=n(f),this.orderService=n(h)}ngOnInit(){let r=this.route.snapshot.queryParams,i=r.Authority||r.authority,s=r.Status||r.status;if(!i||!s){this.router.navigate(["/payment/result"],{queryParams:{status:"failure",reason:"\u067E\u0627\u0631\u0627\u0645\u062A\u0631\u0647\u0627\u06CC \u067E\u0631\u062F\u0627\u062E\u062A \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u0627\u0633\u062A"}});return}this.orderService.verifyPayment(i,s).subscribe({next:a=>{a.isVerified?this.router.navigate(["/payment/result"],{queryParams:{status:"success",refId:a.refId,orderId:a.orderId}}):this.router.navigate(["/payment/result"],{queryParams:{status:"failure",reason:a.message}})},error:()=>{this.router.navigate(["/payment/result"],{queryParams:{status:"failure",reason:"\u062E\u0637\u0627 \u062F\u0631 \u062A\u0627\u06CC\u06CC\u062F \u067E\u0631\u062F\u0627\u062E\u062A"}})}})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=o({type:t,selectors:[["app-payment-callback"]],decls:6,vars:0,consts:[[1,"flex","flex-col","items-center","justify-center","h-[60vh]","space-y-6"],[1,"relative","w-16","h-16"],[1,"absolute","inset-0","border-4","border-muted","rounded-full"],[1,"absolute","inset-0","border-4","border-primary","border-t-transparent","rounded-full","animate-spin"],[1,"text-lg","font-medium","text-foreground"]],template:function(i,s){i&1&&(c(0,"div",0)(1,"div",1),p(2,"div",2)(3,"div",3),m(),c(4,"p",4),u(5,"\u062F\u0631 \u062D\u0627\u0644 \u0628\u0631\u0631\u0633\u06CC \u0648\u0636\u0639\u06CC\u062A \u067E\u0631\u062F\u0627\u062E\u062A..."),m()())},dependencies:[g,y],encapsulation:2});let e=t;return e})();export{K as PaymentCallbackComponent};
