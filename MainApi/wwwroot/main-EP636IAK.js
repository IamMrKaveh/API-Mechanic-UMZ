import{a as St}from"./chunk-327S73WV.js";import{c as K,d as F,f as w,g as Ie,h as R}from"./chunk-DUKSTT3K.js";import{a as kt}from"./chunk-DU7WBQPN.js";import{a as fe}from"./chunk-3IJ5BHYX.js";import{a as L}from"./chunk-VWB6FTBM.js";import{B as Et,b as It,d as Tt,h as At}from"./chunk-34BYHSYA.js";import{b as Q}from"./chunk-4HBBO3GX.js";import{a as M}from"./chunk-GRXHOR55.js";import{a as X}from"./chunk-5KULSLMJ.js";import{A as yt,B as bt,C as _t,D as Ct,E as wt,F as W,b as at,c as q,d as V,e as me,f as st,i as E,j as O,k as ut,l as lt,m as ct,n as dt,o as ke,p as pe,q as mt,r as pt,s as ft,t as ht,u as gt,v as vt,x as xt,y as ee,z as Y}from"./chunk-XC2V2DTE.js";import{Ab as Z,Ba as Be,Bb as u,Ca as ne,Cb as G,D as Re,Da as l,Db as C,E as Pe,Gb as et,Ha as ze,Hb as tt,Ia as Ge,Ib as it,Ja as Ye,Kb as we,L as ie,Lb as Se,M as _,Ma as We,N as T,Na as Xe,O as Oe,Oa as y,Ob as A,P as Le,Pa as Ke,Pb as P,Qb as nt,Rb as rt,S as B,Ta as I,Tb as ot,V as Ne,W as D,X as S,Y as je,Ya as g,aa as v,ab as Ze,ba as x,ca as le,da as ce,ea as De,eb as Qe,f as N,fa as Ve,g as te,ha as $e,hb as c,ib as o,j as H,jb as a,k,ka as He,kb as p,n as se,ob as re,pb as oe,qa as de,qb as b,tb as f,u as U,ua as z,ub as h,v as ue,va as Ue,w as Me,x as Fe,y as J,yb as Je,z as j,zb as qe}from"./chunk-YUH66BVO.js";import{a as _e,b as Ce}from"./chunk-4CLCTAJ7.js";var Mt=[{path:"",loadComponent:()=>import("./chunk-GFCXQ7XC.js").then(e=>e.Home)},{path:"auth",loadChildren:()=>import("./chunk-JS56NNHX.js").then(e=>e.AUTH_ROUTES)},{path:"cart",loadComponent:()=>import("./chunk-XIWMXUKN.js").then(e=>e.CartPage),canActivate:[fe]},{path:"products",loadChildren:()=>import("./chunk-UU5O75TV.js").then(e=>e.PRODUCTS_ROUTES)},{path:"discounts",loadChildren:()=>import("./chunk-FAVYDQH5.js").then(e=>e.DISCOUNT_ROUTES)},{path:"checkout",loadChildren:()=>import("./chunk-K2SJYT3T.js").then(e=>e.CHECKOUT_ROUTES),canActivate:[fe]},{path:"payment",loadChildren:()=>import("./chunk-ZDJ3MNJY.js").then(e=>e.PAYMENT_ROUTES)},{path:"dashboard",loadChildren:()=>import("./chunk-L7JM3B6R.js").then(e=>e.DASHBOARD_ROUTES),canActivate:[fe]},{path:"admin",loadChildren:()=>import("./chunk-HXOQZHAR.js").then(e=>e.ADMIN_ROUTES),canActivate:[St]},{path:"**",redirectTo:"",pathMatch:"full"}];var Qt="@",Jt=(()=>{class e{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=S(De);loadingSchedulerFn=S(qt,{optional:!0});_engine;constructor(r,t,n,s,d){this.doc=r,this.delegate=t,this.zone=n,this.animationType=s,this.moduleImpl=d}ngOnDestroy(){this._engine?.flush()}loadImpl(){let r=()=>this.moduleImpl??import("./chunk-KZCHHBJT.js").then(n=>n),t;return this.loadingSchedulerFn?t=this.loadingSchedulerFn(r):t=r(),t.catch(n=>{throw new Le(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:s})=>{this._engine=n(this.animationType,this.doc);let d=new s(this.delegate,this._engine,this.zone);return this.delegate=d,d})}createRenderer(r,t){let n=this.delegate.createRenderer(r,t);if(n.\u0275type===0)return n;typeof n.throwOnSyntheticProps=="boolean"&&(n.throwOnSyntheticProps=!1);let s=new Te(n);return t?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(d=>{let m=d.createRenderer(r,t);s.use(m),this.scheduler??=this.injector.get(He,null,{optional:!0}),this.scheduler?.notify(10)}).catch(d=>{s.use(n)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(r){this._engine?.flush(),this.delegate.componentReplaced?.(r)}static \u0275fac=function(t){Ke()};static \u0275prov=B({token:e,factory:e.\u0275fac})}return e})(),Te=class{delegate;replay=[];\u0275type=1;constructor(i){this.delegate=i}use(i){if(this.delegate=i,this.replay!==null){for(let r of this.replay)r(i);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(i,r){return this.delegate.createElement(i,r)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}get destroyNode(){return this.delegate.destroyNode}appendChild(i,r){this.delegate.appendChild(i,r)}insertBefore(i,r,t,n){this.delegate.insertBefore(i,r,t,n)}removeChild(i,r,t,n){this.delegate.removeChild(i,r,t,n)}selectRootElement(i,r){return this.delegate.selectRootElement(i,r)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,r,t,n){this.delegate.setAttribute(i,r,t,n)}removeAttribute(i,r,t){this.delegate.removeAttribute(i,r,t)}addClass(i,r){this.delegate.addClass(i,r)}removeClass(i,r){this.delegate.removeClass(i,r)}setStyle(i,r,t,n){this.delegate.setStyle(i,r,t,n)}removeStyle(i,r,t){this.delegate.removeStyle(i,r,t)}setProperty(i,r,t){this.shouldReplay(r)&&this.replay.push(n=>n.setProperty(i,r,t)),this.delegate.setProperty(i,r,t)}setValue(i,r){this.delegate.setValue(i,r)}listen(i,r,t,n){return this.shouldReplay(r)&&this.replay.push(s=>s.listen(i,r,t,n)),this.delegate.listen(i,r,t,n)}shouldReplay(i){return this.replay!==null&&i.startsWith(Qt)}},qt=new Ne("");function Ft(e="animations"){return ze("NgAsyncAnimations"),je([{provide:We,useFactory:(i,r,t)=>new Jt(i,r,t,e),deps:[Ve,ut,Ye]},{provide:Ue,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var he=!1,Ae=new te(null),ge=()=>{if(typeof window>"u")return!1;let e=window.location.pathname.toLowerCase(),i=window.location.search.toLowerCase();return e.includes("/payment")||e.includes("/callback")||i.includes("authority=")||i.includes("status=")},ei=e=>{let i=e.toLowerCase();return i.includes("/verify-payment")||i.includes("/orders/verify-payment")||i.includes("payment")},ve=(e,i)=>{let r=L.getAuthToken();if(r&&!e.url.includes("/refresh"))return e.clone({setHeaders:{Authorization:`Bearer ${r}`}});if(!i.isAuthenticated()){let t=Q.getGuestToken();if(t)return e.clone({setHeaders:{"X-Guest-Token":t}})}return e},ti=(e,i,r,t)=>he?Ae.pipe(J(n=>n!=null),Re(1),ie(()=>i(ve(e,r)))):(he=!0,Ae.next(null),r.refreshToken().pipe(ie(n=>(he=!1,n&&n.token?(Ae.next(n.token),i(ve(e,r))):(ge()||(r.logout(),t.clearLocalCart()),k(()=>new Error("Session expired."))))),j(n=>(he=!1,ge()||(r.logout(!1),t.clearLocalCart()),k(()=>n))))),Rt=(e,i)=>{let r=S(L),t=S(Q),n=e.url.startsWith(X.API_URL),s=e;return ge()||ei(e.url)?(n&&(s=ve(e,r)),s=s.clone({withCredentials:!0})):n&&(s=ve(e,r),s=s.clone({withCredentials:!0})),i(s).pipe(j(d=>{let m=e.url.includes("/login")||e.url.includes("/refresh")||e.url.includes("/verify-otp");return d instanceof ke&&d.status===401&&m?(ge()||r.logout(!1),k(()=>d)):d instanceof ke&&d.status===401&&n?ti(e,i,r,t):k(()=>d)}))};var ii=e=>{let i=e.url.toLowerCase(),r=e.headers.has("X-Payment-Verification");return i.includes("/verify-payment")||i.includes("/payment")||i.includes("/checkout")||r},ni=()=>{if(typeof window>"u")return!1;let e=window.location.pathname.toLowerCase(),i=window.location.search.toLowerCase();return e.includes("/payment/callback")||e.includes("/payment/success")||e.includes("/payment/failure")||e.includes("/payment")||i.includes("authority=")||i.includes("status=")},Pt=(e,i)=>{let r=S(M),t=S(L);return i(e).pipe(j(n=>{let s=e.url.includes("/login")||e.url.includes("/refresh")||e.url.includes("/verify-otp");if(ii(e)||ni())return k(()=>n);if(n.status===401&&s)return t.logout(!1),k(()=>n);if(n.status===401&&!s)return k(()=>n);let m="\u06CC\u06A9 \u062E\u0637\u0627\u06CC \u067E\u06CC\u0634\u200C\u0628\u06CC\u0646\u06CC \u0646\u0634\u062F\u0647 \u0631\u062E \u062F\u0627\u062F.  \u0644\u0637\u0641\u0627 \u062F\u0648\u0628\u0627\u0631\u0647 \u062A\u0644\u0627\u0634 \u06A9\u0646\u06CC\u062F.";return n.status===429?m="\u062A\u0639\u062F\u0627\u062F \u062F\u0631\u062E\u0648\u0627\u0633\u062A\u200C\u0647\u0627\u06CC \u0634\u0645\u0627 \u0628\u06CC\u0634 \u0627\u0632 \u062D\u062F \u0645\u062C\u0627\u0632 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627\u064B \u0686\u0646\u062F \u0644\u062D\u0638\u0647 \u0628\u0639\u062F \u062F\u0648\u0628\u0627\u0631\u0647 \u062A\u0644\u0627\u0634 \u06A9\u0646\u06CC\u062F.":n.status===409?n.error?.message?.includes("modified by another user")||n.error?.message?.includes("Cart was updated")?m="\u0627\u06CC\u0646 \u0631\u06A9\u0648\u0631\u062F \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627\u064B \u0635\u0641\u062D\u0647 \u0631\u0627 \u0631\u0641\u0631\u0634 \u06A9\u0646\u06CC\u062F.":m=n.error?.message||"\u0627\u0637\u0644\u0627\u0639\u0627\u062A \u062A\u0648\u0633\u0637 \u06A9\u0627\u0631\u0628\u0631 \u062F\u06CC\u06AF\u0631\u06CC \u062A\u063A\u06CC\u06CC\u0631 \u06A9\u0631\u062F\u0647 \u0627\u0633\u062A.  \u0644\u0637\u0641\u0627\u064B \u0635\u0641\u062D\u0647 \u0631\u0627 \u0631\u0641\u0631\u0634 \u06A9\u0631\u062F\u0647 \u0648 \u062F\u0648\u0628\u0627\u0631\u0647 \u062A\u0644\u0627\u0634 \u06A9\u0646\u06CC\u062F.":n.error instanceof ErrorEvent?m=`\u062E\u0637\u0627: ${n.error.message}`:n.error&&typeof n.error.message=="string"?m=n.error.message:typeof n.error=="string"&&n.error.length<200?m=n.error:n.statusText&&(m=`\u062E\u0637\u0627: ${n.statusText}`),r.show(m,"error"),k(()=>n)}))};var Ot=(e,i)=>{let r=S(M);return i(e).pipe(j(t=>t.status===429?ri(t,e,i,r):k(()=>t)))};function ri(e,i,r,t){let n=e.headers.get("Retry-After"),s=parseInt(n||"60",10),d=s*1e3,m=n?`\u062F\u0631\u062E\u0648\u0627\u0633\u062A\u200C\u0647\u0627\u06CC \u0634\u0645\u0627 \u0628\u06CC\u0634 \u0627\u0632 \u062D\u062F \u0645\u062C\u0627\u0632 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627 ${s} \u062B\u0627\u0646\u06CC\u0647 \u0635\u0628\u0631 \u06A9\u0646\u06CC\u062F.`:"\u062F\u0631\u062E\u0648\u0627\u0633\u062A\u200C\u0647\u0627\u06CC \u0634\u0645\u0627 \u0628\u06CC\u0634 \u0627\u0632 \u062D\u062F \u0645\u062C\u0627\u0632 \u0627\u0633\u062A. \u0644\u0637\u0641\u0627 \u0686\u0646\u062F \u0644\u062D\u0638\u0647 \u0635\u0628\u0631 \u06A9\u0646\u06CC\u062F.";return t.show(m,"error"),typeof window<"u"&&!window.navigator.onLine&&console.warn("[Rate Limit] Network appears to be offline"),console.warn("[Rate Limit] Too many requests. Retrying after:",s,"seconds"),ue(d).pipe(T(()=>{console.info("[Rate Limit] Retrying request..."),t.show("\u062F\u0631 \u062D\u0627\u0644 \u062A\u0644\u0627\u0634 \u0645\u062C\u062F\u062F...","info")}),ie(()=>r(i)),j(be=>be.status===429?(t.show("\u062F\u0631\u062E\u0648\u0627\u0633\u062A \u0634\u0645\u0627 \u0647\u0645\u0686\u0646\u0627\u0646 \u0645\u062D\u062F\u0648\u062F \u0627\u0633\u062A. \u0644\u0637\u0641\u0627 \u0628\u0639\u062F\u0627\u064B \u062A\u0644\u0627\u0634 \u06A9\u0646\u06CC\u062F.","error"),k(()=>be)):k(()=>be)))}function oi(e){let i=e&&(e.hasOwnProperty("items")||e.hasOwnProperty("Items")),r=e&&(e.hasOwnProperty("totalItems")||e.hasOwnProperty("TotalItems")||e.hasOwnProperty("totalCount")||e.hasOwnProperty("TotalCount"));return i&&r}var Lt=(e,i)=>i(e).pipe(se(r=>{if(r instanceof dt&&r.body&&oi(r.body)){let t=r.body,n={items:t.items??t.Items??[],totalItems:t.totalItems??t.TotalItems??t.totalCount??t.TotalCount??0,page:t.page??t.Page??t.pageNumber??t.PageNumber??1,pageSize:t.pageSize??t.PageSize??10,totalPages:t.totalPages??t.TotalPages??1};return r.clone({body:n})}return r}));var Nt=(e,i)=>{let r=S(mt);if(!(ai(e.method)&&si(e.url)&&!ui(e.url)))return i(e);let n=r.getToken();if(n){let s=e.clone({headers:e.headers.set("X-XSRF-TOKEN",n)});return i(s)}return i(e)};function ai(e){return["POST","PUT","PATCH","DELETE"].includes(e.toUpperCase())}function si(e){return e.startsWith(X.API_URL)||e.startsWith("/api")}function ui(e){return["/api/Users/login","/api/Users/verify-otp","/api/Users/refresh"].some(r=>e.includes(r))}var jt=(()=>{let i=class i{constructor(t,n){this.http=t,this.platformId=n,this.apiUrl=`${X.API_URL}Security/csrf-token`,this.tokenFetched=!1}isPaymentPage(){if(!O(this.platformId))return!1;let t=window.location.pathname.toLowerCase(),n=window.location.search.toLowerCase();return t.includes("/payment")||t.includes("/callback")||n.includes("authority=")||n.includes("status=")}initializeCsrfToken(){return O(this.platformId)?this.tokenFetched?H(void 0):this.isPaymentPage()?(console.log("[CSRF] Skipping token fetch on payment page"),H(void 0)):this.http.get(this.apiUrl).pipe(T(t=>{t&&t.token&&(this.tokenFetched=!0,console.log("[CSRF] Token initialized successfully"))}),j(t=>(console.warn("[CSRF] Token fetch failed:",t),H(void 0))),se(()=>{})):H(void 0)}refreshCsrfToken(){return this.isPaymentPage()?H(void 0):(this.tokenFetched=!1,this.initializeCsrfToken())}};i.\u0275fac=function(n){return new(n||i)(D(pe),D(z))},i.\u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();function ci(e){return()=>{if(typeof window<"u"){let i=window.location.pathname.toLowerCase(),r=window.location.search.toLowerCase();if(i.includes("/payment")||r.includes("authority=")||r.includes("status="))return H(void 0)}return e.initializeCsrfToken()}}var Ee=class{constructor(){this.notificationService=S(M)}isPaymentPage(){if(typeof window>"u")return!1;let i=window.location.pathname.toLowerCase(),r=window.location.search.toLowerCase();return i.includes("/payment")||i.includes("/checkout")||r.includes("authority=")||r.includes("status=")}handleError(i){if(i?.message?.includes("Loading chunk")||i?.message?.includes("ChunkLoadError")||i?.message?.includes("Failed to fetch dynamically imported module")){console.warn("Chunk loading error detected:",i.message),typeof window<"u"&&(sessionStorage.getItem("chunk_reload_attempted")?(sessionStorage.removeItem("chunk_reload_attempted"),this.notificationService.show("\u062E\u0637\u0627 \u062F\u0631 \u0628\u0627\u0631\u06AF\u0630\u0627\u0631\u06CC \u0635\u0641\u062D\u0647. \u0644\u0637\u0641\u0627\u064B \u0635\u0641\u062D\u0647 \u0631\u0627 \u0631\u0641\u0631\u0634 \u06A9\u0646\u06CC\u062F.","error")):(sessionStorage.setItem("chunk_reload_attempted","true"),window.location.reload()));return}console.error("Unhandled error:",i),!i.rejection&&i.status!==401&&!this.isPaymentPage()&&this.notificationService.show("\u06CC\u06A9 \u062E\u0637\u0627\u06CC \u063A\u06CC\u0631\u0645\u0646\u062A\u0638\u0631\u0647 \u0631\u062E \u062F\u0627\u062F. \u0644\u0637\u0641\u0627\u064B \u062F\u0648\u0628\u0627\u0631\u0647 \u062A\u0644\u0627\u0634 \u06A9\u0646\u06CC\u062F.","error")}},Dt={providers:[ot({eventCoalescing:!0}),_t(Mt,wt(),Ct(bt)),pt(gt(),ft([Rt,Ot,Pt,Lt,Nt]),ht({headerName:"X-XSRF-TOKEN",cookieName:"XSRF-TOKEN"})),Ft(),{provide:$e,useClass:Ee},{provide:Ze,useFactory:ci,deps:[jt],multi:!0}]};var Vt=(()=>{let i=class i{constructor(t){this.http=t,this.apiUrl=`${X.API_URL}Notifications`,this.notificationsSubject=new te([]),this.notifications$=this.notificationsSubject.asObservable(),this.unreadCountSubject=new te(0),this.unreadCount$=this.unreadCountSubject.asObservable()}getNotifications(t=!1,n=1,s=20){let d=new ct().set("unreadOnly",t.toString()).set("page",n.toString()).set("pageSize",s.toString());return this.http.get(this.apiUrl,{params:d}).pipe(T(m=>{this.notificationsSubject.next(m)}))}getUnreadCount(){return this.http.get(`${this.apiUrl}/count`).pipe(T(t=>{this.unreadCountSubject.next(t.count)}))}markAsRead(t){return this.http.patch(`${this.apiUrl}/${t}/read`,{}).pipe(T(()=>{this.getUnreadCount().subscribe();let n=this.notificationsSubject.value.map(s=>s.id===t?Ce(_e({},s),{isRead:!0}):s);this.notificationsSubject.next(n)}))}markAllAsRead(){return this.http.patch(`${this.apiUrl}/read-all`,{}).pipe(T(()=>{this.unreadCountSubject.next(0);let t=this.notificationsSubject.value.map(n=>Ce(_e({},n),{isRead:!0}));this.notificationsSubject.next(t)}))}deleteNotification(t){return this.http.delete(`${this.apiUrl}/${t}`).pipe(T(()=>{let n=this.notificationsSubject.value.filter(s=>s.id!==t);this.notificationsSubject.next(n),this.getUnreadCount().subscribe()}))}};i.\u0275fac=function(n){return new(n||i)(D(pe))},i.\u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();function mi(e,i){if(e&1&&(o(0,"span",5),u(1),a()),e&2){let r=i.ngIf;Z("hidden",r===0),l(),C(" ",r>9?"9+":r," ")}}function pi(e,i){e&1&&(o(0,"div",16)(1,"span",17),u(2,"sync"),a()())}function fi(e,i){e&1&&(o(0,"div",18)(1,"span",19),u(2,"notifications_off"),a(),o(3,"p",20),u(4,"\u0647\u06CC\u0686 \u0627\u0639\u0644\u0627\u0646 \u062C\u062F\u06CC\u062F\u06CC \u0646\u062F\u0627\u0631\u06CC\u062F."),a()())}function hi(e,i){e&1&&p(0,"div",29)}function gi(e,i){if(e&1){let r=b();o(0,"div",21)(1,"a",22),f("click",function(){let n=v(r).$implicit,s=h(2);return x(s.handleNotificationClick(n))}),o(2,"div",23),g(3,hi,1,0,"div",24),a(),o(4,"div",25)(5,"p",26),u(6),a(),o(7,"p",27),u(8),a(),o(9,"span",28),u(10),A(11,"date"),a()()()()}if(e&2){let r=i.$implicit;l(3),c("ngIf",!r.isRead),l(2),Z("text-foreground",!r.isRead)("text-muted-foreground",r.isRead),l(),C(" ",r.title," "),l(2),C(" ",r.message," "),l(2),C(" ",nt(11,8,r.createdAt,"short")," ")}}function vi(e,i){if(e&1){let r=b();o(0,"div",6)(1,"div",7)(2,"h3",8),u(3,"\u0627\u0639\u0644\u0627\u0646\u200C\u0647\u0627"),a(),o(4,"button",9),A(5,"async"),f("click",function(){v(r);let n=h();return x(n.markAllAsRead())}),u(6," \u062E\u0648\u0627\u0646\u062F\u0645 \u0647\u0645\u0647 "),a()(),o(7,"div",10),g(8,pi,3,0,"div",11)(9,fi,5,0,"div",12),A(10,"async"),g(11,gi,12,11,"div",13),A(12,"async"),a(),o(13,"div",14)(14,"a",15),u(15," \u0645\u0634\u0627\u0647\u062F\u0647 \u0647\u0645\u0647 \u0627\u0639\u0644\u0627\u0646\u200C\u0647\u0627 "),a()()()}if(e&2){let r,t=h();c("@slideFade",void 0),l(4),c("disabled",P(5,5,t.unreadCount$)===0),l(4),c("ngIf",t.isLoading),l(),c("ngIf",!t.isLoading&&((r=P(10,7,t.notifications$))==null?null:r.length)===0),l(2),c("ngForOf",P(12,9,t.notifications$))}}var $t=(()=>{let i=class i{constructor(t,n,s){this.notificationService=t,this.elementRef=n,this.router=s,this.isMenuOpen=!1,this.isLoading=!1,this.destroy$=new N,this.notifications$=this.notificationService.notifications$,this.unreadCount$=this.notificationService.unreadCount$}ngOnInit(){this.notificationService.getUnreadCount().pipe(_(this.destroy$)).subscribe()}toggleMenu(){this.isMenuOpen=!this.isMenuOpen,this.isMenuOpen&&this.loadNotifications()}loadNotifications(){this.isLoading=!0,this.notificationService.getNotifications().pipe(_(this.destroy$)).subscribe(()=>{this.isLoading=!1})}markAllAsRead(){this.notificationService.markAllAsRead().pipe(_(this.destroy$)).subscribe()}handleNotificationClick(t){t.isRead||this.notificationService.markAsRead(t.id).pipe(_(this.destroy$)).subscribe(),t.actionUrl&&this.router.navigateByUrl(t.actionUrl),this.isMenuOpen=!1}onDocumentClick(t){this.elementRef.nativeElement.contains(t.target)||(this.isMenuOpen=!1)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};i.\u0275fac=function(n){return new(n||i)(y(Vt),y(de),y(ee))},i.\u0275cmp=I({type:i,selectors:[["app-notification-bell"]],hostBindings:function(n,s){n&1&&f("click",function(m){return s.onDocumentClick(m)},ne)},decls:7,vars:4,consts:[[1,"relative",3,"click"],["aria-label","Notifications",1,"relative","btn","btn-ghost","btn-icon","rounded-full","hover:bg-accent","transition-colors","duration-200","focus:outline-none","focus:ring-2","focus:ring-ring",3,"click"],[1,"material-icons-outlined","text-xl","text-foreground/80"],["class","absolute top-1.5 right-1.5 flex h-4 w-4 items-center justify-center rounded-full bg-destructive text-[10px] font-bold text-white shadow-sm ring-2 ring-background animate-in zoom-in",3,"hidden",4,"ngIf"],["class","absolute end-0 sm:end-auto sm:start-1/2 sm:-translate-x-1/2 mt-2 w-80 md:w-96 origin-top-right rounded-xl border border-border bg-card text-card-foreground shadow-xl ring-1 ring-black ring-opacity-5 focus:outline-none z-50 overflow-hidden",4,"ngIf"],[1,"absolute","top-1.5","right-1.5","flex","h-4","w-4","items-center","justify-center","rounded-full","bg-destructive","text-[10px]","font-bold","text-white","shadow-sm","ring-2","ring-background","animate-in","zoom-in"],[1,"absolute","end-0","sm:end-auto","sm:start-1/2","sm:-translate-x-1/2","mt-2","w-80","md:w-96","origin-top-right","rounded-xl","border","border-border","bg-card","text-card-foreground","shadow-xl","ring-1","ring-black","ring-opacity-5","focus:outline-none","z-50","overflow-hidden"],[1,"p-4","border-b","border-border","flex","justify-between","items-center","bg-muted/30"],[1,"font-semibold","text-sm"],[1,"text-xs","text-primary","hover:text-primary/80","hover:underline","transition-colors","disabled:opacity-50","disabled:no-underline",3,"click","disabled"],[1,"max-h-[400px]","overflow-y-auto","overscroll-contain"],["class","flex justify-center items-center p-8",4,"ngIf"],["class","p-8 text-center",4,"ngIf"],["class","divide-y divide-border",4,"ngFor","ngForOf"],[1,"p-2","bg-muted/30","border-t","border-border","text-center"],["routerLink","/dashboard/notifications",1,"text-xs","text-muted-foreground","hover:text-foreground","transition-colors","block","w-full","py-1"],[1,"flex","justify-center","items-center","p-8"],[1,"material-icons","animate-spin","text-primary","text-2xl"],[1,"p-8","text-center"],[1,"material-icons-outlined","text-4xl","text-muted-foreground/50","mb-2"],[1,"text-sm","text-muted-foreground"],[1,"divide-y","divide-border"],[1,"flex","items-start","gap-3","p-4","hover:bg-accent/50","transition-colors","cursor-pointer","relative","group",3,"click"],[1,"flex-shrink-0","mt-1"],["class","w-2 h-2 rounded-full bg-primary",4,"ngIf"],[1,"flex-1","space-y-1"],[1,"text-sm","font-medium","leading-none"],[1,"text-xs","text-muted-foreground","leading-relaxed","line-clamp-2"],[1,"text-[10px]","text-muted-foreground/70","block","pt-1"],[1,"w-2","h-2","rounded-full","bg-primary"]],template:function(n,s){n&1&&(o(0,"div",0),f("click",function(m){return s.onDocumentClick(m)},ne),o(1,"button",1),f("click",function(){return s.toggleMenu()}),o(2,"span",2),u(3,"notifications"),a(),g(4,mi,2,3,"span",3),A(5,"async"),a(),g(6,vi,16,11,"div",4),a()),n&2&&(l(4),c("ngIf",P(5,2,s.unreadCount$)),l(2),c("ngIf",s.isMenuOpen))},dependencies:[E,q,V,W,Y,me,st],encapsulation:2,data:{animation:[K("slideFade",[R(":enter",[w({opacity:0,transform:"translateY(-10px)"}),F("150ms ease-out",w({opacity:1,transform:"translateY(0)"}))]),R(":leave",[F("150ms ease-in",w({opacity:0,transform:"translateY(-10px)"}))])])]}});let e=i;return e})();var xi=e=>["/category",e],yi=e=>["/products/category-group",e];function bi(e,i){e&1&&(o(0,"span",8),u(1,"chevron_left"),a())}function _i(e,i){e&1&&(o(0,"span",9),u(1,"chevron_left"),a())}function Ci(e,i){if(e&1){let r=b();o(0,"li")(1,"button",5),f("mouseenter",function(){let n=v(r).$implicit,s=h();return x(s.setActiveCategory(n.id))}),o(2,"span"),u(3),a(),g(4,bi,2,0,"span",6)(5,_i,2,0,"span",7),a()()}if(e&2){let r=i.$implicit,t=h();l(),Z("bg-background",t.activeCategoryId===r.id)("text-primary",t.activeCategoryId===r.id)("font-bold",t.activeCategoryId===r.id),l(2),G(r.title),l(),c("ngIf",t.activeCategoryId!==r.id),l(),c("ngIf",t.activeCategoryId===r.id)}}function wi(e,i){if(e&1){let r=b();o(0,"a",19),f("click",function(){v(r);let n=h(3);return x(n.onItemClick())}),p(1,"span",20),u(2),a()}if(e&2){let r=i.$implicit;c("routerLink",Se(2,yi,r.id)),l(2),C(" ",r.title," ")}}function Si(e,i){if(e&1){let r=b();o(0,"div",11)(1,"div",12)(2,"h3",13),p(3,"span",14),u(4),a(),o(5,"a",15),f("click",function(){v(r);let n=h(2);return x(n.onItemClick())}),u(6," \u0645\u0634\u0627\u0647\u062F\u0647 \u0632\u06CC\u0631\u0645\u062C\u0645\u0648\u0639\u0647\u200C\u0647\u0627\u06CC \u0627\u06CC\u0646 \u062F\u0633\u062A\u0647 "),o(7,"span",16),u(8,"arrow_back"),a()()(),o(9,"div",17),g(10,wi,3,4,"a",18),a()()}if(e&2){let r=h().$implicit;l(4),C(" ",r.title," "),l(),c("routerLink",Se(3,xi,r.id)),l(5),c("ngForOf",r.groups)}}function ki(e,i){if(e&1&&(re(0),g(1,Si,11,5,"div",10),oe()),e&2){let r=i.$implicit,t=h();l(),c("ngIf",t.activeCategoryId===r.id)}}var Ht=(()=>{let i=class i{constructor(t){this.categoryService=t,this.categories=[],this.activeCategoryId=null,this.itemClicked=new Ge}ngOnInit(){this.categoryService.getCategoryHierarchy().subscribe({next:t=>{this.categories=t,this.categories.length>0&&(this.activeCategoryId=this.categories[0].id)}})}setActiveCategory(t){this.activeCategoryId=t}onItemClick(){this.itemClicked.emit()}};i.\u0275fac=function(n){return new(n||i)(y(kt))},i.\u0275cmp=I({type:i,selectors:[["app-category-group-menu"]],outputs:{itemClicked:"itemClicked"},decls:6,vars:2,consts:[[1,"flex","w-full","h-full","min-h-[300px]","bg-popover","text-popover-foreground","rounded-b-xl","shadow-2xl","border-t","border-border","overflow-hidden",3,"click"],[1,"w-1/4","border-l","border-border","bg-muted/20","py-2"],[1,"space-y-1"],[4,"ngFor","ngForOf"],[1,"w-3/4","p-6","bg-background"],[1,"w-full","text-right","px-4","py-3","text-sm","hover:bg-background","hover:text-primary","transition-colors","flex","items-center","justify-between","group",3,"mouseenter"],["class","material-icons text-base opacity-0 group-hover:opacity-100 transition-opacity text-primary",4,"ngIf"],["class","material-icons text-base text-primary",4,"ngIf"],[1,"material-icons","text-base","opacity-0","group-hover:opacity-100","transition-opacity","text-primary"],[1,"material-icons","text-base","text-primary"],["class","animate-fade-in",4,"ngIf"],[1,"animate-fade-in"],[1,"flex","items-center","justify-between","mb-6","border-b","border-border","pb-2"],[1,"font-bold","text-lg","text-foreground","flex","items-center","gap-2"],[1,"w-1","h-6","bg-primary","rounded-full"],[1,"text-xs","text-primary","hover:underline","flex","items-center","gap-1",3,"click","routerLink"],[1,"material-icons","text-sm"],[1,"grid","grid-cols-3","gap-x-8","gap-y-4"],["class","text-sm text-muted-foreground hover:text-primary hover:translate-x-1 transition-all duration-200 flex items-center gap-2 py-1",3,"routerLink","click",4,"ngFor","ngForOf"],[1,"text-sm","text-muted-foreground","hover:text-primary","hover:translate-x-1","transition-all","duration-200","flex","items-center","gap-2","py-1",3,"click","routerLink"],[1,"w-1.5","h-1.5","rounded-full","bg-border","group-hover:bg-primary","transition-colors"]],template:function(n,s){n&1&&(o(0,"div",0),f("click",function(m){return m.stopPropagation()}),o(1,"div",1)(2,"ul",2),g(3,Ci,6,9,"li",3),a()(),o(4,"div",4),g(5,ki,2,1,"ng-container",3),a()()),n&2&&(l(3),c("ngForOf",s.categories),l(2),c("ngForOf",s.categories))},dependencies:[E,q,V,W,Y],encapsulation:2});let e=i;return e})();var Bt=()=>({exact:!0});function Ti(e,i){if(e&1){let r=b();o(0,"div",30)(1,"div",31)(2,"app-category-group-menu",32),f("itemClicked",function(){v(r);let n=h();return x(n.closeCategoryMenu())}),a()()()}e&2&&c("@dropdownAnimation",void 0)}function Ai(e,i){if(e&1&&(o(0,"div",47),u(1),a()),e&2){let r=i.ngIf;l(),C(" \u0633\u0644\u0627\u0645\u060C ",r.firstName||"\u06A9\u0627\u0631\u0628\u0631"," ")}}function Ei(e,i){if(e&1){let r=b();o(0,"a",48),f("click",function(){v(r);let n=h(3);return x(n.closeMenu())}),o(1,"span",42),u(2,"admin_panel_settings"),a(),o(3,"span"),u(4,"\u067E\u0646\u0644 \u0627\u062F\u0645\u06CC\u0646"),a()()}}function Mi(e,i){if(e&1){let r=b();o(0,"div",37)(1,"div",38),g(2,Ai,2,1,"div",39),A(3,"async"),p(4,"div",40),o(5,"a",41),f("click",function(){v(r);let n=h(2);return x(n.closeMenu())}),o(6,"span",42),u(7,"dashboard"),a(),o(8,"span"),u(9,"\u062F\u0627\u0634\u0628\u0648\u0631\u062F"),a()(),g(10,Ei,5,0,"a",43),A(11,"async"),p(12,"div",44),o(13,"button",45),f("click",function(){v(r);let n=h(2);return x(n.logout())}),o(14,"span",46),u(15,"logout"),a(),o(16,"span"),u(17,"\u062E\u0631\u0648\u062C"),a()()()()}if(e&2){let r,t=h(2);c("@slideFade",void 0),l(2),c("ngIf",P(3,3,t.userProfile$)),l(8),c("ngIf",(r=P(11,5,t.userProfile$))==null?null:r.isAdmin)}}function Fi(e,i){if(e&1){let r=b();re(0),p(1,"app-notification-bell"),o(2,"div",33)(3,"button",34),f("click",function(n){v(r);let s=h();return x(s.toggleMenu(n))}),o(4,"span",35),u(5,"person"),a()(),g(6,Mi,18,7,"div",36),a(),oe()}if(e&2){let r=h();l(6),c("ngIf",r.isMenuOpen)}}function Ri(e,i){e&1&&(o(0,"a",49),u(1," \u0648\u0631\u0648\u062F | \u062B\u0628\u062A\u200C\u0646\u0627\u0645 "),a(),o(2,"a",50)(3,"span",5),u(4,"login"),a()())}function Pi(e,i){if(e&1&&(o(0,"span",52),u(1),a()),e&2){let r=h().ngIf;l(),C(" ",r," ")}}function Oi(e,i){if(e&1&&(re(0),g(1,Pi,2,1,"span",51),oe()),e&2){let r=i.ngIf;l(),c("ngIf",r>0)}}function Li(e,i){if(e&1){let r=b();o(0,"div",53),f("click",function(){v(r);let n=h();return x(n.isMobileMenuOpen=!1)}),a()}}function Ni(e,i){if(e&1){let r=b();o(0,"a",67),f("click",function(){v(r);let n=h(2);return x(n.isMobileMenuOpen=!1)}),o(1,"span",68),u(2),a(),u(3),a()}if(e&2){let r=i.$implicit,t=i.index;qe("animation-delay",t*50+"ms"),c("routerLink",r.link)("routerLinkActiveOptions",we(6,Bt)),l(2),G(r.icon),l(),C(" ",r.title," ")}}function ji(e,i){if(e&1){let r=b();o(0,"div",69)(1,"a",70),f("click",function(){v(r);let n=h(2);return x(n.isMobileMenuOpen=!1)}),u(2," \u0648\u0631\u0648\u062F | \u062B\u0628\u062A\u200C\u0646\u0627\u0645 "),a()()}}function Di(e,i){if(e&1){let r=b();o(0,"div",54)(1,"div",55)(2,"a",56),p(3,"img",57),o(4,"span",58),u(5,"\u0641\u0631\u0648\u0634\u06AF\u0627\u0647 \u0644\u0650\u062F\u06A9\u0627"),a()(),o(6,"button",59),f("click",function(){v(r);let n=h();return x(n.isMobileMenuOpen=!1)}),o(7,"span",5),u(8,"close"),a()()(),o(9,"div",60),p(10,"input",61),o(11,"span",62),u(12,"search"),a()(),o(13,"div",63)(14,"nav",64),g(15,Ni,4,7,"a",65),a()(),g(16,ji,3,0,"div",66),A(17,"async"),a()}if(e&2){let r=h();l(15),c("ngForOf",r.mobileMenuItems),l(),c("ngIf",!P(17,2,r.isLoggedIn$))}}var zt=(()=>{let i=class i{constructor(t,n,s,d,m){this.authService=t,this.cartService=n,this.elementRef=s,this.renderer=d,this.platformId=m,this.isMenuOpen=!1,this.isMobileMenuOpen=!1,this.isCategoryMenuOpen=!1,this.isScrolled=!1,this.isDarkMode=!1,this.destroy$=new N,this.mobileMenuItems=[{title:"\u062E\u0627\u0646\u0647",link:"/",icon:"home"},{title:"\u0645\u062D\u0635\u0648\u0644\u0627\u062A",link:"/products",icon:"storefront"},{title:"\u062A\u062E\u0641\u06CC\u0641\u200C\u0647\u0627",link:"/discounts",icon:"local_offer"}]}onWindowScroll(){this.isScrolled=window.scrollY>20}onDocumentClick(t){let n=this.elementRef.nativeElement.querySelector(".user-menu-container");n&&!n.contains(t.target)&&(this.isMenuOpen=!1)}ngOnInit(){this.isLoggedIn$=this.authService.isLoggedIn$,this.userProfile$=this.authService.userProfile$,this.cartItemCount$=this.cartService.cartItemCount$,this.isLoggedIn$.pipe(Pe(),_(this.destroy$)).subscribe(t=>{t?this.cartService.getCartItemsCount().subscribe():this.cartService.clearLocalCart()}),this.authService.isAuthenticated()&&this.cartService.getMyCart().subscribe(),this.initTheme()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}toggleMenu(t){t.stopPropagation(),this.isMenuOpen=!this.isMenuOpen}closeMenu(){this.isMenuOpen=!1}showCategoryMenu(){clearTimeout(this.hoverTimeout),this.isCategoryMenuOpen=!0}hideCategoryMenu(){this.hoverTimeout=setTimeout(()=>{this.isCategoryMenuOpen=!1},150)}closeCategoryMenu(){this.isCategoryMenuOpen=!1}logout(){this.closeMenu(),this.authService.logout()}initTheme(){if(O(this.platformId)){let t=localStorage.getItem("theme"),n=window.matchMedia("(prefers-color-scheme: dark)").matches;t==="dark"||!t&&n?(this.isDarkMode=!0,this.renderer.addClass(document.documentElement,"dark")):(this.isDarkMode=!1,this.renderer.removeClass(document.documentElement,"dark"))}}toggleTheme(){document.documentElement.classList.add("theme-transitioning"),this.isDarkMode=!this.isDarkMode,this.isDarkMode?(this.renderer.addClass(document.documentElement,"dark"),localStorage.setItem("theme","dark")):(this.renderer.removeClass(document.documentElement,"dark"),localStorage.setItem("theme","light")),setTimeout(()=>{document.documentElement.classList.remove("theme-transitioning")},300)}};i.\u0275fac=function(n){return new(n||i)(y(L),y(Q),y(de),y(Xe),y(z))},i.\u0275cmp=I({type:i,selectors:[["app-header"]],hostBindings:function(n,s){n&1&&f("scroll",function(){return s.onWindowScroll()},Be)("click",function(m){return s.onDocumentClick(m)},ne)},decls:47,vars:20,consts:[["loggedOut",""],[1,"sticky","top-0","z-50","w-full","border-b","border-border/40","bg-background/95","backdrop-blur","supports-[backdrop-filter]:bg-background/60","transition-all","duration-300","ease-in-out"],[1,"container","flex","h-16","max-w-screen-2xl","items-center"],[1,"mr-auto","flex","items-center","gap-2","lg:hidden"],["aria-label","\u0645\u0646\u0648",1,"btn","btn-ghost","btn-icon","rounded-full","active:scale-95","transition-transform",3,"click"],[1,"material-icons"],[1,"flex","items-center","gap-8"],["routerLink","/","aria-label","\u0628\u0627\u0632\u06AF\u0634\u062A \u0628\u0647 \u0635\u0641\u062D\u0647 \u0627\u0635\u0644\u06CC",1,"flex","items-center","gap-2","transition-transform","hover:scale-105","active:scale-95"],["src","/assets/icons/ledka-icon.jpg","alt","\u0644\u0648\u06AF\u0648 \u0641\u0631\u0648\u0634\u06AF\u0627\u0647","width","36","height","36",1,"h-9","w-auto","rounded-md"],[1,"hidden","text-xl","font-bold","sm:inline-block","bg-gradient-to-r","from-primary","to-primary/70","bg-clip-text","text-transparent"],[1,"hidden","items-center","gap-6","text-sm","font-medium","lg:flex","h-full"],["routerLink","/","routerLinkActive","text-foreground font-bold",1,"relative","text-muted-foreground","transition-colors","hover:text-foreground/80","group","py-2",3,"routerLinkActiveOptions"],[1,"absolute","bottom-0","right-0","w-0","h-0.5","bg-primary","transition-all","duration-300","group-hover:w-full"],[1,"relative","h-full","flex","items-center","group",3,"mouseenter","mouseleave"],[1,"text-muted-foreground","transition-colors","hover:text-foreground/80","flex","items-center","gap-1","h-full","py-2"],[1,"material-icons","text-lg","transition-transform","group-hover:rotate-12"],["class","absolute top-full right-0 w-[800px] pt-2",4,"ngIf"],["routerLink","/products","routerLinkActive","text-foreground font-bold",1,"relative","text-muted-foreground","transition-colors","hover:text-foreground/80","group","py-2"],["routerLink","/discounts","routerLinkActive","text-primary font-bold",1,"text-muted-foreground","transition-colors","hover:text-primary","flex","items-center","gap-1","group","py-2"],[1,"material-icons","text-lg","transition-transform","group-hover:scale-110","group-hover:rotate-[-15deg]"],[1,"flex","flex-1","items-center","justify-end","gap-2","sm:gap-4"],[1,"btn","btn-ghost","btn-icon","rounded-full","hover:bg-accent","text-muted-foreground","transition-transform","active:scale-95",3,"click"],["aria-label","\u062C\u0633\u062A\u062C\u0648",1,"btn","btn-ghost","btn-icon","rounded-full","hidden","sm:flex","text-muted-foreground","hover:text-foreground","hover:bg-accent"],[4,"ngIf","ngIfElse"],[1,"h-6","w-px","bg-border","hidden","sm:block","mx-1"],["routerLink","/cart","aria-label","\u0645\u0634\u0627\u0647\u062F\u0647 \u0633\u0628\u062F \u062E\u0631\u06CC\u062F",1,"relative","btn","btn-ghost","btn-icon","rounded-full","hover:bg-accent","hover:text-primary","transition-colors","group"],[1,"material-icons-outlined","text-foreground/80","group-hover:text-primary","transition-colors"],[4,"ngIf"],["class","mobile-menu-overlay lg:hidden animate-fade-in",3,"click",4,"ngIf"],["class","mobile-menu-sidebar fixed inset-y-0 right-0 h-full w-4/5 border-l border-border bg-background/95 backdrop-blur-xl p-6 shadow-2xl transition-transform duration-300 ease-in-out sm:max-w-sm lg:hidden flex flex-col",4,"ngIf"],[1,"absolute","top-full","right-0","w-[800px]","pt-2"],[1,"glass","rounded-xl","overflow-hidden","shadow-2xl","border","border-white/20","dark:border-white/10"],[3,"itemClicked"],[1,"relative","user-menu-container"],["aria-label","\u0628\u0627\u0632 \u06A9\u0631\u062F\u0646 \u0645\u0646\u0648\u06CC \u06A9\u0627\u0631\u0628\u0631",1,"btn","btn-ghost","btn-icon","rounded-full","border","border-transparent","hover:border-border/50","hover:bg-accent","transition-all",3,"click"],[1,"material-icons","text-foreground/80"],["class","absolute start-0 mt-2 w-56 origin-top-left rounded-2xl border border-white/20 bg-popover/90 backdrop-blur-md text-popover-foreground shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none p-1 z-50",4,"ngIf"],[1,"absolute","start-0","mt-2","w-56","origin-top-left","rounded-2xl","border","border-white/20","bg-popover/90","backdrop-blur-md","text-popover-foreground","shadow-2xl","ring-1","ring-black","ring-opacity-5","focus:outline-none","p-1","z-50"],["role","menu","aria-orientation","vertical",1,"py-1"],["class","px-3 py-2 text-xs font-medium text-muted-foreground",4,"ngIf"],[1,"border-b","border-border","my-1"],["routerLink","/dashboard","role","menuitem",1,"flex","items-center","gap-2","rounded-xl","px-3","py-2.5","text-sm","hover:bg-primary/10","hover:text-primary","transition-colors","group",3,"click"],[1,"material-icons-outlined","text-lg","group-hover:scale-110","transition-transform"],["routerLink","/admin","class","flex items-center gap-2 rounded-xl px-3 py-2.5 text-sm hover:bg-primary/10 hover:text-primary transition-colors group","role","menuitem",3,"click",4,"ngIf"],[1,"border-t","border-border","my-1"],["role","menuitem",1,"flex","w-full","items-center","gap-2","rounded-xl","px-3","py-2.5","text-sm","text-destructive","hover:bg-destructive/10","hover:text-destructive","transition-colors","group",3,"click"],[1,"material-icons-outlined","text-lg","group-hover:translate-x-1","transition-transform"],[1,"px-3","py-2","text-xs","font-medium","text-muted-foreground"],["routerLink","/admin","role","menuitem",1,"flex","items-center","gap-2","rounded-xl","px-3","py-2.5","text-sm","hover:bg-primary/10","hover:text-primary","transition-colors","group",3,"click"],["routerLink","/auth",1,"btn","btn-primary","btn-sm","shadow-lg","shadow-primary/20","hidden","md:inline-flex","rounded-full","px-6","hover:shadow-primary/40","transition-all","hover:-translate-y-0.5"],["routerLink","/auth","aria-label","\u0648\u0631\u0648\u062F",1,"btn","btn-ghost","btn-icon","rounded-full","md:hidden","hover:bg-accent","text-primary"],["class","absolute -right-0.5 -top-0.5 flex h-5 w-5 animate-bounce items-center justify-center rounded-full bg-primary text-[10px] font-bold text-primary-foreground shadow-sm ring-2 ring-background",4,"ngIf"],[1,"absolute","-right-0.5","-top-0.5","flex","h-5","w-5","animate-bounce","items-center","justify-center","rounded-full","bg-primary","text-[10px]","font-bold","text-primary-foreground","shadow-sm","ring-2","ring-background"],[1,"mobile-menu-overlay","lg:hidden","animate-fade-in",3,"click"],[1,"mobile-menu-sidebar","fixed","inset-y-0","right-0","h-full","w-4/5","border-l","border-border","bg-background/95","backdrop-blur-xl","p-6","shadow-2xl","transition-transform","duration-300","ease-in-out","sm:max-w-sm","lg:hidden","flex","flex-col"],[1,"flex","items-center","justify-between","mb-8"],["routerLink","/",1,"flex","items-center","gap-2","font-bold","text-lg"],["src","/assets/icons/ledka-icon.jpg","alt","\u0644\u0648\u06AF\u0648 \u0641\u0631\u0648\u0634\u06AF\u0627\u0647",1,"h-10","w-auto","rounded-lg","shadow-sm"],[1,"bg-gradient-to-r","from-primary","to-secondary","bg-clip-text","text-transparent"],["aria-label","\u0628\u0633\u062A\u0646 \u0645\u0646\u0648",1,"btn","btn-ghost","btn-icon","rounded-full","hover:bg-destructive/10","hover:text-destructive",3,"click"],[1,"relative","mb-6"],["type","text","placeholder","\u062C\u0633\u062A\u062C\u0648...",1,"w-full","rounded-xl","bg-muted/50","border-transparent","focus:bg-background","focus:border-primary","px-4","py-3","pl-10","text-sm","transition-all"],[1,"material-icons","absolute","left-3","top-3","text-muted-foreground"],[1,"flex","flex-col","gap-1","flex-1","overflow-y-auto"],[1,"flex","flex-col","gap-2"],["routerLinkActive","bg-primary/10 text-primary font-bold","class","flex items-center gap-4 rounded-xl px-4 py-3.5 text-sm font-medium text-muted-foreground hover:bg-muted hover:text-foreground transition-all animate-fade-in-up",3,"routerLink","routerLinkActiveOptions","animation-delay","click",4,"ngFor","ngForOf"],["class","mt-auto border-t border-border pt-6",4,"ngIf"],["routerLinkActive","bg-primary/10 text-primary font-bold",1,"flex","items-center","gap-4","rounded-xl","px-4","py-3.5","text-sm","font-medium","text-muted-foreground","hover:bg-muted","hover:text-foreground","transition-all","animate-fade-in-up",3,"click","routerLink","routerLinkActiveOptions"],[1,"material-icons-outlined","text-2xl"],[1,"mt-auto","border-t","border-border","pt-6"],["routerLink","/auth",1,"btn","btn-primary","btn-lg","w-full","rounded-2xl","shadow-lg","shadow-primary/25",3,"click"]],template:function(n,s){if(n&1){let d=b();o(0,"header",1)(1,"div",2)(2,"div",3)(3,"button",4),f("click",function(){return v(d),x(s.isMobileMenuOpen=!s.isMobileMenuOpen)}),o(4,"span",5),u(5,"menu"),a()()(),o(6,"div",6)(7,"a",7),p(8,"img",8),o(9,"span",9),u(10,"\u0641\u0631\u0648\u0634\u06AF\u0627\u0647 \u0644\u0650\u062F\u06A9\u0627"),a()(),o(11,"nav",10)(12,"a",11),u(13," \u062E\u0627\u0646\u0647 "),p(14,"span",12),a(),o(15,"div",13),f("mouseenter",function(){return v(d),x(s.showCategoryMenu())})("mouseleave",function(){return v(d),x(s.hideCategoryMenu())}),o(16,"button",14)(17,"span",15),u(18,"category"),a(),u(19," \u062F\u0633\u062A\u0647 \u0628\u0646\u062F\u06CC \u0645\u062D\u0635\u0648\u0644\u0627\u062A "),a(),g(20,Ti,3,1,"div",16),a(),o(21,"a",17),u(22," \u0645\u062D\u0635\u0648\u0644\u0627\u062A "),p(23,"span",12),a(),o(24,"a",18)(25,"span",19),u(26,"local_offer"),a(),u(27," \u062A\u062E\u0641\u06CC\u0641\u200C\u0647\u0627 \u0648 \u067E\u06CC\u0634\u0646\u0647\u0627\u062F\u0627\u062A "),a()()(),o(28,"div",20)(29,"button",21),f("click",function(){return v(d),x(s.toggleTheme())}),o(30,"span",5),u(31),a()(),o(32,"button",22)(33,"span",5),u(34,"search"),a()(),g(35,Fi,7,1,"ng-container",23),A(36,"async"),g(37,Ri,5,0,"ng-template",null,0,rt),p(39,"div",24),o(40,"a",25)(41,"span",26),u(42,"shopping_cart"),a(),g(43,Oi,2,1,"ng-container",27),A(44,"async"),a()()(),g(45,Li,1,0,"div",28)(46,Di,18,4,"div",29),a()}if(n&2){let d=Je(38);Z("py-0",s.isScrolled)("py-2",!s.isScrolled)("shadow-md",s.isScrolled),l(12),c("routerLinkActiveOptions",we(19,Bt)),l(8),c("ngIf",s.isCategoryMenuOpen),l(9),Qe("aria-label",s.isDarkMode?"\u062A\u063A\u06CC\u06CC\u0631 \u0628\u0647 \u062D\u0627\u0644\u062A \u0631\u0648\u0634\u0646":"\u062A\u063A\u06CC\u06CC\u0631 \u0628\u0647 \u062D\u0627\u0644\u062A \u062A\u0627\u0631\u06CC\u06A9"),l(2),G(s.isDarkMode?"light_mode":"dark_mode"),l(4),c("ngIf",P(36,15,s.isLoggedIn$))("ngIfElse",d),l(8),c("ngIf",P(44,17,s.cartItemCount$)),l(2),c("ngIf",s.isMobileMenuOpen),l(),c("ngIf",s.isMobileMenuOpen)}},dependencies:[E,q,V,W,Y,yt,$t,Ht,me],encapsulation:2,data:{animation:[K("slideFade",[R(":enter",[w({opacity:0,transform:"translateY(-10px)"}),F("150ms ease-out",w({opacity:1,transform:"translateY(0)"}))]),R(":leave",[F("150ms ease-in",w({opacity:0,transform:"translateY(-10px)"}))])]),K("dropdownAnimation",[R(":enter",[w({opacity:0,transform:"translateY(10px)"}),F("200ms ease-out",w({opacity:1,transform:"translateY(0)"}))]),R(":leave",[F("150ms ease-in",w({opacity:0,transform:"translateY(10px)"}))])])]}});let e=i;return e})();var Yt=(()=>{let i=class i{constructor(t){this.notificationService=t,this.newsletterEmail="",this.currentYear=new Date().getFullYear()}subscribeNewsletter(){if(this.newsletterEmail){if(!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(this.newsletterEmail)){this.notificationService.show("\u0644\u0637\u0641\u0627 \u06CC\u06A9 \u0627\u06CC\u0645\u06CC\u0644 \u0645\u0639\u062A\u0628\u0631 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F","error");return}this.notificationService.show("\u0628\u0627 \u0645\u0648\u0641\u0642\u06CC\u062A \u062F\u0631 \u062E\u0628\u0631\u0646\u0627\u0645\u0647 \u0639\u0636\u0648 \u0634\u062F\u06CC\u062F","success"),this.newsletterEmail=""}else this.notificationService.show("\u0644\u0637\u0641\u0627 \u0627\u06CC\u0645\u06CC\u0644 \u062E\u0648\u062F \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F","error")}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}};i.\u0275fac=function(n){return new(n||i)(y(M))},i.\u0275cmp=I({type:i,selectors:[["app-footer"]],decls:95,vars:2,consts:[[1,"relative","mt-20"],[1,"absolute","top-0","left-0","right-0","-translate-y-[99%]","overflow-hidden","leading-none","z-10","wave-divider"],["data-name","Layer 1","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1200 120","preserveAspectRatio","none","aria-hidden","true",1,"relative","block","w-full","h-auto",2,"min-height","60px","max-height","150px"],["d","M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z",1,"fill-muted/30"],[1,"bg-gradient-to-b","from-muted/30","to-background","pt-12","pb-8","text-foreground","relative"],[1,"container"],[1,"grid","grid-cols-1","gap-12","sm:grid-cols-2","lg:grid-cols-4","mb-12"],[1,"space-y-6"],["routerLink","/",1,"flex","items-center","gap-2","mb-2"],["src","/assets/icons/ledka-icon.jpg","alt","Ledka Logo","loading","lazy",1,"w-10","h-10","rounded-lg","shadow-md"],[1,"text-2xl","font-black","bg-gradient-to-r","from-primary","to-primary/60","bg-clip-text","text-transparent"],[1,"text-sm","text-muted-foreground","leading-relaxed","max-w-xs"],[1,"flex","gap-3","pt-2"],["href","#","aria-label","Instagram",1,"btn","btn-icon","btn-sm","rounded-full","bg-background","border","border-border","hover:bg-primary","hover:text-primary-foreground","hover:-translate-y-1","transition-all","duration-300"],["fill","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["fill-rule","evenodd","d","M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.024.06 1.378.06 3.808s-.012 2.784-.06 3.808c-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.024.048-1.378.06-3.808.06s-2.784-.012-3.808-.06c-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.048-1.024-.06-1.378-.06-3.808s.012-2.784.06-3.808c.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.06-1.064.049-1.644.211-2.126.41-1.054.423-1.737 1.1-2.16 2.159-.199.482-.36 1.062-.41 2.126-.048 1.023-.06 1.351-.06 3.807s.011 2.784.06 3.807c.049 1.064.211 1.644.41 2.126.423 1.054 1.106 1.737 2.159 2.16.482.199 1.062.36 2.126.41 1.023.048 1.351.06 3.807.06h.468c2.456 0 2.784-.011 3.807-.06 1.064-.049 1.644-.211 2.126-.41 1.054-.423 1.737-1.1 2.16-2.159.199-.482.36-1.062.41-2.126.048-1.023.06-1.351.06-3.807s-.011-2.784-.06-3.807c-.049-1.064-.211-1.644-.41-2.126-.423-1.054-1.106-1.737-2.159-2.16-.482-.199-1.062-.36-2.126-.41-1.023-.048-1.351-.06-3.807-.06z","clip-rule","evenodd"],["d","M12 6.865a5.135 5.135 0 100 10.27 5.135 5.135 0 000-10.27zm-3.308 5.135a3.308 3.308 0 116.616 0 3.308 3.308 0 01-6.616 0z"],["d","M16.949 6.865a1.285 1.285 0 11-2.57 0 1.285 1.285 0 012.57 0z"],["href","#","aria-label","Twitter",1,"btn","btn-icon","btn-sm","rounded-full","bg-background","border","border-border","hover:bg-primary","hover:text-primary-foreground","hover:-translate-y-1","transition-all","duration-300"],["d","M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.71v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"],[1,"space-y-4"],[1,"text-base","font-bold","text-foreground","flex","items-center","gap-2"],[1,"w-1","h-4","bg-secondary","rounded-full"],[1,"space-y-2","text-sm","text-muted-foreground"],["href","#",1,"flex","items-center","gap-2","transition-all","hover:text-primary","hover:translate-x-1"],[1,"w-1","h-1","rounded-full","bg-border"],[1,"w-1","h-4","bg-accent","rounded-full"],[1,"w-1","h-4","bg-primary","rounded-full"],[1,"text-sm","text-muted-foreground"],[1,"flex","w-full","flex-col","gap-3","relative"],[1,"relative"],["type","email","placeholder","\u0627\u06CC\u0645\u06CC\u0644 \u062E\u0648\u062F \u0631\u0627 \u0648\u0627\u0631\u062F \u06A9\u0646\u06CC\u062F",1,"w-full","rounded-xl","bg-background","border","border-border","px-4","py-3","pl-10","text-sm","transition-colors","focus:border-primary","focus:ring-1","focus:ring-primary","outline-none",3,"ngModelChange","ngModel"],[1,"material-icons","absolute","left-3","top-3","text-muted-foreground"],[1,"btn","btn-primary","w-full","rounded-xl","shadow-lg","shadow-primary/20","hover:-translate-y-0.5","transition-transform",3,"click"],[1,"border-t","border-border/50","pt-8","flex","flex-col-reverse","sm:flex-row","items-center","justify-between","gap-4"],[1,"text-xs","text-muted-foreground","text-center","sm:text-right"],[1,"flex","gap-4","items-center"],[1,"flex","gap-2"],["title","\u0646\u0645\u0627\u062F \u0627\u0639\u062A\u0645\u0627\u062F \u0627\u0644\u06A9\u062A\u0631\u0648\u0646\u06CC\u06A9\u06CC",1,"w-12","h-12","bg-background","rounded-lg","border","border-border","flex","items-center","justify-center","opacity-80","grayscale","hover:grayscale-0","transition-all","cursor-pointer","shadow-sm"],[1,"material-icons","text-2xl","text-blue-500"],["title","\u0633\u0627\u0645\u0627\u0646\u062F\u0647\u06CC",1,"w-12","h-12","bg-background","rounded-lg","border","border-border","flex","items-center","justify-center","opacity-80","grayscale","hover:grayscale-0","transition-all","cursor-pointer","shadow-sm"],[1,"material-icons","text-2xl","text-amber-600"],["title","\u067E\u0631\u062F\u0627\u062E\u062A \u0627\u0645\u0646",1,"w-12","h-12","bg-background","rounded-lg","border","border-border","flex","items-center","justify-center","opacity-80","grayscale","hover:grayscale-0","transition-all","cursor-pointer","shadow-sm"],[1,"material-icons","text-2xl","text-green-600"],["aria-label","\u0628\u0627\u0632\u06AF\u0634\u062A \u0628\u0647 \u0628\u0627\u0644\u0627",1,"fixed","bottom-8","left-8","z-50","btn","btn-icon","rounded-full","bg-primary","text-primary-foreground","shadow-xl","hover:scale-110","hover:bg-primary/90","transition-all","duration-300","animate-fade-in","focus-visible:ring-2","focus-visible:ring-offset-2","focus-visible:ring-primary",3,"click"],[1,"material-icons"]],template:function(n,s){n&1&&(o(0,"div",0)(1,"div",1),le(),o(2,"svg",2),p(3,"path",3),a()(),ce(),o(4,"footer",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"a",8),p(9,"img",9),o(10,"span",10),u(11,"\u0644\u0650\u062F\u06A9\u0627"),a()(),o(12,"p",11),u(13," \u062A\u062C\u0631\u0628\u0647 \u062E\u0631\u06CC\u062F \u0622\u0646\u0644\u0627\u06CC\u0646 \u0628\u0647\u062A\u0631\u06CC\u0646 \u0642\u0637\u0639\u0627\u062A \u0648 \u0644\u0648\u0627\u0632\u0645 \u062C\u0627\u0646\u0628\u06CC \u06AF\u0644\u062E\u0627\u0646\u0647 \u0628\u0627 \u0636\u0645\u0627\u0646\u062A \u0627\u0635\u0627\u0644\u062A \u0648 \u0628\u0647\u062A\u0631\u06CC\u0646 \u0642\u06CC\u0645\u062A \u0628\u0627\u0632\u0627\u0631. \u0647\u0645\u0631\u0627\u0647 \u0634\u0645\u0627 \u0647\u0633\u062A\u06CC\u0645 \u062A\u0627 \u0628\u0647\u062A\u0631\u06CC\u0646\u200C\u0647\u0627 \u0631\u0627 \u062A\u062C\u0631\u0628\u0647 \u06A9\u0646\u06CC\u062F. "),a(),o(14,"div",12)(15,"a",13),le(),o(16,"svg",14),p(17,"path",15)(18,"path",16)(19,"path",17),a()(),ce(),o(20,"a",18),le(),o(21,"svg",14),p(22,"path",19),a()()()(),ce(),o(23,"div",20)(24,"h3",21),p(25,"span",22),u(26," \u062E\u062F\u0645\u0627\u062A \u0645\u0634\u062A\u0631\u06CC\u0627\u0646 "),a(),o(27,"ul",23)(28,"li")(29,"a",24),p(30,"span",25),u(31," \u067E\u0627\u0633\u062E \u0628\u0647 \u067E\u0631\u0633\u0634\u200C\u0647\u0627\u06CC \u0645\u062A\u062F\u0627\u0648\u0644"),a()(),o(32,"li")(33,"a",24),p(34,"span",25),u(35," \u0634\u0631\u0627\u06CC\u0637 \u0627\u0633\u062A\u0641\u0627\u062F\u0647"),a()(),o(36,"li")(37,"a",24),p(38,"span",25),u(39," \u062D\u0631\u06CC\u0645 \u062E\u0635\u0648\u0635\u06CC"),a()(),o(40,"li")(41,"a",24),p(42,"span",25),u(43," \u0631\u0648\u06CC\u0647 \u0628\u0627\u0632\u06AF\u0631\u062F\u0627\u0646\u062F\u0646 \u06A9\u0627\u0644\u0627"),a()()()(),o(44,"div",20)(45,"h3",21),p(46,"span",26),u(47," \u062F\u0633\u062A\u0631\u0633\u06CC \u0633\u0631\u06CC\u0639 "),a(),o(48,"ul",23)(49,"li")(50,"a",24),p(51,"span",25),u(52," \u062F\u0631\u0628\u0627\u0631\u0647 \u0645\u0627"),a()(),o(53,"li")(54,"a",24),p(55,"span",25),u(56," \u062A\u0645\u0627\u0633 \u0628\u0627 \u0645\u0627"),a()(),o(57,"li")(58,"a",24),p(59,"span",25),u(60," \u0641\u0631\u0635\u062A\u200C\u0647\u0627\u06CC \u0634\u063A\u0644\u06CC"),a()(),o(61,"li")(62,"a",24),p(63,"span",25),u(64," \u0648\u0628\u0644\u0627\u06AF"),a()()()(),o(65,"div",20)(66,"h3",21),p(67,"span",27),u(68," \u062E\u0628\u0631\u0646\u0627\u0645\u0647 "),a(),o(69,"p",28),u(70," \u0627\u0632 \u0622\u062E\u0631\u06CC\u0646 \u062A\u062E\u0641\u06CC\u0641\u200C\u0647\u0627 \u0648 \u0627\u062E\u0628\u0627\u0631 \u0641\u0631\u0648\u0634\u06AF\u0627\u0647 \u0628\u0627\u062E\u0628\u0631 \u0634\u0648\u06CC\u062F. "),a(),o(71,"div",29)(72,"div",30)(73,"input",31),it("ngModelChange",function(m){return tt(s.newsletterEmail,m)||(s.newsletterEmail=m),m}),a(),o(74,"span",32),u(75,"mail"),a()(),o(76,"button",33),f("click",function(){return s.subscribeNewsletter()}),u(77," \u0639\u0636\u0648\u06CC\u062A \u062F\u0631 \u062E\u0628\u0631\u0646\u0627\u0645\u0647 "),a()()()(),o(78,"div",34)(79,"p",35),u(80),a(),o(81,"div",36)(82,"div",37)(83,"div",38)(84,"span",39),u(85,"verified_user"),a()(),o(86,"div",40)(87,"span",41),u(88,"policy"),a()(),o(89,"div",42)(90,"span",43),u(91,"lock"),a()()()()()(),o(92,"button",44),f("click",function(){return s.scrollToTop()}),o(93,"span",45),u(94,"arrow_upward"),a()()()()),n&2&&(l(73),et("ngModel",s.newsletterEmail),l(7),C(" \u062A\u0645\u0627\u0645\u06CC \u062D\u0642\u0648\u0642 \u0627\u06CC\u0646 \u0648\u0628\u200C\u0633\u0627\u06CC\u062A \u0645\u062D\u0641\u0648\u0638 \u0627\u0633\u062A \xA9 ",s.currentYear," "))},dependencies:[W,Y,Et,It,Tt,At,E],encapsulation:2});let e=i;return e})();function Vi(e,i){if(e&1){let r=b();o(0,"div",1)(1,"div",2)(2,"div",3)(3,"span",4),u(4),a(),o(5,"p"),u(6),a()(),o(7,"button",5),f("click",function(){v(r);let n=h();return x(n.close())}),o(8,"span",6),u(9,"close"),a()()()()}if(e&2){let r=h();c("@slideInOut",void 0),l(),c("ngClass",r.notificationClass),l(3),G(r.icon),l(2),G(r.notification.message)}}var Wt=(()=>{let i=class i{constructor(t){this.notificationService=t,this.notification=null}ngOnInit(){this.subscription=this.notificationService.notification$.subscribe(t=>{this.notification=t,this.timer&&clearTimeout(this.timer),t&&(this.timer=setTimeout(()=>{this.close()},5e3))})}ngOnDestroy(){this.subscription.unsubscribe(),this.timer&&clearTimeout(this.timer)}get notificationClass(){if(!this.notification)return"";switch(this.notification.type){case"success":return"bg-success text-success-foreground";case"error":return"bg-destructive text-destructive-foreground";case"info":default:return"bg-blue-500 text-white"}}get icon(){if(!this.notification)return"";switch(this.notification.type){case"success":return"check_circle";case"error":return"error";case"info":return"info";default:return"info"}}close(){this.notificationService.clear()}};i.\u0275fac=function(n){return new(n||i)(y(M))},i.\u0275cmp=I({type:i,selectors:[["app-notification"]],decls:1,vars:1,consts:[["class","fixed top-5 left-1/2 -translate-x-1/2 z-[100] w-full max-w-md px-4",4,"ngIf"],[1,"fixed","top-5","left-1/2","-translate-x-1/2","z-[100]","w-full","max-w-md","px-4"],[1,"flex","items-center","justify-between","p-4","rounded-xl","shadow-lg","text-sm","font-medium",3,"ngClass"],[1,"flex","items-center","gap-3"],[1,"material-icons","text-xl"],[1,"ms-4","-my-2","p-2","rounded-full","hover:bg-black/10","focus:outline-none","focus:ring-2","focus:ring-white",3,"click"],[1,"material-icons","text-lg"]],template:function(n,s){n&1&&g(0,Vi,10,4,"div",0),n&2&&c("ngIf",s.notification)},dependencies:[E,at,V],encapsulation:2,data:{animation:[K("slideInOut",[Ie("in",w({transform:"translate(-50%, 0)",opacity:1})),R("void => *",[w({transform:"translate(-50%, -100%)",opacity:0}),F("300ms ease-out")]),R("* => void",[F("300ms ease-in",w({transform:"translate(-50%, -100%)",opacity:0}))])])]}});let e=i;return e})();var ye=(()=>{let i=class i{constructor(t,n,s,d){this.authService=t,this.notificationService=n,this.router=s,this.platformId=d,this.INACTIVITY_TIMEOUT=1800*1e3,this.WARNING_TIME=300*1e3,this.CHECK_INTERVAL=60*1e3,this.lastActivityTime=Date.now(),this.destroy$=new N,this.isMonitoring=!1,this.warningShown=!1}isPaymentPage(){if(!O(this.platformId))return!1;let t=window.location.pathname.toLowerCase(),n=window.location.search.toLowerCase();return t.includes("/payment")||t.includes("/checkout")||t.includes("/callback")||n.includes("authority=")||n.includes("status=")}startSessionMonitoring(){if(!(!O(this.platformId)||this.isMonitoring)){if(this.isPaymentPage()){console.log("[Session] Skipping session monitoring on payment page");return}this.isMonitoring=!0,this.lastActivityTime=Date.now(),this.warningShown=!1,this.setupActivityListeners(),this.resetInactivityTimer(),this.startPeriodicCheck()}}stopSessionMonitoring(){console.log("[Session] Stopping session monitoring"),this.isMonitoring=!1,this.clearTimers(),this.warningShown=!1}setupActivityListeners(){if(!O(this.platformId))return;let t=[U(document,"mousemove"),U(document,"mousedown"),U(document,"keypress"),U(document,"scroll"),U(document,"touchstart"),U(document,"click")];Fe(...t).pipe(Oe(1e4),_(this.destroy$)).subscribe(()=>{this.onUserActivity()}),U(document,"visibilitychange").pipe(_(this.destroy$)).subscribe(()=>{document.hidden||this.onUserActivity()})}onUserActivity(){!this.isMonitoring||this.isPaymentPage()||(this.lastActivityTime=Date.now(),this.warningShown=!1,this.resetInactivityTimer())}resetInactivityTimer(){this.clearTimers(),this.warningTimer=setTimeout(()=>{this.isPaymentPage()||this.showInactivityWarning()},this.INACTIVITY_TIMEOUT-this.WARNING_TIME),this.inactivityTimer=setTimeout(()=>{this.isPaymentPage()||this.handleSessionTimeout()},this.INACTIVITY_TIMEOUT)}startPeriodicCheck(){ue(this.CHECK_INTERVAL,this.CHECK_INTERVAL).pipe(_(this.destroy$)).subscribe(()=>{if(!this.isMonitoring||this.isPaymentPage())return;let t=Date.now()-this.lastActivityTime;t>=this.INACTIVITY_TIMEOUT?this.handleSessionTimeout():t>=this.INACTIVITY_TIMEOUT-this.WARNING_TIME&&!this.warningShown&&this.showInactivityWarning()})}showInactivityWarning(){if(this.warningShown||!this.isMonitoring||this.isPaymentPage())return;this.warningShown=!0;let t=Math.floor(this.WARNING_TIME/6e4);this.notificationService.show(`\u0646\u0634\u0633\u062A \u0634\u0645\u0627 \u0628\u0647 \u062F\u0644\u06CC\u0644 \u0639\u062F\u0645 \u0641\u0639\u0627\u0644\u06CC\u062A ${t} \u062F\u0642\u06CC\u0642\u0647 \u062F\u06CC\u06AF\u0631 \u0645\u0646\u0642\u0636\u06CC \u0645\u06CC\u200C\u0634\u0648\u062F.  \u0628\u0631\u0627\u06CC \u0627\u062F\u0627\u0645\u0647\u060C \u0641\u0639\u0627\u0644\u06CC\u062A\u06CC \u0627\u0646\u062C\u0627\u0645 \u062F\u0647\u06CC\u062F. `,"info")}handleSessionTimeout(){!this.isMonitoring||this.isPaymentPage()||(this.stopSessionMonitoring(),this.notificationService.show("\u0646\u0634\u0633\u062A \u0634\u0645\u0627 \u0628\u0647 \u062F\u0644\u06CC\u0644 \u0639\u062F\u0645 \u0641\u0639\u0627\u0644\u06CC\u062A \u0645\u0646\u0642\u0636\u06CC \u0634\u062F. \u0644\u0637\u0641\u0627 \u0645\u062C\u062F\u062F\u0627 \u0648\u0627\u0631\u062F \u0634\u0648\u06CC\u062F.","info"),this.authService.logout(!0))}clearTimers(){this.inactivityTimer&&(clearTimeout(this.inactivityTimer),this.inactivityTimer=null),this.warningTimer&&(clearTimeout(this.warningTimer),this.warningTimer=null)}getRemainingTime(){let t=Date.now()-this.lastActivityTime;return Math.max(0,this.INACTIVITY_TIMEOUT-t)}getRemainingTimeFormatted(){let t=this.getRemainingTime(),n=Math.floor(t/6e4),s=Math.floor(t%6e4/1e3);return`${n}:${s.toString().padStart(2,"0")}`}extendSession(){this.isMonitoring&&(this.onUserActivity(),this.notificationService.show("\u0646\u0634\u0633\u062A \u0634\u0645\u0627 \u062A\u0645\u062F\u06CC\u062F \u0634\u062F","success"))}isSessionActive(){return this.isMonitoring&&this.authService.isAuthenticated()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.stopSessionMonitoring()}};i.\u0275fac=function(n){return new(n||i)(D(L),D(M),D(ee),D(z))},i.\u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"});let e=i;return e})();function $i(e,i){e&1&&(o(0,"span"),u(1,"\u062A\u0645\u062F\u06CC\u062F"),a())}function Hi(e,i){e&1&&(o(0,"span",9),u(1,"sync"),a())}function Ui(e,i){if(e&1){let r=b();o(0,"div",1)(1,"div",2)(2,"span",3),u(3,"schedule"),a(),o(4,"div")(5,"p",4),u(6," \u0632\u0645\u0627\u0646 \u0628\u0627\u0642\u06CC\u0645\u0627\u0646\u062F\u0647 \u0646\u0634\u0633\u062A "),a(),o(7,"p",5),u(8),a()(),o(9,"button",6),f("click",function(){v(r);let n=h();return x(n.extendSession())}),g(10,$i,2,0,"span",7)(11,Hi,2,0,"span",8),a()()()}if(e&2){let r=h();l(8),C(" ",r.remainingTime," "),l(),c("disabled",r.isExtending),l(),c("ngIf",!r.isExtending),l(),c("ngIf",r.isExtending)}}var Kt=(()=>{let i=class i{constructor(t){this.sessionService=t,this.remainingTime="",this.showTimer=!1,this.isExtending=!1,this.destroy$=new N,this.SHOW_TIMER_THRESHOLD=300*1e3}ngOnInit(){Me(1e3).pipe(_(this.destroy$),J(()=>this.sessionService.isSessionActive()),T(()=>{let t=this.sessionService.getRemainingTime();this.showTimer=t<this.SHOW_TIMER_THRESHOLD&&t>0,this.showTimer&&(this.remainingTime=this.sessionService.getRemainingTimeFormatted())})).subscribe()}extendSession(){this.isExtending=!0,this.sessionService.extendSession(),setTimeout(()=>{this.isExtending=!1},1e3)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};i.\u0275fac=function(n){return new(n||i)(y(ye))},i.\u0275cmp=I({type:i,selectors:[["app-session-timer"]],decls:1,vars:1,consts:[["class","fixed bottom-4 left-4 bg-card border border-border rounded-lg shadow-lg p-3 z-50 animate-fade-in-up",4,"ngIf"],[1,"fixed","bottom-4","left-4","bg-card","border","border-border","rounded-lg","shadow-lg","p-3","z-50","animate-fade-in-up"],[1,"flex","items-center","gap-3"],[1,"material-icons","text-warning"],[1,"text-xs","font-medium","text-muted-foreground"],[1,"text-lg","font-bold","text-foreground","tabular-nums"],[1,"btn","btn-primary","btn-sm",3,"click","disabled"],[4,"ngIf"],["class","material-icons animate-spin",4,"ngIf"],[1,"material-icons","animate-spin"]],template:function(n,s){n&1&&g(0,Ui,12,4,"div",0),n&2&&c("ngIf",s.showTimer)},dependencies:[E,V],encapsulation:2});let e=i;return e})();var Zt=(()=>{let i=class i{constructor(t,n,s,d,m){this.sessionService=t,this.authService=n,this.cartService=s,this.router=d,this.platformId=m,this.destroy$=new N}isPaymentPage(){if(!O(this.platformId))return!1;let t=window.location.pathname.toLowerCase(),n=window.location.search.toLowerCase();return t.includes("/payment")||t.includes("/callback")||n.includes("authority=")||n.includes("status=")}ngOnInit(){if(this.isPaymentPage()){console.log("[App] Payment page detected, skipping initialization");return}this.router.events.pipe(J(t=>t instanceof vt),_(this.destroy$)).subscribe(t=>{let n=t.urlAfterRedirects.toLowerCase();(n.includes("/payment")||n.includes("/callback"))&&this.sessionService.stopSessionMonitoring()}),this.authService.isLoggedIn$.pipe(_(this.destroy$)).subscribe(t=>{t&&!this.isPaymentPage()?(this.sessionService.startSessionMonitoring(),this.cartService.getMyCart().subscribe()):this.isPaymentPage()||(this.sessionService.stopSessionMonitoring(),this.cartService.clearLocalCart())}),this.authService.isAuthenticated()&&!this.isPaymentPage()&&this.sessionService.startSessionMonitoring()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};i.\u0275fac=function(n){return new(n||i)(y(ye),y(L),y(Q),y(ee),y(z))},i.\u0275cmp=I({type:i,selectors:[["app-root"]],decls:9,vars:0,consts:[["href","#main-content",1,"skip-link"],[1,"flex","flex-col","min-h-screen","bg-background","font-sans","antialiased","selection:bg-primary","selection:text-primary-foreground"],["id","main-content",1,"flex-grow","animate-fade-in","scroll-mt-24"]],template:function(n,s){n&1&&(o(0,"a",0),u(1,"\u0628\u0631\u06AF\u0634\u062A \u0628\u0647 \u0645\u062D\u062A\u0648\u0627\u06CC \u0627\u0635\u0644\u06CC"),a(),p(2,"app-notification")(3,"app-session-timer"),o(4,"div",1),p(5,"app-header"),o(6,"main",2),p(7,"router-outlet"),a(),p(8,"app-footer"),a())},dependencies:[xt,zt,Yt,Wt,Kt],encapsulation:2});let e=i;return e})();lt(Zt,Dt).catch(e=>console.error(e));
